<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Circular Wait</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part343.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part345.htm">下一个 &gt;</a></p><p class="s27" style="padding-top: 4pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">Circular Wait</p><p style="padding-top: 5pt;padding-left: 41pt;text-indent: 0pt;line-height: 89%;text-align: justify;">Probably the most practical prevention technique (and certainly one that is used frequently) is to write your locking code such that you never in- duce a circular wait. The way to do that is to provide a <b>total ordering </b>on lock acquisition. For example, if there are only two locks in the system (L1 and L2), we can prevent deadlock by always acquiring L1 before L2. Such strict ordering ensures that no cyclical wait arises; hence, no deadlock.</p><p style="padding-left: 41pt;text-indent: 11pt;line-height: 89%;text-align: justify;">As you can imagine, this approach requires careful design of global locking strategies and must be done with great care. Further, it is just a convention, and a sloppy programmer can easily ignore the locking pro- tocol and potentially cause deadlock. Finally, it requires a deep under- standing of the code base, and how various routines are called; just one mistake could result in the wrong ordering of lock acquisition, and hence deadlock.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part343.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part345.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
