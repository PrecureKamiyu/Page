<?xml version='1.0' encoding='utf-8'?>
<html xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:svg="http://www.w3.org/2000/svg" xmlns:epub="http://www.idpf.org/2007/ops" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" epub:prefix="index: http://www.index.com/">
  <head>
    <meta name="dcterms.conformsTo" content="PXE Basic 1.0"/>
    <meta name="generator" content="PXE Tools version 1.39.52"/>
    <!--Created by pxe.pl for standard version PXE Basic 1.0,data-profile-product=standard by PXE Tools 1.39.52, partial=false-->
    <title>7.5 Symbols and Symbol Tables</title>
    <link rel="alternate stylesheet" type="text/css" title="night" href="../css/theme/night.css"/>
    <link rel="alternate stylesheet" type="text/css" title="sepia" href="../css/theme/sepia.css"/>
    <script src="js/format_lg_obj.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../../page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body epub:type="bodymatter" class="calibre pcalibre pcalibre1">
<section id="P700049702700000000000000000608B" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title pcalibre1" id="P700049702700000000000000004482B" data-uri="chapter07.xhtml#P700049702700000000000000004482B" epub:type="title"><span class="pcalibre label pcalibre1">7.5 </span>Symbols and Symbol Tables</h1></header>
<p id="P700049702700000000000000004482C" data-uri="chapter07.xhtml#P700049702700000000000000004482C" class="pcalibre1 pcalibre calibre2">Each relocatable object module, <var class="calibre5 pcalibre pcalibre1">m</var>, has a symbol table that contains information about the symbols that are defined and referenced by <i class="calibre5 pcalibre pcalibre1">m.</i> In the context of a linker, there are three different kinds of symbols:</p>
<ul id="P700049702700000000000000004482D" data-uri="chapter07.xhtml#P700049702700000000000000004482D" class="calibre28 pcalibre pcalibre1">
<li id="P700049702700000000000000004482E" data-uri="chapter07.xhtml#P700049702700000000000000004482E" class="calibre12 pcalibre pcalibre1"><p id="P700049702700000000000000004482F" data-uri="chapter07.xhtml#P700049702700000000000000004482F" class="pcalibre calibre3 pcalibre1"><span class="pcalibre pagebreak pcalibre1" id="P7000497027000000000000000006091" title="676" data-uri="chapter07.xhtml#P7000497027000000000000000006091" epub:type="pagebreak"></span><i class="calibre5 pcalibre pcalibre1">Global symbols</i> that are defined by module <var class="calibre5 pcalibre pcalibre1">m</var> and that can be referenced by other modules. Global linker symbols correspond to <i class="calibre5 pcalibre pcalibre1">nonstatic</i> C functions and global variables.</p></li>
<li id="P7000497027000000000000000044830" data-uri="chapter07.xhtml#P7000497027000000000000000044830" class="calibre12 pcalibre pcalibre1"><p id="P7000497027000000000000000044831" data-uri="chapter07.xhtml#P7000497027000000000000000044831" class="pcalibre calibre3 pcalibre1">Global symbols that are referenced by module <var class="calibre5 pcalibre pcalibre1">m</var> but defined by some other module. Such symbols are called <i class="calibre5 pcalibre pcalibre1">externals</i> and correspond to nonstatic C functions and global variables that are defined in other modules.</p></li>
<li id="P7000497027000000000000000044832" data-uri="chapter07.xhtml#P7000497027000000000000000044832" class="calibre12 pcalibre pcalibre1"><p id="P7000497027000000000000000044833" data-uri="chapter07.xhtml#P7000497027000000000000000044833" class="pcalibre calibre3 pcalibre1"><i class="calibre5 pcalibre pcalibre1">Local symbols</i> that are defined and referenced exclusively by module <var class="calibre5 pcalibre pcalibre1">m</var>.These correspond to static C functions and global variables that are defined with the static attribute. These symbols are visible anywhere within module <var class="calibre5 pcalibre pcalibre1">m</var>, but cannot be referenced by other modules.</p></li>
</ul>
<p id="P7000497027000000000000000044834" data-uri="chapter07.xhtml#P7000497027000000000000000044834" class="pcalibre1 pcalibre calibre2">It is important to realize that local linker symbols are not the same as local program variables. The symbol table in <code id="P7000497027000000000000000044835" data-uri="chapter07.xhtml#P7000497027000000000000000044835" class="pcalibre1 calibre8 pcalibre">.symtab</code> does not contain any symbols that correspond to local nonstatic program variables. These are managed at run time on the stack and are not of interest to the linker.</p>
<p id="P7000497027000000000000000044836" data-uri="chapter07.xhtml#P7000497027000000000000000044836" class="pcalibre1 pcalibre calibre2">Interestingly, local procedure variables that are defined with the C <code id="P7000497027000000000000000044837" data-uri="chapter07.xhtml#P7000497027000000000000000044837" class="pcalibre1 calibre8 pcalibre">static</code> attribute are not managed on the stack. Instead, the compiler allocates space in <code id="P7000497027000000000000000044838" data-uri="chapter07.xhtml#P7000497027000000000000000044838" class="pcalibre1 calibre8 pcalibre">.data</code> or <code id="P7000497027000000000000000044839" data-uri="chapter07.xhtml#P7000497027000000000000000044839" class="pcalibre1 calibre8 pcalibre">.bss</code> for each definition and creates a local linker symbol in the symbol table with a unique name. For example, suppose a pair of functions in the same module define a static local variable <code id="P700049702700000000000000004483A" data-uri="chapter07.xhtml#P700049702700000000000000004483A" class="pcalibre1 calibre8 pcalibre">x</code>:</p>
<pre id="P700049702700000000000000004483B" data-uri="chapter07.xhtml#P700049702700000000000000004483B" class="calibre9 pcalibre pcalibre1"><code id="P700049702700000000000000004483C" data-uri="chapter07.xhtml#P700049702700000000000000004483C" class="calibre10 pcalibre pcalibre1">
1	int f()
2	{
3		static int x = 0;
4		return x;
5	}
6
7	int g()
8	{
9		static int x = 1;
10		return x;
11	}
</code></pre>
<p class="pcalibre1 pcalibre calibre2" id="P700049702700000000000000004483D" data-uri="chapter07.xhtml#P700049702700000000000000004483D">In this case, the compiler exports a pair of local linker symbols with different names to the assembler. For example, it might use <code id="P700049702700000000000000004483E" data-uri="chapter07.xhtml#P700049702700000000000000004483E" class="pcalibre1 calibre8 pcalibre">x.1</code> for the definition in function <code id="P700049702700000000000000004483F" data-uri="chapter07.xhtml#P700049702700000000000000004483F" class="pcalibre1 calibre8 pcalibre">f</code> and <code id="P7000497027000000000000000044840" data-uri="chapter07.xhtml#P7000497027000000000000000044840" class="pcalibre1 calibre8 pcalibre">x.2</code> for the definition in function <code id="P7000497027000000000000000044841" data-uri="chapter07.xhtml#P7000497027000000000000000044841" class="pcalibre1 calibre8 pcalibre">g</code>.</p>
<p id="P7000497027000000000000000044842" data-uri="chapter07.xhtml#P7000497027000000000000000044842" class="pcalibre1 pcalibre calibre2">Symbol tables are built by assemblers, using symbols exported by the compiler into the assembly-language <code id="P7000497027000000000000000044843" data-uri="chapter07.xhtml#P7000497027000000000000000044843" class="pcalibre1 calibre8 pcalibre">.s</code> file. An ELF symbol table is contained in the <code id="P7000497027000000000000000044844" data-uri="chapter07.xhtml#P7000497027000000000000000044844" class="pcalibre1 calibre8 pcalibre">.symtab</code> section. It contains an array of entries. <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="#P70004970270000000000000000060B9"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">7.4</span></a> shows the format of each entry.</p>
<p id="P7000497027000000000000000044845" data-uri="chapter07.xhtml#P7000497027000000000000000044845" class="pcalibre1 pcalibre calibre2">The <code id="P7000497027000000000000000044846" data-uri="chapter07.xhtml#P7000497027000000000000000044846" class="pcalibre1 calibre8 pcalibre">name</code> is a byte offset into the string table that points to the null-terminated string name of the symbol. The <code id="P7000497027000000000000000044847" data-uri="chapter07.xhtml#P7000497027000000000000000044847" class="pcalibre1 calibre8 pcalibre">value</code> is the symbol's address. For relocatable modules, the <code id="P7000497027000000000000000044848" data-uri="chapter07.xhtml#P7000497027000000000000000044848" class="pcalibre1 calibre8 pcalibre">value</code> is an offset from the beginning of the section where the object is defined. For executable object files, the <code id="P7000497027000000000000000044849" data-uri="chapter07.xhtml#P7000497027000000000000000044849" class="pcalibre1 calibre8 pcalibre">value</code> is an absolute run-time address. The <code id="P700049702700000000000000004484A" data-uri="chapter07.xhtml#P700049702700000000000000004484A" class="pcalibre1 calibre8 pcalibre">size</code> is the size (in bytes) of the object. The <code id="P700049702700000000000000004484B" data-uri="chapter07.xhtml#P700049702700000000000000004484B" class="pcalibre1 calibre8 pcalibre">type</code> is usually either <code id="P700049702700000000000000004484C" data-uri="chapter07.xhtml#P700049702700000000000000004484C" class="pcalibre1 calibre8 pcalibre">data</code> or <code id="P700049702700000000000000004484D" data-uri="chapter07.xhtml#P700049702700000000000000004484D" class="pcalibre1 calibre8 pcalibre">function</code>. The symbol table can also contain entries for the individual sections</p>
<aside class="sidebar pcalibre5 pcalibre" id="P70004970270000000000000000060B0" data-uri="chapter07.xhtml#P70004970270000000000000000060B0"><header class="pcalibre halftitlepage pcalibre1"><h1 class="pcalibre1 title2 pcalibre" id="P700049702700000000000000004484E" data-uri="chapter07.xhtml#P700049702700000000000000004484E" epub:type="title"><span class="pcalibre pagebreak pcalibre1" id="P70004970270000000000000000060B2" title="677" data-uri="chapter07.xhtml#P70004970270000000000000000060B2" epub:type="pagebreak"></span><span class="pcalibre label1 pcalibre1">New to C? </span>Hiding variable and function names with <code id="P700049702700000000000000004484F" data-uri="chapter07.xhtml#P700049702700000000000000004484F" class="calibre55 pcalibre pcalibre1">static</code></h1></header>
<p id="P7000497027000000000000000044850" data-uri="chapter07.xhtml#P7000497027000000000000000044850" class="pcalibre calibre3 pcalibre1">C programmers use the <code id="P7000497027000000000000000044851" data-uri="chapter07.xhtml#P7000497027000000000000000044851" class="pcalibre1 calibre8 pcalibre">static</code> attribute to hide variable and function declarations inside modules, much as you would use <i class="calibre5 pcalibre pcalibre1">public</i> and <i class="calibre5 pcalibre pcalibre1">private</i> declarations in Java and C++. In C, source files play the role of modules. Any global variable or function declared with the <code id="P7000497027000000000000000044852" data-uri="chapter07.xhtml#P7000497027000000000000000044852" class="pcalibre1 calibre8 pcalibre">static</code> attribute is private to that module. Similarly, any global variable or function declared without the <code id="P7000497027000000000000000044853" data-uri="chapter07.xhtml#P7000497027000000000000000044853" class="pcalibre1 calibre8 pcalibre">static</code> attribute is public and can be accessed by any other module. It is good programming practice to protect your variables and functions with the <code id="P7000497027000000000000000044854" data-uri="chapter07.xhtml#P7000497027000000000000000044854" class="pcalibre1 calibre8 pcalibre">static</code> attribute wherever possible.</p>
</aside>
<figure class="pcalibre5 figure pcalibre" id="P70004970270000000000000000060B9" data-uri="chapter07.xhtml#P70004970270000000000000000060B9">
<p id="P7000497027000000000000000044855" data-uri="chapter07.xhtml#P7000497027000000000000000044855" class="pcalibre1 pcalibre calibre2">-------------------------------------------<i class="calibre5 pcalibre pcalibre1">code/link/elfstructs.c</i></p>
<pre id="P7000497027000000000000000044856" data-uri="chapter07.xhtml#P7000497027000000000000000044856" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000044857" data-uri="chapter07.xhtml#P7000497027000000000000000044857" class="calibre10 pcalibre pcalibre1">
1	typedef struct {
2	int	name;		/* String table offset */
3	char	type:4,		/* Function or data (4 bits) */
4		binding:4;	/* Local or global (4 bits) */
5	char	reserved;	/* Unused */
6	short	section;	/* Section header index */
7	long	value;		/* Section offset or absolute address */
8	long	size;		/* Object size in bytes */
9	} Elf64_Symbol;
</code></pre>
<p id="P7000497027000000000000000044858" data-uri="chapter07.xhtml#P7000497027000000000000000044858" class="pcalibre1 pcalibre calibre2">-------------------------------------------<i class="calibre5 pcalibre pcalibre1">code/link/elfstructs.c</i></p>
<figcaption id="P7000497027000000000000000044859" data-uri="chapter07.xhtml#P7000497027000000000000000044859" class="calibre11 pcalibre pcalibre1"><header class="pcalibre halftitlepage pcalibre1"><h1 class="title3 pcalibre pcalibre1" id="P700049702700000000000000004485A" data-uri="chapter07.xhtml#P700049702700000000000000004485A" epub:type="title"><span class="pcalibre1 label2 pcalibre">Figure </span><span class="number pcalibre pcalibre1">7.4 </span>ELF symbol table entry.</h1></header>
<div class="caption pcalibre pcalibre1" id="P700049702700000000000000004485B" data-uri="chapter07.xhtml#P700049702700000000000000004485B"><p id="P700049702700000000000000004485C" data-uri="chapter07.xhtml#P700049702700000000000000004485C" class="pcalibre calibre3 pcalibre1">The type and binding fields are 4 bits each.</p></div></figcaption>
</figure>
<p class="pcalibre1 pcalibre calibre2" id="P700049702700000000000000004485D" data-uri="chapter07.xhtml#P700049702700000000000000004485D">and for the path name of the original source file. So there are distinct types for these objects as well. The binding field indicates whether the symbol is local or global.</p>
<p id="P700049702700000000000000004485E" data-uri="chapter07.xhtml#P700049702700000000000000004485E" class="pcalibre1 pcalibre calibre2">Each symbol is assigned to some section of the object file, denoted by the section field, which is an index into the section header table. There are three special pseudosections that don't have entries in the section header table: ABS is for symbols that should not be relocated. UNDEF is for undefined symbols—that is, symbols that are referenced in this object module but defined elsewhere. COMMON is for uninitialized data objects that are not yet allocated. For COMMON symbols, the <code id="P700049702700000000000000004485F" data-uri="chapter07.xhtml#P700049702700000000000000004485F" class="pcalibre1 calibre8 pcalibre">value</code> field gives the alignment requirement, and <code id="P7000497027000000000000000044860" data-uri="chapter07.xhtml#P7000497027000000000000000044860" class="pcalibre1 calibre8 pcalibre">size</code> gives the minimum size. Note that these pseudosections exist only in relocatable object files; they do not exist in executable object files.</p>
<p id="P7000497027000000000000000044861" data-uri="chapter07.xhtml#P7000497027000000000000000044861" class="pcalibre1 pcalibre calibre2">The distinction between COMMON and <code id="P7000497027000000000000000044862" data-uri="chapter07.xhtml#P7000497027000000000000000044862" class="pcalibre1 calibre8 pcalibre">.bss</code> is subtle. Modern versions of <span class="smallcaps pcalibre pcalibre1">gcc </span>assign symbols in relocatable object files to COMMON and <code id="P7000497027000000000000000044863" data-uri="chapter07.xhtml#P7000497027000000000000000044863" class="pcalibre1 calibre8 pcalibre">.bss</code> using the following convention:</p>
<table id="P7000497027000000000000000044864" data-uri="chapter07.xhtml#P7000497027000000000000000044864" class="pcalibre largetable pcalibre1">
<tbody class="calibre19 pcalibre pcalibre1">
<tr class="pcalibre calibre17 pcalibre1">
<td id="P7000497027000000000000000044865" data-uri="chapter07.xhtml#P7000497027000000000000000044865" class="calibre20 pcalibre pcalibre1">COMMON</td>
<td id="P7000497027000000000000000044866" data-uri="chapter07.xhtml#P7000497027000000000000000044866" class="calibre20 pcalibre pcalibre1">Uninitialized global variables</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P7000497027000000000000000044867" data-uri="chapter07.xhtml#P7000497027000000000000000044867" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000044868" data-uri="chapter07.xhtml#P7000497027000000000000000044868" class="calibre10 pcalibre pcalibre1">.bss</code></td>
<td id="P7000497027000000000000000044869" data-uri="chapter07.xhtml#P7000497027000000000000000044869" class="calibre20 pcalibre pcalibre1">Uninitialized static variables, and global or static variables that are initialized to zero</td>
</tr>
</tbody>
</table>
<p class="pcalibre1 pcalibre calibre2" id="P700049702700000000000000004486A" data-uri="chapter07.xhtml#P700049702700000000000000004486A"><span class="pcalibre pagebreak pcalibre1" id="P70004970270000000000000000060D0" title="678" data-uri="chapter07.xhtml#P70004970270000000000000000060D0" epub:type="pagebreak"></span>The reason for this seemingly arbitrary distinction stems from the way the linker performs symbol resolution, which we will explain in <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000006160.xhtml#P7000497027000000000000000006160"><span class="pcalibre label pcalibre1">Section </span><span class="pcalibre label pcalibre1">7.6</span></a>.</p>
<p id="P700049702700000000000000004486B" data-uri="chapter07.xhtml#P700049702700000000000000004486B" class="pcalibre1 pcalibre calibre2">The GNU <code id="P700049702700000000000000004486C" data-uri="chapter07.xhtml#P700049702700000000000000004486C" class="pcalibre1 calibre8 pcalibre"><span class="smallcaps pcalibre pcalibre1">readelf</span></code> program is a handy tool for viewing the contents of object files. For example, here are the last three symbol table entries for the relocatable object <code id="P700049702700000000000000004486D" data-uri="chapter07.xhtml#P700049702700000000000000004486D" class="pcalibre1 calibre8 pcalibre">file main.o</code>, from the example program in <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000005FB4.xhtml#P7000497027000000000000000005FF0"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">7.1</span></a>. The first eight entries, which are not shown, are local symbols that the linker uses internally.</p>
<table class="informaltable pcalibre pcalibre1" id="P700049702700000000000000004486E" data-uri="chapter07.xhtml#P700049702700000000000000004486E">
<thead class="pcalibre1 pcalibre calibre16">
<tr class="pcalibre calibre17 pcalibre1">
<th id="P700049702700000000000000004486F" data-uri="chapter07.xhtml#P700049702700000000000000004486F" class="calibre18 pcalibre pcalibre1"><code id="P7000497027000000000000000044870" data-uri="chapter07.xhtml#P7000497027000000000000000044870" class="calibre10 pcalibre pcalibre1">Num:</code></th>
<th id="P7000497027000000000000000044871" data-uri="chapter07.xhtml#P7000497027000000000000000044871" class="calibre18 pcalibre pcalibre1"><code id="P7000497027000000000000000044872" data-uri="chapter07.xhtml#P7000497027000000000000000044872" class="calibre10 pcalibre pcalibre1">Value</code></th>
<th id="P7000497027000000000000000044873" data-uri="chapter07.xhtml#P7000497027000000000000000044873" class="calibre18 pcalibre pcalibre1"><code id="P7000497027000000000000000044874" data-uri="chapter07.xhtml#P7000497027000000000000000044874" class="calibre10 pcalibre pcalibre1">Size</code></th>
<th id="P7000497027000000000000000044875" data-uri="chapter07.xhtml#P7000497027000000000000000044875" class="calibre18 pcalibre pcalibre1"><code id="P7000497027000000000000000044876" data-uri="chapter07.xhtml#P7000497027000000000000000044876" class="calibre10 pcalibre pcalibre1">Type</code></th>
<th id="P7000497027000000000000000044877" data-uri="chapter07.xhtml#P7000497027000000000000000044877" class="calibre18 pcalibre pcalibre1"><code id="P7000497027000000000000000044878" data-uri="chapter07.xhtml#P7000497027000000000000000044878" class="calibre10 pcalibre pcalibre1">Bind</code></th>
<th id="P7000497027000000000000000044879" data-uri="chapter07.xhtml#P7000497027000000000000000044879" class="calibre18 pcalibre pcalibre1"><code id="P700049702700000000000000004487A" data-uri="chapter07.xhtml#P700049702700000000000000004487A" class="calibre10 pcalibre pcalibre1">Vis</code></th>
<th id="P700049702700000000000000004487B" data-uri="chapter07.xhtml#P700049702700000000000000004487B" class="calibre18 pcalibre pcalibre1"><code id="P700049702700000000000000004487C" data-uri="chapter07.xhtml#P700049702700000000000000004487C" class="calibre10 pcalibre pcalibre1">Ndx</code></th>
<th id="P700049702700000000000000004487D" data-uri="chapter07.xhtml#P700049702700000000000000004487D" class="calibre18 pcalibre pcalibre1"><code id="P700049702700000000000000004487E" data-uri="chapter07.xhtml#P700049702700000000000000004487E" class="calibre10 pcalibre pcalibre1">Name</code></th>
</tr>
</thead>
<tbody class="calibre19 pcalibre pcalibre1">
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000004487F" data-uri="chapter07.xhtml#P700049702700000000000000004487F" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000044880" data-uri="chapter07.xhtml#P7000497027000000000000000044880" class="calibre10 pcalibre pcalibre1">8:</code></td>
<td id="P7000497027000000000000000044881" data-uri="chapter07.xhtml#P7000497027000000000000000044881" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000044882" data-uri="chapter07.xhtml#P7000497027000000000000000044882" class="calibre10 pcalibre pcalibre1">0000000000000000</code></td>
<td id="P7000497027000000000000000044883" data-uri="chapter07.xhtml#P7000497027000000000000000044883" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000044884" data-uri="chapter07.xhtml#P7000497027000000000000000044884" class="calibre10 pcalibre pcalibre1">24</code></td>
<td id="P7000497027000000000000000044885" data-uri="chapter07.xhtml#P7000497027000000000000000044885" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000044886" data-uri="chapter07.xhtml#P7000497027000000000000000044886" class="calibre10 pcalibre pcalibre1">FUNC</code></td>
<td id="P7000497027000000000000000044887" data-uri="chapter07.xhtml#P7000497027000000000000000044887" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000044888" data-uri="chapter07.xhtml#P7000497027000000000000000044888" class="calibre10 pcalibre pcalibre1">GLOBAL</code></td>
<td id="P7000497027000000000000000044889" data-uri="chapter07.xhtml#P7000497027000000000000000044889" class="calibre20 pcalibre pcalibre1"><code id="P700049702700000000000000004488A" data-uri="chapter07.xhtml#P700049702700000000000000004488A" class="calibre10 pcalibre pcalibre1">DEFAULT</code></td>
<td id="P700049702700000000000000004488B" data-uri="chapter07.xhtml#P700049702700000000000000004488B" class="calibre20 pcalibre pcalibre1"><code id="P700049702700000000000000004488C" data-uri="chapter07.xhtml#P700049702700000000000000004488C" class="calibre10 pcalibre pcalibre1">1</code></td>
<td id="P700049702700000000000000004488D" data-uri="chapter07.xhtml#P700049702700000000000000004488D" class="calibre20 pcalibre pcalibre1"><code id="P700049702700000000000000004488E" data-uri="chapter07.xhtml#P700049702700000000000000004488E" class="calibre10 pcalibre pcalibre1">main</code></td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000004488F" data-uri="chapter07.xhtml#P700049702700000000000000004488F" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000044890" data-uri="chapter07.xhtml#P7000497027000000000000000044890" class="calibre10 pcalibre pcalibre1">9:</code></td>
<td id="P7000497027000000000000000044891" data-uri="chapter07.xhtml#P7000497027000000000000000044891" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000044892" data-uri="chapter07.xhtml#P7000497027000000000000000044892" class="calibre10 pcalibre pcalibre1">0000000000000000</code></td>
<td id="P7000497027000000000000000044893" data-uri="chapter07.xhtml#P7000497027000000000000000044893" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000044894" data-uri="chapter07.xhtml#P7000497027000000000000000044894" class="calibre10 pcalibre pcalibre1">8</code></td>
<td id="P7000497027000000000000000044895" data-uri="chapter07.xhtml#P7000497027000000000000000044895" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000044896" data-uri="chapter07.xhtml#P7000497027000000000000000044896" class="calibre10 pcalibre pcalibre1">OBJECT</code></td>
<td id="P7000497027000000000000000044897" data-uri="chapter07.xhtml#P7000497027000000000000000044897" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000044898" data-uri="chapter07.xhtml#P7000497027000000000000000044898" class="calibre10 pcalibre pcalibre1">GLOBAL</code></td>
<td id="P7000497027000000000000000044899" data-uri="chapter07.xhtml#P7000497027000000000000000044899" class="calibre20 pcalibre pcalibre1"><code id="P700049702700000000000000004489A" data-uri="chapter07.xhtml#P700049702700000000000000004489A" class="calibre10 pcalibre pcalibre1">DEFAULT</code></td>
<td id="P700049702700000000000000004489B" data-uri="chapter07.xhtml#P700049702700000000000000004489B" class="calibre20 pcalibre pcalibre1"><code id="P700049702700000000000000004489C" data-uri="chapter07.xhtml#P700049702700000000000000004489C" class="calibre10 pcalibre pcalibre1">3</code></td>
<td id="P700049702700000000000000004489D" data-uri="chapter07.xhtml#P700049702700000000000000004489D" class="calibre20 pcalibre pcalibre1"><code id="P700049702700000000000000004489E" data-uri="chapter07.xhtml#P700049702700000000000000004489E" class="calibre10 pcalibre pcalibre1">array</code></td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000004489F" data-uri="chapter07.xhtml#P700049702700000000000000004489F" class="calibre20 pcalibre pcalibre1"><code id="P70004970270000000000000000448A0" data-uri="chapter07.xhtml#P70004970270000000000000000448A0" class="calibre10 pcalibre pcalibre1">10:</code></td>
<td id="P70004970270000000000000000448A1" data-uri="chapter07.xhtml#P70004970270000000000000000448A1" class="calibre20 pcalibre pcalibre1"><code id="P70004970270000000000000000448A2" data-uri="chapter07.xhtml#P70004970270000000000000000448A2" class="calibre10 pcalibre pcalibre1">0000000000000000</code></td>
<td id="P70004970270000000000000000448A3" data-uri="chapter07.xhtml#P70004970270000000000000000448A3" class="calibre20 pcalibre pcalibre1"><code id="P70004970270000000000000000448A4" data-uri="chapter07.xhtml#P70004970270000000000000000448A4" class="calibre10 pcalibre pcalibre1">0</code></td>
<td id="P70004970270000000000000000448A5" data-uri="chapter07.xhtml#P70004970270000000000000000448A5" class="calibre20 pcalibre pcalibre1"><code id="P70004970270000000000000000448A6" data-uri="chapter07.xhtml#P70004970270000000000000000448A6" class="calibre10 pcalibre pcalibre1">NOTYPE</code></td>
<td id="P70004970270000000000000000448A7" data-uri="chapter07.xhtml#P70004970270000000000000000448A7" class="calibre20 pcalibre pcalibre1"><code id="P70004970270000000000000000448A8" data-uri="chapter07.xhtml#P70004970270000000000000000448A8" class="calibre10 pcalibre pcalibre1">GLOBAL</code></td>
<td id="P70004970270000000000000000448A9" data-uri="chapter07.xhtml#P70004970270000000000000000448A9" class="calibre20 pcalibre pcalibre1"><code id="P70004970270000000000000000448AA" data-uri="chapter07.xhtml#P70004970270000000000000000448AA" class="calibre10 pcalibre pcalibre1">DEFAULT</code></td>
<td id="P70004970270000000000000000448AB" data-uri="chapter07.xhtml#P70004970270000000000000000448AB" class="calibre20 pcalibre pcalibre1"><code id="P70004970270000000000000000448AC" data-uri="chapter07.xhtml#P70004970270000000000000000448AC" class="calibre10 pcalibre pcalibre1">UND</code></td>
<td id="P70004970270000000000000000448AD" data-uri="chapter07.xhtml#P70004970270000000000000000448AD" class="calibre20 pcalibre pcalibre1"><code id="P70004970270000000000000000448AE" data-uri="chapter07.xhtml#P70004970270000000000000000448AE" class="calibre10 pcalibre pcalibre1">sum</code></td>
</tr>
</tbody>
</table>
<p id="P70004970270000000000000000448AF" data-uri="chapter07.xhtml#P70004970270000000000000000448AF" class="pcalibre1 pcalibre calibre2">In this example, we see an entry for the definition of global symbol <code id="P70004970270000000000000000448B0" data-uri="chapter07.xhtml#P70004970270000000000000000448B0" class="pcalibre1 calibre8 pcalibre">main</code>, a 24-byte function located at an offset (i.e., <code id="P70004970270000000000000000448B1" data-uri="chapter07.xhtml#P70004970270000000000000000448B1" class="pcalibre1 calibre8 pcalibre">value</code>) of zero in the <code id="P70004970270000000000000000448B2" data-uri="chapter07.xhtml#P70004970270000000000000000448B2" class="pcalibre1 calibre8 pcalibre">.text</code> section. This is followed by the definition of the global symbol <code id="P70004970270000000000000000448B3" data-uri="chapter07.xhtml#P70004970270000000000000000448B3" class="pcalibre1 calibre8 pcalibre">array</code>, an 8-byte object located at an offset of zero in the <code id="P70004970270000000000000000448B4" data-uri="chapter07.xhtml#P70004970270000000000000000448B4" class="pcalibre1 calibre8 pcalibre">.data</code> section. The last entry comes from the reference to the external symbol <code id="P70004970270000000000000000448B5" data-uri="chapter07.xhtml#P70004970270000000000000000448B5" class="pcalibre1 calibre8 pcalibre">sum. <span class="smallcaps pcalibre pcalibre1">readelf</span></code> identifies each section by an integer index. <code id="P70004970270000000000000000448B6" data-uri="chapter07.xhtml#P70004970270000000000000000448B6" class="pcalibre1 calibre8 pcalibre">Ndx=1</code> denotes the <code id="P70004970270000000000000000448B7" data-uri="chapter07.xhtml#P70004970270000000000000000448B7" class="pcalibre1 calibre8 pcalibre">.text</code> section, and <code id="P70004970270000000000000000448B8" data-uri="chapter07.xhtml#P70004970270000000000000000448B8" class="pcalibre1 calibre8 pcalibre">Ndx=3</code> denotes the <code id="P70004970270000000000000000448B9" data-uri="chapter07.xhtml#P70004970270000000000000000448B9" class="pcalibre1 calibre8 pcalibre">.data</code> section.</p>
<section id="P7000497027000000000000000006120" data-uri="chapter07.xhtml#P7000497027000000000000000006120" epub:type="practice" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title1 pcalibre1" id="P70004970270000000000000000448BA" data-uri="chapter07.xhtml#P70004970270000000000000000448BA" epub:type="title"><span class="pcalibre label pcalibre1">Practice Problem </span><span class="pcalibre label pcalibre1">7.1 </span>(solution page <a class="ulink pcalibre pcalibre4 pcalibre2 pcalibre3 pcalibre1" epub:type="pagebreak" href="fileP7000497027000000000000000006533.xhtml#P70004970270000000000000000065A9">717</a>)</h1></header>
<ol class="practicelist pcalibre pcalibre1" id="P70004970270000000000000000448BB" data-uri="chapter07.xhtml#P70004970270000000000000000448BB">
<li class="general-problem pcalibre pcalibre1" id="P70004970270000000000000000448BC" data-uri="chapter07.xhtml#P70004970270000000000000000448BC">
<div class="edition pcalibre pcalibre1" id="P70004970270000000000000000448BD" data-uri="chapter07.xhtml#P70004970270000000000000000448BD"><p id="P70004970270000000000000000448BE" data-uri="chapter07.xhtml#P70004970270000000000000000448BE" class="pcalibre calibre3 pcalibre1">This problem concerns the <code id="P70004970270000000000000000448BF" data-uri="chapter07.xhtml#P70004970270000000000000000448BF" class="pcalibre1 calibre8 pcalibre">m.o</code> and <code id="P70004970270000000000000000448C0" data-uri="chapter07.xhtml#P70004970270000000000000000448C0" class="pcalibre1 calibre8 pcalibre">swap.o</code> modules from <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="#P700049702700000000000000000612D"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">7.5</span></a>. For each symbol that is defined or referenced in <code id="P70004970270000000000000000448C1" data-uri="chapter07.xhtml#P70004970270000000000000000448C1" class="pcalibre1 calibre8 pcalibre">swap.o</code>, indicate whether or not it will have a symbol table entry in the <code id="P70004970270000000000000000448C2" data-uri="chapter07.xhtml#P70004970270000000000000000448C2" class="pcalibre1 calibre8 pcalibre">.symtab</code> section in module <code id="P70004970270000000000000000448C3" data-uri="chapter07.xhtml#P70004970270000000000000000448C3" class="pcalibre1 calibre8 pcalibre">swap.o</code>. If so, indicate the module that defines the symbol (<code id="P70004970270000000000000000448C4" data-uri="chapter07.xhtml#P70004970270000000000000000448C4" class="pcalibre1 calibre8 pcalibre">swap.oorm.o</code>), the symbol type (local, global, or extern), and the section (<code id="P70004970270000000000000000448C5" data-uri="chapter07.xhtml#P70004970270000000000000000448C5" class="pcalibre1 calibre8 pcalibre">.text, .data, .bss</code>, or COMMON) it is assigned to in the module.</p>
<figure class="pcalibre5 figure pcalibre" id="P700049702700000000000000000612D" data-uri="chapter07.xhtml#P700049702700000000000000000612D">
<p id="P70004970270000000000000000448C6" data-uri="chapter07.xhtml#P70004970270000000000000000448C6" class="pcalibre calibre3 pcalibre1">(a) m.c</p>
<p id="P70004970270000000000000000448C7" data-uri="chapter07.xhtml#P70004970270000000000000000448C7" class="pcalibre calibre3 pcalibre1">-------------------------------------------<i class="calibre5 pcalibre pcalibre1">code/link/m.c</i></p>
<pre id="P70004970270000000000000000448C8" data-uri="chapter07.xhtml#P70004970270000000000000000448C8" class="calibre9 pcalibre pcalibre1"><code id="P70004970270000000000000000448C9" data-uri="chapter07.xhtml#P70004970270000000000000000448C9" class="calibre10 pcalibre pcalibre1">
1	void swap();
2
3	int buf[2] = {1, 2};
4
5	int main()
6	{
7		swap();
8		return 0;
9	}
</code></pre>
<p id="P70004970270000000000000000448CA" data-uri="chapter07.xhtml#P70004970270000000000000000448CA" class="pcalibre calibre3 pcalibre1">-------------------------------------------<i class="calibre5 pcalibre pcalibre1">code/link/m.c</i></p>

<p id="P70004970270000000000000000448CB" data-uri="chapter07.xhtml#P70004970270000000000000000448CB" class="pcalibre calibre3 pcalibre1">(b) swap.c</p>
<p id="P70004970270000000000000000448CC" data-uri="chapter07.xhtml#P70004970270000000000000000448CC" class="pcalibre calibre3 pcalibre1">-------------------------------------------<i class="calibre5 pcalibre pcalibre1">code/link/swap.c</i></p>
<pre id="P70004970270000000000000000448CD" data-uri="chapter07.xhtml#P70004970270000000000000000448CD" class="calibre9 pcalibre pcalibre1"><code id="P70004970270000000000000000448CE" data-uri="chapter07.xhtml#P70004970270000000000000000448CE" class="calibre10 pcalibre pcalibre1">
1	extern int buf[];
2
3	int *bufp0 = &amp;buf[0];
4	int *bufp1;
5
6	void swap()
7	{
8		int temp;
9
10		bufp1 = &amp;buf[1];
11		temp = *bufp0;
12		*bufp0 = *bufp1;
13		*bufp1 = temp;
14	}
</code></pre>
<p id="P70004970270000000000000000448CF" data-uri="chapter07.xhtml#P70004970270000000000000000448CF" class="pcalibre calibre3 pcalibre1">-------------------------------------------<i class="calibre5 pcalibre pcalibre1">code/link/swap.c</i></p>

<figcaption id="P70004970270000000000000000448D0" data-uri="chapter07.xhtml#P70004970270000000000000000448D0" class="calibre11 pcalibre pcalibre1"><header class="pcalibre halftitlepage pcalibre1"><h1 class="title3 pcalibre pcalibre1" id="P70004970270000000000000000448D1" data-uri="chapter07.xhtml#P70004970270000000000000000448D1" epub:type="title"><span class="pcalibre1 label2 pcalibre">Figure </span><span class="pcalibre label pcalibre1">7.5 </span>Example program for <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="#P7000497027000000000000000006120"><span class="pcalibre1 label2 pcalibre">Practice Problem </span><span class="number pcalibre pcalibre1">7.1</span></a>.</h1></header>
</figcaption>
</figure>
<table id="P70004970270000000000000000448D2" data-uri="chapter07.xhtml#P70004970270000000000000000448D2" class="pcalibre largetable pcalibre1">
<thead class="pcalibre1 pcalibre calibre16">
<tr class="pcalibre calibre17 pcalibre1">
<th id="P70004970270000000000000000448D3" data-uri="chapter07.xhtml#P70004970270000000000000000448D3" class="calibre18 pcalibre pcalibre1"><span class="pcalibre pagebreak pcalibre1" id="P700049702700000000000000000613C" title="679" data-uri="chapter07.xhtml#P700049702700000000000000000613C" epub:type="pagebreak"></span>Symbol</th>
<th id="P70004970270000000000000000448D4" data-uri="chapter07.xhtml#P70004970270000000000000000448D4" class="calibre18 pcalibre pcalibre1"><code id="P70004970270000000000000000448D5" data-uri="chapter07.xhtml#P70004970270000000000000000448D5" class="calibre10 pcalibre pcalibre1">.symtab</code> entry?</th>
<th id="P70004970270000000000000000448D6" data-uri="chapter07.xhtml#P70004970270000000000000000448D6" class="calibre18 pcalibre pcalibre1">Symbol type</th>
<th id="P70004970270000000000000000448D7" data-uri="chapter07.xhtml#P70004970270000000000000000448D7" class="calibre18 pcalibre pcalibre1">Module where defined</th>
<th id="P70004970270000000000000000448D8" data-uri="chapter07.xhtml#P70004970270000000000000000448D8" class="calibre18 pcalibre pcalibre1">Section</th>
</tr>
</thead>
<tbody class="calibre19 pcalibre pcalibre1">
<tr class="pcalibre calibre17 pcalibre1">
<td id="P70004970270000000000000000448D9" data-uri="chapter07.xhtml#P70004970270000000000000000448D9" class="calibre20 pcalibre pcalibre1"><code id="P70004970270000000000000000448DA" data-uri="chapter07.xhtml#P70004970270000000000000000448DA" class="calibre10 pcalibre pcalibre1">buf</code></td>
<td id="P70004970270000000000000000448DB" data-uri="chapter07.xhtml#P70004970270000000000000000448DB" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P70004970270000000000000000448DC" data-uri="chapter07.xhtml#P70004970270000000000000000448DC" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P70004970270000000000000000448DD" data-uri="chapter07.xhtml#P70004970270000000000000000448DD" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P70004970270000000000000000448DE" data-uri="chapter07.xhtml#P70004970270000000000000000448DE" class="calibre20 pcalibre pcalibre1">_____</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P70004970270000000000000000448DF" data-uri="chapter07.xhtml#P70004970270000000000000000448DF" class="calibre20 pcalibre pcalibre1"><code id="P70004970270000000000000000448E0" data-uri="chapter07.xhtml#P70004970270000000000000000448E0" class="calibre10 pcalibre pcalibre1">bufp0</code></td>
<td id="P70004970270000000000000000448E1" data-uri="chapter07.xhtml#P70004970270000000000000000448E1" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P70004970270000000000000000448E2" data-uri="chapter07.xhtml#P70004970270000000000000000448E2" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P70004970270000000000000000448E3" data-uri="chapter07.xhtml#P70004970270000000000000000448E3" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P70004970270000000000000000448E4" data-uri="chapter07.xhtml#P70004970270000000000000000448E4" class="calibre20 pcalibre pcalibre1">_____</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P70004970270000000000000000448E5" data-uri="chapter07.xhtml#P70004970270000000000000000448E5" class="calibre20 pcalibre pcalibre1"><code id="P70004970270000000000000000448E6" data-uri="chapter07.xhtml#P70004970270000000000000000448E6" class="calibre10 pcalibre pcalibre1">bufp1</code></td>
<td id="P70004970270000000000000000448E7" data-uri="chapter07.xhtml#P70004970270000000000000000448E7" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P70004970270000000000000000448E8" data-uri="chapter07.xhtml#P70004970270000000000000000448E8" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P70004970270000000000000000448E9" data-uri="chapter07.xhtml#P70004970270000000000000000448E9" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P70004970270000000000000000448EA" data-uri="chapter07.xhtml#P70004970270000000000000000448EA" class="calibre20 pcalibre pcalibre1">_____</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P70004970270000000000000000448EB" data-uri="chapter07.xhtml#P70004970270000000000000000448EB" class="calibre20 pcalibre pcalibre1"><code id="P70004970270000000000000000448EC" data-uri="chapter07.xhtml#P70004970270000000000000000448EC" class="calibre10 pcalibre pcalibre1">swap</code></td>
<td id="P70004970270000000000000000448ED" data-uri="chapter07.xhtml#P70004970270000000000000000448ED" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P70004970270000000000000000448EE" data-uri="chapter07.xhtml#P70004970270000000000000000448EE" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P70004970270000000000000000448EF" data-uri="chapter07.xhtml#P70004970270000000000000000448EF" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P70004970270000000000000000448F0" data-uri="chapter07.xhtml#P70004970270000000000000000448F0" class="calibre20 pcalibre pcalibre1">_____</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P70004970270000000000000000448F1" data-uri="chapter07.xhtml#P70004970270000000000000000448F1" class="calibre20 pcalibre pcalibre1"><code id="P70004970270000000000000000448F2" data-uri="chapter07.xhtml#P70004970270000000000000000448F2" class="calibre10 pcalibre pcalibre1">temp</code></td>
<td id="P70004970270000000000000000448F3" data-uri="chapter07.xhtml#P70004970270000000000000000448F3" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P70004970270000000000000000448F4" data-uri="chapter07.xhtml#P70004970270000000000000000448F4" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P70004970270000000000000000448F5" data-uri="chapter07.xhtml#P70004970270000000000000000448F5" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P70004970270000000000000000448F6" data-uri="chapter07.xhtml#P70004970270000000000000000448F6" class="calibre20 pcalibre pcalibre1">_____</td>
</tr>
</tbody>
</table>
</div></li>
</ol>
</section>
</section></body></html>
