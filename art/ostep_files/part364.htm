<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Persistence</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part363.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part365.htm">下一个 &gt;</a></p><h1 style="padding-left: 21pt;text-indent: 0pt;text-align: center;">Persistence</h1><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="toc">&nbsp;</p><div class="toc"><a class="toc0" href="part365.htm">A Dialogue on Persistence</a><a class="toc0" href="part366.htm">I/O Devices</a><a class="toc1" href="part367.htm">36.1 System Architecture</a><a class="toc1" href="part368.htm">36.2 A Canonical Device</a><a class="toc1" href="part369.htm">36.3 The Canonical Protocol</a><a class="toc1" href="part370.htm">36.4 Lowering CPU Overhead With Interrupts</a><a class="toc1" href="part371.htm">36.5 More Efficient Data Movement With DMA</a><a class="toc1" href="part372.htm">36.6 Methods Of Device Interaction</a><a class="toc1" href="part373.htm">36.7 Fitting Into The OS: The Device Driver</a><a class="toc1" href="part374.htm">36.8 Case Study: A Simple IDE Disk Driver</a><a class="toc1" href="part375.htm">36.9 Historical Notes</a><a class="toc1" href="part376.htm">36.10 Summary</a><a class="toc1" href="part377.htm">References</a><a class="toc0" href="part378.htm">Hard Disk Drives</a><a class="toc1" href="part379.htm">37.1 The Interface</a><a class="toc1" href="part380.htm">37.2 Basic Geometry</a><a class="toc1" href="part381.htm">37.3 A Simple Disk Drive</a><a class="toc2" href="part382.htm">Single-track Latency: The Rotational Delay</a><a class="toc2" href="part383.htm">Multiple Tracks: Seek Time</a><a class="toc2" href="part384.htm">Some Other Details</a><a class="toc1" href="part385.htm">37.4 I/O Time: Doing The Math</a><a class="toc1" href="part386.htm">37.5 Disk Scheduling</a><a class="toc2" href="part387.htm">SSTF: Shortest Seek Time First</a><a class="toc2" href="part388.htm">Elevator (a.k.a. SCAN or C-SCAN)</a><a class="toc2" href="part389.htm">SPTF: Shortest Positioning Time First</a><a class="toc2" href="part390.htm">Other Scheduling Issues</a><a class="toc1" href="part391.htm">37.6 Summary</a><a class="toc1" href="part392.htm">References</a><a class="toc1" href="part393.htm">Homework</a><a class="toc0" href="part394.htm">Redundant Arrays of Inexpensive Disks</a><a class="toc1" href="part395.htm">38.1 Interface And RAID Internals</a><a class="toc1" href="part396.htm">38.2 Fault Model</a><a class="toc1" href="part397.htm">38.3 How To Evaluate A RAID</a><a class="toc1" href="part398.htm">38.4 RAID Level 0: Striping</a><a class="toc2" href="part399.htm">Chunk Sizes</a><a class="toc2" href="part400.htm">Back To RAID-0 Analysis</a><a class="toc2" href="part401.htm">Evaluating RAID Performance</a><a class="toc2" href="part402.htm">Back To RAID-0 Analysis, Again</a><a class="toc1" href="part403.htm">38.5 RAID Level 1: Mirroring</a><a class="toc2" href="part404.htm">RAID-1 Analysis</a><a class="toc1" href="part405.htm">38.6 RAID Level 4: Saving Space With Parity</a><a class="toc2" href="part406.htm">RAID-4 Analysis</a><a class="toc1" href="part408.htm">38.7 RAID Level 5: Rotating Parity</a><a class="toc2" href="part409.htm">RAID-5 Analysis</a><a class="toc1" href="part410.htm">38.8 RAID Comparison: A Summary</a><a class="toc1" href="part411.htm">38.9 Other Interesting RAID Issues</a><a class="toc1" href="part412.htm">38.10 Summary</a><a class="toc1" href="part413.htm">References</a><a class="toc1" href="part414.htm">Homework</a><a class="toc2" href="part415.htm">Questions</a><a class="toc0" href="part416.htm">Interlude: File and Directories</a><a class="toc1" href="part417.htm">39.1 Files and Directories</a><a class="toc1" href="part418.htm">39.2 The File System Interface</a><a class="toc1" href="part419.htm">39.3 Creating Files</a><a class="toc1" href="part420.htm">39.4 Reading and Writing Files</a><a class="toc1" href="part421.htm">39.5 Reading And Writing, But Not Sequentially</a><a class="toc1" href="part422.htm">39.6 Writing Immediately with fsync()</a><a class="toc1" href="part423.htm">39.7 Renaming Files</a><a class="toc1" href="part424.htm">39.8 Getting Information About Files</a><a class="toc1" href="part425.htm">39.9 Removing Files</a><a class="toc1" href="part426.htm">39.10 Making Directories</a><a class="toc1" href="part427.htm">39.11 Reading Directories</a><a class="toc1" href="part428.htm">39.12 Deleting Directories</a><a class="toc1" href="part429.htm">39.13 Hard Links</a><a class="toc1" href="part430.htm">39.14 Symbolic Links</a><a class="toc1" href="part431.htm">39.15 Making and Mounting a File System</a><a class="toc1" href="part432.htm">39.16 Summary</a><a class="toc1" href="part433.htm">References</a><a class="toc1" href="part434.htm">Homework</a><a class="toc2" href="part435.htm">Questions</a><a class="toc0" href="part436.htm">File System Implementation</a><a class="toc1" href="part437.htm">40.1 The Way To Think</a><a class="toc1" href="part438.htm">40.2 Overall Organization</a><a class="toc1" href="part439.htm">40.3 File Organization: The Inode</a><a class="toc2" href="part440.htm">The Multi-Level Index</a><a class="toc1" href="part441.htm">40.4 Directory Organization</a><a class="toc1" href="part442.htm">40.5 Free Space Management</a><a class="toc1" href="part443.htm">40.6 Access Paths: Reading and Writing</a><a class="toc2" href="part444.htm">Reading A File From Disk</a><a class="toc2" href="part445.htm">Writing to Disk</a><a class="toc1" href="part447.htm">40.7 Caching and Buffering</a><a class="toc1" href="part448.htm">40.8 Summary</a><a class="toc1" href="part449.htm">References</a><a class="toc1" href="part450.htm">Homework</a><a class="toc2" href="part451.htm">Questions</a><a class="toc0" href="part452.htm">Locality and The Fast File System</a><a class="toc1" href="part453.htm">41.1 The Problem: Poor Performance</a><a class="toc1" href="part454.htm">41.2 FFS: Disk Awareness Is The Solution</a><a class="toc1" href="part455.htm">41.3 Organizing Structure: The Cylinder Group</a><a class="toc1" href="part456.htm">41.4 Policies: How To Allocate Files and Directories</a><a class="toc1" href="part457.htm">41.5 Measuring File Locality</a><a class="toc1" href="part458.htm">41.6 The Large-File Exception</a><a class="toc1" href="part459.htm">41.7 A Few Other Things About FFS</a><a class="toc1" href="part460.htm">41.8 Summary</a><a class="toc1" href="part461.htm">References</a><a class="toc0" href="part462.htm">Crash Consistency: FSCK and Journaling</a><a class="toc1" href="part463.htm">42.1 A Detailed Example</a><a class="toc2" href="part464.htm">Crash Scenarios</a><a class="toc2" href="part465.htm">The Crash Consistency Problem</a><a class="toc1" href="part466.htm">42.2 Solution #1: The File System Checker</a><a class="toc1" href="part467.htm">42.3 Solution #2: Journaling (or Write-Ahead Logging)</a><a class="toc2" href="part468.htm">Data Journaling</a><a class="toc2" href="part469.htm">Recovery</a><a class="toc2" href="part470.htm">Batching Log Updates</a><a class="toc2" href="part471.htm">Making The Log Finite</a><a class="toc2" href="part472.htm">Metadata Journaling</a><a class="toc2" href="part473.htm">Tricky Case: Block Reuse</a><a class="toc2" href="part474.htm">Wrapping Up Journaling: A Timeline</a><a class="toc1" href="part475.htm">42.4 Solution #3: Other Approaches</a><a class="toc1" href="part476.htm">42.5 Summary</a><a class="toc1" href="part477.htm">References</a><a class="toc0" href="part478.htm">Log-structured File Systems</a><a class="toc1" href="part479.htm">43.1 Writing To Disk Sequentially</a><a class="toc1" href="part480.htm">43.2 Writing Sequentially And Effectively</a><a class="toc1" href="part481.htm">43.3 How Much To Buffer?</a><a class="toc1" href="part482.htm">43.4 Problem: Finding Inodes</a><a class="toc1" href="part483.htm">43.5 Solution Through Indirection: The Inode Map</a><a class="toc1" href="part484.htm">43.6 The Checkpoint Region</a><a class="toc1" href="part485.htm">43.7 Reading A File From Disk: A Recap</a><a class="toc1" href="part486.htm">43.8 What About Directories?</a><a class="toc1" href="part487.htm">43.9 A New Problem: Garbage Collection</a><a class="toc1" href="part488.htm">43.10 Determining Block Liveness</a><a class="toc1" href="part489.htm">43.11 A Policy Question: Which Blocks To Clean, And When?</a><a class="toc1" href="part490.htm">43.12 Crash Recovery And The Log</a><a class="toc1" href="part491.htm">43.13 Summary</a><a class="toc1" href="part492.htm">References</a><a class="toc0" href="part493.htm">Data Integrity and Protection</a><a class="toc1" href="part494.htm">44.1 Disk Failure Modes</a><a class="toc1" href="part495.htm">44.2 Handling Latent Sector Errors</a><a class="toc1" href="part496.htm">44.3 Detecting Corruption: The Checksum</a><a class="toc2" href="part497.htm">Common Checksum Functions</a><a class="toc2" href="part498.htm">Checksum Layout</a><a class="toc1" href="part499.htm">44.4 Using Checksums</a><a class="toc1" href="part500.htm">44.5 A New Problem: Misdirected Writes</a><a class="toc1" href="part501.htm">44.6 One Last Problem: Lost Writes</a><a class="toc1" href="part502.htm">44.7 Scrubbing</a><a class="toc1" href="part503.htm">44.8 Overheads Of Checksumming</a><a class="toc1" href="part504.htm">44.9 Summary</a><a class="toc1" href="part505.htm">References</a><a class="toc0" href="part506.htm">Summary Dialogue on Persistence</a><a class="toc0" href="part507.htm">A Dialogue on Distribution</a><a class="toc0" href="part508.htm">Distributed Systems</a><a class="toc1" href="part509.htm">47.1 Communication Basics</a><a class="toc1" href="part510.htm">47.2 Unreliable Communication Layers</a><a class="toc1" href="part511.htm">47.3 Reliable Communication Layers</a><a class="toc1" href="part512.htm">47.4 Communication Abstractions</a><a class="toc1" href="part513.htm">47.5 Remote Procedure Call (RPC)</a><a class="toc2" href="part514.htm">Stub Generator</a><a class="toc2" href="part515.htm">Run-Time Library</a><a class="toc2" href="part516.htm">Other Issues</a><a class="toc1" href="part517.htm">47.6 Summary</a><a class="toc1" href="part518.htm">References</a><a class="toc0" href="part519.htm">Sun’s Network File System (NFS)</a><a class="toc1" href="part520.htm">48.1 A Basic Distributed File System</a><a class="toc1" href="part521.htm">48.2 On To NFS</a><a class="toc1" href="part522.htm">48.3 Focus: Simple and Fast Server Crash Recovery</a><a class="toc1" href="part523.htm">48.4 Key To Fast Crash Recovery: Statelessness</a><a class="toc1" href="part524.htm">48.5 The NFSv2 Protocol</a><a class="toc1" href="part525.htm">48.6 From Protocol to Distributed File System</a><a class="toc1" href="part526.htm">48.7 Handling Server Failure with Idempotent Operations</a><a class="toc1" href="part527.htm">48.8 Improving Performance: Client-side Caching</a><a class="toc1" href="part528.htm">48.9 The Cache Consistency Problem</a><a class="toc1" href="part529.htm">48.10 Assessing NFS Cache Consistency</a><a class="toc1" href="part530.htm">48.11 Implications on Server-Side Write Buffering</a><a class="toc1" href="part531.htm">48.12 Summary</a><a class="toc1" href="part532.htm">References</a><a class="toc0" href="part533.htm">The Andrew File System (AFS)</a><a class="toc1" href="part534.htm">49.1 AFS Version 1</a><a class="toc1" href="part535.htm">49.2 Problems with Version 1</a><a class="toc1" href="part536.htm">49.3 Improving the Protocol</a><a class="toc1" href="part537.htm">49.4 AFS Version 2</a><a class="toc2" href="part538.htm">Table 49.1: Reading A File: Client-side And File Server Actions</a><a class="toc1" href="part539.htm">49.5 Cache Consistency</a><a class="toc1" href="part540.htm">49.6 Crash Recovery</a><a class="toc1" href="part541.htm">49.7 Scale And Performance Of AFSv2</a><a class="toc1" href="part542.htm">49.8 AFS: Other Improvements</a><a class="toc1" href="part543.htm">49.9 Summary</a><a class="toc1" href="part544.htm">References</a><a class="toc0" href="part545.htm">Summary Dialogue on Distribution</a><a class="toc0" href="part546.htm">General Index</a><a class="toc0" href="part547.htm">Asides</a><a class="toc0" href="part548.htm">Tips</a><a class="toc0" href="part549.htm">Cruces</a></div><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part363.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part365.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
