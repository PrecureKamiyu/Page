<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>A Detailed Multi-Level Example</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part205.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part207.htm">下一个 &gt;</a></p><p class="s32" style="padding-left: 41pt;text-indent: 0pt;text-align: justify;">A Detailed Multi-Level Example</p><p style="padding-top: 5pt;padding-left: 41pt;text-indent: 0pt;line-height: 91%;text-align: justify;">To understand the idea behind multi-level page tables better, let’s do an example. Imagine a small address space of size 16 KB, with 64-byte pages. Thus, we have a 14-bit virtual address space, with 8 bits for the VPN and 6 bits for the offset. A linear page table would have <span class="s44">2</span><span class="s101">8</span><span class="s64"> </span>(256) entries, even if only a small portion of the address space is in use. Figure <span style=" color: #00AEEF;">20.3 </span>presents one example of such an address space.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse" cellspacing="0"><tr style="height:7pt"><td style="width:52pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s118" style="padding-left: 18pt;padding-right: 18pt;text-indent: 0pt;line-height: 5pt;text-align: center;">code</p></td></tr><tr style="height:7pt"><td style="width:52pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s118" style="padding-left: 18pt;padding-right: 18pt;text-indent: 0pt;line-height: 5pt;text-align: center;">code</p></td></tr><tr style="height:7pt"><td style="width:52pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#D3D3D3"><p class="s118" style="padding-left: 18pt;padding-right: 18pt;text-indent: 0pt;line-height: 5pt;text-align: center;">(free)</p></td></tr><tr style="height:7pt"><td style="width:52pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#D3D3D3"><p class="s118" style="padding-left: 18pt;padding-right: 18pt;text-indent: 0pt;line-height: 5pt;text-align: center;">(free)</p></td></tr><tr style="height:7pt"><td style="width:52pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s118" style="padding-left: 18pt;padding-right: 18pt;text-indent: 0pt;line-height: 5pt;text-align: center;">heap</p></td></tr><tr style="height:7pt"><td style="width:52pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s118" style="padding-left: 18pt;padding-right: 18pt;text-indent: 0pt;line-height: 5pt;text-align: center;">heap</p></td></tr><tr style="height:7pt"><td style="width:52pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#D3D3D3"><p class="s118" style="padding-left: 18pt;padding-right: 18pt;text-indent: 0pt;line-height: 5pt;text-align: center;">(free)</p></td></tr><tr style="height:7pt"><td style="width:52pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#D3D3D3"><p class="s118" style="padding-left: 18pt;padding-right: 18pt;text-indent: 0pt;line-height: 5pt;text-align: center;">(free)</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"/><p class="s88" style="padding-left: 54pt;text-indent: 0pt;text-align: center;">0000 0000</p><p class="s88" style="padding-top: 2pt;padding-left: 54pt;text-indent: 0pt;text-align: center;">0000 0001</p><p class="s88" style="padding-top: 2pt;padding-left: 54pt;text-indent: 0pt;text-align: center;">0000 0010</p><p class="s88" style="padding-top: 2pt;padding-left: 54pt;text-indent: 0pt;text-align: center;">0000 0011</p><p class="s88" style="padding-top: 2pt;padding-left: 54pt;text-indent: 0pt;text-align: center;">0000 0100</p><p class="s88" style="padding-top: 2pt;padding-left: 54pt;text-indent: 0pt;text-align: center;">0000 0101</p><p class="s88" style="padding-top: 2pt;padding-left: 54pt;text-indent: 0pt;text-align: center;">0000 0110</p><p class="s88" style="padding-top: 2pt;padding-left: 54pt;text-indent: 0pt;text-align: center;">0000 0111</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s88" style="padding-left: 54pt;text-indent: 0pt;text-align: center;">................   ... all free ...</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse" cellspacing="0"><tr style="height:7pt"><td style="width:52pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#D3D3D3"><p class="s118" style="padding-left: 18pt;padding-right: 18pt;text-indent: 0pt;line-height: 5pt;text-align: center;">(free)</p></td></tr><tr style="height:7pt"><td style="width:52pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#D3D3D3"><p class="s118" style="padding-left: 18pt;padding-right: 18pt;text-indent: 0pt;line-height: 5pt;text-align: center;">(free)</p></td></tr><tr style="height:7pt"><td style="width:52pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s118" style="padding-left: 18pt;padding-right: 18pt;text-indent: 0pt;line-height: 5pt;text-align: center;">stack</p></td></tr><tr style="height:7pt"><td style="width:52pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s118" style="padding-left: 18pt;padding-right: 18pt;text-indent: 0pt;line-height: 5pt;text-align: center;">stack</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"/><p class="s88" style="padding-left: 54pt;text-indent: 0pt;text-align: center;">1111 1100</p><p class="s88" style="padding-top: 2pt;padding-left: 54pt;text-indent: 0pt;text-align: center;">1111 1101</p><p class="s88" style="padding-top: 2pt;padding-left: 54pt;text-indent: 0pt;text-align: center;">1111 1110</p><p class="s88" style="padding-top: 2pt;padding-left: 54pt;text-indent: 0pt;text-align: center;">1111 1111</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 72pt;text-indent: 0pt;text-align: left;">Figure 20.3: <b>A 16-KB Address Space With 64-byte Pages</b></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 6pt;padding-left: 90pt;text-indent: 0pt;line-height: 11pt;text-align: left;">T<span class="s7">IP</span>: B<span class="s7">E </span>W<span class="s7">ARY OF </span>C<span class="s7">OMPLEXITY</span></p><p style="padding-left: 8pt;text-indent: 0pt;line-height: 89%;text-align: justify;">System designers should be wary of adding complexity into their sys- tem. What a good systems builder does is implement the least complex system that achieves the task at hand. For example, if disk space is abun- dant, you shouldn’t design a file system that works hard to use as few bytes as possible; similarly, if processors are fast, it is better to write a clean and understandable module within the OS than perhaps the most CPU-optimized, hand-assembled code for the task at hand. Be wary of needless complexity, in prematurely-optimized code or other forms; such approaches make systems harder to understand, maintain, and debug. As Antoine de Saint-Exupery famously wrote: “Perfection is finally at- tained not when there is no longer anything to add, but when there is no longer anything to take away.” What he didn’t write: “It’s a lot easier to say something about perfection than to actually achieve it.”</p><p style="padding-left: 60pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: justify;">In this example, virtual pages 0 and 1 are for code, virtual pages 4 and 5 for the heap, and virtual pages 254 and 255 for the stack; the rest of the pages of the address space are unused.</p><p style="padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: justify;">To build a two-level page table for this address space, we start with our full linear page table and break it up into page-sized units. Recall our full table (in this example) has 256 entries; assume each PTE is 4 bytes in size. Thus, our page table is 1KB (256 <span class="s4">× </span>4 bytes) in size. Given that we have 64-byte pages, the 1-KB page table can be divided into 16 64-byte pages; each page can hold 16 PTEs.</p><p style="padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: justify;">What we need to understand now is how to take a VPN and use it to index first into the page directory and then into the page of the page table. Remember that each is an array of entries; thus, all we need to figure out is how to construct the index for each from pieces of the VPN.</p><p style="padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: justify;">Let’s first index into the page directory. Our page table in this example is small: 256 entries, spread across 16 pages. The page directory needs one entry per page of the page table; thus, it has 16 entries. As a result, we need four bits of the VPN to index into the directory; we use the top four bits of the VPN, as follows:</p><p class="s65" style="padding-top: 3pt;text-indent: 0pt;text-align: center;">0</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;text-indent: 0pt;text-align: center;">1</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;text-indent: 0pt;text-align: center;">2</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;text-indent: 0pt;text-align: center;">3</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;text-indent: 0pt;text-align: center;">4</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;text-indent: 0pt;text-align: center;">5</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;text-indent: 0pt;text-align: center;">6</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;text-indent: 0pt;text-align: center;">7</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;text-indent: 0pt;text-align: center;">8</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;text-indent: 0pt;text-align: center;">9</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">10</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">11</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">12</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">13</p><p style="text-indent: 0pt;text-align: left;"/><p class="s91" style="padding-top: 2pt;padding-bottom: 1pt;padding-left: 165pt;text-indent: 0pt;text-align: left;">VPN           offset</p><p class="s102" style="padding-left: 172pt;text-indent: 0pt;line-height: 2pt;text-align: left;"><span><img width="0" height="3" alt="image" src="Image_276.png"/></span>	<span><img width="0" height="3" alt="image" src="Image_277.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 145pt;text-indent: 0pt;line-height: 2pt;text-align: left;"><span><img width="0" height="3" alt="image" src="Image_278.png"/></span></p><p class="s65" style="padding-left: 120pt;text-indent: 0pt;text-align: left;">Page Directory Index</p><p style="padding-top: 3pt;padding-left: 68pt;text-indent: 12pt;line-height: 88%;text-align: left;">Once we extract the <b>page-directory index </b>(<span class="s41">PDIndex </span>for short) from the VPN, we can use it to find the address of the page-directory entry (PDE) with a simple calculation: <span class="s41">PDEAddr = PageDirBase + (PDIndex</span></p><p class="s86" style="padding-left: 68pt;text-indent: 0pt;line-height: 78%;text-align: left;">* <span class="s41">sizeof(PDE))</span><span class="p">. This results in our page directory, which we now ex- amine to make further progress in our translation.</span></p><p style="padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: left;">If the page-directory entry is marked invalid, we know that the access is invalid, and thus raise an exception. If, however, the PDE is valid,</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;line-height: 89%;text-align: justify;">we have more work to do. Specifically, we now have to fetch the page- table entry (PTE) from the page of the page table pointed to by this page- directory entry. To find this PTE, we have to index into the portion of the page table using the remaining bits of the VPN:</p><p class="s65" style="padding-top: 3pt;text-indent: 0pt;text-align: center;">0</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;text-indent: 0pt;text-align: center;">1</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;text-indent: 0pt;text-align: center;">2</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;text-indent: 0pt;text-align: center;">3</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;text-indent: 0pt;text-align: center;">4</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;text-indent: 0pt;text-align: center;">5</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;text-indent: 0pt;text-align: center;">6</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;text-indent: 0pt;text-align: center;">7</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;text-indent: 0pt;text-align: center;">8</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;text-indent: 0pt;text-align: center;">9</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">10</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">11</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">12</p><p style="text-indent: 0pt;text-align: left;"/><p class="s65" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">13</p><p style="text-indent: 0pt;text-align: left;"/><p class="s91" style="padding-bottom: 1pt;padding-left: 36pt;text-indent: 0pt;line-height: 7pt;text-align: center;">VPN           offset</p><p class="s102" style="padding-left: 144pt;text-indent: 0pt;line-height: 2pt;text-align: left;"><span><img width="0" height="3" alt="image" src="Image_279.png"/></span>	<span><img width="0" height="3" alt="image" src="Image_280.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s102" style="padding-left: 117pt;text-indent: 0pt;line-height: 2pt;text-align: left;"><span><img width="0" height="3" alt="image" src="Image_281.png"/></span>	<span><img width="0" height="3" alt="image" src="Image_282.png"/></span></p><p class="s65" style="padding-left: 92pt;text-indent: 0pt;text-align: left;">Page Directory Index Page Table Index</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 41pt;text-indent: 11pt;line-height: 88%;text-align: left;">This <b>page-table index </b>(<span class="s41">PTIndex </span>for short) can then be used to index into the page table itself, giving us the address of our PTE:</p><p class="s38" style="padding-top: 2pt;padding-left: 41pt;text-indent: 0pt;text-align: justify;">PTEAddr = (PDE.PFN &lt;&lt; SHIFT) + (PTIndex <span class="s39">* </span>sizeof(PTE))</p><p style="padding-top: 1pt;padding-left: 41pt;text-indent: 11pt;line-height: 89%;text-align: left;">Note that the page-frame number (PFN) obtained from the page-directory entry must be left-shifted into place before combining it with the page- table index to form the address of the PTE.</p><p style="padding-left: 41pt;text-indent: 11pt;line-height: 89%;text-align: justify;">To see if this all makes sense, we’ll now fill in a multi-level page ta- ble with some actual values, and translate a single virtual address. Let’s begin with the <b>page directory </b>for this example (left side of Table <span style=" color: #00AEEF;">20.2</span>).</p><p style="padding-left: 41pt;text-indent: 11pt;line-height: 89%;text-align: justify;">In the figure, you can see that each page directory entry (PDE) de- scribes something about a page of the page table for the address space. In this example, we have two valid regions in the address space (at the beginning and end), and a number of invalid mappings in-between.</p><p style="padding-left: 41pt;text-indent: 11pt;line-height: 89%;text-align: justify;">In physical page 100 (the physical frame number of the 0th page of the page table), we have the first page of 16 page table entries for the first 16 VPNs in the address space. See Table <span style=" color: #00AEEF;">20.2 </span>(middle part) for the contents of this portion of the page table.</p><p class="s9" style="padding-top: 7pt;padding-left: 21pt;text-indent: 0pt;text-align: center;">Page Directory  Page of PT (@PFN:100)  Page of PT (@PFN:101)</p><table style="border-collapse:collapse;margin-left:58.1078pt" cellspacing="0"><tr style="height:10pt"><td style="width:29pt;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F"><p class="s108" style="padding-left: 6pt;text-indent: 0pt;line-height: 8pt;text-align: left;">PFN</p></td><td style="width:36pt;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 6pt;padding-right: 7pt;text-indent: 0pt;line-height: 8pt;text-align: center;">valid?</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: right;">PFN</p></td><td style="width:33pt;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F"><p class="s108" style="padding-left: 3pt;padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: center;">valid</p></td><td style="width:33pt;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 10pt;text-indent: 0pt;line-height: 8pt;text-align: right;">prot</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: right;">PFN</p></td><td style="width:33pt;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 7pt;text-indent: 0pt;line-height: 8pt;text-align: center;">valid</p></td><td style="width:34pt;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F"><p class="s108" style="padding-left: 8pt;text-indent: 0pt;line-height: 8pt;text-align: left;">prot</p></td></tr><tr style="height:10pt"><td style="width:29pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F"><p class="s108" style="padding-left: 7pt;text-indent: 0pt;line-height: 9pt;text-align: left;">100</p></td><td style="width:36pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">1</p></td><td style="width:28pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">10</p></td><td style="width:33pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">1</p></td><td style="width:33pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 12pt;text-indent: 0pt;line-height: 9pt;text-align: right;">r-x</p></td><td style="width:28pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">–</p></td><td style="width:33pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:34pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F"><p class="s108" style="padding-left: 12pt;text-indent: 0pt;line-height: 9pt;text-align: left;">—</p></td></tr><tr style="height:10pt"><td style="width:29pt"><p class="s108" style="padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">——</p></td><td style="width:36pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">23</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">1</p></td><td style="width:33pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 12pt;text-indent: 0pt;line-height: 9pt;text-align: right;">r-x</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:34pt"><p class="s108" style="padding-left: 12pt;text-indent: 0pt;line-height: 9pt;text-align: left;">—</p></td></tr><tr style="height:10pt"><td style="width:29pt"><p class="s108" style="padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">——</p></td><td style="width:36pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:33pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 13pt;text-indent: 0pt;line-height: 9pt;text-align: right;">—</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:34pt"><p class="s108" style="padding-left: 12pt;text-indent: 0pt;line-height: 9pt;text-align: left;">—</p></td></tr><tr style="height:10pt"><td style="width:29pt"><p class="s108" style="padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">——</p></td><td style="width:36pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:33pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 13pt;text-indent: 0pt;line-height: 9pt;text-align: right;">—</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:34pt"><p class="s108" style="padding-left: 12pt;text-indent: 0pt;line-height: 9pt;text-align: left;">—</p></td></tr><tr style="height:10pt"><td style="width:29pt"><p class="s108" style="padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">——</p></td><td style="width:36pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">80</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">1</p></td><td style="width:33pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 11pt;text-indent: 0pt;line-height: 9pt;text-align: right;">rw-</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:34pt"><p class="s108" style="padding-left: 12pt;text-indent: 0pt;line-height: 9pt;text-align: left;">—</p></td></tr><tr style="height:10pt"><td style="width:29pt"><p class="s108" style="padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">——</p></td><td style="width:36pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">59</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">1</p></td><td style="width:33pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 11pt;text-indent: 0pt;line-height: 9pt;text-align: right;">rw-</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:34pt"><p class="s108" style="padding-left: 12pt;text-indent: 0pt;line-height: 9pt;text-align: left;">—</p></td></tr><tr style="height:10pt"><td style="width:29pt"><p class="s108" style="padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">——</p></td><td style="width:36pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:33pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 13pt;text-indent: 0pt;line-height: 9pt;text-align: right;">—</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:34pt"><p class="s108" style="padding-left: 12pt;text-indent: 0pt;line-height: 9pt;text-align: left;">—</p></td></tr><tr style="height:10pt"><td style="width:29pt"><p class="s108" style="padding-left: 5pt;text-indent: 0pt;line-height: 8pt;text-align: left;">——</p></td><td style="width:36pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 8pt;text-align: center;">0</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 8pt;text-align: center;">0</p></td><td style="width:33pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 13pt;text-indent: 0pt;line-height: 8pt;text-align: right;">—</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 8pt;text-align: center;">0</p></td><td style="width:34pt"><p class="s108" style="padding-left: 12pt;text-indent: 0pt;line-height: 8pt;text-align: left;">—</p></td></tr><tr style="height:10pt"><td style="width:29pt"><p class="s108" style="padding-left: 5pt;text-indent: 0pt;line-height: 8pt;text-align: left;">——</p></td><td style="width:36pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 8pt;text-align: center;">0</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 8pt;text-align: center;">0</p></td><td style="width:33pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 13pt;text-indent: 0pt;line-height: 8pt;text-align: right;">—</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 8pt;text-align: center;">0</p></td><td style="width:34pt"><p class="s108" style="padding-left: 12pt;text-indent: 0pt;line-height: 8pt;text-align: left;">—</p></td></tr><tr style="height:10pt"><td style="width:29pt"><p class="s108" style="padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">——</p></td><td style="width:36pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:33pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 13pt;text-indent: 0pt;line-height: 9pt;text-align: right;">—</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:34pt"><p class="s108" style="padding-left: 12pt;text-indent: 0pt;line-height: 9pt;text-align: left;">—</p></td></tr><tr style="height:10pt"><td style="width:29pt"><p class="s108" style="padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">——</p></td><td style="width:36pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:33pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 13pt;text-indent: 0pt;line-height: 9pt;text-align: right;">—</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:34pt"><p class="s108" style="padding-left: 12pt;text-indent: 0pt;line-height: 9pt;text-align: left;">—</p></td></tr><tr style="height:10pt"><td style="width:29pt"><p class="s108" style="padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">——</p></td><td style="width:36pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:33pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 13pt;text-indent: 0pt;line-height: 9pt;text-align: right;">—</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:34pt"><p class="s108" style="padding-left: 12pt;text-indent: 0pt;line-height: 9pt;text-align: left;">—</p></td></tr><tr style="height:10pt"><td style="width:29pt"><p class="s108" style="padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">——</p></td><td style="width:36pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:33pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 13pt;text-indent: 0pt;line-height: 9pt;text-align: right;">—</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:34pt"><p class="s108" style="padding-left: 12pt;text-indent: 0pt;line-height: 9pt;text-align: left;">—</p></td></tr><tr style="height:10pt"><td style="width:29pt"><p class="s108" style="padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">——</p></td><td style="width:36pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:33pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 13pt;text-indent: 0pt;line-height: 9pt;text-align: right;">—</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:34pt"><p class="s108" style="padding-left: 12pt;text-indent: 0pt;line-height: 9pt;text-align: left;">—</p></td></tr><tr style="height:10pt"><td style="width:29pt"><p class="s108" style="padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">——</p></td><td style="width:36pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:33pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 13pt;text-indent: 0pt;line-height: 9pt;text-align: right;">—</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: right;">55</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 9pt;text-align: center;">1</p></td><td style="width:34pt"><p class="s108" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">rw-</p></td></tr><tr style="height:10pt"><td style="width:29pt"><p class="s108" style="padding-left: 7pt;text-indent: 0pt;line-height: 8pt;text-align: left;">101</p></td><td style="width:36pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 8pt;text-align: center;">1</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: right;">–</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 8pt;text-align: center;">0</p></td><td style="width:33pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 13pt;text-indent: 0pt;line-height: 8pt;text-align: right;">—</p></td><td style="width:28pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: right;">45</p></td><td style="width:33pt"><p class="s108" style="padding-right: 1pt;text-indent: 0pt;line-height: 8pt;text-align: center;">1</p></td><td style="width:34pt"><p class="s108" style="padding-left: 9pt;text-indent: 0pt;line-height: 8pt;text-align: left;">rw-</p></td></tr></table><p style="padding-top: 5pt;padding-left: 21pt;text-indent: 0pt;text-align: center;">Table 20.2: <b>A Page Directory, And Pieces Of Page Table</b></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: justify;">This page of the page table contains the mappings for the first 16 VPNs; in our example, VPNs 0 and 1 are valid (the code segment), as are 4 and 5 (the heap). Thus, the table has mapping information for each of those pages. The rest of the entries are marked invalid.</p><p style="padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: justify;">The other valid page of page table is found inside PFN 101. This page contains mappings for the last 16 VPNs of the address space; see Table</p><p class="s28" style="padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: justify;">20.2 <span style=" color: #231F20;">(right) for details.</span></p><p style="padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: justify;">In the example, VPNs 254 and 255 (the stack) have valid mappings. Hopefully, what we can see from this example is how much space savings are possible with a multi-level indexed structure. In this example, instead of allocating the full <i>sixteen </i>pages for a linear page table, we allocate only <i>three</i>: one for the page directory, and two for the chunks of the page table that have valid mappings. The savings for large (32-bit or 64-bit) address spaces could obviously be much greater.</p><p style="padding-left: 68pt;text-indent: 12pt;line-height: 88%;text-align: justify;">Finally, let’s use this information in order to perform a translation. Here is an address that refers to the 0th byte of VPN 254: <span class="s41">0x3F80</span>, or <span class="s41">11 1111 1000 0000 </span>in binary.</p><p style="padding-left: 68pt;text-indent: 12pt;line-height: 88%;text-align: justify;">Recall that we will use the top 4 bits of the VPN to index into the page directory. Thus, <span class="s41">1111 </span>will choose the last (15th, if you start at the 0th) entry of the page directory above. This points us to a valid page of the page table located at address <span class="s41">101</span>. We then use the next 4 bits of the VPN (<span class="s41">1110</span>) to index into that page of the page table and find the desired PTE. 1110 is the next-to-last (14th) entry on the page, and tells us that page 254 of our virtual address space is mapped at physi- cal page 55. By concatenating PFN=55 (or hex <span class="s41">0x37</span>) with offset=000000, we can thus form our desired physical address and issue the request to the memory system: <span class="s41">PhysAddr = (PTE.PFN &lt;&lt; SHIFT) + offset</span></p><p class="s41" style="padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: justify;">= 00 1101 1100 0000 = 0x0DC0<span class="p">.</span></p><p style="padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: justify;">You should now have some idea of how to construct a two-level page table, using a page directory which points to pages of the page table. Un- fortunately, however, our work is not done. As we’ll now discuss, some- times two levels of page table is not enough!</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part205.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part207.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
