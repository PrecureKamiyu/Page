<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>48.1 A Basic Distributed File System</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part519.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part521.htm">下一个 &gt;</a></p><p class="s40" style="padding-top: 2pt;padding-left: 38pt;text-indent: 0pt;text-align: left;">48.1 A Basic Distributed File System</p><p style="padding-top: 7pt;padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: justify;">We now will study the architecture of a simplified distributed file sys- tem. A simple client/server distributed file system has more components than the file systems we have studied so far. On the client side, there are client applications which access files and directories through the <b>client- side file system</b>. A client application issues <b>system calls </b>to the client-side file system (such as <span class="s41">open()</span>, <span class="s41">read()</span>, <span class="s41">write()</span>, <span class="s41">close()</span>, <span class="s41">mkdir()</span>, etc.) in order to access files which are stored on the server. Thus, to client applications, the file system does not appear to be any different than a lo- cal (disk-based) file system, except perhaps for performance; in this way, distributed file systems provide <b>transparent </b>access to files, an obvious goal; after all, who would want to use a file system that required a differ- ent set of APIs or otherwise was a pain to use?</p><p style="padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: justify;">The role of the client-side file system is to execute the actions needed to service those system calls. For example, if the client issues a <span class="s41">read() </span>request, the client-side file system may send a message to the <b>server-side file system </b>(or, more commonly, the <b>file server</b>) to read a particular block; the file server will then read the block from disk (or its own in-memory cache), and send a message back to the client with the requested data. The client-side file system will then copy the data into the user buffer supplied to the <span class="s41">read() </span>system call and thus the request will complete. Note that a subsequent <span class="s41">read() </span>of the same block on the client may be <b>cached </b>in client memory or on the client’s disk even; in the best such case, no network traffic need be generated.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="303" height="42" alt="image" src="Image_671.png"/></span></p><p class="s48" style="text-indent: 0pt;line-height: 8pt;text-align: left;">Client-side File System</p><p style="text-indent: 0pt;text-align: left;"/><p class="s48" style="text-indent: 0pt;line-height: 8pt;text-align: left;">File Server</p><p style="text-indent: 0pt;text-align: left;"/><p class="s48" style="text-indent: 0pt;line-height: 8pt;text-align: left;">Networking Layer</p><p style="text-indent: 0pt;text-align: left;"/><p class="s48" style="text-indent: 0pt;line-height: 8pt;text-align: left;">Networking Layer</p><p style="text-indent: 0pt;text-align: left;"/><p class="s48" style="padding-top: 6pt;padding-left: 100pt;text-indent: 0pt;text-align: left;">Client Application</p><p class="s48" style="padding-top: 7pt;padding-left: 38pt;text-indent: 0pt;text-align: right;">Disks</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 113pt;text-indent: 0pt;text-align: justify;">Figure 48.2: <b>Distributed File System Architecture</b></p><p style="padding-top: 4pt;padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: justify;">From this simple overview, you should get a sense that there are two important pieces of software in a client/server distributed file system: the client-side file system and the file server. Together their behavior deter- mines the behavior of the distributed file system. Now it’s time to study one particular system: Sun’s Network File System (NFS).</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-top: 6pt;padding-left: 91pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><span class="p">A</span><span class="s7">SIDE</span><span class="p">: </span>W<span class="s45">HY </span>S<span class="s45">ERVERS </span>C<span class="s45">RASH</span></p><p style="padding-left: 9pt;text-indent: 11pt;line-height: 89%;text-align: justify;">Before getting into the details of the NFSv2 protocol, you might be wondering: why do servers crash? Well, as you might guess, there are plenty of reasons. Servers may simply suffer from a <b>power outage </b>(tem- porarily); only when power is restored can the machines be restarted. Servers are often comprised of hundreds of thousands or even millions of lines of code; thus, they have <b>bugs </b>(even good software has a few bugs per hundred or thousand lines of code), and thus they eventually will trigger a bug that will cause them to crash. They also have memory leaks; even a small memory leak will cause a system to run out of mem- ory and crash. And, finally, in distributed systems, there is a network between the client and the server; if the network acts strangely (for ex- ample, if it becomes <b>partitioned </b>and clients and servers are working but cannot communicate), it may appear as if a remote machine has crashed, but in reality it is just not currently reachable through the network.</p><p style="padding-left: 32pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part519.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part521.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
