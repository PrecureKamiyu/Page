<?xml version='1.0' encoding='utf-8'?>
<html xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:svg="http://www.w3.org/2000/svg" xmlns:epub="http://www.idpf.org/2007/ops" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" epub:prefix="index: http://www.index.com/">
  <head>
    <meta name="dcterms.conformsTo" content="PXE Basic 1.0"/>
    <meta name="generator" content="PXE Tools version 1.39.52"/>
    <!--Created by pxe.pl for standard version PXE Basic 1.0,data-profile-product=standard by PXE Tools 1.39.52, partial=false-->
    <title>Solutions to Practice Problems </title>
    <link rel="alternate stylesheet" type="text/css" title="night" href="../css/theme/night.css"/>
    <link rel="alternate stylesheet" type="text/css" title="sepia" href="../css/theme/sepia.css"/>
    <script src="js/format_lg_obj.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../../page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body epub:type="bodymatter" class="calibre pcalibre pcalibre1">
<section id="P7000497027000000000000000008021" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title pcalibre1" id="P7000497027000000000000000046B3D" data-uri="chapter11.xhtml#P7000497027000000000000000046B3D" epub:type="title"><span class="pcalibre label pcalibre1">Solutions to Practice Problems </span></h1></header>
<section id="P7000497027000000000000000008023" data-uri="chapter11.xhtml#P7000497027000000000000000008023" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title1 pcalibre1" id="P7000497027000000000000000046B3E" data-uri="chapter11.xhtml#P7000497027000000000000000046B3E" epub:type="title"><a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000007BFE.xhtml#P7000497027000000000000000007C3D"><span class="pcalibre label pcalibre1">Solution to Problem </span><span class="pcalibre label pcalibre1">11.1 </span></a>(page <a class="ulink pcalibre pcalibre4 pcalibre2 pcalibre3 pcalibre1" epub:type="pagebreak" href="fileP7000497027000000000000000007BFE.xhtml#P7000497027000000000000000007C3F">927</a>)</h1></header>
<table id="P7000497027000000000000000046B3F" data-uri="chapter11.xhtml#P7000497027000000000000000046B3F" class="pcalibre largetable pcalibre1">
<thead class="pcalibre1 pcalibre calibre16">
<tr class="pcalibre calibre17 pcalibre1">
<th id="P7000497027000000000000000046B40" data-uri="chapter11.xhtml#P7000497027000000000000000046B40" class="calibre18 pcalibre pcalibre1">Hex address</th>
<th id="P7000497027000000000000000046B41" data-uri="chapter11.xhtml#P7000497027000000000000000046B41" class="calibre18 pcalibre pcalibre1">Dotted-decimal address</th>
</tr>
</thead>
<tbody class="calibre19 pcalibre pcalibre1">
<tr class="pcalibre calibre17 pcalibre1">
<td id="P7000497027000000000000000046B42" data-uri="chapter11.xhtml#P7000497027000000000000000046B42" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000046B43" data-uri="chapter11.xhtml#P7000497027000000000000000046B43" class="calibre10 pcalibre pcalibre1">0x0</code></td>
<td id="P7000497027000000000000000046B44" data-uri="chapter11.xhtml#P7000497027000000000000000046B44" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000046B45" data-uri="chapter11.xhtml#P7000497027000000000000000046B45" class="calibre10 pcalibre pcalibre1">0.0.0.0</code></td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P7000497027000000000000000046B46" data-uri="chapter11.xhtml#P7000497027000000000000000046B46" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000046B47" data-uri="chapter11.xhtml#P7000497027000000000000000046B47" class="calibre10 pcalibre pcalibre1">0xffffffff</code></td>
<td id="P7000497027000000000000000046B48" data-uri="chapter11.xhtml#P7000497027000000000000000046B48" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000046B49" data-uri="chapter11.xhtml#P7000497027000000000000000046B49" class="calibre10 pcalibre pcalibre1">255.255.255.255</code></td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P7000497027000000000000000046B4A" data-uri="chapter11.xhtml#P7000497027000000000000000046B4A" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000046B4B" data-uri="chapter11.xhtml#P7000497027000000000000000046B4B" class="calibre10 pcalibre pcalibre1">0x7f000001</code></td>
<td id="P7000497027000000000000000046B4C" data-uri="chapter11.xhtml#P7000497027000000000000000046B4C" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000046B4D" data-uri="chapter11.xhtml#P7000497027000000000000000046B4D" class="calibre10 pcalibre pcalibre1">127.0.0.1</code></td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P7000497027000000000000000046B4E" data-uri="chapter11.xhtml#P7000497027000000000000000046B4E" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000046B4F" data-uri="chapter11.xhtml#P7000497027000000000000000046B4F" class="calibre10 pcalibre pcalibre1">0xcdbca079</code></td>
<td id="P7000497027000000000000000046B50" data-uri="chapter11.xhtml#P7000497027000000000000000046B50" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000046B51" data-uri="chapter11.xhtml#P7000497027000000000000000046B51" class="calibre10 pcalibre pcalibre1">205.188.160.121</code></td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P7000497027000000000000000046B52" data-uri="chapter11.xhtml#P7000497027000000000000000046B52" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000046B53" data-uri="chapter11.xhtml#P7000497027000000000000000046B53" class="calibre10 pcalibre pcalibre1"><span class="pcalibre pagebreak pcalibre1" id="P700049702700000000000000000803A" title="967" data-uri="chapter11.xhtml#P700049702700000000000000000803A" epub:type="pagebreak"></span>0x400c950d</code></td>
<td id="P7000497027000000000000000046B54" data-uri="chapter11.xhtml#P7000497027000000000000000046B54" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000046B55" data-uri="chapter11.xhtml#P7000497027000000000000000046B55" class="calibre10 pcalibre pcalibre1">64.12.149.13</code></td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P7000497027000000000000000046B56" data-uri="chapter11.xhtml#P7000497027000000000000000046B56" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000046B57" data-uri="chapter11.xhtml#P7000497027000000000000000046B57" class="calibre10 pcalibre pcalibre1">0xcdbc9217</code></td>
<td id="P7000497027000000000000000046B58" data-uri="chapter11.xhtml#P7000497027000000000000000046B58" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000046B59" data-uri="chapter11.xhtml#P7000497027000000000000000046B59" class="calibre10 pcalibre pcalibre1">205.188.146.23</code></td>
</tr>
</tbody>
</table>
</section>
<section id="P7000497027000000000000000008041" data-uri="chapter11.xhtml#P7000497027000000000000000008041" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title1 pcalibre1" id="P7000497027000000000000000046B5A" data-uri="chapter11.xhtml#P7000497027000000000000000046B5A" epub:type="title"><a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000007BFE.xhtml#P7000497027000000000000000007C59"><span class="pcalibre label pcalibre1">Solution to Problem </span><span class="pcalibre label pcalibre1">11.2 </span></a>(page <a class="ulink pcalibre pcalibre4 pcalibre2 pcalibre3 pcalibre1" epub:type="pagebreak" href="fileP7000497027000000000000000007BFE.xhtml#P7000497027000000000000000007C3F">927</a>)</h1></header>
<pre id="P7000497027000000000000000046B5B" data-uri="chapter11.xhtml#P7000497027000000000000000046B5B" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000046B5C" data-uri="chapter11.xhtml#P7000497027000000000000000046B5C" class="calibre10 pcalibre pcalibre1">
1	#include "csapp.h"
2	
3	int main(int argc, char **argv)
4	{
5		struct in_addr inaddr;	/* Address in network byte order */
6		uint32_t addr;		/* Address in host byte order */
7		char buf[MAXBUF];	/* Buffer for dotted-decimal string */
8	
9		if (argc != 2) {
10			fprintf(stderr, "usage: %s &lt;hex number&gt;\n", argv[0]);
11			exit(0);
12		}
13		sscanf(argv[1], "%x", &amp;addr);
14		inaddr.s_addr = htonl(addr);
15	
16		if (!inet_ntop(AF_INET, &amp;inaddr, buf, MAXBUF))
17			unix_error("inet_ntop");
18		printf("%s\n", buf); 19
20		exit(0);
21	}
</code></pre>
</section>
<section id="P7000497027000000000000000008045" data-uri="chapter11.xhtml#P7000497027000000000000000008045" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title1 pcalibre1" id="P7000497027000000000000000046B5D" data-uri="chapter11.xhtml#P7000497027000000000000000046B5D" epub:type="title"><a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000007BFE.xhtml#P7000497027000000000000000007C62"><span class="pcalibre label pcalibre1">Solution to Problem </span><span class="pcalibre label pcalibre1">11.3 </span></a>(page <a class="ulink pcalibre pcalibre4 pcalibre2 pcalibre3 pcalibre1" epub:type="pagebreak" href="fileP7000497027000000000000000007BFE.xhtml#P7000497027000000000000000007C3F">927</a>)</h1></header>
<pre id="P7000497027000000000000000046B5E" data-uri="chapter11.xhtml#P7000497027000000000000000046B5E" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000046B5F" data-uri="chapter11.xhtml#P7000497027000000000000000046B5F" class="calibre10 pcalibre pcalibre1">
1	#include "csapp.h"
2	
3	int main(int argc, char **argv)
4	{
5		struct in_addr inaddr;	/* Address in network byte order */
6		int rc;
7	
8		if (argc != 2) {
9			fprintf(stderr, "usage: %s &lt;dotted-decimal&gt;\n", argv[0]);
10			exit(0);
11		}
12	
13		rc = inet_pton(AF_INET, argv[1], &amp;inaddr);
14		if (rc == 0)
15			app_error("inet_pton error: invalid dotted-decimal address");
<span class="pcalibre pagebreak pcalibre1" id="P7000497027000000000000000008049" title="968" data-uri="chapter11.xhtml#P7000497027000000000000000008049" epub:type="pagebreak"></span>16		else if (rc &lt; 0)
17			unix_error("inet_pton error");
18	
19		printf("0x%x\n", ntohl(inaddr.s_addr));
20		exit(0);
21	}
</code></pre>
</section>
<section id="P700049702700000000000000000804A" data-uri="chapter11.xhtml#P700049702700000000000000000804A" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title1 pcalibre1" id="P7000497027000000000000000046B60" data-uri="chapter11.xhtml#P7000497027000000000000000046B60" epub:type="title"><a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000007CC1.xhtml#P7000497027000000000000000007DFF"><span class="pcalibre label pcalibre1">Solution to Problem </span><span class="pcalibre label pcalibre1">11.4 </span></a>(page <a class="ulink pcalibre pcalibre4 pcalibre2 pcalibre3 pcalibre1" epub:type="pagebreak" href="fileP7000497027000000000000000007CC1.xhtml#P7000497027000000000000000007DF3">942</a>)</h1></header>
<p id="P7000497027000000000000000046B61" data-uri="chapter11.xhtml#P7000497027000000000000000046B61" class="pcalibre1 pcalibre calibre2">Here's a solution. Notice how much more difficult it is to use <code id="P7000497027000000000000000046B62" data-uri="chapter11.xhtml#P7000497027000000000000000046B62" class="pcalibre1 calibre8 pcalibre">inet_ntop</code>, which requires messy casting and deep structure references. The <code id="P7000497027000000000000000046B63" data-uri="chapter11.xhtml#P7000497027000000000000000046B63" class="pcalibre1 calibre8 pcalibre">getnameinfo</code> function is much simpler because it does all of that work for us.</p>
<pre id="P7000497027000000000000000046B64" data-uri="chapter11.xhtml#P7000497027000000000000000046B64" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000046B65" data-uri="chapter11.xhtml#P7000497027000000000000000046B65" class="calibre10 pcalibre pcalibre1">
1	#include "csapp.h"
2	
3	int main(int argc, char **argv)
4	{
5		struct addrinfo *p, *listp, hints;
6		struct sockaddr_in *sockp;
7		char buf[MAXLINE];
8		int rc;
9	
10		if (argc != 2) {
11			fprintf(stderr, "usage: %s &lt;domain name&gt;\n", argv[0]);
12			exit(0);
13		}
14	
15		/* Get a list of addrinfo records */
16		memset(&amp;hints, 0, sizeof(struct addrinfo));
17		hints.ai_family = AF_INET; /* IPv4 only */
18		hints.ai_socktype = SOCK_STREAM; /* Connections only */
19		if ((rc = getaddrinfo(argv[1], NULL, &amp;hints, &amp;listp)) != 0) {
20			fprintf(stderr, "getaddrinfo error: %s\n", gai_strerror(rc));
21			exit(1);
22		}
23	
24		/* Walk the list and display each associated IP address */
25		for (p = listp; p; p = p-&gt;ai_next) {
26			sockp = (struct sockaddr_in *)p-&gt;ai_addr;
27			Inet_ntop(AF_INET, &amp;(sockp-&gt;sin_addr), buf, MAXLINE);
28			printf("%s\n", buf);
29		}
30	
<span class="pcalibre pagebreak pcalibre1" id="P7000497027000000000000000008051" title="969" data-uri="chapter11.xhtml#P7000497027000000000000000008051" epub:type="pagebreak"></span>31		/* Clean up */
32		Freeaddrinfo(listp);
33	
34		exit(0);
35	}
</code></pre>
</section>
<section id="P7000497027000000000000000008052" data-uri="chapter11.xhtml#P7000497027000000000000000008052" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title1 pcalibre1" id="P7000497027000000000000000046B66" data-uri="chapter11.xhtml#P7000497027000000000000000046B66" epub:type="title"><a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000007E82.xhtml#P7000497027000000000000000007F4F"><span class="pcalibre label pcalibre1">Solution to Problem </span><span class="pcalibre label pcalibre1">11.5 </span></a>(page <a class="ulink pcalibre pcalibre4 pcalibre2 pcalibre3 pcalibre1" epub:type="pagebreak" href="fileP7000497027000000000000000007E82.xhtml#P7000497027000000000000000007F26">954</a>)</h1></header>
<p id="P7000497027000000000000000046B67" data-uri="chapter11.xhtml#P7000497027000000000000000046B67" class="pcalibre1 pcalibre calibre2">The reason that standard I/O works in CGI programs is that the CGI program running in the child process does not need to explicitly close any of its input or output streams. When the child terminates, the kernel closes all descriptors automatically.<span class="pcalibre pagebreak pcalibre1" id="P7000497027000000000000000008055" title="970" data-uri="chapter11.xhtml#P7000497027000000000000000008055" epub:type="pagebreak"></span></p>
</section>
</section></body></html>
