<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>24 Summary Dialogue on Memory Virtualization         255</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part10.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part12.htm">下一个 &gt;</a></p><p class="s25" style="padding-top: 8pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">24 Summary Dialogue on Memory Virtualization<span class="s26">         </span><span style=" color: #231F20;">255</span></p><p class="s30" style="padding-top: 19pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">II Concurrency<span class="s31">                         </span><span style=" color: #231F20;">259</span></p><p class="s25" style="padding-top: 8pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">25 A Dialogue on Concurrency<span class="s26">                   </span><span style=" color: #231F20;">261</span></p><p class="s25" style="padding-top: 8pt;padding-left: 41pt;text-indent: 0pt;line-height: 10pt;text-align: left;">26 Concurrency: An Introduction<span class="s26">                  </span><span style=" color: #231F20;">263</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">26.1 An Example: Thread Creation<span class="s26">               </span><span style=" color: #231F20;">264</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 11pt;text-align: left;">26.2 Why It Gets Worse: Shared Data<span class="s26">              </span><span style=" color: #231F20;">267</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s28" style="padding-top: 2pt;padding-left: 82pt;text-indent: 0pt;line-height: 11pt;text-align: left;">26.3 The Heart of the Problem: Uncontrolled Scheduling<span class="s26">    </span><span style=" color: #231F20;">269</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">26.4 The Wish For Atomicity<span class="s26">                   </span><span style=" color: #231F20;">271</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">26.5 One More Problem: Waiting For Another<span class="s26">          </span><span style=" color: #231F20;">273</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">26.6 Summary: Why in OS Class?<span class="s26">                </span><span style=" color: #231F20;">273</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">References<span class="s26">                             </span><span style=" color: #231F20;">275</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 11pt;text-align: left;">Homework<span class="s26">                            </span><span style=" color: #231F20;">276</span></p><p class="s25" style="padding-top: 8pt;padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: left;">27 Interlude: Thread API<span class="s26">                      </span><span style=" color: #231F20;">279</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">27.1 Thread Creation<span class="s26">                       </span><span style=" color: #231F20;">279</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">27.2 Thread Completion<span class="s26">                     </span><span style=" color: #231F20;">280</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">27.3 Locks<span class="s26">                            </span><span style=" color: #231F20;">283</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">27.4 Condition Variables<span class="s26">                     </span><span style=" color: #231F20;">285</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">27.5 Compiling and Running<span class="s26">                  </span><span style=" color: #231F20;">287</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">27.6 Summary<span class="s26">                          </span><span style=" color: #231F20;">287</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 11pt;text-align: left;">References<span class="s26">                             </span><span style=" color: #231F20;">289</span></p><p class="s25" style="padding-top: 8pt;padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: left;">28 Locks<span class="s26">                               </span><span style=" color: #231F20;">291</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">28.1 Locks: The Basic Idea<span class="s26">                    </span><span style=" color: #231F20;">291</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">28.2 Pthread Locks<span class="s26">                        </span><span style=" color: #231F20;">292</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">28.3 Building A Lock<span class="s26">                       </span><span style=" color: #231F20;">293</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">28.4 Evaluating Locks<span class="s26">                      </span><span style=" color: #231F20;">293</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">28.5 Controlling Interrupts<span class="s26">                    </span><span style=" color: #231F20;">294</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">28.6 Test And Set (Atomic Exchange)<span class="s26">              </span><span style=" color: #231F20;">295</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">28.7 Building A Working Spin Lock<span class="s26">               </span><span style=" color: #231F20;">297</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">28.8 Evaluating Spin Locks<span class="s26">                    </span><span style=" color: #231F20;">299</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">28.9 Compare-And-Swap<span class="s26">                    </span><span style=" color: #231F20;">299</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">28.10 Load-Linked and Store-Conditional<span class="s26">            </span><span style=" color: #231F20;">300</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">28.11 Fetch-And-Add<span class="s26">                       </span><span style=" color: #231F20;">302</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">28.12 Summary: So Much Spinning<span class="s26">                </span><span style=" color: #231F20;">303</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">28.13 A Simple Approach: Just Yield, Baby<span class="s26">            </span><span style=" color: #231F20;">304</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">28.14 Using Queues: Sleeping Instead Of Spinning<span class="s26">        </span><span style=" color: #231F20;">305</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">28.15 Different OS, Different Support<span class="s26">               </span><span style=" color: #231F20;">307</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">28.16 Two-Phase Locks<span class="s26">                      </span><span style=" color: #231F20;">307</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">28.17 Summary<span class="s26">                          </span><span style=" color: #231F20;">308</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 11pt;text-align: left;">References<span class="s26">                             </span><span style=" color: #231F20;">309</span></p><p class="s25" style="padding-top: 8pt;padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: left;">29 Lock-based Concurrent Data Structures<span class="s26">             </span><span style=" color: #231F20;">311</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">29.1 Concurrent Counters<span class="s26">                    </span><span style=" color: #231F20;">311</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">29.2 Concurrent Linked Lists<span class="s26">                  </span><span style=" color: #231F20;">316</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">29.3 Concurrent Queues<span class="s26">                     </span><span style=" color: #231F20;">319</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">29.4 Concurrent Hash Table<span class="s26">                   </span><span style=" color: #231F20;">320</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">29.5 Summary<span class="s26">                          </span><span style=" color: #231F20;">322</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 11pt;text-align: left;">References<span class="s26">                             </span><span style=" color: #231F20;">323</span></p><p class="s25" style="padding-top: 8pt;padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: left;">30 Condition Variables<span class="s26">                       </span><span style=" color: #231F20;">325</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">30.1 Definition and Routines<span class="s26">                   </span><span style=" color: #231F20;">326</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 11pt;text-align: left;">30.2 The Producer/Consumer (Bound Buffer) Problem<span class="s26">     </span><span style=" color: #231F20;">329</span></p><p class="s28" style="padding-top: 16pt;padding-left: 54pt;text-indent: 0pt;line-height: 11pt;text-align: left;">30.3 Covering Conditions<span class="s26">                    </span><span style=" color: #231F20;">337</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">30.4 Summary<span class="s26">                          </span><span style=" color: #231F20;">338</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 11pt;text-align: left;">References<span class="s26">                             </span><span style=" color: #231F20;">339</span></p><p class="s25" style="padding-top: 8pt;padding-left: 41pt;text-indent: 0pt;line-height: 10pt;text-align: left;">31 Semaphores<span class="s26">                            </span><span style=" color: #231F20;">341</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">31.1 Semaphores: A Definition<span class="s26">                  </span><span style=" color: #231F20;">341</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">31.2 Binary Semaphores (Locks)<span class="s26">                 </span><span style=" color: #231F20;">343</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">31.3 Semaphores As Condition Variables<span class="s26">            </span><span style=" color: #231F20;">344</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">31.4 The Producer/Consumer (Bounded-Buffer) Problem<span class="s26">    </span><span style=" color: #231F20;">346</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">31.5 Reader-Writer Locks<span class="s26">                    </span><span style=" color: #231F20;">350</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">31.6 The Dining Philosophers<span class="s26">                  </span><span style=" color: #231F20;">352</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">31.7 How To Implement Semaphores<span class="s26">              </span><span style=" color: #231F20;">355</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">31.8 Summary<span class="s26">                          </span><span style=" color: #231F20;">356</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 11pt;text-align: left;">References<span class="s26">                             </span><span style=" color: #231F20;">357</span></p><p class="s25" style="padding-top: 8pt;padding-left: 41pt;text-indent: 0pt;line-height: 10pt;text-align: left;">32 Common Concurrency Problems<span class="s26">                </span><span style=" color: #231F20;">359</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">32.1 What Types Of Bugs Exist?<span class="s26">                 </span><span style=" color: #231F20;">359</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">32.2 Non-Deadlock Bugs<span class="s26">                     </span><span style=" color: #231F20;">360</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">32.3 Deadlock Bugs<span class="s26">                       </span><span style=" color: #231F20;">363</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">32.4 Summary<span class="s26">                          </span><span style=" color: #231F20;">370</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 11pt;text-align: left;">References<span class="s26">                             </span><span style=" color: #231F20;">371</span></p><p class="s25" style="padding-top: 8pt;padding-left: 41pt;text-indent: 0pt;line-height: 10pt;text-align: left;">33 Event-based Concurrency (Advanced)<span class="s26">             </span><span style=" color: #231F20;">373</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">33.1 The Basic Idea: An Event Loop<span class="s26">               </span><span style=" color: #231F20;">373</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">33.2 An Important API: <span class="s29">select() </span>(or <span class="s29">poll()</span>)<span class="s26">         </span><span style=" color: #231F20;">374</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">33.3 Using <span class="s29">select()</span><span class="s26">                      </span><span style=" color: #231F20;">375</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">33.4 Why Simpler? No Locks Needed<span class="s26">              </span><span style=" color: #231F20;">376</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">33.5 A Problem: Blocking System Calls<span class="s26">             </span><span style=" color: #231F20;">377</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">33.6 A Solution: Asynchronous I/O<span class="s26">               </span><span style=" color: #231F20;">377</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">33.7 Another Problem: State Management<span class="s26">            </span><span style=" color: #231F20;">380</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">33.8 What Is Still Difficult With Events<span class="s26">             </span><span style=" color: #231F20;">381</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">33.9 Summary<span class="s26">                          </span><span style=" color: #231F20;">381</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 11pt;text-align: left;">References<span class="s26">                             </span><span style=" color: #231F20;">382</span></p><p class="s25" style="padding-top: 8pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">34 Summary Dialogue on Concurrency<span class="s26">              </span><span style=" color: #231F20;">383</span></p><p class="s30" style="padding-top: 19pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">III Persistence<span class="s31">                          </span><span style=" color: #231F20;">385</span></p><p class="s25" style="padding-top: 8pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">35 A Dialogue on Persistence<span class="s26">                    </span><span style=" color: #231F20;">387</span></p><p class="s25" style="padding-top: 8pt;padding-left: 41pt;text-indent: 0pt;line-height: 10pt;text-align: left;">36 I/O Devices<span class="s26">                            </span><span style=" color: #231F20;">389</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">36.1 System Architecture<span class="s26">                     </span><span style=" color: #231F20;">389</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">36.2 A Canonical Device<span class="s26">                     </span><span style=" color: #231F20;">390</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">36.3 The Canonical Protocol<span class="s26">                   </span><span style=" color: #231F20;">391</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">36.4 Lowering CPU Overhead With Interrupts<span class="s26">         </span><span style=" color: #231F20;">392</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 11pt;text-align: left;">36.5 More Efficient Data Movement With DMA<span class="s26">         </span><span style=" color: #231F20;">393</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s28" style="padding-top: 2pt;padding-left: 82pt;text-indent: 0pt;line-height: 11pt;text-align: left;">36.6 Methods Of Device Interaction<span class="s26">               </span><span style=" color: #231F20;">394</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">36.7 Fitting Into The OS: The Device Driver<span class="s26">           </span><span style=" color: #231F20;">395</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">36.8 Case Study: A Simple IDE Disk Driver<span class="s26">           </span><span style=" color: #231F20;">396</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">36.9 Historical Notes<span class="s26">                       </span><span style=" color: #231F20;">399</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">36.10 Summary<span class="s26">                          </span><span style=" color: #231F20;">399</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 11pt;text-align: left;">References<span class="s26">                             </span><span style=" color: #231F20;">400</span></p><p class="s25" style="padding-top: 8pt;padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: left;">37 Hard Disk Drives<span class="s26">                         </span><span style=" color: #231F20;">403</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">37.1 The Interface<span class="s26">                         </span><span style=" color: #231F20;">403</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">37.2 Basic Geometry<span class="s26">                       </span><span style=" color: #231F20;">404</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">37.3 A Simple Disk Drive<span class="s26">                    </span><span style=" color: #231F20;">404</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">37.4 I/O Time: Doing The Math<span class="s26">                 </span><span style=" color: #231F20;">408</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">37.5 Disk Scheduling<span class="s26">                       </span><span style=" color: #231F20;">412</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">37.6 Summary<span class="s26">                          </span><span style=" color: #231F20;">416</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">References<span class="s26">                             </span><span style=" color: #231F20;">417</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 11pt;text-align: left;">Homework<span class="s26">                            </span><span style=" color: #231F20;">418</span></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part10.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part12.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
