<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>12.3  Magnetic Disks</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part233.htm">&lt; 上一个</a><span> | </span><a href="../database.html">内容</a><span> | </span><a href="part235.htm">下一个 &gt;</a></p><p class="s65" style="padding-top: 7pt;padding-left: 72pt;text-indent: 0pt;text-align: left;">12.3  <span style=" color: #00AEEF;">Magnetic Disks</span></p><p style="padding-top: 12pt;padding-left: 119pt;text-indent: 0pt;text-align: justify;">Magnetic disks provide the bulk of secondary storage for modern computer systems. Magnetic disk capacities have been growing steadily year after year, but the storage requirements of large applications have also been growing very fast, in some cases even faster than the growth rate of disk capacities. Very large databases at “web-scale” require thousands to tens of thousands of disks to store their data.<span class="s76">1</span></p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">In recent years, <span class="s44">SSD </span>storage sizes have grown rapidly, and the cost of <span class="s44">SSDs </span>has come down signiﬁcantly; the increasing aﬀordability of <span class="s44">SSDs </span>coupled with their much better performance has resulted in <span class="s44">SSDs </span>increasingly becoming a competitor to mag- netic disk storage for several applications. However, the fact that the per-byte cost of storage on <span class="s44">SSDs </span>is around six to eight times the per-byte cost of storage on magnetic disks means that magnetic disks continue to be the preferred choice for storing very large volumes of data in many applications. Example of such data include video and image data, as well as data that is accessed less frequently, such as user-generated data in many web-scale applications. <span class="s44">SSDs </span>have however, increasingly become the preferred choice for enterprise data.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s68" style="padding-left: 119pt;text-indent: 0pt;text-align: left;">12.3.1 Physical Characteristics of Disks</p><p style="padding-top: 6pt;padding-left: 119pt;text-indent: 0pt;text-align: justify;">Figure 12.2 shows a schematic diagram of a magnetic disk, while Figure 12.3 shows the internals of an actual magnetic disk. Each disk <span class="s63">platter </span>has a ﬂat, circular shape. Its two surfaces are covered with a magnetic material, and information is recorded on the surfaces. Platters are made from rigid metal or glass.</p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">When the disk is in use, a drive motor spins it at a constant high speed, typically 5400 to 10,000 revolutions per minute, depending on the model. There is a read-write head positioned just above the surface of the platter. The disk surface is logically di-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 119pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="95" height="1" alt="image" src="Image_2531.png"/></span></p><p class="s77" style="padding-top: 3pt;padding-left: 119pt;text-indent: 0pt;text-align: justify;">1<span class="s78">We study later, in Chapter 21, how to partition such large amounts of data across multiple nodes in a parallel computing system.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="282" height="263" alt="image" src="Image_2532.png"/></span></p><p class="s80" style="text-indent: 0pt;line-height: 9pt;text-align: left;">track <i>t</i></p><p style="text-indent: 0pt;text-align: left;"/><p class="s80" style="text-indent: 0pt;line-height: 9pt;text-align: left;">spindle</p><p style="text-indent: 0pt;text-align: left;"/><p class="s80" style="text-indent: 0pt;line-height: 9pt;text-align: left;">sector <i>s</i></p><p style="text-indent: 0pt;text-align: left;"/><p class="s80" style="text-indent: 0pt;line-height: 9pt;text-align: left;">cylinder <i>c</i></p><p style="text-indent: 0pt;text-align: left;"/><p class="s80" style="padding-left: 9pt;text-indent: -9pt;text-align: left;">read–write head</p><p style="text-indent: 0pt;text-align: left;"/><p class="s80" style="text-indent: 0pt;line-height: 9pt;text-align: left;">platter</p><p style="text-indent: 0pt;text-align: left;"/><p class="s80" style="text-indent: 0pt;line-height: 9pt;text-align: left;">arm</p><p style="text-indent: 0pt;text-align: left;"/><p class="s80" style="padding-top: 4pt;padding-left: 119pt;text-indent: 0pt;text-align: right;">arm assembly</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s80" style="padding-top: 4pt;padding-left: 55pt;text-indent: 0pt;text-align: center;">rotation</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s73" style="padding-top: 4pt;padding-left: 59pt;text-indent: 0pt;text-align: center;">Figure 12.2 <span class="s74">Schematic diagram of a magnetic disk.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 88pt;text-indent: 0pt;text-align: justify;">vided into <span class="s63">tracks</span>, which are subdivided into <span class="s63">sectors</span>. A <span class="s63">sector </span>is the smallest unit of information that can be read from or written to the disk. Sector sizes are typically 512 bytes, and current generation disks have between 2 billion and 24 billion sectors. The inner tracks (closer to the spindle) are of smaller length than the outer tracks, and the outer tracks contain more sectors than the inner tracks.</p><p style="padding-left: 88pt;text-indent: 17pt;text-align: justify;">The <span class="s63">read – write head </span>stores information on a sector magnetically as reversals of the direction of magnetization of the magnetic material.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 165pt;text-indent: 0pt;text-align: left;"><span><img width="289" height="208" alt="image" src="Image_2533.gif"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s73" style="padding-top: 4pt;padding-left: 59pt;text-indent: 0pt;text-align: center;">Figure 12.3 <span class="s74">Internals of an actual magnetic disk.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 119pt;text-indent: 17pt;text-align: justify;">Each side of a platter of a disk has a read-write head that moves across the platter to access diﬀerent tracks. A disk typically contains many platters, and the read-write heads of all the tracks are mounted on a single assembly called a <span class="s63">disk arm </span>and move together. The disk platters mounted on a spindle and the heads mounted on a disk arm are together known as <span class="s63">head-disk assemblies</span>. Since the heads on all the platters move together, when the head on one platter is on the <i>i</i>th track, the heads on all other platters are also on the <i>i</i>th track of their respective platters. Hence, the <i>i</i>th tracks of all the platters together are called the <i>i</i>th <span class="s63">cylinder</span>.</p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">The read-write heads are kept as close as possible to the disk surface to increase the recording density. The head typically ﬂoats or ﬂies only microns from the disk surface; the spinning of the disk creates a small breeze, and the head assembly is shaped so that the breeze keeps the head ﬂoating just above the disk surface. Because the head ﬂoats so close to the surface, platters must be machined carefully to be ﬂat.</p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">Head crashes can be a problem. If the head contacts the disk surface, the head can scrape the recording medium oﬀ the disk, destroying the data that had been there. In older-generation disks, the head touching the surface caused the removed medium to become airborne and to come between the other heads and their platters, causing more crashes; a head crash could thus result in failure of the entire disk. Current-generation disk drives use a thin ﬁlm of magnetic metal as recording medium. They are much less susceptible to failure of the entire disk, but are susceptible to failure of individual sectors.</p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">A <span class="s63">disk controller </span>interfaces between the computer system and the actual hardware of the disk drive; in modern disk systems, the disk controller is implemented within the disk drive unit. A disk controller accepts high-level commands to read or write a sector, and initiates actions, such as moving the disk arm to the right track and actually reading or writing the data. Disk controllers also attach <span class="s63">checksums </span>to each sector that is written; the checksum is computed from the data written to the sector. When the sector is read back, the controller computes the checksum again from the retrieved data and compares it with the stored checksum; if the data are corrupted, with a high probability the newly computed checksum will not match the stored checksum. If such an error occurs, the controller will retry the read several times; if the error continues to occur, the controller will signal a read failure.</p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">Another interesting task that disk controllers perform is <span class="s63">remapping of bad sectors</span>. If the controller detects that a sector is damaged when the disk is initially formatted, or when an attempt is made to write the sector, it can logically map the sector to a diﬀerent physical location (allocated from a pool of extra sectors set aside for this purpose). The remapping is noted on disk or in non-volatile memory, and the write is carried out on the new location.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s68" style="padding-left: 119pt;text-indent: 0pt;text-align: left;">12.3.2 Performance Measures of Disks</p><p style="padding-top: 6pt;padding-left: 119pt;text-indent: 0pt;text-align: left;">The main measures of the qualities of a disk are capacity, access time, data-transfer rate, and reliability.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s63" style="padding-top: 4pt;padding-left: 88pt;text-indent: 17pt;text-align: justify;">Access time <span class="p">is the time from when a read or write request is issued to when data transfer begins. To access (i.e., to read or write) data on a given sector of a disk, the arm ﬁrst must move so that it is positioned over the correct track, and then must wait for the sector to appear under it as the disk rotates. The time for repositioning the arm is called the </span>seek time<span class="p">, and it increases with the distance that the arm must move. Typical seek times range from 2 to 20 milliseconds depending on how far the track is from the initial arm position. Smaller disks tend to have lower seek times since the head has to travel a smaller distance.</span></p><p style="padding-left: 88pt;text-indent: 17pt;text-align: justify;">The <span class="s63">average seek time </span>is the average of the seek times, measured over a sequence of (uniformly distributed) random requests. If all tracks have the same number of sectors, and we disregard the time required for the head to start moving and to stop moving, we can show that the average seek time is one-third the worst-case seek time. Taking these factors into account, the average seek time is around one-half of the maximum seek time. Average seek times currently range between 4 and 10 milliseconds, depending on the disk model.<span class="s76">2</span></p><p style="padding-left: 88pt;text-indent: 17pt;text-align: justify;">Once the head has reached the desired track, the time spent waiting for the sector to be accessed to appear under the head is called the <span class="s63">rotational latency time</span>. Rotational speeds of disks today range from 5400 rotations per minute (90 rotations per second) up to 15,000 rotations per minute (250 rotations per second), or, equivalently, 4 mil- liseconds to 11.1 milliseconds per rotation. On an average, one-half of a rotation of the disk is required for the beginning of the desired sector to appear under the head. Thus, the <span class="s63">average latency time </span>of the disk is one-half the time for a full rotation of the disk. Disks with higher rotational speeds are used for applications where latency needs to be minimized.</p><p style="padding-left: 88pt;text-indent: 17pt;text-align: justify;">The access time is then the sum of the seek time and the latency; average access times range from 5 to 20 milliseconds depending on the disk model. Once the ﬁrst sector of the data to be accessed has come under the head, data transfer begins. The <span class="s63">data-transfer rate </span>is the rate at which data can be retrieved from or stored to the disk. Current disk systems support maximum transfer rates of 50 to 200 megabytes per sec- ond; transfer rates are signiﬁcantly lower than the maximum transfer rates for inner tracks of the disk, since they have fewer sectors. For example, a disk with a maximum transfer rate of 100 megabytes per second may have a sustained transfer rate of around 30 megabytes per second on its inner tracks.</p><p style="padding-left: 88pt;text-indent: 17pt;text-align: justify;">Requests for disk <span class="s44">I/O </span>are typically generated by the ﬁle system but can be generated directly by the database system. Each request speciﬁes the address on the disk to be referenced; that address is in the form of a <i>block number</i>.A <span class="s63">disk block </span>is a logical unit of storage allocation and retrieval, and block sizes today typically range from 4 to 16</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 88pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="95" height="1" alt="image" src="Image_2534.png"/></span></p><p class="s78" style="padding-top: 3pt;padding-left: 88pt;text-indent: 0pt;text-align: justify;"><span class="s77">2</span>Smaller 2.5-inch diameter disks have a lesser arm movement distance than larger 3.5-inch disks, and thus have lower seek times. As a result 2.5-inch disks have been the preferred choice for applications where latency needs to be mini- mized, although <span class="s153">SSDs </span>are increasingly preferred for such applications. Larger 3.5-inch diameter disks have a lower cost per byte and are used in data storage applications where cost is an important factor.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 119pt;text-indent: 0pt;text-align: justify;"><a name="bookmark258">kilobytes. Data are transferred between disk and main memory in units of blocks. The term </a><span class="s63">page </span>is often used to refer to blocks, although in a few contexts (such as ﬂash memory) they refer to diﬀerent things.<a name="bookmark293">&zwnj;</a></p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">A sequence of requests for blocks from disk may be classiﬁed as a sequential access pattern or a random access pattern. In a <span class="s63">sequential access </span>pattern, successive requests are for successive block numbers, which are on the same track, or on adjacent tracks. To read blocks in sequential access, a disk seek may be required for the ﬁrst block, but successive requests would either not require a seek, or require a seek to an adjacent track, which is faster than a seek to a track that is farther away. Data transfer rates are highest with a sequential access pattern, since seek time is minimal.</p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">In contrast, in a <span class="s63">random access </span>pattern, successive requests are for blocks that are randomly located on disk. Each such request would require a seek. The number of <span class="s64">I/O </span><span class="s84">operations per second </span>(<span class="s64">IOPS</span>), that is, the number random block accesses that can be satisﬁed by a disk in a second, depends on the access time, and the block size, and the data transfer rate of the disk. With a 4-kilobyte block size, current generation disks support between 50 and 200 <span class="s44">IOPS</span>, depending on the model. Since only a small amount (one block) of data are read per seek, the data transfer rate is signiﬁcantly lower with a random access pattern than with a sequential access pattern.</p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">The ﬁnal commonly used measure of a disk is the <span class="s63">mean time to failure </span>(<span class="s64">MTTF</span>),<span class="s76">3</span> which is a measure of the reliability of the disk. The mean time to failure of a disk (or of any other system) is the amount of time that, on average, we can expect the system to run continuously without any failure. According to vendors’ claims, the mean time to failure of disks today ranges from 500,000 to 1,200,000 hours — about 57 to 136 years. In practice the claimed mean time to failure is computed on the probability of failure when the disk is new— the ﬁgure means that given 1000 relatively new disks, if the <span class="s44">MTTF </span>is 1,200,000 hours, on an average one of them will fail in 1200 hours. A mean time to failure of 1,200,000 hours does not imply that the disk can be expected to function for 136 years! Most disks have an expected life span of about 5 years and have signiﬁcantly higher rates of failure once they become more than a few years old.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part233.htm">&lt; 上一个</a><span> | </span><a href="../database.html">内容</a><span> | </span><a href="part235.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
