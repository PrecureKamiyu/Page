<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>12.4  Flash Memory</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part234.htm">&lt; 上一个</a><span> | </span><a href="../database.html">内容</a><span> | </span><a href="part236.htm">下一个 &gt;</a></p><p class="s65" style="padding-top: 7pt;padding-left: 72pt;text-indent: 0pt;text-align: left;">12.4  <span style=" color: #00AEEF;">Flash Memory</span></p><p style="padding-top: 11pt;padding-left: 119pt;text-indent: 0pt;text-align: justify;">There are two types of ﬂash memory, <span class="s44">NOR </span>ﬂash and <span class="s44">NAND </span>ﬂash. <span class="s44">NAND </span>ﬂash is the variant that is predominantly used for data storage. Reading from <span class="s44">NAND </span>ﬂash requires an entire <i>page </i>of data, which is very commonly 4096 bytes, to be fetched from <span class="s44">NAND </span>ﬂash into main memory. Pages in a <span class="s44">NAND </span>ﬂash are thus similar to sectors in a magnetic disk.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 119pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="95" height="1" alt="image" src="Image_2535.png"/></span></p><p class="s80" style="padding-top: 3pt;padding-left: 119pt;text-indent: 0pt;text-align: justify;"><span class="s77">3</span><span class="s78">The term </span><span class="s162">mean time between failures </span>(<span class="s307">MTBF</span>) is often used to refer to <span class="s161">MTTF </span>in the context of disk drives, although technically <span class="s161">MTBF </span>should only be used in the context of systems that can be repaired after failure, and may fail again; <span class="s161">MTBF </span>would then be the sum of <span class="s161">MTTF </span>and the mean time to repair. Magnetic disks can almost never be repaired after a failure.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 88pt;text-indent: 17pt;text-align: justify;">Solid-state disks (<span class="s44">SSDs</span>) are built using <span class="s44">NAND </span>ﬂash and provide the same block- oriented interface as disk storage. Compared to magnetic disks, <span class="s44">SSDs </span>can provide much faster random access: the latency to retrieve a page of data ranges from 20 to 100 mi- croseconds for <span class="s44">SSDs</span>, whereas a random access on disk would take 5 to 10 milliseconds. The data transfer rate of <span class="s44">SSDs </span>is higher than that of magnetic disks and is usually lim- ited by the interconnect technology; transfer rates range from around 500 megabytes per second with <span class="s44">SATA </span>interfaces, up to 3 gigabytes per second using <span class="s44">NVM</span>e <span class="s44">PCI</span>e in- terfaces, depending on the speciﬁc <span class="s44">SSD </span>model, in contrast to a maximum of about 200 megabytes per second with magnetic disk. The power consumption of <span class="s44">SSDs </span>is also signiﬁcantly lower than that of magnetic disks.</p><p style="padding-left: 88pt;text-indent: 17pt;text-align: justify;">Writes to ﬂash memory are a little more complicated. A write to a page of ﬂash memory typically takes about 100 microseconds. However, once written, a page of ﬂash memory cannot be directly overwritten. Instead, it has to be erased and rewritten subsequently. The erase operation must be performed on a group of pages, called an <span class="s63">erase block</span>, erasing all the pages in the block, and takes about 2 to 5 milliseconds. An erase block (often referred to as just “block” in ﬂash literature), is typically 256 kilobytes to 1 megabyte, and contains around 128 to 256 pages. Further, there is a limit to how many times a ﬂash page can be erased, typically around 100,000 to 1,000,000 times. Once this limit is reached, errors in storing bits are likely to occur.</p><p style="padding-left: 88pt;text-indent: 17pt;text-align: justify;">Flash memory systems limit the impact of both the slow erase speed and the update limits by mapping logical page numbers to physical page numbers. When a logical page is updated, it can be remapped to any already erased physical page, and the original location can be erased later. Each physical page has a small area of memory where its logical address is stored; if the logical address is remapped to a diﬀerent physical page, the original physical page is marked as deleted. Thus, by scanning the physical pages, we can ﬁnd where each logical page resides. The logical-to-physical page mapping is replicated in an in-memory <span class="s63">translation table </span>for quick access.</p><p style="padding-left: 88pt;text-indent: 17pt;text-align: justify;">Blocks containing multiple deleted pages are periodically erased, taking care to ﬁrst copy nondeleted pages in those blocks to a diﬀerent block (the translation table is updated for these nondeleted pages). Since each physical page can be updated only a ﬁxed number of times, physical pages that have been erased many times are assigned “cold data,” that is, data that are rarely updated, while pages that have not been erased many times are used to store “hot data,” that is, data that are updated frequently. This principle of evenly distributing erase operations across physical blocks is called <span class="s63">wear leveling </span>and is usually performed transparently by ﬂash-memory controllers. If a phys- ical page is damaged due to an excessive number of updates, it can be removed from usage, without aﬀecting the ﬂash memory as a whole.</p><p style="padding-left: 88pt;text-indent: 17pt;text-align: justify;">All the above actions are carried out by a layer of software called the <span class="s63">ﬂash transla- tion layer</span>; above this layer, ﬂash storage looks identical to magnetic disk storage, pro- viding the same page/sector-oriented interface, except that ﬂash storage is much faster. File systems and database storage structures can thus see an identical logical view of the underlying storage structure, regardless of whether it is ﬂash or magnetic storage.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s73" style="padding-left: 43pt;text-indent: 0pt;text-align: center;">Note 12.1 <span class="s146">STORAGE CLASS MEMORY</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 9pt;text-indent: 0pt;text-align: justify;">Although ﬂash is the most widely used type of non-volatile memory, there have been a number of alternative non-volatile memory technologies developed over the years. Several of these technologies allow direct read and write access to indi- vidual bytes or words, avoiding the need to read or write in units of pages (and also avoiding the erase overhead of <span class="s44">NAND </span>ﬂash). Such types of non-volatile memory are referred to as <span class="s63">storage class memory</span>, since they can be treated as a large non- volatile block of memory. The 3D-XPoint memory technology, developed by Intel and Micron, is a recently developed storage class memory technology. In terms of cost per byte, latency of access, and capacity, 3D-XPoint memory lies in be- tween main memory and ﬂash memory. Intel Optane <span class="s44">SSD</span>s based on 3D-XPoint started shipping in 2017, and Optane persistent memory modules were announced in 2018.</p><p style="padding-left: 120pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s42" style="padding-left: 137pt;text-indent: 0pt;text-align: left;">SSD <span class="s43">performance is usually expressed in terms of:</span></p><p style="padding-top: 8pt;padding-left: 145pt;text-indent: -16pt;text-align: justify;"><span class="s63">1. </span>The <i>number of random block reads per second</i>, with 4-kilobyte blocks being the standard. Typical values in 2018 are about 10,000 random reads per second (also referred to as 10,000 <span class="s44">IOPS</span>) with 4-kilobyte blocks, although some models support higher rates.</p><p style="padding-left: 145pt;text-indent: 14pt;text-align: justify;">Unlike magnetic disks, <span class="s44">SSDs </span>can support multiple random requests in paral- lel, with 32 parallel requests being commonly supported; a ﬂash disk with <span class="s44">SATA </span>interface supports nearly 100,000 random 4-kilobyte block reads in a second with 32 requests sent in parallel, while <span class="s44">SSDs </span>connected using <span class="s44">NVM</span>e <span class="s44">PCI</span>e can support over 350,000 random 4-kilobyte block reads per second. These numbers are spec- iﬁed as QD-1 for rates without parallelism and QD-n for n-way parallelism, with QD-32 being the most commonly used number.</p><p style="padding-top: 6pt;padding-left: 145pt;text-indent: -17pt;text-align: justify;"><span class="s63">2. </span>The <i>data transfer rate </i>for sequential reads and sequential writes. Typical rates for both sequential reads and sequential writes are 400 to 500 megabytes per second for <span class="s44">SSDs </span>with a <span class="s44">SATA </span>3 interface, and 2 to 3 gigabytes per second for <span class="s44">SSDs </span>using <span class="s44">NVM</span>e over the <span class="s44">PCI</span>e 3.0x4 interface.</p><p style="padding-top: 6pt;padding-left: 145pt;text-indent: -17pt;text-align: justify;"><span class="s63">3. </span>The <i>number of random block writes per second</i>, with 4-kilobyte blocks being the standard. Typical values in 2018 are about 40,000 random 4-kilobyte writes per second for QD-1 (without parallelism), and around 100,000 <span class="s44">IOPS </span>for QD-32. although some models support higher rates for both QD-1 and QD-32.</p><p class="s63" style="padding-top: 8pt;padding-left: 119pt;text-indent: 17pt;text-align: justify;">Hybrid disk drives <span class="p">are hard-disk systems that combine magnetic storage with a smaller amount of ﬂash memory, which is used as a cache for frequently accessed data. Frequently accessed data that are rarely updated are ideal for caching in ﬂash memory.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 88pt;text-indent: 0pt;text-align: justify;"><a name="bookmark259">Modern </a><span class="s44">SAN </span>and <span class="s44">NAS </span>systems support the use of a combination of magnetic disks and <span class="s44">SSDs</span>, and they can be conﬁgured to use the <span class="s44">SSDs </span>as a cache for data that reside on magnetic disks.<a name="bookmark294">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part234.htm">&lt; 上一个</a><span> | </span><a href="../database.html">内容</a><span> | </span><a href="part236.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
