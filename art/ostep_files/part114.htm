<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Summary Dialogue on CPU Virtualization</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part113.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part115.htm">下一个 &gt;</a></p><p class="s8" style="padding-top: 3pt;padding-left: 45pt;text-indent: 0pt;text-align: center;">Summary Dialogue on CPU Virtualization</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-top: 9pt;padding-left: 41pt;text-indent: 0pt;text-align: justify;">Professor: <i>So, Student, did you learn anything?</i></p><p class="s27" style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Student: <i>Well, Professor, that seems like a loaded question. I think you only want me to say “yes.”</i></p><p class="s27" style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Professor: <i>That’s true. But it’s also still an honest question. Come on, give a professor a break, will you?</i></p><p class="s6" style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;line-height: 92%;text-align: justify;"><b>Student: </b>OK, OK. I think I did learn a few things. First, I learned a little about how the OS virtualizes the CPU. There are a bunch of important <b>mechanisms </b>that I had to understand to make sense of this: traps and trap handlers, timer interrupts, and how the OS and the hardware have to carefully save and restore state when switching between processes.</p><p class="s27" style="padding-top: 2pt;padding-left: 41pt;text-indent: 0pt;text-align: justify;">Professor: <i>Good, good!</i></p><p class="s27" style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Student: <i>All those interactions do seem a little complicated though; how can I learn more?</i></p><p class="s27" style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Professor: <i>Well, that’s a good question. I think there is no substitute for doing; just reading about these things doesn’t quite give you the proper sense. Do the class projects and I bet by the end it will all kind of make sense.</i></p><p class="s27" style="padding-top: 2pt;padding-left: 41pt;text-indent: 0pt;text-align: justify;">Student: <i>Sounds good. What else can I tell you?</i></p><p class="s27" style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Professor: <i>Well, did you get some sense of the philosophy of the OS in your quest to understand its basic machinery?</i></p><p class="s6" style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;line-height: 92%;text-align: justify;"><b>Student: </b>Hmm... I think so. It seems like the OS is fairly paranoid. It wants to make sure it stays in charge of the machine. While it wants a program to run as efficiently as possible (and hence the whole reasoning behind <b>limited direct execution</b>), the OS also wants to be able to say “Ah! Not so fast my friend” in case of an errant or malicious process. Paranoia rules the day, and certainly keeps the OS in charge of the machine. Perhaps that is why we think of the OS as a resource manager.</p><p class="s27" style="padding-top: 2pt;padding-left: 41pt;text-indent: 0pt;text-align: justify;">Professor: <i>Yes indeed – sounds like you are starting to put it together! Nice.</i></p><p class="s27" style="padding-top: 2pt;padding-left: 41pt;text-indent: 0pt;text-align: justify;">Student: <i>Thanks.</i></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-top: 3pt;padding-left: 68pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Professor: <i>And what about the policies on top of those mechanisms – any inter- esting lessons there?</i></p><p class="s27" style="padding-top: 3pt;padding-left: 68pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Student: <i>Some lessons to be learned there for sure. Perhaps a little obvious, but obvious can be good. Like the notion of bumping short jobs to the front of the queue – I knew that was a good idea ever since the one time I was buying some gum at the store, and the guy in front of me had a credit card that wouldn’t work. He was no short job, let me tell you.</i></p><p class="s27" style="padding-top: 2pt;padding-left: 68pt;text-indent: 0pt;text-align: justify;">Professor: <i>That sounds oddly rude to that poor fellow. What else?</i></p><p class="s27" style="padding-top: 3pt;padding-left: 68pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Student: <i>Well, that you can build a smart scheduler that tries to be like SJF and RR all at once – that MLFQ was pretty neat. Building up a real scheduler seems difficult.</i></p><p class="s27" style="padding-top: 3pt;padding-left: 68pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Professor: <i>Indeed it is. That’s why there is still controversy to this day over which scheduler to use; see the Linux battles between CFS, BFS, and the O(1) scheduler, for example. And no, I will not spell out the full name of BFS.</i></p><p class="s27" style="padding-top: 3pt;padding-left: 68pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Student: <i>And I won’t ask you to! These policy battles seem like they could rage forever; is there really a right answer?</i></p><p class="s27" style="padding-top: 3pt;padding-left: 68pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Professor: <i>Probably not. After all, even our own metrics are at odds: if your scheduler is good at turnaround time, it’s bad at response time, and vice versa. As Lampson said, perhaps the goal isn’t to find the best solution, but rather to avoid disaster.</i></p><p class="s27" style="padding-top: 2pt;padding-left: 68pt;text-indent: 0pt;text-align: justify;">Student: <i>That’s a little depressing.</i></p><p class="s27" style="padding-top: 3pt;padding-left: 68pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Professor: <i>Good engineering can be that way. And it can also be uplifting! It’s just your perspective on it, really. I personally think being pragmatic is a good thing, and pragmatists realize that not all problems have clean and easy solutions. Anything else that caught your fancy?</i></p><p class="s27" style="padding-top: 3pt;padding-left: 68pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Student: <i>I really liked the notion of gaming the scheduler; it seems like that might be something to look into when I’m next running a job on Amazon’s EC2 service. Maybe I can steal some cycles from some other unsuspecting (and more importantly, OS-ignorant) customer!</i></p><p class="s27" style="padding-top: 3pt;padding-left: 68pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Professor: <i>It looks like I might have created a monster! Professor Frankenstein is not what I’d like to be called, you know.</i></p><p class="s27" style="padding-top: 3pt;padding-left: 68pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Student: <i>But isn’t that the idea? To get us excited about something, so much so that we look into it on our own? Lighting fires and all that?</i></p><p class="s27" style="padding-top: 2pt;padding-left: 68pt;text-indent: 0pt;text-align: justify;">Professor: <i>I guess so. But I didn’t think it would work!</i></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part113.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part115.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
