<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Locality and The Fast File System</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part451.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part453.htm">下一个 &gt;</a></p><p class="s8" style="padding-top: 2pt;padding-left: 113pt;text-indent: 0pt;text-align: left;">Locality and The Fast File System</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 41pt;text-indent: 0pt;line-height: 89%;text-align: justify;">When the U<span class="s7">NIX </span>operating system was first introduced, the U<span class="s7">NIX </span>wizard himself Ken Thompson wrote the first file system. We will call that the “old U<span class="s7">NIX </span>file system”, and it was really simple. Basically, its data struc- tures looked like this on the disk:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:77.0848pt" cellspacing="0"><tr style="height:21pt"><td style="width:11pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s213" style="padding-top: 4pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">S</p></td><td style="width:54pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#A8A8A8"><p class="s213" style="padding-top: 4pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">Inodes</p></td><td style="width:151pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" bgcolor="#D3D3D3"><p class="s213" style="padding-top: 4pt;padding-left: 64pt;padding-right: 63pt;text-indent: 0pt;text-align: center;">Data</p></td></tr></table><p style="padding-top: 7pt;padding-left: 41pt;text-indent: 11pt;line-height: 89%;text-align: justify;">The super block (S) contained information about the entire file system: how big the volume is, how many inodes there are, a pointer to the head of a free list of blocks, and so forth. The inode region of the disk contained all the inodes for the file system. Finally, most of the disk was taken up by data blocks.</p><p style="padding-left: 41pt;text-indent: 11pt;line-height: 89%;text-align: justify;">The good thing about the old file system was that it was simple, and supported the basic abstractions the file system was trying to deliver: files and the directory hierarchy. This easy-to-use system was a real step forward from the clumsy, record-based storage systems of the past, and the directory hierarchy a true advance over simpler, one-level hierarchies provided by earlier systems.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="toc">&nbsp;</p><div class="toc"><a class="toc0" href="part453.htm">41.1 The Problem: Poor Performance</a><a class="toc0" href="part454.htm">41.2 FFS: Disk Awareness Is The Solution</a><a class="toc0" href="part455.htm">41.3 Organizing Structure: The Cylinder Group</a><a class="toc0" href="part456.htm">41.4 Policies: How To Allocate Files and Directories</a><a class="toc0" href="part457.htm">41.5 Measuring File Locality</a><a class="toc0" href="part458.htm">41.6 The Large-File Exception</a><a class="toc0" href="part459.htm">41.7 A Few Other Things About FFS</a><a class="toc0" href="part460.htm">41.8 Summary</a><a class="toc0" href="part461.htm">References</a></div><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part451.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part453.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
