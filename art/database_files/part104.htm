<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>4.2   Views</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part103.htm">&lt; 上一个</a><span> | </span><a href="../database.html">内容</a><span> | </span><a href="part105.htm">下一个 &gt;</a></p><p class="s65" style="padding-top: 4pt;padding-left: 72pt;text-indent: 0pt;text-align: left;"><a name="bookmark59">4.2   </a><span style=" color: #00AEEF;">Views</span><a name="bookmark100">&zwnj;</a></p><p style="padding-top: 12pt;padding-left: 119pt;text-indent: 0pt;text-align: justify;">It is not always desirable for all users to see the entire set of relations in the database. In Section 4.7, we shall see how to use the <span class="s44">SQL </span>authorization mechanism to restrict access to relations, but security considerations may require that only certain data in a relation be hidden from a user. Consider a clerk who needs to know an instructor’s <span class="s44">ID</span>, name, and department name, but does not have authorization to see the instructor’s salary amount. This person should see a relation described in <span class="s44">SQL </span>by:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_652.png"/></span></p><p style="padding-left: 247pt;text-indent: 0pt;text-align: left;"><b>select </b><span class="s69">ID</span>, <i>name</i>, <i>dept name</i></p><p class="s46" style="padding-left: 247pt;text-indent: 0pt;text-align: left;">from <i>instructor</i><span class="p">;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 119pt;text-indent: 0pt;text-align: justify;">Aside from security concerns, we may wish to create a personalized collection of “vir- tual” relations that is better matched to a certain user’s intuition of the structure of the enterprise. In our university example, we may want to have a list of all course sections oﬀered by the Physics department in the Fall 2017 semester, with the building and room number of each section. The relation that we would create for obtaining such a list is:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_653.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_654.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_655.png"/></span></p><p class="s13" style="padding-left: 192pt;text-indent: 0pt;text-align: left;"><b>select </b>course<span class="p">.</span>course id<span class="p">, </span>sec id<span class="p">, </span>building<span class="p">, </span>room number</p><p class="s13" style="padding-left: 192pt;text-indent: 0pt;text-align: left;"><b>from </b>course<span class="p">, </span>section</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_656.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_657.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_658.png"/></span></p><p class="s13" style="padding-left: 219pt;text-indent: -26pt;text-align: left;"><b>where </b>course<span class="p">.</span>course id <span class="s15">= </span>section<span class="p">.</span>course id <b>and </b>course<span class="p">.</span>dept name <span class="s15">= </span><span class="p">&#39;Physics&#39; </span><b>and </b>section<span class="p">.</span>semester <span class="s15">= </span><span class="p">&#39;Fall&#39;</span></p><p class="s13" style="padding-left: 219pt;text-indent: 0pt;text-align: left;"><b>and </b>section<span class="p">.</span>year <span class="s15">= </span><span class="p">2017;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">It is possible to compute and store the results of these queries and then make the stored relations available to users. However, if we did so, and the underlying data in the relations <i>instructor</i>, <i>course</i>, or <i>section </i>changed, the stored query results would then no longer match the result of reexecuting the query on the relations. In general, it is a bad idea to compute and store query results such as those in the above examples (although there are some exceptions that we study later).</p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">Instead, <span class="s44">SQL </span>allows a “virtual relation” to be deﬁned by a query, and the relation conceptually contains the result of the query. The virtual relation is not precomputed and stored but instead is computed by executing the query whenever the virtual relation is used. We saw a feature for this in Section 3.8.6, where we described the <b>with </b>clause. The <b>with </b>clause allows us to to assign a name to a subquery for use as often as desired, but in one particular query only. Here, we present a way to extend this concept beyond a single query by deﬁning a <span class="s63">view</span>. It is possible to support a large number of views on top of any given set of actual relations.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s68" style="padding-top: 4pt;padding-left: 88pt;text-indent: 0pt;text-align: left;">4.2.1 View Definition</p><p style="padding-top: 6pt;padding-left: 88pt;text-indent: 0pt;text-align: justify;">We deﬁne a view in <span class="s44">SQL </span>by using the <b>create view </b>command. To deﬁne a view, we must give the view a name and must state the query that computes the view. The form of the <b>create view </b>command is:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s46" style="padding-left: 193pt;text-indent: 0pt;text-align: justify;">create view <i>v </i>as <span class="s83">&lt;</span><span class="p">query expression</span><span class="s83">&gt;</span><span class="p">;</span></p><p style="padding-top: 9pt;padding-left: 88pt;text-indent: 0pt;line-height: 70%;text-align: justify;">where <span class="s83">&lt;</span>query expression<span class="s83">&gt; </span>is any legal query expression. The view name is represented by <i>v</i>.</p><p style="padding-top: 1pt;padding-left: 88pt;text-indent: 17pt;text-align: justify;">Consider again the clerk who needs to access all data in the <i>instructor </i>relation, except <i>salary</i>. The clerk should not be authorized to access the <i>instructor </i>relation (we see in Section 4.7, how authorizations can be speciﬁed). Instead, a view relation <i>faculty </i>can be made available to the clerk, with the view deﬁned as follows:</p><p class="s46" style="padding-top: 6pt;padding-left: 209pt;text-indent: 0pt;text-align: left;">create view <i>faculty </i>as</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_659.png"/></span></p><p style="padding-left: 223pt;text-indent: 0pt;text-align: left;"><b>select </b><span class="s69">ID</span>, <i>name</i>, <i>dept name</i></p><p class="s46" style="padding-left: 223pt;text-indent: 0pt;text-align: left;">from <i>instructor</i><span class="p">;</span></p><p style="padding-top: 7pt;padding-left: 88pt;text-indent: 17pt;text-align: justify;">As explained earlier, the view relation conceptually contains the tuples in the query result, but it is not precomputed and stored. Instead, the database system stores the query expression associated with the view relation. Whenever the view relation is ac- cessed, its tuples are created by computing the query result. Thus, the view relation is created whenever needed, on demand.</p><p style="padding-left: 88pt;text-indent: 17pt;text-align: justify;">To create a view that lists all course sections oﬀered by the Physics department in the Fall 2017 semester with the building and room number of each section, we write:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_660.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_661.png"/></span></p><p class="s46" style="padding-top: 7pt;padding-left: 154pt;text-indent: 0pt;text-align: left;">create view <i>physics fall 2017 </i>as</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_662.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_663.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_664.png"/></span></p><p class="s13" style="padding-left: 167pt;text-indent: 0pt;text-align: left;"><b>select </b>course<span class="p">.</span>course id<span class="p">, </span>sec id<span class="p">, </span>building<span class="p">, </span>room number</p><p class="s13" style="padding-left: 167pt;text-indent: 0pt;text-align: left;"><b>from </b>course<span class="p">, </span>section</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_665.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_666.png"/></span></p><p class="s13" style="padding-left: 167pt;text-indent: 0pt;text-align: left;"><b>where </b>course<span class="p">.</span>course id <span class="s15">= </span>section<span class="p">.</span>course id</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_667.png"/></span></p><p class="s13" style="padding-left: 232pt;text-indent: 0pt;text-align: left;"><b>and </b>course<span class="p">.</span>dept name <span class="s15">= </span><span class="p">&#39;Physics&#39;</span></p><p class="s13" style="padding-left: 232pt;text-indent: 0pt;text-align: left;"><b>and </b>section<span class="p">.</span>semester <span class="s15">= </span><span class="p">&#39;Fall&#39;</span></p><p class="s13" style="padding-left: 232pt;text-indent: 0pt;text-align: left;"><b>and </b>section<span class="p">.</span>year <span class="s15">= </span><span class="p">2017;</span></p><p style="padding-top: 7pt;padding-left: 88pt;text-indent: 17pt;text-align: right;">Later, when we study the <span class="s44">SQL </span>authorization mechanism in Section 4.7, we shall see that users can be given access to views in place of, or in addition to, access to relations. Views diﬀer from the <b>with </b>statement in that views, once created, remain available until explicitly dropped. The named subquery deﬁned by <b>with </b>is local to the query in</p><p style="padding-left: 88pt;text-indent: 0pt;text-align: justify;">which it is deﬁned.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s68" style="padding-left: 88pt;text-indent: 0pt;text-align: left;">4.2.2 Using Views in SQL Queries</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_668.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_669.png"/></span></p><p style="padding-top: 6pt;padding-left: 88pt;text-indent: 0pt;text-align: justify;">Once we have deﬁned a view, we can use the view name to refer to the virtual relation that the view generates. Using the view <i>physics fall 2017</i>, we can ﬁnd all Physics courses oﬀered in the Fall 2017 semester in the Watson building by writing:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_670.png"/></span></p><p class="s46" style="padding-top: 4pt;padding-left: 246pt;text-indent: 0pt;text-align: left;">select <i>course id</i></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_671.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_672.png"/></span></p><p class="s46" style="padding-left: 246pt;text-indent: 0pt;text-align: left;">from <i>physics fall 2017</i></p><p class="s46" style="padding-left: 246pt;text-indent: 0pt;text-align: left;">where <i>building </i><span class="s15">= </span><span class="p">&#39;Watson&#39;;</span></p><p style="padding-top: 7pt;padding-left: 137pt;text-indent: -17pt;text-align: left;">View names may appear in a query any place where a relation name may appear, The attribute names of a view can be speciﬁed explicitly as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_673.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_674.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_675.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_676.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_677.png"/></span></p><p style="padding-left: 184pt;text-indent: -13pt;text-align: left;"><b>create view </b><i>departments total salary</i>(<i>dept name</i>, <i>total salary</i>) <b>as select </b><i>dept name</i>, <b>sum </b>(<i>salary</i>)</p><p class="s46" style="padding-left: 184pt;text-indent: 0pt;text-align: left;">from <i>instructor</i></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_678.png"/></span></p><p class="s46" style="padding-left: 184pt;text-indent: 0pt;text-align: left;">group by <i>dept name</i><span class="p">;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 119pt;text-indent: 0pt;text-align: justify;">The preceding view gives for each department the sum of the salaries of all the instruc- tors at that department. Since the expression <b>sum</b>(<i>salary</i>) does not have a name, the attribute name is speciﬁed explicitly in the view deﬁnition.</p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">Intuitively, at any given time, the set of tuples in the view relation is the result of evaluation of the query expression that deﬁnes the view. Thus, if a view relation is computed and stored, it may become out of date if the relations used to deﬁne it are modiﬁed. To avoid this, views are usually implemented as follows: When we deﬁne a view, the database system stores the deﬁnition of the view itself, rather than the result of evaluation of the query expression that deﬁnes the view. Wherever a view relation appears in a query, it is replaced by the stored query expression. Thus, whenever we evaluate the query, the view relation is recomputed.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_679.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_680.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_681.png"/></span></p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">One view may be used in the expression deﬁning another view. For example, we can deﬁne a view <i>physics fall 2017 watson </i>that lists the course <span class="s44">ID </span>and room number of all Physics courses oﬀered in the Fall 2017 semester in the Watson building as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_682.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_683.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_684.png"/></span></p><p class="s46" style="padding-left: 216pt;text-indent: 0pt;text-align: left;">create view <i>physics fall 2017 watson </i>as</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_685.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_686.png"/></span></p><p class="s13" style="padding-left: 266pt;text-indent: 0pt;text-align: left;"><b>select </b>course id<span class="p">, </span>room number</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_687.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_688.png"/></span></p><p class="s46" style="padding-left: 266pt;text-indent: 0pt;text-align: left;">from <i>physics fall 2017</i></p><p class="s46" style="padding-left: 266pt;text-indent: 0pt;text-align: left;">where <i>building </i><span class="s15">= </span><span class="p">&#39;Watson&#39;;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_689.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_690.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_691.png"/></span></p><p style="padding-left: 119pt;text-indent: 0pt;text-align: justify;">where <i>physics fall 2017 watson </i>is itself a view relation. This is equivalent to:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_692.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_693.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_694.png"/></span></p><p class="s46" style="padding-left: 169pt;text-indent: 0pt;text-align: left;">create view <i>physics fall 2017 watson </i>as</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_695.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_696.png"/></span></p><p class="s13" style="padding-left: 218pt;text-indent: 0pt;text-align: left;"><b>select </b>course id<span class="p">, </span>room number</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_697.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_698.png"/></span></p><p style="padding-left: 218pt;text-indent: 0pt;text-align: left;"><b>from </b>(<b>select </b><i>course</i>.<i>course id</i>, <i>building</i>, <i>room number</i></p><p class="s13" style="padding-left: 246pt;text-indent: 0pt;text-align: left;"><b>from </b>course<span class="p">, </span>section</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_699.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_700.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_701.png"/></span></p><p class="s13" style="padding-left: 290pt;text-indent: -43pt;text-align: left;"><b>where </b>course<span class="p">.</span>course id <span class="s15">= </span>section<span class="p">.</span>course id <b>and </b>course<span class="p">.</span>dept name <span class="s15">= </span><span class="p">&#39;Physics&#39; </span><b>and </b>section<span class="p">.</span>semester <span class="s15">= </span><span class="p">&#39;Fall&#39;</span></p><p class="s13" style="padding-left: 290pt;text-indent: 0pt;text-align: left;"><b>and </b>section<span class="p">.</span>year <span class="s15">= </span><span class="p">2017)</span></p><p class="s46" style="padding-left: 218pt;text-indent: 0pt;text-align: left;">where <i>building </i><span class="s15">= </span><span class="p">&#39;Watson&#39;;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s68" style="padding-top: 4pt;padding-left: 88pt;text-indent: 0pt;text-align: left;">4.2.3 Materialized Views</p><p style="padding-top: 6pt;padding-left: 88pt;text-indent: 0pt;text-align: justify;">Certain database systems allow view relations to be stored, but they make sure that, if the actual relations used in the view deﬁnition change, the view is kept up-to-date. Such views are called <span class="s63">materialized views</span>.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_702.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_703.png"/></span></p><p style="padding-left: 88pt;text-indent: 17pt;text-align: justify;">For example, consider the view <i>departments total salary</i>. If that view is material- ized, its results would be stored in the database, allowing queries that use the view to potentially run much faster by using the precomputed view result, instead of recomput- ing it.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_704.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_705.png"/></span></p><p style="padding-left: 88pt;text-indent: 17pt;text-align: justify;">However, if an <i>instructor </i>tuple is added to or deleted from the <i>instructor </i>relation, the result of the query deﬁning the view would change, and as a result the materialized view’s contents must be updated. Similarly, if an instructor’s salary is updated, the tuple in <i>departments total salary </i>corresponding to that instructor’s department must be updated.</p><p style="padding-left: 88pt;text-indent: 17pt;text-align: justify;">The process of keeping the materialized view up-to-date is called <span class="s63">materialized view maintenance </span>(or often, just <span class="s63">view maintenance</span>) and is covered in Section 16.5. View maintenance can be done immediately when any of the relations on which the view is deﬁned is updated. Some database systems, however, perform view maintenance lazily, when the view is accessed. Some systems update materialized views only periodically; in this case, the contents of the materialized view may be stale, that is, not up-to-date, when it is used, and it should not be used if the application needs up-to-date data. And some database systems permit the database administrator to control which of the preceding methods is used for each materialized view.</p><p style="padding-left: 88pt;text-indent: 17pt;text-align: justify;">Applications that use a view frequently may beneﬁt if the view is materialized. Applications that demand fast response to certain queries that compute aggregates over large relations can also beneﬁt greatly by creating materialized views corresponding to the queries. In this case, the aggregated result is likely to be much smaller than the large relations on which the view is deﬁned; as a result the materialized view can be used to answer the query very quickly, avoiding reading the large underlying relations. The beneﬁts to queries from the materialization of a view must be weighed against the storage costs and the added overhead for updates.</p><p class="s42" style="padding-left: 88pt;text-indent: 17pt;text-align: justify;">SQL <span class="s43">does not deﬁne a standard way of specifying that a view is materialized, but many database systems provide their own </span>SQL <span class="s43">extensions for this task. Some database systems always keep materialized views up-to-date when the underlying re- lations change, while others permit them to become out of date and periodically re- compute them.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s68" style="padding-left: 88pt;text-indent: 0pt;text-align: left;">4.2.4 Update of a View</p><p style="padding-top: 6pt;padding-left: 88pt;text-indent: 0pt;text-align: justify;">Although views are a useful tool for queries, they present serious problems if we express updates, insertions, or deletions with them. The diﬃculty is that a modiﬁcation to the database expressed in terms of a view must be translated to a modiﬁcation to the actual relations in the logical model of the database.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 119pt;text-indent: 17pt;text-align: justify;">Suppose the view <i>faculty</i>, which we saw earlier, is made available to a clerk. Since we allow a view name to appear wherever a relation name is allowed, the clerk can write:</p><p class="s46" style="padding-top: 4pt;padding-left: 22pt;text-indent: 0pt;text-align: center;">insert into <i>faculty</i></p><p class="s46" style="padding-left: 146pt;text-indent: 0pt;text-align: center;">values <span class="p">(&#39;30765&#39;, &#39;Green&#39;, &#39;Music&#39;);</span></p><p style="padding-top: 7pt;padding-left: 119pt;text-indent: 0pt;text-align: justify;">This insertion must be represented by an insertion into the relation <i>instructor</i>, since <i>instructor </i>is the actual relation from which the database system constructs the view <i>faculty</i>. However, to insert a tuple into <i>instructor</i>, we must have some value for <i>salary</i>. There are two reasonable approaches to dealing with this insertion:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s39" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">• <span class="s40">Reject the insertion, and return an error message to the user.</span></p><p class="s13" style="padding-top: 3pt;padding-left: 123pt;text-indent: 0pt;text-align: left;"><span class="s39">• </span><span class="s40">Insert a tuple (&#39;30765&#39;, &#39;Green&#39;, &#39;Music&#39;, </span>null<span class="p">) into the </span>instructor <span class="p">relation.</span></p><p style="padding-top: 13pt;padding-left: 119pt;text-indent: 17pt;text-align: left;">Another problem with modiﬁcation of the database through views occurs with a view such as:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_706.png"/></span></p><p class="s13" style="padding-top: 4pt;padding-left: 191pt;text-indent: 0pt;text-align: left;"><b>create view </b>instructor info <b>as select </b><span class="s69">ID</span><span class="p">, </span>name<span class="p">, </span>building <b>from </b>instructor<span class="p">, </span>department</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_707.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_708.png"/></span></p><p class="s13" style="padding-left: 191pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><b>where </b>instructor<span class="p">.</span>dept name <span class="s15">= </span>department<span class="p">.</span>dept name<span class="p">;</span></p><p style="padding-top: 7pt;padding-left: 119pt;text-indent: 0pt;text-align: left;">This view lists the <span class="s69">ID</span>, <i>name</i>, and building-name of each instructor in the university. Consider the following insertion through this view:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_709.png"/></span></p><p class="s46" style="padding-top: 6pt;padding-left: 53pt;text-indent: 0pt;text-align: center;">insert into <i>instructor info</i></p><p class="s46" style="padding-left: 146pt;text-indent: 0pt;text-align: center;">values <span class="p">(&#39;69987&#39;, &#39;White&#39;, &#39;Taylor&#39;);</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_710.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_711.png"/></span></p><p style="padding-top: 7pt;padding-left: 119pt;text-indent: 17pt;text-align: justify;">Suppose there is no instructor with <span class="s44">ID </span>69987, and no department in the Taylor building. Then the only possible method of inserting tuples into the <i>instructor </i>and <i>de- partment </i>relations is to insert (&#39;69987&#39;, &#39;White&#39;, <i>null</i>, <i>null</i>) into <i>instructor </i>and (<i>null</i>, &#39;Taylor&#39;, <i>null</i>) into <i>department</i>. Then we obtain the relations shown in Figure 4.8. How- ever, this update does not have the desired eﬀect, since the view relation <i>instructor info </i>still does <i>not </i>include the tuple (&#39;69987&#39;, &#39;White&#39;, &#39;Taylor&#39;). Thus, there is no way to up- date the relations <i>instructor </i>and <i>department </i>by using nulls to get the desired update on <i>instructor info</i>.</p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">Because of problems such as these, modiﬁcations are generally not permitted on view relations, except in limited cases. Diﬀerent database systems specify diﬀerent con- ditions under which they permit updates on view relations; see the database system manuals for details.</p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">In general, an <span class="s44">SQL </span>view is said to be <span class="s63">updatable </span>(i.e., inserts, updates, or deletes can be applied on the view) if the following conditions are all satisﬁed by the query deﬁning the view:</p><p class="s39" style="padding-top: 5pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">• <span class="s40">The </span><span class="s46">from </span><span class="p">clause has only one database relation.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:170.464pt" cellspacing="0"><tr style="height:14pt"><td style="width:42pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F" bgcolor="#C6E9FA"><p class="s70" style="padding-left: 6pt;padding-right: 5pt;text-indent: 0pt;line-height: 11pt;text-align: center;">ID</p></td><td style="width:60pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F" bgcolor="#C6E9FA"><p class="s71" style="padding-left: 7pt;text-indent: 0pt;line-height: 11pt;text-align: left;">name</p></td><td style="width:63pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F" bgcolor="#C6E9FA"><p class="s71" style="padding-left: 7pt;text-indent: 0pt;line-height: 11pt;text-align: left;">dept name</p></td><td style="width:42pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F" bgcolor="#C6E9FA"><p class="s71" style="padding-right: 6pt;text-indent: 0pt;line-height: 11pt;text-align: right;">salary</p></td></tr><tr style="height:13pt"><td style="width:42pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 6pt;padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: center;">10101</p></td><td style="width:60pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Srinivasan</p></td><td style="width:63pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Comp. Sci.</p></td><td style="width:42pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: right;">65000</p></td></tr><tr style="height:13pt"><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 6pt;padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: center;">12121</p></td><td style="width:60pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Wu</p></td><td style="width:63pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Finance</p></td><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: right;">90000</p></td></tr><tr style="height:13pt"><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 6pt;padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: center;">15151</p></td><td style="width:60pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Mozart</p></td><td style="width:63pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Music</p></td><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: right;">40000</p></td></tr><tr style="height:13pt"><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 6pt;padding-right: 5pt;text-indent: 0pt;line-height: 12pt;text-align: center;">22222</p></td><td style="width:60pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Einstein</p></td><td style="width:63pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Physics</p></td><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: right;">95000</p></td></tr><tr style="height:13pt"><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 6pt;padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: center;">32343</p></td><td style="width:60pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">El Said</p></td><td style="width:63pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">History</p></td><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: right;">60000</p></td></tr><tr style="height:13pt"><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 6pt;padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: center;">33456</p></td><td style="width:60pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Gold</p></td><td style="width:63pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Physics</p></td><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: right;">87000</p></td></tr><tr style="height:13pt"><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 6pt;padding-right: 5pt;text-indent: 0pt;line-height: 12pt;text-align: center;">45565</p></td><td style="width:60pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Katz</p></td><td style="width:63pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Comp. Sci.</p></td><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: right;">75000</p></td></tr><tr style="height:13pt"><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 6pt;padding-right: 5pt;text-indent: 0pt;line-height: 12pt;text-align: center;">58583</p></td><td style="width:60pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Caliﬁeri</p></td><td style="width:63pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">History</p></td><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: right;">62000</p></td></tr><tr style="height:13pt"><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 6pt;padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: center;">76543</p></td><td style="width:60pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Singh</p></td><td style="width:63pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Finance</p></td><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: right;">80000</p></td></tr><tr style="height:13pt"><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 6pt;padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: center;">76766</p></td><td style="width:60pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Crick</p></td><td style="width:63pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Biology</p></td><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: right;">72000</p></td></tr><tr style="height:13pt"><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 6pt;padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: center;">83821</p></td><td style="width:60pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Brandt</p></td><td style="width:63pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Comp. Sci.</p></td><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: right;">92000</p></td></tr><tr style="height:13pt"><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 6pt;padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: center;">98345</p></td><td style="width:60pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Kim</p></td><td style="width:63pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Elec. Eng.</p></td><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: right;">80000</p></td></tr><tr style="height:14pt"><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 6pt;padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: center;">69987</p></td><td style="width:60pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">White</p></td><td style="width:63pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s71" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">null</p></td><td style="width:42pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s71" style="padding-right: 7pt;text-indent: 0pt;line-height: 12pt;text-align: right;">null</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_712.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_713.png"/></span></p><p class="s13" style="padding-top: 4pt;padding-left: 59pt;text-indent: 0pt;text-align: center;">instructor</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:186.004pt" cellspacing="0"><tr style="height:14pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F" bgcolor="#C6E9FA"><p class="s71" style="padding-left: 7pt;text-indent: 0pt;line-height: 11pt;text-align: left;">dept name</p></td><td style="width:49pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F" bgcolor="#C6E9FA"><p class="s71" style="padding-left: 7pt;text-indent: 0pt;line-height: 11pt;text-align: left;">building</p></td><td style="width:48pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F" bgcolor="#C6E9FA"><p class="s71" style="padding-right: 6pt;text-indent: 0pt;line-height: 11pt;text-align: right;">budget</p></td></tr><tr style="height:13pt"><td style="width:79pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Biology</p></td><td style="width:49pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Watson</p></td><td style="width:48pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: right;">90000</p></td></tr><tr style="height:13pt"><td style="width:79pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Comp. Sci.</p></td><td style="width:49pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Taylor</p></td><td style="width:48pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: right;">100000</p></td></tr><tr style="height:13pt"><td style="width:79pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Electrical Eng.</p></td><td style="width:49pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Taylor</p></td><td style="width:48pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: right;">85000</p></td></tr><tr style="height:13pt"><td style="width:79pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Finance</p></td><td style="width:49pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Painter</p></td><td style="width:48pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: right;">120000</p></td></tr><tr style="height:13pt"><td style="width:79pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">History</p></td><td style="width:49pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Painter</p></td><td style="width:48pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: right;">50000</p></td></tr><tr style="height:13pt"><td style="width:79pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Music</p></td><td style="width:49pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Packard</p></td><td style="width:48pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: right;">80000</p></td></tr><tr style="height:13pt"><td style="width:79pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Physics</p></td><td style="width:49pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Watson</p></td><td style="width:48pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-right: 6pt;text-indent: 0pt;line-height: 12pt;text-align: right;">70000</p></td></tr><tr style="height:14pt"><td style="width:79pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s71" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">null</p></td><td style="width:49pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s72" style="padding-left: 7pt;text-indent: 0pt;line-height: 12pt;text-align: left;">Taylor</p></td><td style="width:48pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s71" style="padding-right: 7pt;text-indent: 0pt;line-height: 12pt;text-align: right;">null</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-left: 59pt;text-indent: 0pt;text-align: center;">department</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 59pt;text-indent: 0pt;text-align: center;"><span class="s73">Figure 4.8 </span>Relations <span class="s91">instructor </span>and <span class="s91">department </span>after insertion of tuples.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s46" style="padding-left: 107pt;text-indent: -16pt;text-align: left;"><span class="s39">• </span><span class="s40">The </span>select <span class="p">clause contains only attribute names of the relation and does not have any expressions, aggregates, or </span>distinct <span class="p">speciﬁcation.</span></p><p style="padding-top: 4pt;padding-left: 107pt;text-indent: -16pt;text-align: left;"><span class="s39">• </span><span class="s40">Any attribute not listed in the </span><b>select </b>clause can be set to <i>null</i>; that is, it does not have a <b>not null </b>constraint and is not part of a primary key.</p><p class="s46" style="padding-top: 4pt;padding-left: 91pt;text-indent: 0pt;text-align: left;"><span class="s39">• </span><span class="s40">The query does not have a </span>group by <span class="p">or </span>having <span class="p">clause.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 88pt;text-indent: 0pt;text-align: left;">Under these constraints, the <b>update</b>, <b>insert</b>, and <b>delete </b>operations would be allowed on the following view:</p><p class="s66" style="padding-top: 3pt;padding-left: 119pt;text-indent: 0pt;text-align: right;"><a name="bookmark60">4.3 </a><span style=" color: #00AEEF;">Transactions  </span><span class="s164">143</span><a name="bookmark101">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_714.png"/></span></p><p class="s46" style="padding-left: 237pt;text-indent: 0pt;text-align: left;">create view <i>history instructors </i>as select <span class="p">*</span></p><p class="s46" style="padding-left: 237pt;text-indent: 0pt;text-align: left;">from <i>instructor</i></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_715.png"/></span></p><p class="s46" style="padding-left: 237pt;text-indent: 0pt;text-align: left;">where <i>dept name </i><span class="s15">= </span><span class="p">&#39;History&#39;;</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_716.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_717.png"/></span></p><p style="padding-top: 11pt;padding-left: 119pt;text-indent: 17pt;text-align: justify;">Even with the conditions on updatability, the following problem still remains. Sup- pose that a user tries to insert the tuple (&#39;25566&#39;, &#39;Brown&#39;, &#39;Biology&#39;, 100000) into the <i>history instructors </i>view. This tuple can be inserted into the <i>instructor </i>relation, but it would not appear in the <i>history instructors </i>view since it does not satisfy the selection imposed by the view.</p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">By default, <span class="s44">SQL </span>would allow the above update to proceed. However, views can be deﬁned with a <b>with check option </b>clause at the end of the view deﬁnition; then, if a tuple inserted into the view does not satisfy the view’s <b>where </b>clause condition, the insertion is rejected by the database system. Updates are similarly rejected if the new value does not satisfy the <b>where </b>clause conditions.</p><p class="s42" style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">SQL:1999 <span class="s43">has a more complex set of rules about when inserts, updates, and deletes can be executed on a view that allows updates through a larger class of views; however, the rules are too complex to be discussed here.</span></p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">An alternative, and often preferable, approach to modifying the database through a view is to use the trigger mechanism discussed in Section 5.3. The <b>instead of </b>feature in declaring triggers allows one to replace the default insert, update, and delete operations on a view with actions designed especially for each particular case.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part103.htm">&lt; 上一个</a><span> | </span><a href="../database.html">内容</a><span> | </span><a href="part105.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
