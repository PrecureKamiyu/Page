<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>11 Summary Dialogue on CPU Virtualization           105</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part9.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part11.htm">下一个 &gt;</a></p><p class="s25" style="padding-top: 8pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">11 Summary Dialogue on CPU Virtualization<span class="s26">           </span><span style=" color: #231F20;">105</span></p><p class="s25" style="padding-top: 8pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">12 A Dialogue on Memory Virtualization<span class="s26">             </span><span style=" color: #231F20;">107</span></p><p class="s25" style="padding-top: 8pt;padding-left: 41pt;text-indent: 0pt;line-height: 10pt;text-align: left;">13 The Abstraction: Address Spaces<span class="s26">                </span><span style=" color: #231F20;">109</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">13.1 Early Systems<span class="s26">                        </span><span style=" color: #231F20;">109</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">13.2 Multiprogramming and Time Sharing<span class="s26">           </span><span style=" color: #231F20;">110</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">13.3 The Address Space<span class="s26">                     </span><span style=" color: #231F20;">111</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">13.4 Goals<span class="s26">                             </span><span style=" color: #231F20;">113</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">13.5 Summary<span class="s26">                          </span><span style=" color: #231F20;">115</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 11pt;text-align: left;">References<span class="s26">                             </span><span style=" color: #231F20;">116</span></p><p class="s25" style="padding-top: 8pt;padding-left: 41pt;text-indent: 0pt;line-height: 10pt;text-align: left;">14 Interlude: Memory API<span class="s26">                     </span><span style=" color: #231F20;">119</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">14.1 Types of Memory<span class="s26">                      </span><span style=" color: #231F20;">119</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">14.2 The <span class="s29">malloc() </span>Call<span class="s26">                     </span><span style=" color: #231F20;">120</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">14.3 The <span class="s29">free() </span>Call<span class="s26">                      </span><span style=" color: #231F20;">122</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">14.4 Common Errors<span class="s26">                       </span><span style=" color: #231F20;">122</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">14.5 Underlying OS Support<span class="s26">                   </span><span style=" color: #231F20;">125</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">14.6 Other Calls<span class="s26">                         </span><span style=" color: #231F20;">125</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">14.7 Summary<span class="s26">                          </span><span style=" color: #231F20;">126</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 11pt;text-align: left;">References<span class="s26">                             </span><span style=" color: #231F20;">127</span></p><p class="s25" style="padding-top: 8pt;padding-left: 41pt;text-indent: 0pt;line-height: 10pt;text-align: left;">15 Mechanism: Address Translation<span class="s26">                </span><span style=" color: #231F20;">129</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">15.1 Assumptions<span class="s26">                        </span><span style=" color: #231F20;">130</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">15.2 An Example<span class="s26">                         </span><span style=" color: #231F20;">130</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">15.3 Dynamic (Hardware-based) Relocation<span class="s26">           </span><span style=" color: #231F20;">133</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">15.4 OS Issues<span class="s26">                          </span><span style=" color: #231F20;">136</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">15.5 Summary<span class="s26">                          </span><span style=" color: #231F20;">137</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">References<span class="s26">                             </span><span style=" color: #231F20;">139</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 11pt;text-align: left;">Homework<span class="s26">                            </span><span style=" color: #231F20;">140</span></p><p class="s25" style="padding-top: 8pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">16 Segmentation<span class="s26">                           </span><span style=" color: #231F20;">141</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s28" style="padding-top: 2pt;padding-left: 82pt;text-indent: 0pt;line-height: 11pt;text-align: left;">16.1 Segmentation: Generalized Base/Bounds<span class="s26">         </span><span style=" color: #231F20;">141</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">16.2 Which Segment Are We Referring To?<span class="s26">           </span><span style=" color: #231F20;">144</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">16.3 What About The Stack?<span class="s26">                   </span><span style=" color: #231F20;">145</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">16.4 Support for Sharing<span class="s26">                     </span><span style=" color: #231F20;">146</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">16.5 Fine-grained vs. Coarse-grained Segmentation<span class="s26">       </span><span style=" color: #231F20;">147</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">16.6 OS Support<span class="s26">                         </span><span style=" color: #231F20;">147</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">16.7 Summary<span class="s26">                          </span><span style=" color: #231F20;">149</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">References<span class="s26">                             </span><span style=" color: #231F20;">150</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 11pt;text-align: left;">Homework<span class="s26">                            </span><span style=" color: #231F20;">152</span></p><p class="s25" style="padding-top: 8pt;padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: left;">17 Free-Space Management<span class="s26">                     </span><span style=" color: #231F20;">153</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">17.1 Assumptions<span class="s26">                        </span><span style=" color: #231F20;">154</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">17.2 Low-level Mechanisms<span class="s26">                   </span><span style=" color: #231F20;">155</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">17.3 Basic Strategies<span class="s26">                       </span><span style=" color: #231F20;">163</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">17.4 Other Approaches<span class="s26">                      </span><span style=" color: #231F20;">165</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">17.5 Summary<span class="s26">                          </span><span style=" color: #231F20;">167</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 11pt;text-align: left;">References<span class="s26">                             </span><span style=" color: #231F20;">168</span></p><p class="s25" style="padding-top: 8pt;padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: left;">18 Paging: Introduction<span class="s26">                       </span><span style=" color: #231F20;">169</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">18.1 Where Are Page Tables Stored?<span class="s26">               </span><span style=" color: #231F20;">172</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">18.2 What’s Actually In The Page Table?<span class="s26">            </span><span style=" color: #231F20;">173</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">18.3 Paging: Also Too Slow<span class="s26">                   </span><span style=" color: #231F20;">174</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">18.4 A Memory Trace<span class="s26">                      </span><span style=" color: #231F20;">176</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">18.5 Summary<span class="s26">                          </span><span style=" color: #231F20;">179</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">References<span class="s26">                             </span><span style=" color: #231F20;">180</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 11pt;text-align: left;">Homework<span class="s26">                            </span><span style=" color: #231F20;">181</span></p><p class="s25" style="padding-top: 8pt;padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: left;">19 Paging: Faster Translations (TLBs)<span class="s26">               </span><span style=" color: #231F20;">183</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">19.1 TLB Basic Algorithm<span class="s26">                    </span><span style=" color: #231F20;">183</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">19.2 Example: Accessing An Array<span class="s26">               </span><span style=" color: #231F20;">185</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">19.3 Who Handles The TLB Miss?<span class="s26">                </span><span style=" color: #231F20;">187</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">19.4 TLB Contents: What’s In There?<span class="s26">              </span><span style=" color: #231F20;">189</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">19.5 TLB Issue: Context Switches<span class="s26">                </span><span style=" color: #231F20;">190</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">19.6 Issue: Replacement Policy<span class="s26">                  </span><span style=" color: #231F20;">192</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">19.7 A Real TLB Entry<span class="s26">                      </span><span style=" color: #231F20;">193</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">19.8 Summary<span class="s26">                          </span><span style=" color: #231F20;">194</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">References<span class="s26">                             </span><span style=" color: #231F20;">195</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 11pt;text-align: left;">Homework (Measurement)<span class="s26">                    </span><span style=" color: #231F20;">197</span></p><p class="s25" style="padding-top: 8pt;padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: left;">20 Paging: Smaller Tables<span class="s26">                      </span><span style=" color: #231F20;">201</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">20.1 Simple Solution: Bigger Pages<span class="s26">               </span><span style=" color: #231F20;">201</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">20.2 Hybrid Approach: Paging and Segments<span class="s26">          </span><span style=" color: #231F20;">202</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">20.3 Multi-level Page Tables<span class="s26">                   </span><span style=" color: #231F20;">205</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">20.4 Inverted Page Tables<span class="s26">                    </span><span style=" color: #231F20;">212</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">20.5 Swapping the Page Tables to Disk<span class="s26">             </span><span style=" color: #231F20;">213</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 10pt;text-align: left;">20.6 Summary<span class="s26">                          </span><span style=" color: #231F20;">213</span></p><p class="s28" style="padding-left: 82pt;text-indent: 0pt;line-height: 11pt;text-align: left;">References<span class="s26">                             </span><span style=" color: #231F20;">214</span></p><p class="s28" style="padding-top: 16pt;padding-left: 54pt;text-indent: 0pt;text-align: left;">Homework<span class="s26">                            </span><span style=" color: #231F20;">215</span></p><p class="s25" style="padding-top: 8pt;padding-left: 41pt;text-indent: 0pt;line-height: 10pt;text-align: left;">21 Beyond Physical Memory: Mechanisms<span class="s26">             </span><span style=" color: #231F20;">217</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">21.1 Swap Space<span class="s26">                         </span><span style=" color: #231F20;">218</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">21.2 The Present Bit<span class="s26">                       </span><span style=" color: #231F20;">219</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">21.3 The Page Fault<span class="s26">                        </span><span style=" color: #231F20;">220</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">21.4 What If Memory Is Full?<span class="s26">                  </span><span style=" color: #231F20;">221</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">21.5 Page Fault Control Flow<span class="s26">                  </span><span style=" color: #231F20;">222</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">21.6 When Replacements Really Occur<span class="s26">             </span><span style=" color: #231F20;">223</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">21.7 Summary<span class="s26">                          </span><span style=" color: #231F20;">224</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 11pt;text-align: left;">References<span class="s26">                             </span><span style=" color: #231F20;">225</span></p><p class="s25" style="padding-top: 8pt;padding-left: 41pt;text-indent: 0pt;line-height: 10pt;text-align: left;">22 Beyond Physical Memory: Policies<span class="s26">               </span><span style=" color: #231F20;">227</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">22.1 Cache Management<span class="s26">                     </span><span style=" color: #231F20;">227</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">22.2 The Optimal Replacement Policy<span class="s26">              </span><span style=" color: #231F20;">228</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">22.3 A Simple Policy: FIFO<span class="s26">                    </span><span style=" color: #231F20;">230</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">22.4 Another Simple Policy: Random<span class="s26">              </span><span style=" color: #231F20;">232</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">22.5 Using History: LRU<span class="s26">                     </span><span style=" color: #231F20;">233</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">22.6 Workload Examples<span class="s26">                     </span><span style=" color: #231F20;">234</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">22.7 Implementing Historical Algorithms<span class="s26">            </span><span style=" color: #231F20;">237</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">22.8 Approximating LRU<span class="s26">                    </span><span style=" color: #231F20;">238</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">22.9 Considering Dirty Pages<span class="s26">                  </span><span style=" color: #231F20;">239</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">22.10 Other VM Policies<span class="s26">                      </span><span style=" color: #231F20;">240</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">22.11 Thrashing<span class="s26">                          </span><span style=" color: #231F20;">240</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">22.12 Summary<span class="s26">                          </span><span style=" color: #231F20;">241</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">References<span class="s26">                             </span><span style=" color: #231F20;">242</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 11pt;text-align: left;">Homework<span class="s26">                            </span><span style=" color: #231F20;">244</span></p><p class="s25" style="padding-top: 8pt;padding-left: 41pt;text-indent: 0pt;line-height: 10pt;text-align: left;">23 The VAX/VMS Virtual Memory System<span class="s26">            </span><span style=" color: #231F20;">245</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">23.1 Background<span class="s26">                         </span><span style=" color: #231F20;">245</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">23.2 Memory Management Hardware<span class="s26">              </span><span style=" color: #231F20;">246</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">23.3 A Real Address Space<span class="s26">                    </span><span style=" color: #231F20;">247</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">23.4 Page Replacement<span class="s26">                      </span><span style=" color: #231F20;">249</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">23.5 Other Neat VM Tricks<span class="s26">                    </span><span style=" color: #231F20;">250</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 10pt;text-align: left;">23.6 Summary<span class="s26">                          </span><span style=" color: #231F20;">252</span></p><p class="s28" style="padding-left: 54pt;text-indent: 0pt;line-height: 11pt;text-align: left;">References<span class="s26">                             </span><span style=" color: #231F20;">253</span></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part9.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part11.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
