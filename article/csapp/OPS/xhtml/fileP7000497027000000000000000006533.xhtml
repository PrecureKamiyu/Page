<?xml version='1.0' encoding='utf-8'?>
<html xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:svg="http://www.w3.org/2000/svg" xmlns:epub="http://www.idpf.org/2007/ops" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" epub:prefix="index: http://www.index.com/">
  <head>
    <meta name="dcterms.conformsTo" content="PXE Basic 1.0"/>
    <meta name="generator" content="PXE Tools version 1.39.52"/>
    <!--Created by pxe.pl for standard version PXE Basic 1.0,data-profile-product=standard by PXE Tools 1.39.52, partial=false-->
    <title>Homework Problems </title>
    <link rel="alternate stylesheet" type="text/css" title="night" href="../css/theme/night.css"/>
    <link rel="alternate stylesheet" type="text/css" title="sepia" href="../css/theme/sepia.css"/>
    <script src="js/format_lg_obj.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../../page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body epub:type="bodymatter" class="calibre pcalibre pcalibre1">
<section id="P7000497027000000000000000006533" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title pcalibre1" id="P7000497027000000000000000044D39" data-uri="chapter07.xhtml#P7000497027000000000000000044D39" epub:type="title"><span class="pcalibre label pcalibre1">Homework Problems </span></h1></header>
<section id="P7000497027000000000000000006535" data-uri="chapter07.xhtml#P7000497027000000000000000006535" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title1 pcalibre1" id="P7000497027000000000000000044D3A" data-uri="chapter07.xhtml#P7000497027000000000000000044D3A" epub:type="title"><span class="pcalibre label pcalibre1">7.6 </span>♦</h1></header>
<p id="P7000497027000000000000000044D3B" data-uri="chapter07.xhtml#P7000497027000000000000000044D3B" class="pcalibre1 pcalibre calibre2">This problem concerns the <code id="P7000497027000000000000000044D3C" data-uri="chapter07.xhtml#P7000497027000000000000000044D3C" class="pcalibre1 calibre8 pcalibre">m.o</code> module from <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP700049702700000000000000000608B.xhtml#P700049702700000000000000000612D"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">7.5</span></a> and the following version of the <code id="P7000497027000000000000000044D3D" data-uri="chapter07.xhtml#P7000497027000000000000000044D3D" class="pcalibre1 calibre8 pcalibre">swap.c</code> function that counts the number of times it has been called:</p>
<pre id="P7000497027000000000000000044D3E" data-uri="chapter07.xhtml#P7000497027000000000000000044D3E" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000044D3F" data-uri="chapter07.xhtml#P7000497027000000000000000044D3F" class="calibre10 pcalibre pcalibre1">
1	extern int buf[];
2
3	int *bufp0 = &amp;buf[0];
4	static int *bufp1;
5
6	static void incr()
7	{
8		static int count=0;
9
10		count++;
11	}
12
13	void swap()
14	{
<span class="pcalibre pagebreak pcalibre1" id="P700049702700000000000000000653C" title="715" data-uri="chapter07.xhtml#P700049702700000000000000000653C" epub:type="pagebreak"></span>15		int temp;
16
17		incr();
18		bufp1 = &amp;buf[1];
19		temp = *bufp0;
20		*bufp0 = *bufp1;
21		*bufp1 = temp;
22	}</code></pre>
<p id="P7000497027000000000000000044D40" data-uri="chapter07.xhtml#P7000497027000000000000000044D40" class="pcalibre1 pcalibre calibre2">For each symbol that is defined and referenced in <code id="P7000497027000000000000000044D41" data-uri="chapter07.xhtml#P7000497027000000000000000044D41" class="pcalibre1 calibre8 pcalibre">swap.o</code>, indicate if it will have a symbol table entry in the <code id="P7000497027000000000000000044D42" data-uri="chapter07.xhtml#P7000497027000000000000000044D42" class="pcalibre1 calibre8 pcalibre">.symtab</code> section in module <code id="P7000497027000000000000000044D43" data-uri="chapter07.xhtml#P7000497027000000000000000044D43" class="pcalibre1 calibre8 pcalibre">swap.o</code>. If so, indicate the module that defines the symbol (<code id="P7000497027000000000000000044D44" data-uri="chapter07.xhtml#P7000497027000000000000000044D44" class="pcalibre1 calibre8 pcalibre">swap.o or m.o</code>), the symbol type(local, global, or extern), and the section (<code id="P7000497027000000000000000044D45" data-uri="chapter07.xhtml#P7000497027000000000000000044D45" class="pcalibre1 calibre8 pcalibre">.text, .data</code>, or <code id="P7000497027000000000000000044D46" data-uri="chapter07.xhtml#P7000497027000000000000000044D46" class="pcalibre1 calibre8 pcalibre">.bss</code>) it occupies in that module.</p>
<table id="P7000497027000000000000000044D47" data-uri="chapter07.xhtml#P7000497027000000000000000044D47" class="pcalibre largetable pcalibre1">
<thead class="pcalibre1 pcalibre calibre16">
<tr class="pcalibre calibre17 pcalibre1">
<th id="P7000497027000000000000000044D48" data-uri="chapter07.xhtml#P7000497027000000000000000044D48" class="calibre18 pcalibre pcalibre1">Symbol</th>
<th id="P7000497027000000000000000044D49" data-uri="chapter07.xhtml#P7000497027000000000000000044D49" class="calibre18 pcalibre pcalibre1"><code id="P7000497027000000000000000044D4A" data-uri="chapter07.xhtml#P7000497027000000000000000044D4A" class="calibre10 pcalibre pcalibre1">swap.o .symtab</code> entry?</th>
<th id="P7000497027000000000000000044D4B" data-uri="chapter07.xhtml#P7000497027000000000000000044D4B" class="calibre18 pcalibre pcalibre1">Symbol type</th>
<th id="P7000497027000000000000000044D4C" data-uri="chapter07.xhtml#P7000497027000000000000000044D4C" class="calibre18 pcalibre pcalibre1">Module where defined</th>
<th id="P7000497027000000000000000044D4D" data-uri="chapter07.xhtml#P7000497027000000000000000044D4D" class="calibre18 pcalibre pcalibre1">Section</th>
</tr>
</thead>
<tbody class="calibre19 pcalibre pcalibre1">
<tr class="pcalibre calibre17 pcalibre1">
<td id="P7000497027000000000000000044D4E" data-uri="chapter07.xhtml#P7000497027000000000000000044D4E" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000044D4F" data-uri="chapter07.xhtml#P7000497027000000000000000044D4F" class="calibre10 pcalibre pcalibre1">buf</code></td>
<td id="P7000497027000000000000000044D50" data-uri="chapter07.xhtml#P7000497027000000000000000044D50" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P7000497027000000000000000044D51" data-uri="chapter07.xhtml#P7000497027000000000000000044D51" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P7000497027000000000000000044D52" data-uri="chapter07.xhtml#P7000497027000000000000000044D52" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P7000497027000000000000000044D53" data-uri="chapter07.xhtml#P7000497027000000000000000044D53" class="calibre20 pcalibre pcalibre1">_____</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P7000497027000000000000000044D54" data-uri="chapter07.xhtml#P7000497027000000000000000044D54" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000044D55" data-uri="chapter07.xhtml#P7000497027000000000000000044D55" class="calibre10 pcalibre pcalibre1">bufp0</code></td>
<td id="P7000497027000000000000000044D56" data-uri="chapter07.xhtml#P7000497027000000000000000044D56" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P7000497027000000000000000044D57" data-uri="chapter07.xhtml#P7000497027000000000000000044D57" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P7000497027000000000000000044D58" data-uri="chapter07.xhtml#P7000497027000000000000000044D58" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P7000497027000000000000000044D59" data-uri="chapter07.xhtml#P7000497027000000000000000044D59" class="calibre20 pcalibre pcalibre1">_____</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P7000497027000000000000000044D5A" data-uri="chapter07.xhtml#P7000497027000000000000000044D5A" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000044D5B" data-uri="chapter07.xhtml#P7000497027000000000000000044D5B" class="calibre10 pcalibre pcalibre1">bufp1</code></td>
<td id="P7000497027000000000000000044D5C" data-uri="chapter07.xhtml#P7000497027000000000000000044D5C" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P7000497027000000000000000044D5D" data-uri="chapter07.xhtml#P7000497027000000000000000044D5D" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P7000497027000000000000000044D5E" data-uri="chapter07.xhtml#P7000497027000000000000000044D5E" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P7000497027000000000000000044D5F" data-uri="chapter07.xhtml#P7000497027000000000000000044D5F" class="calibre20 pcalibre pcalibre1">_____</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P7000497027000000000000000044D60" data-uri="chapter07.xhtml#P7000497027000000000000000044D60" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000044D61" data-uri="chapter07.xhtml#P7000497027000000000000000044D61" class="calibre10 pcalibre pcalibre1">swap</code></td>
<td id="P7000497027000000000000000044D62" data-uri="chapter07.xhtml#P7000497027000000000000000044D62" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P7000497027000000000000000044D63" data-uri="chapter07.xhtml#P7000497027000000000000000044D63" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P7000497027000000000000000044D64" data-uri="chapter07.xhtml#P7000497027000000000000000044D64" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P7000497027000000000000000044D65" data-uri="chapter07.xhtml#P7000497027000000000000000044D65" class="calibre20 pcalibre pcalibre1">_____</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P7000497027000000000000000044D66" data-uri="chapter07.xhtml#P7000497027000000000000000044D66" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000044D67" data-uri="chapter07.xhtml#P7000497027000000000000000044D67" class="calibre10 pcalibre pcalibre1">temp</code></td>
<td id="P7000497027000000000000000044D68" data-uri="chapter07.xhtml#P7000497027000000000000000044D68" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P7000497027000000000000000044D69" data-uri="chapter07.xhtml#P7000497027000000000000000044D69" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P7000497027000000000000000044D6A" data-uri="chapter07.xhtml#P7000497027000000000000000044D6A" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P7000497027000000000000000044D6B" data-uri="chapter07.xhtml#P7000497027000000000000000044D6B" class="calibre20 pcalibre pcalibre1">_____</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P7000497027000000000000000044D6C" data-uri="chapter07.xhtml#P7000497027000000000000000044D6C" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000044D6D" data-uri="chapter07.xhtml#P7000497027000000000000000044D6D" class="calibre10 pcalibre pcalibre1">incr</code></td>
<td id="P7000497027000000000000000044D6E" data-uri="chapter07.xhtml#P7000497027000000000000000044D6E" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P7000497027000000000000000044D6F" data-uri="chapter07.xhtml#P7000497027000000000000000044D6F" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P7000497027000000000000000044D70" data-uri="chapter07.xhtml#P7000497027000000000000000044D70" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P7000497027000000000000000044D71" data-uri="chapter07.xhtml#P7000497027000000000000000044D71" class="calibre20 pcalibre pcalibre1">_____</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P7000497027000000000000000044D72" data-uri="chapter07.xhtml#P7000497027000000000000000044D72" class="calibre20 pcalibre pcalibre1"><code id="P7000497027000000000000000044D73" data-uri="chapter07.xhtml#P7000497027000000000000000044D73" class="calibre10 pcalibre pcalibre1">count</code></td>
<td id="P7000497027000000000000000044D74" data-uri="chapter07.xhtml#P7000497027000000000000000044D74" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P7000497027000000000000000044D75" data-uri="chapter07.xhtml#P7000497027000000000000000044D75" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P7000497027000000000000000044D76" data-uri="chapter07.xhtml#P7000497027000000000000000044D76" class="calibre20 pcalibre pcalibre1">_____</td>
<td id="P7000497027000000000000000044D77" data-uri="chapter07.xhtml#P7000497027000000000000000044D77" class="calibre20 pcalibre pcalibre1">_____</td>
</tr>
</tbody>
</table>
</section>
<section id="P7000497027000000000000000006575" data-uri="chapter07.xhtml#P7000497027000000000000000006575" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title1 pcalibre1" id="P7000497027000000000000000044D78" data-uri="chapter07.xhtml#P7000497027000000000000000044D78" epub:type="title"><span class="pcalibre label pcalibre1">7.7 </span>♦</h1></header>
<p id="P7000497027000000000000000044D79" data-uri="chapter07.xhtml#P7000497027000000000000000044D79" class="pcalibre1 pcalibre calibre2">Without changing any variable names, modify <code id="P7000497027000000000000000044D7A" data-uri="chapter07.xhtml#P7000497027000000000000000044D7A" class="pcalibre1 calibre8 pcalibre">bar5.c</code> on page 683 so that <code id="P7000497027000000000000000044D7B" data-uri="chapter07.xhtml#P7000497027000000000000000044D7B" class="pcalibre1 calibre8 pcalibre">foo5.c</code> prints the correct values of <code id="P7000497027000000000000000044D7C" data-uri="chapter07.xhtml#P7000497027000000000000000044D7C" class="pcalibre1 calibre8 pcalibre">x</code> and <code id="P7000497027000000000000000044D7D" data-uri="chapter07.xhtml#P7000497027000000000000000044D7D" class="pcalibre1 calibre8 pcalibre">y</code> (i.e., the hex representations of integers 15213 and 15212).</p>
</section>
<section id="P700049702700000000000000000657C" data-uri="chapter07.xhtml#P700049702700000000000000000657C" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title1 pcalibre1" id="P7000497027000000000000000044D7E" data-uri="chapter07.xhtml#P7000497027000000000000000044D7E" epub:type="title"><span class="pcalibre label pcalibre1">7.8 </span>♦</h1></header>
<p id="P7000497027000000000000000044D7F" data-uri="chapter07.xhtml#P7000497027000000000000000044D7F" class="pcalibre1 pcalibre calibre2">In this problem, let <code id="P7000497027000000000000000044D80" data-uri="chapter07.xhtml#P7000497027000000000000000044D80" class="pcalibre1 calibre8 pcalibre">REF(x.i) → DEF(x.k)</code> denote that the linker will associate an arbitrary reference to symbol <code id="P7000497027000000000000000044D81" data-uri="chapter07.xhtml#P7000497027000000000000000044D81" class="pcalibre1 calibre8 pcalibre">x</code> in module <code id="P7000497027000000000000000044D82" data-uri="chapter07.xhtml#P7000497027000000000000000044D82" class="pcalibre1 calibre8 pcalibre">i</code> to the definition of <code id="P7000497027000000000000000044D83" data-uri="chapter07.xhtml#P7000497027000000000000000044D83" class="pcalibre1 calibre8 pcalibre">x</code> in module <code id="P7000497027000000000000000044D84" data-uri="chapter07.xhtml#P7000497027000000000000000044D84" class="pcalibre1 calibre8 pcalibre">k</code>. For each example below, use this notation to indicate how the linker would resolve references to the multiply-defined symbol in each module. If there is a link-time error (rule 1), write "<code id="P7000497027000000000000000044D85" data-uri="chapter07.xhtml#P7000497027000000000000000044D85" class="pcalibre1 calibre8 pcalibre"><span class="smallcaps pcalibre pcalibre1">error</span></code>". If the linker arbitrarily chooses one of the definitions (rule 3), write "<code id="P7000497027000000000000000044D86" data-uri="chapter07.xhtml#P7000497027000000000000000044D86" class="pcalibre1 calibre8 pcalibre"><span class="smallcaps pcalibre pcalibre1">unknown</span></code>".</p>
<ol class="pcalibre ol_upper-alpha pcalibre1" id="P7000497027000000000000000044D87" data-uri="chapter07.xhtml#P7000497027000000000000000044D87">
<li id="P7000497027000000000000000044D88" data-uri="chapter07.xhtml#P7000497027000000000000000044D88" class="calibre12 pcalibre pcalibre1"><p id="P7000497027000000000000000044D89" data-uri="chapter07.xhtml#P7000497027000000000000000044D89" class="pcalibre calibre3 pcalibre1"></p>
<pre id="P7000497027000000000000000044D8A" data-uri="chapter07.xhtml#P7000497027000000000000000044D8A" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000044D8B" data-uri="chapter07.xhtml#P7000497027000000000000000044D8B" class="calibre10 pcalibre pcalibre1">
/* Module 1 */		/* Module 2 */
int main()		static int main=1[
{			int p2()
}			{
			}
(a) REF(main.1) → DEF(_____._____)
(b) REF(main.2) → DEF(_____._____)
</code></pre></li>
<li id="P7000497027000000000000000044D8C" data-uri="chapter07.xhtml#P7000497027000000000000000044D8C" class="calibre12 pcalibre pcalibre1"><p id="P7000497027000000000000000044D8D" data-uri="chapter07.xhtml#P7000497027000000000000000044D8D" class="pcalibre calibre3 pcalibre1"><span class="pcalibre pagebreak pcalibre1" id="P700049702700000000000000000658D" title="716" data-uri="chapter07.xhtml#P700049702700000000000000000658D" epub:type="pagebreak"></span></p>
<pre id="P7000497027000000000000000044D8E" data-uri="chapter07.xhtml#P7000497027000000000000000044D8E" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000044D8F" data-uri="chapter07.xhtml#P7000497027000000000000000044D8F" class="calibre10 pcalibre pcalibre1">
/* Module 1 */		/* Module 2 */
int x;			double x;
void main()		int p2()
{			{
}			}
(a) REF(x.1) → DEF(_____._____)
(b) REF(x.2) → DEF(_____._____)
</code></pre></li>
<li id="P7000497027000000000000000044D90" data-uri="chapter07.xhtml#P7000497027000000000000000044D90" class="calibre12 pcalibre pcalibre1"><p id="P7000497027000000000000000044D91" data-uri="chapter07.xhtml#P7000497027000000000000000044D91" class="pcalibre calibre3 pcalibre1"></p>
<pre id="P7000497027000000000000000044D92" data-uri="chapter07.xhtml#P7000497027000000000000000044D92" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000044D93" data-uri="chapter07.xhtml#P7000497027000000000000000044D93" class="calibre10 pcalibre pcalibre1">
/* Module 1 */		/* Module 2 */
int x=1;		double x=1.0;
void main()		int p2()
{			{
}			}
(a) REF(x.1) → DEF(_____._____)
(b) REF(x.2) → DEF(_____._____)
</code></pre>
</li>
</ol>
</section>
<section id="P7000497027000000000000000006594" data-uri="chapter07.xhtml#P7000497027000000000000000006594" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title1 pcalibre1" id="P7000497027000000000000000044D94" data-uri="chapter07.xhtml#P7000497027000000000000000044D94" epub:type="title"><span class="pcalibre label pcalibre1">7.9 </span>♦</h1></header>
<p id="P7000497027000000000000000044D95" data-uri="chapter07.xhtml#P7000497027000000000000000044D95" class="pcalibre1 pcalibre calibre2">Consider the following program, which consists of two object modules:</p>
<pre id="P7000497027000000000000000044D96" data-uri="chapter07.xhtml#P7000497027000000000000000044D96" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000044D97" data-uri="chapter07.xhtml#P7000497027000000000000000044D97" class="calibre10 pcalibre pcalibre1">
1	/* foo6.c */
2	void p2(void);
3
4	int main()
5	{
6		p2();
7		return 0;
8	}
</code></pre>
<pre id="P7000497027000000000000000044D98" data-uri="chapter07.xhtml#P7000497027000000000000000044D98" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000044D99" data-uri="chapter07.xhtml#P7000497027000000000000000044D99" class="calibre10 pcalibre pcalibre1">
1	/* bar6.c */
2	#include &lt;stdio.h&gt;
3
4	char main;
5
6	void p2()
7	{
8		printf("0x%xn", main);
9	}
</code></pre>
<p id="P7000497027000000000000000044D9A" data-uri="chapter07.xhtml#P7000497027000000000000000044D9A" class="pcalibre1 pcalibre calibre2">When this program is compiled and executed on an x86-64 Linux system, it prints the string <code id="P7000497027000000000000000044D9B" data-uri="chapter07.xhtml#P7000497027000000000000000044D9B" class="pcalibre1 calibre8 pcalibre">0x48\n</code> and terminates normally, even though function <code id="P7000497027000000000000000044D9C" data-uri="chapter07.xhtml#P7000497027000000000000000044D9C" class="pcalibre1 calibre8 pcalibre">p2</code> never initializes variable <code id="P7000497027000000000000000044D9D" data-uri="chapter07.xhtml#P7000497027000000000000000044D9D" class="pcalibre1 calibre8 pcalibre">main</code>. Can you explain this?</p>
</section>
<section id="P700049702700000000000000000659F" data-uri="chapter07.xhtml#P700049702700000000000000000659F" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title1 pcalibre1" id="P7000497027000000000000000044D9E" data-uri="chapter07.xhtml#P7000497027000000000000000044D9E" epub:type="title"><span class="pcalibre label pcalibre1">7.10 </span>♦♦</h1></header>
<p id="P7000497027000000000000000044D9F" data-uri="chapter07.xhtml#P7000497027000000000000000044D9F" class="pcalibre1 pcalibre calibre2">Let <code id="P7000497027000000000000000044DA0" data-uri="chapter07.xhtml#P7000497027000000000000000044DA0" class="pcalibre1 calibre8 pcalibre">a</code> and <code id="P7000497027000000000000000044DA1" data-uri="chapter07.xhtml#P7000497027000000000000000044DA1" class="pcalibre1 calibre8 pcalibre">b</code> denote object modules or static libraries in the current directory, and let <code id="P7000497027000000000000000044DA2" data-uri="chapter07.xhtml#P7000497027000000000000000044DA2" class="pcalibre1 calibre8 pcalibre">a</code>→<code id="P7000497027000000000000000044DA3" data-uri="chapter07.xhtml#P7000497027000000000000000044DA3" class="pcalibre1 calibre8 pcalibre">b</code> denote that <code id="P7000497027000000000000000044DA4" data-uri="chapter07.xhtml#P7000497027000000000000000044DA4" class="pcalibre1 calibre8 pcalibre">a</code> depends on <code id="P7000497027000000000000000044DA5" data-uri="chapter07.xhtml#P7000497027000000000000000044DA5" class="pcalibre1 calibre8 pcalibre">b</code>, in the sense that <code id="P7000497027000000000000000044DA6" data-uri="chapter07.xhtml#P7000497027000000000000000044DA6" class="pcalibre1 calibre8 pcalibre">b</code> defines a symbol that is <span class="pcalibre pagebreak pcalibre1" id="P70004970270000000000000000065A9" title="717" data-uri="chapter07.xhtml#P70004970270000000000000000065A9" epub:type="pagebreak"></span>referenced by <code id="P7000497027000000000000000044DA7" data-uri="chapter07.xhtml#P7000497027000000000000000044DA7" class="pcalibre1 calibre8 pcalibre">a</code>. For each of the following scenarios, show the minimal command line (i.e., one with the least number of object file and library arguments) that will allow the static linker to resolve all symbol references:</p>
<ol class="pcalibre ol_upper-alpha pcalibre1" id="P7000497027000000000000000044DA8" data-uri="chapter07.xhtml#P7000497027000000000000000044DA8">
<li id="P7000497027000000000000000044DA9" data-uri="chapter07.xhtml#P7000497027000000000000000044DA9" class="calibre12 pcalibre pcalibre1"><p id="P7000497027000000000000000044DAA" data-uri="chapter07.xhtml#P7000497027000000000000000044DAA" class="pcalibre calibre3 pcalibre1"></p>
<pre id="P7000497027000000000000000044DAB" data-uri="chapter07.xhtml#P7000497027000000000000000044DAB" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000044DAC" data-uri="chapter07.xhtml#P7000497027000000000000000044DAC" class="calibre10 pcalibre pcalibre1">p.o → libx.a → p.o</code></pre></li>
<li id="P7000497027000000000000000044DAD" data-uri="chapter07.xhtml#P7000497027000000000000000044DAD" class="calibre12 pcalibre pcalibre1"><p id="P7000497027000000000000000044DAE" data-uri="chapter07.xhtml#P7000497027000000000000000044DAE" class="pcalibre calibre3 pcalibre1"></p>
<pre id="P7000497027000000000000000044DAF" data-uri="chapter07.xhtml#P7000497027000000000000000044DAF" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000044DB0" data-uri="chapter07.xhtml#P7000497027000000000000000044DB0" class="calibre10 pcalibre pcalibre1">p.o → libx.a → liby.a <i class="calibre5 pcalibre pcalibre1">and</i> liby.a → libx.a</code></pre></li>
<li id="P7000497027000000000000000044DB1" data-uri="chapter07.xhtml#P7000497027000000000000000044DB1" class="calibre12 pcalibre pcalibre1"><p id="P7000497027000000000000000044DB2" data-uri="chapter07.xhtml#P7000497027000000000000000044DB2" class="pcalibre calibre3 pcalibre1"></p>
<pre id="P7000497027000000000000000044DB3" data-uri="chapter07.xhtml#P7000497027000000000000000044DB3" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000044DB4" data-uri="chapter07.xhtml#P7000497027000000000000000044DB4" class="calibre10 pcalibre pcalibre1">p.o → libx.a → liby.a → libz.a <i class="calibre5 pcalibre pcalibre1">and</i> liby.a → libx.a → libz.a</code></pre></li>
</ol>
</section>
<section id="P70004970270000000000000000065B8" data-uri="chapter07.xhtml#P70004970270000000000000000065B8" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title1 pcalibre1" id="P7000497027000000000000000044DB5" data-uri="chapter07.xhtml#P7000497027000000000000000044DB5" epub:type="title"><span class="pcalibre label pcalibre1">7.11 </span>♦♦</h1></header>
<p id="P7000497027000000000000000044DB6" data-uri="chapter07.xhtml#P7000497027000000000000000044DB6" class="pcalibre1 pcalibre calibre2">The program header in <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000006348.xhtml#P700049702700000000000000000634F"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">7.14</span></a> indicates that the data segment occupies <code id="P7000497027000000000000000044DB7" data-uri="chapter07.xhtml#P7000497027000000000000000044DB7" class="pcalibre1 calibre8 pcalibre">0x230</code> bytes in memory. However, only the first <code id="P7000497027000000000000000044DB8" data-uri="chapter07.xhtml#P7000497027000000000000000044DB8" class="pcalibre1 calibre8 pcalibre">0x228</code> bytes of these come from the sections of the executable file. What causes this discrepancy?</p>
</section>
<section id="P70004970270000000000000000065BD" data-uri="chapter07.xhtml#P70004970270000000000000000065BD" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title1 pcalibre1" id="P7000497027000000000000000044DB9" data-uri="chapter07.xhtml#P7000497027000000000000000044DB9" epub:type="title"><span class="pcalibre label pcalibre1">7.12 </span>♦♦</h1></header>
<p id="P7000497027000000000000000044DBA" data-uri="chapter07.xhtml#P7000497027000000000000000044DBA" class="pcalibre1 pcalibre calibre2">Consider the call to function swap in object file <code id="P7000497027000000000000000044DBB" data-uri="chapter07.xhtml#P7000497027000000000000000044DBB" class="pcalibre1 calibre8 pcalibre">m.o</code> (<a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="#P7000497027000000000000000006535"><span class="pcalibre label pcalibre1">Problem </span><span class="pcalibre label pcalibre1">7.6</span></a>).</p>
<pre id="P7000497027000000000000000044DBC" data-uri="chapter07.xhtml#P7000497027000000000000000044DBC" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000044DBD" data-uri="chapter07.xhtml#P7000497027000000000000000044DBD" class="calibre10 pcalibre pcalibre1">9: e8 00 00 00 00	callq e &lt;main+0xe&gt;	<b class="calibre4 pcalibre pcalibre1"><i class="calibre5 pcalibre pcalibre1">swap()</i></b></code></pre>
<p class="pcalibre1 pcalibre calibre2" id="P7000497027000000000000000044DBE" data-uri="chapter07.xhtml#P7000497027000000000000000044DBE">with the following relocation entry:</p>
<pre id="P7000497027000000000000000044DBF" data-uri="chapter07.xhtml#P7000497027000000000000000044DBF" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000044DC0" data-uri="chapter07.xhtml#P7000497027000000000000000044DC0" class="calibre10 pcalibre pcalibre1">r.offset = 0xa
r.symbol = swap
r.type = R_X86_64_PC32
r.addend = -4</code></pre>
<ol class="pcalibre ol_upper-alpha pcalibre1" id="P7000497027000000000000000044DC1" data-uri="chapter07.xhtml#P7000497027000000000000000044DC1">
<li id="P7000497027000000000000000044DC2" data-uri="chapter07.xhtml#P7000497027000000000000000044DC2" class="calibre12 pcalibre pcalibre1"><p id="P7000497027000000000000000044DC3" data-uri="chapter07.xhtml#P7000497027000000000000000044DC3" class="pcalibre calibre3 pcalibre1">Suppose that the linker relocates <code id="P7000497027000000000000000044DC4" data-uri="chapter07.xhtml#P7000497027000000000000000044DC4" class="pcalibre1 calibre8 pcalibre">.text</code> in <code id="P7000497027000000000000000044DC5" data-uri="chapter07.xhtml#P7000497027000000000000000044DC5" class="pcalibre1 calibre8 pcalibre">m.o</code> to address <code id="P7000497027000000000000000044DC6" data-uri="chapter07.xhtml#P7000497027000000000000000044DC6" class="pcalibre1 calibre8 pcalibre">0x4004e0</code> and <code id="P7000497027000000000000000044DC7" data-uri="chapter07.xhtml#P7000497027000000000000000044DC7" class="pcalibre1 calibre8 pcalibre">swap</code> to address <code id="P7000497027000000000000000044DC8" data-uri="chapter07.xhtml#P7000497027000000000000000044DC8" class="pcalibre1 calibre8 pcalibre">0x4004f8</code>. Then what is the value of the relocated reference to <code id="P7000497027000000000000000044DC9" data-uri="chapter07.xhtml#P7000497027000000000000000044DC9" class="pcalibre1 calibre8 pcalibre">swap</code> in the <code id="P7000497027000000000000000044DCA" data-uri="chapter07.xhtml#P7000497027000000000000000044DCA" class="pcalibre1 calibre8 pcalibre">callq</code> instruction?</p></li>
<li id="P7000497027000000000000000044DCB" data-uri="chapter07.xhtml#P7000497027000000000000000044DCB" class="calibre12 pcalibre pcalibre1"><p id="P7000497027000000000000000044DCC" data-uri="chapter07.xhtml#P7000497027000000000000000044DCC" class="pcalibre calibre3 pcalibre1">Suppose that the linker relocates <code id="P7000497027000000000000000044DCD" data-uri="chapter07.xhtml#P7000497027000000000000000044DCD" class="pcalibre1 calibre8 pcalibre">.text</code> in <code id="P7000497027000000000000000044DCE" data-uri="chapter07.xhtml#P7000497027000000000000000044DCE" class="pcalibre1 calibre8 pcalibre">m.o</code> to address <code id="P7000497027000000000000000044DCF" data-uri="chapter07.xhtml#P7000497027000000000000000044DCF" class="pcalibre1 calibre8 pcalibre">0x4004d0</code> and <code id="P7000497027000000000000000044DD0" data-uri="chapter07.xhtml#P7000497027000000000000000044DD0" class="pcalibre1 calibre8 pcalibre">swap</code> to address <code id="P7000497027000000000000000044DD1" data-uri="chapter07.xhtml#P7000497027000000000000000044DD1" class="pcalibre1 calibre8 pcalibre">0x400500</code>. Then what is the value of the relocated reference to <code id="P7000497027000000000000000044DD2" data-uri="chapter07.xhtml#P7000497027000000000000000044DD2" class="pcalibre1 calibre8 pcalibre">swap</code> in the <code id="P7000497027000000000000000044DD3" data-uri="chapter07.xhtml#P7000497027000000000000000044DD3" class="pcalibre1 calibre8 pcalibre">callq</code> instruction?</p></li>
</ol>
</section>
<section id="P70004970270000000000000000065D9" data-uri="chapter07.xhtml#P70004970270000000000000000065D9" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title1 pcalibre1" id="P7000497027000000000000000044DD4" data-uri="chapter07.xhtml#P7000497027000000000000000044DD4" epub:type="title"><span class="pcalibre label pcalibre1">7.13 </span>♦♦</h1></header>
<p id="P7000497027000000000000000044DD5" data-uri="chapter07.xhtml#P7000497027000000000000000044DD5" class="pcalibre1 pcalibre calibre2">Performing the following tasks will help you become more familiar with the various tools for manipulating object files.</p>
<ol class="pcalibre ol_upper-alpha pcalibre1" id="P7000497027000000000000000044DD6" data-uri="chapter07.xhtml#P7000497027000000000000000044DD6">
<li id="P7000497027000000000000000044DD7" data-uri="chapter07.xhtml#P7000497027000000000000000044DD7" class="calibre12 pcalibre pcalibre1"><p id="P7000497027000000000000000044DD8" data-uri="chapter07.xhtml#P7000497027000000000000000044DD8" class="pcalibre calibre3 pcalibre1">How many object files are contained in the versions of <code id="P7000497027000000000000000044DD9" data-uri="chapter07.xhtml#P7000497027000000000000000044DD9" class="pcalibre1 calibre8 pcalibre">libc.a</code> and <code id="P7000497027000000000000000044DDA" data-uri="chapter07.xhtml#P7000497027000000000000000044DDA" class="pcalibre1 calibre8 pcalibre">libm.a</code> on your system?</p></li>
<li id="P7000497027000000000000000044DDB" data-uri="chapter07.xhtml#P7000497027000000000000000044DDB" class="calibre12 pcalibre pcalibre1"><p id="P7000497027000000000000000044DDC" data-uri="chapter07.xhtml#P7000497027000000000000000044DDC" class="pcalibre calibre3 pcalibre1">Does <code id="P7000497027000000000000000044DDD" data-uri="chapter07.xhtml#P7000497027000000000000000044DDD" class="pcalibre1 calibre8 pcalibre">gcc -0g</code> produce different executable code than <code id="P7000497027000000000000000044DDE" data-uri="chapter07.xhtml#P7000497027000000000000000044DDE" class="pcalibre1 calibre8 pcalibre">gcc -0g -g</code>?</p></li>
<li id="P7000497027000000000000000044DDF" data-uri="chapter07.xhtml#P7000497027000000000000000044DDF" class="calibre12 pcalibre pcalibre1"><p id="P7000497027000000000000000044DE0" data-uri="chapter07.xhtml#P7000497027000000000000000044DE0" class="pcalibre calibre3 pcalibre1">What shared libraries does the <span class="smallcaps pcalibre pcalibre1">gcc </span>driver on your system use?</p></li>
</ol>
</section>
</section></body></html>
