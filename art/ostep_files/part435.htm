<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Questions</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part434.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part436.htm">下一个 &gt;</a></p><p class="s32" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">Questions</p><p style="padding-top: 5pt;padding-left: 64pt;text-indent: -11pt;line-height: 90%;text-align: justify;">1. <b>Stat: </b>Write your own version of the command line program <span class="s41">stat</span>, which simply calls the <span class="s41">stat() </span>system call on a given file or di- rectory. Print out file size, number of blocks allocated, reference (link) count, and so forth. What is the link count of a directory, as the number of entries in the directory changes? Useful interfaces: <span class="s41">stat()</span></p><p style="padding-left: 64pt;text-indent: -11pt;line-height: 89%;text-align: justify;">2. <b>List Files: </b>Write a program that lists files in the given directory. When called without any arguments, the program should just print the file names. When invoked with the <span class="s41">-l </span>flag, the program should print out information about each file, such as the owner, group, per- missions, and other information obtained from the <span class="s41">stat() </span>system call. The program should take one additional argument, which is the directory to read, e.g., <span class="s41">myls -l directory</span>. If no directory is given, the program should just use the current working directory. Useful interfaces: <span class="s41">stat()</span>, <span class="s41">opendir()</span>, <span class="s41">readdir()</span>, <span class="s41">getcwd()</span>.</p><p style="padding-left: 64pt;text-indent: -11pt;line-height: 89%;text-align: justify;">3. <b>Tail: </b>Write a program that prints out the last few lines of a file. The program should be efficient, in that it seeks to near the end of the file, reads in a block of data, and then goes backwards until it finds the requested number of lines; at this point, it should print out those lines from beginning to the end of the file. To invoke the program, one should type: <span class="s41">mytail -n file</span>, where <span class="s41">n </span>is the number of lines at the end of the file to print. Useful interfaces: <span class="s41">stat()</span>, <span class="s41">lseek()</span>, <span class="s41">open()</span>, <span class="s41">read()</span>, <span class="s41">close()</span>.</p><p style="padding-left: 64pt;text-indent: -11pt;line-height: 89%;text-align: justify;">4. <b>Recursive Search: </b>Write a program that prints out the names of each file and directory in the file system tree, starting at a given point in the tree. For example, when run without arguments, the program should start with the current working directory and print its contents, as well as the contents of any sub-directories, etc., until the entire tree, root at the CWD, is printed. If given a single argu- ment (of a directory name), use that as the root of the tree instead. Refine your recursive search with more fun options, similar to the powerful <span class="s41">find </span>command line tool. Useful interfaces: you figure it out.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="430" height="57" alt="image" src="Image_579.png"/></span></p><p class="s50" style="padding-top: 6pt;text-indent: 0pt;text-align: right;">40</p><p style="text-indent: 0pt;text-align: left;"/><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part434.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part436.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
