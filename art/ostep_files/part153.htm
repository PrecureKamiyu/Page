<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>16.3 What About The Stack?</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part152.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part154.htm">下一个 &gt;</a></p><p class="s40" style="padding-left: 11pt;text-indent: 0pt;text-align: left;">16.3 What About The Stack?</p><p style="padding-top: 7pt;padding-left: 41pt;text-indent: 11pt;line-height: 89%;text-align: justify;">Thus far, we’ve left out one important component of the address space: the stack. The stack has been relocated to physical address 28KB in the di- agram above, but with one critical difference: <i>it grows backwards </i>– in phys- ical memory, it starts at 28KB and grows back to 26KB, corresponding to virtual addresses 16KB to 14KB; translation has to proceed differently.</p><p style="padding-left: 41pt;text-indent: 11pt;line-height: 89%;text-align: justify;">The first thing we need is a little extra hardware support. Instead of just base and bounds values, the hardware also needs to know which way the segment grows (a bit, for example, that is set to 1 when the segment grows in the positive direction, and 0 for negative). Our updated view of what the hardware tracks is seen in Table <span style=" color: #00AEEF;">16.2</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:122.668pt" cellspacing="0"><tr style="height:10pt"><td style="width:46pt;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F"><p class="s20" style="padding-left: 5pt;text-indent: 0pt;line-height: 8pt;text-align: left;">Segment</p></td><td style="width:30pt;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F"><p class="s20" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: center;">Base</p></td><td style="width:28pt;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F"><p class="s20" style="padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: right;">Size</p></td><td style="width:77pt;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F"><p class="s20" style="padding-left: 4pt;padding-right: 4pt;text-indent: 0pt;line-height: 8pt;text-align: center;">Grows Positive?</p></td></tr><tr style="height:10pt"><td style="width:46pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F"><p class="s20" style="padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">Code</p></td><td style="width:30pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F"><p class="s20" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: center;">32K</p></td><td style="width:28pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F"><p class="s20" style="padding-right: 8pt;text-indent: 0pt;line-height: 9pt;text-align: right;">2K</p></td><td style="width:77pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F"><p class="s20" style="text-indent: 0pt;line-height: 9pt;text-align: center;">1</p></td></tr><tr style="height:10pt"><td style="width:46pt"><p class="s20" style="padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">Heap</p></td><td style="width:30pt"><p class="s20" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: center;">34K</p></td><td style="width:28pt"><p class="s20" style="padding-right: 8pt;text-indent: 0pt;line-height: 9pt;text-align: right;">2K</p></td><td style="width:77pt"><p class="s20" style="text-indent: 0pt;line-height: 9pt;text-align: center;">1</p></td></tr><tr style="height:10pt"><td style="width:46pt"><p class="s20" style="padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">Stack</p></td><td style="width:30pt"><p class="s20" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: center;">28K</p></td><td style="width:28pt"><p class="s20" style="padding-right: 8pt;text-indent: 0pt;line-height: 9pt;text-align: right;">2K</p></td><td style="width:77pt"><p class="s20" style="text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td></tr></table><p class="toc">&nbsp;</p><div class="toc"><a class="toc0" href="part154.htm">Table 16.2: Segment Registers (With Negative-Growth Support)</a></div><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part152.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part154.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
