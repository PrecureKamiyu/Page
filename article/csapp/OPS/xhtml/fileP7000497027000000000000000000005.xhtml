<?xml version='1.0' encoding='utf-8'?>
<html xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:svg="http://www.w3.org/2000/svg" xmlns:epub="http://www.idpf.org/2007/ops" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" epub:prefix="index: http://www.index.com/">
  <head>
    <meta name="dcterms.conformsTo" content="PXE Basic 1.0"/>
    <meta name="generator" content="PXE Tools version 1.39.52"/>
    <!--Created by pxe.pl for standard version PXE Basic 1.0,data-profile-product=standard by PXE Tools 1.39.52, partial=false-->
    <title>Appendix A Error Handling</title>
    <link rel="alternate stylesheet" type="text/css" title="night" href="../css/theme/night.css"/>
    <link rel="alternate stylesheet" type="text/css" title="sepia" href="../css/theme/sepia.css"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../../page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body epub:type="backmatter" class="calibre pcalibre pcalibre1">
<section class="pcalibre halftitlepage pcalibre1" id="P7000497027000000000000000000005" epub:type="appendix"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title pcalibre1" id="P700049702700000000000000003E425" data-uri="app01.xhtml#P700049702700000000000000003E425" epub:type="title"><span class="pcalibre pagebreak pcalibre1" id="P7000497027000000000000000000007" title="1041" data-uri="app01.xhtml#P7000497027000000000000000000007" epub:type="pagebreak"></span><span class="pcalibre label pcalibre1">Appendix </span><span class="pcalibre label pcalibre1">A </span>Error Handling</h1></header>
<section class="pcalibre halftitlepage pcalibre1" id="d9e181637">
<p id="P700049702700000000000000003E426" data-uri="app01.xhtml#P700049702700000000000000003E426" class="pcalibre1 pcalibre calibre2">Programmers should <i class="calibre5 pcalibre pcalibre1">always</i> check the error codes returned by system-level functions. There are many subtle ways that things can go wrong, and it only makes sense to use the status information that the kernel is able to provide us. Unfortunately, programmers are often reluctant to do error checking because it clutters their code, turning a single line of code into a multi-line conditional statement. Error checking is also confusing because different functions indicate errors in different ways.</p>
<p id="P700049702700000000000000003E427" data-uri="app01.xhtml#P700049702700000000000000003E427" class="pcalibre1 pcalibre calibre2">We were faced with a similar problem when writing this text. On the one hand, we would like our code examples to be concise and simple to read. On the other hand, we do not want to give students the wrong impression that it is OK to skip error checking. To resolve these issues, we have adopted an approach based on <i class="calibre5 pcalibre pcalibre1">error-handling wrappers</i> that was pioneered by W. Richard Stevens in his network programming text [110].</p>
<p id="P700049702700000000000000003E428" data-uri="app01.xhtml#P700049702700000000000000003E428" class="pcalibre1 pcalibre calibre2">The idea is that given some base system-level function <code id="P700049702700000000000000003E429" data-uri="app01.xhtml#P700049702700000000000000003E429" class="pcalibre1 calibre8 pcalibre">foo</code>, we define a wrapper function <code id="P700049702700000000000000003E42A" data-uri="app01.xhtml#P700049702700000000000000003E42A" class="pcalibre1 calibre8 pcalibre">Foo</code> with identical arguments, but with the first letter capitalized. The wrapper calls the base function and checks for errors. If it detects an error, the wrapper prints an informative message and terminates the process. Otherwise, it returns to the caller. Notice that if there are no errors, the wrapper behaves exactly like the base function. Put another way, if a program runs correctly with wrappers, it will run correctly if we render the first letter of each wrapper in lowercase and recompile.</p>
<p id="P700049702700000000000000003E42B" data-uri="app01.xhtml#P700049702700000000000000003E42B" class="pcalibre1 pcalibre calibre2">The wrappers are packaged in a single source file (<code id="P700049702700000000000000003E42C" data-uri="app01.xhtml#P700049702700000000000000003E42C" class="pcalibre1 calibre8 pcalibre">csapp.c</code>) that is compiled and linked into each program. A separate header file (<code id="P700049702700000000000000003E42D" data-uri="app01.xhtml#P700049702700000000000000003E42D" class="pcalibre1 calibre8 pcalibre">csapp.h</code>) contains the function prototypes for the wrappers.</p>
<p id="P700049702700000000000000003E42E" data-uri="app01.xhtml#P700049702700000000000000003E42E" class="pcalibre1 pcalibre calibre2">This appendix gives a tutorial on the different kinds of error handling in Unix systems and gives examples of the different styles of error-handling wrappers. Copies of the <code id="P700049702700000000000000003E42F" data-uri="app01.xhtml#P700049702700000000000000003E42F" class="pcalibre1 calibre8 pcalibre">csapp.h</code> and <code id="P700049702700000000000000003E430" data-uri="app01.xhtml#P700049702700000000000000003E430" class="pcalibre1 calibre8 pcalibre">csapp.c</code> files are available at the CS:APP Web site.</p>
<!--EOF:P7000497027000000000000000000013-->

<!--EOF:P7000497027000000000000000000041-->

</section>
</section></body></html>
