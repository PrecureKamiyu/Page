<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>6.9   Entity-Relationship Design Issues</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part139.htm">&lt; 上一个</a><span> | </span><a href="../database.html">内容</a><span> | </span><a href="part141.htm">下一个 &gt;</a></p><p class="s65" style="padding-left: 72pt;text-indent: 0pt;text-align: left;">6.9   <span style=" color: #00AEEF;">Entity-Relationship Design Issues</span></p><p style="padding-top: 12pt;padding-left: 119pt;text-indent: 0pt;text-align: justify;">The notions of an entity set and a relationship set are not precise, and it is possible to deﬁne a set of entities and the relationships among them in a number of diﬀerent ways. In this section, we examine basic issues in the design of an <span class="s44">E-R </span>database schema. Section 6.11 covers the design process in further detail.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="184" height="46" alt="image" src="Image_1753.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s195" style="padding-left: 50pt;text-indent: 0pt;text-align: center;">stud<span class="s202">—</span>dept</p><p style="text-indent: 0pt;text-align: left;"/><p class="s111" style="padding-top: 5pt;padding-left: 4pt;text-indent: 0pt;line-height: 120%;text-align: left;">dept_name building budget</p><p style="text-indent: 0pt;text-align: left;"/><p class="s111" style="padding-top: 3pt;padding-left: 8pt;text-indent: 0pt;text-align: left;">department</p><p style="text-indent: 0pt;text-align: left;"/><p class="s111" style="padding-top: 1pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">ID</p><p class="s111" style="padding-left: 2pt;text-indent: 0pt;line-height: 120%;text-align: left;">name tot_cred dept_name</p><p style="text-indent: 0pt;text-align: left;"/><p class="s111" style="padding-top: 5pt;padding-left: 12pt;text-indent: 0pt;text-align: left;">student</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="186" height="78" alt="image" src="Image_1754.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s195" style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">stud_section</p><p style="text-indent: 0pt;text-align: left;"/><p class="s111" style="padding-top: 4pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">section</p><p style="text-indent: 0pt;text-align: left;"/><p class="s111" style="padding-top: 5pt;padding-left: 12pt;text-indent: 0pt;text-align: left;">student</p><p style="text-indent: 0pt;text-align: left;"/><p class="s111" style="padding-left: 3pt;text-indent: 0pt;line-height: 109%;text-align: left;">assignment marks</p><p style="text-indent: 0pt;text-align: left;"/><p class="s203" style="padding-top: 2pt;padding-left: 224pt;text-indent: 0pt;text-align: left;">(a) Incorrect use of attribute</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s203" style="padding-left: 198pt;text-indent: 0pt;text-align: left;">(b) Erroneous use of relationship attributes</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 59pt;text-indent: 0pt;text-align: center;"><span class="s73">Figure 6.21 </span>Example of erroneous <span class="s157">E-R </span>diagrams</p><p class="s68" style="padding-top: 8pt;padding-left: 88pt;text-indent: 0pt;text-align: left;">6.9.1 Common Mistakes in <span class="s81">E-R </span>Diagrams</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_1755.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_1756.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_1757.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_1758.png"/></span></p><p style="padding-top: 6pt;padding-left: 88pt;text-indent: 0pt;text-align: justify;">A common mistake when creating <span class="s44">E-R </span>models is the use of the primary key of an entity set as an attribute of another entity set, instead of using a relationship. For example, in our university <span class="s44">E-R </span>model, it is incorrect to have <i>dept name </i>as an attribute of <i>student</i>, as depicted in Figure 6.21a, even though it is present as an attribute in the relation schema for <i>student</i>. The relationship <i>stud dept </i>is the correct way to represent this information in the <span class="s44">E-R </span>model, since it makes the relationship between <i>student </i>and <i>department </i>ex- plicit, rather than implicit via an attribute. Having an attribute <i>dept name </i>as well as a relationship <i>stud dept </i>would result in duplication of information.</p><p style="padding-left: 88pt;text-indent: 17pt;text-align: justify;">Another related mistake that people sometimes make is to designate the primary- key attributes of the related entity sets as attributes of the relationship set. For example, <span class="s69">ID </span>(the primary-key attributes of <i>student</i>) and <span class="s69">ID </span>(the primary key of <i>instructor</i>) should not appear as attributes of the relationship <i>advisor</i>. This should not be done since the primary-key attributes are already implicit in the relationship set.<span class="s76">6</span></p><p style="padding-left: 88pt;text-indent: 17pt;text-align: justify;">A third common mistake is to use a relationship with a single-valued attribute in a situation that requires a multivalued attribute. For example, suppose we decided to represent the marks that a student gets in diﬀerent assignments of a course oﬀering (<i>section</i>). A wrong way of doing this would be to add two attributes <i>assignment </i>and <i>marks </i>to the relationship <i>takes</i>, as depicted in Figure 6.21b. The problem with this design is that we can only represent a single assignment for a given student-section pair,</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 88pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="96" height="1" alt="image" src="Image_1759.png"/></span></p><p class="s78" style="padding-top: 3pt;padding-left: 88pt;text-indent: 0pt;text-align: left;"><span class="s77">6</span>When we create a relation schema from the <span class="s153">E-R </span>schema, the attributes may appear in a schema created from the <i>advisor</i></p><p class="s80" style="padding-left: 88pt;text-indent: 0pt;text-align: left;">relationship set, as we shall see later; however, they should not appear in the <i>advisor </i>relationship set.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="142" height="74" alt="image" src="Image_1760.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s195" style="padding-top: 7pt;padding-left: 35pt;text-indent: 0pt;text-align: left;">marks_in</p><p style="text-indent: 0pt;text-align: left;"/><p class="s111" style="padding-top: 5pt;padding-left: 12pt;text-indent: 0pt;text-align: left;">student</p><p style="text-indent: 0pt;text-align: left;"/><p class="s111" style="padding-top: 1pt;padding-left: 9pt;text-indent: 0pt;text-align: left;">marks</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="165" height="57" alt="image" src="Image_1761.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s195" style="padding-left: 42pt;text-indent: 0pt;text-align: left;">sec_assign</p><p style="text-indent: 0pt;text-align: left;"/><p class="s111" style="padding-top: 4pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">section</p><p style="text-indent: 0pt;text-align: left;"/><p class="s111" style="padding-top: 4pt;padding-left: 8pt;text-indent: 0pt;text-align: left;">assignment</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="186" height="71" alt="image" src="Image_1762.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s195" style="padding-left: 50pt;text-indent: 0pt;text-align: left;">stud_section</p><p style="text-indent: 0pt;text-align: left;"/><p class="s111" style="padding-top: 4pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">section</p><p style="text-indent: 0pt;text-align: left;"/><p class="s111" style="padding-top: 5pt;padding-left: 12pt;text-indent: 0pt;text-align: left;">student</p><p style="text-indent: 0pt;text-align: left;"/><p class="s111" style="padding-top: 1pt;padding-left: 14pt;text-indent: -10pt;line-height: 109%;text-align: left;">{assignment_marks assignment marks</p><p class="s111" style="padding-left: 4pt;text-indent: 0pt;line-height: 9pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"/><p class="s203" style="padding-top: 6pt;padding-left: 205pt;text-indent: 0pt;text-align: left;">(c) Correct alternative to erroneous E-R diagram (b)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s203" style="padding-left: 207pt;text-indent: 0pt;text-align: left;">(d) Correct alternative to erroneous E-R diagram (b)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-left: 168pt;text-indent: 0pt;text-align: left;"><span class="s73">Figure 6.22 </span>Correct versions of the <span class="s157">E-R </span>diagram of Figure 6.21.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 119pt;text-indent: 0pt;text-align: justify;">since relationship instances must be uniquely identiﬁed by the participating entities,</p><p class="s13" style="padding-left: 119pt;text-indent: 0pt;text-align: justify;">student <span class="p">and </span>section<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_1763.png"/></span></p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">One solution to the problem depicted in Figure 6.21c, shown in Figure 6.22a, is to model <i>assignment </i>as a weak entity identiﬁed by <i>section</i>, and to add a relationship <i>marks in </i>between <i>assignment </i>and <i>student</i>; the relationship would have an attribute <i>marks</i>. An alternative solution, shown in Figure 6.22d, is to use a multivalued composite attribute</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_1764.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_1765.png"/></span></p><p class="s13" style="padding-left: 119pt;text-indent: 0pt;text-align: justify;"><span class="s95">{</span>assignment marks<span class="s95">} </span><span class="p">to </span>takes<span class="p">, where </span>assignment marks <span class="p">has component attributes </span>assign- ment <span class="p">and </span>marks<span class="p">. Modeling an assignment as a weak entity is preferable in this case, since it allows recording other information about the assignment, such as maximum marks or deadlines.</span></p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">When an <span class="s44">E-R </span>diagram becomes too big to draw in a single piece, it makes sense to break it up into pieces, each showing part of the <span class="s44">E-R </span>model. When doing so, you may need to depict an entity set in more than one page. As discussed in Section 6.2.2, attributes of the entity set should be shown only once, in its ﬁrst occurrence. Subse- quent occurrences of the entity set should be shown without any attributes, to avoid repeating the same information at multiple places, which may lead to inconsistency.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s68" style="padding-left: 119pt;text-indent: 0pt;text-align: left;">6.9.2 Use of Entity Sets versus Attributes</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_1766.png"/></span></p><p style="padding-top: 6pt;padding-left: 119pt;text-indent: 0pt;text-align: justify;">Consider the entity set <i>instructor </i>with the additional attribute <i>phone number </i>(Figure 6.23a.) It can be argued that a phone is an entity in its own right with attributes <i>phone</i></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse" cellspacing="0"><tr style="height:12pt"><td style="width:11pt;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#231F20;border-right-style:solid;border-right-width:1pt;border-right-color:#231F20" rowspan="2"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:64pt;border-top-style:solid;border-top-width:1pt;border-top-color:#231F20;border-left-style:solid;border-left-width:1pt;border-left-color:#231F20;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#231F20;border-right-style:solid;border-right-width:1pt;border-right-color:#231F20" bgcolor="#C7EAFB"><p class="s134" style="padding-left: 20pt;padding-right: 20pt;text-indent: 0pt;text-align: center;">phone</p></td></tr><tr style="height:6pt"><td style="width:64pt;border-top-style:solid;border-top-width:1pt;border-top-color:#231F20;border-left-style:solid;border-left-width:1pt;border-left-color:#231F20;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#231F20;border-right-style:solid;border-right-width:1pt;border-right-color:#231F20" rowspan="2"><p class="s204" style="padding-left: 3pt;text-indent: 0pt;text-align: left;">phone_number<span class="s134"> location</span></p></td></tr><tr style="height:16pt"><td style="width:11pt;border-top-style:solid;border-top-width:1pt;border-top-color:#231F20;border-right-style:solid;border-right-width:1pt;border-right-color:#231F20"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr></table><p class="s465" style="padding-left: 126pt;text-indent: 0pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><span><img width="160" height="67" alt="image" src="Image_1767.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s111" style="padding-left: 73pt;text-indent: 0pt;text-align: left;">inst_phone</p><p style="text-indent: 0pt;text-align: left;"/><p class="s205" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;line-height: 9pt;text-align: left;">ID</p><p class="s111" style="padding-left: 3pt;text-indent: 0pt;text-align: left;">name salary</p><p style="text-indent: 0pt;text-align: left;"/><p class="s111" style="padding-left: 9pt;text-indent: 0pt;text-align: left;">instructor</p><p style="text-indent: 0pt;text-align: left;"/><p class="s205" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;line-height: 9pt;text-align: left;">ID</p><p class="s111" style="padding-left: 3pt;text-indent: 0pt;text-align: left;">name salary</p><p class="s111" style="padding-left: 3pt;text-indent: 0pt;line-height: 9pt;text-align: left;">phone_number</p><p style="text-indent: 0pt;text-align: left;"/><p class="s111" style="padding-top: 2pt;padding-left: 15pt;text-indent: 0pt;text-align: left;">instructor</p><p style="text-indent: 0pt;text-align: left;"/><p class="s42" style="padding-top: 5pt;padding-left: 152pt;text-indent: 0pt;text-align: left;">(a)                   (b)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s74" style="padding-top: 4pt;padding-left: 59pt;text-indent: 0pt;text-align: center;"><span class="s73">Figure 6.23 </span>Alternatives for adding <span class="s91">phone </span>to the <span class="s91">instructor </span>entity set.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_1768.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_1769.png"/></span></p><p class="s13" style="padding-top: 8pt;padding-left: 88pt;text-indent: 3pt;text-align: justify;">number <span class="p">and </span>location<span class="p">; the location may be the oﬃce or home where the phone is lo- cated, with mobile (cell) phones perhaps represented by the value “mobile.” If we take this point of view, we do not add the attribute </span>phone number <span class="p">to the </span>instructor<span class="p">. Rather, we create:</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_1770.png"/></span></p><p class="s13" style="padding-top: 10pt;padding-left: 91pt;text-indent: 0pt;text-align: left;"><span class="s39">• </span><span class="s40">A </span>phone <span class="p">entity set with attributes </span>phone number <span class="p">and </span>location<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_1771.png"/></span></p><p class="s39" style="padding-top: 3pt;padding-left: 107pt;text-indent: -16pt;text-align: left;">• <span class="s40">A relationship set </span><span class="s13">inst phone</span><span class="p">, denoting the association between instructors and the phones that they have.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 88pt;text-indent: 0pt;text-align: justify;">This alternative is shown in Figure 6.23b.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_1772.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_1773.png"/></span></p><p style="padding-left: 88pt;text-indent: 17pt;text-align: justify;">What, then, is the main diﬀerence between these two deﬁnitions of an instructor? Treating a phone as an attribute <i>phone number </i>implies that instructors have precisely one phone number each. Treating a phone as an entity <i>phone </i>permits instructors to have several phone numbers (including zero) associated with them. However, we could instead easily deﬁne <i>phone number </i>as a multivalued attribute to allow multiple phones per instructor.</p><p style="padding-left: 88pt;text-indent: 17pt;text-align: justify;">The main diﬀerence then is that treating a phone as an entity better models a situation where one may want to keep extra information about a phone, such as its location, or its type (mobile, <span class="s44">IP </span>phone, or plain old phone), or all who share the phone. Thus, treating phone as an entity is more general than treating it as an attribute and is appropriate when the generality may be useful.</p><p style="padding-left: 88pt;text-indent: 17pt;text-align: justify;">In contrast, it would not be appropriate to treat the attribute <i>name </i>(of an instruc- tor) as an entity; it is diﬃcult to argue that <i>name </i>is an entity in its own right (in contrast to the phone). Thus, it is appropriate to have <i>name </i>as an attribute of the <i>instructor </i>entity set.</p><p style="padding-left: 88pt;text-indent: 17pt;text-align: justify;">Two natural questions thus arise: What constitutes an attribute, and what consti- tutes an entity set? Unfortunately, there are no simple answers. The distinctions mainly depend on the structure of the real-world enterprise being modeled and on the seman- tics associated with the attribute in question.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s68" style="padding-left: 88pt;text-indent: 0pt;text-align: left;">6.9.3 Use of Entity Sets versus Relationship Sets</p><p style="padding-top: 6pt;padding-left: 88pt;text-indent: 0pt;text-align: left;">It is not always clear whether an object is best expressed by an entity set or a relationship set. In Figure 6.15, we used the <i>takes </i>relationship set to model the situation where a</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s110" style="padding-left: 4pt;text-indent: 0pt;text-align: left;">sec_id<span class="s109"> </span>semester<span class="s109"> </span>year</p><p class="s110" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">ID</p><p class="s109" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">name tot_cred</p><p class="s258" style="padding-left: 136pt;text-indent: 0pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="178" height="106" alt="image" src="Image_1774.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s200" style="padding-top: 8pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">section_reg</p><p style="text-indent: 0pt;text-align: left;"/><p class="s200" style="padding-left: 11pt;text-indent: 0pt;text-align: left;">section</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="171" height="106" alt="image" src="Image_1775.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s200" style="padding-left: 63pt;text-indent: 0pt;text-align: left;">student_reg</p><p style="text-indent: 0pt;text-align: left;"/><p class="s200" style="padding-left: 9pt;text-indent: 0pt;text-align: left;">student</p><p style="text-indent: 0pt;text-align: left;"/><p class="s109" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">...</p><p class="s109" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">...</p><p class="s109" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">...</p><p style="text-indent: 0pt;text-align: left;"/><p class="s200" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">registration</p><p style="text-indent: 0pt;text-align: left;"/><p class="s74" style="padding-top: 4pt;padding-left: 145pt;text-indent: 0pt;text-align: left;"><span class="s73">Figure 6.24 </span>Replacement of <span class="s91">takes </span>by <span class="s91">registration </span>and two relationship sets.</p><p style="padding-top: 8pt;padding-left: 119pt;text-indent: 0pt;text-align: justify;">student takes a (section of a) course. An alternative is to imagine that there is a course- registration record for each course that each student takes. Then, we have an entity set to represent the course-registration record. Let us call that entity set <i>registration</i>. Each <i>registration </i>entity is related to exactly one student and to exactly one section, so we have two relationship sets, one to relate course-registration records to students and one to relate course-registration records to sections. In Figure 6.24, we show the entity sets <i>section </i>and <i>student </i>from Figure 6.15 with the <i>takes </i>relationship set replaced by one entity set and two relationship sets:</p><p class="s39" style="padding-top: 10pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">• <span class="s13">registration</span><span class="p">, the entity set representing course-registration records.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_1776.png"/></span></p><p class="s13" style="padding-top: 3pt;padding-left: 123pt;text-indent: 0pt;text-align: left;"><span class="s39">• </span>section reg<span class="p">, the relationship set relating </span>registration <span class="p">and </span>course<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_1777.png"/></span></p><p class="s13" style="padding-top: 3pt;padding-left: 123pt;text-indent: 0pt;text-align: left;"><span class="s39">• </span>student reg<span class="p">, the relationship set relating </span>registration <span class="p">and </span>student<span class="p">.</span></p><p style="padding-top: 12pt;padding-left: 119pt;text-indent: 0pt;text-align: justify;">Note that we use double lines to indicate total participation by <i>registration </i>entities.</p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">Both the approach of Figure 6.15 and that of Figure 6.24 accurately represent the university’s information, but the use of <i>takes </i>is more compact and probably preferable. However, if the registrar’s oﬃce associates other information with a course-registration record, it might be best to make it an entity in its own right.</p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">One possible guideline in determining whether to use an entity set or a relationship set is to designate a relationship set to describe an action that occurs between entities. This approach can also be useful in deciding whether certain attributes may be more appropriately expressed as relationships.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s68" style="padding-left: 119pt;text-indent: 0pt;text-align: left;">6.9.4 Binary versus <span class="s69">n</span>-ary Relationship Sets</p><p style="padding-top: 6pt;padding-left: 119pt;text-indent: 0pt;text-align: justify;">Relationships in databases are often binary. Some relationships that appear to be nonbi- nary could actually be better represented by several binary relationships. For instance, one could create a ternary relationship <i>parent</i>, relating a child to his/her mother and father. However, such a relationship could also be represented by two binary relation- ships, <i>mother </i>and <i>father</i>, relating a child to his/her mother and father separately. Using</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 88pt;text-indent: 0pt;text-align: justify;">the two relationships <i>mother </i>and <i>father </i>provides us with a record of a child’s mother, even if we are not aware of the father’s identity; a null value would be required if the ternary relationship <i>parent </i>were used. Using binary relationship sets is preferable in this case.</p><p style="padding-top: 1pt;padding-left: 88pt;text-indent: 17pt;line-height: 70%;text-align: justify;">In fact, it is always possible to replace a nonbinary (<i>n</i>-ary, for <i>n </i><span class="s83">&gt; </span>2) relationship set by a number of distinct binary relationship sets. For simplicity, consider the abstract</p><p style="padding-left: 88pt;text-indent: 0pt;text-align: justify;">ternary (<i>n </i><span class="s15">= </span>3) relationship set <i>R</i>, relating entity sets <i>A</i>, <i>B</i>, and <i>C</i>. We replace the relationship set <i>R </i>with an entity set <i>E</i>, and we create three relationship sets as shown in Figure 6.25:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-left: 91pt;text-indent: 0pt;text-align: left;"><span class="s39">• </span>R<span class="s145">A</span><span class="p">, a many-to-one relationship set from </span>E <span class="p">to </span>A<span class="p">.</span></p><p class="s13" style="padding-top: 2pt;padding-left: 91pt;text-indent: 0pt;text-align: left;"><span class="s39">• </span>R<span class="s97">B</span><span class="p">, a many-to-one relationship set from </span>E <span class="p">to </span>B<span class="p">.</span></p><p class="s13" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;"><span class="s39">• </span>R<span class="s97">C </span><span class="p">, a many-to-one relationship set from </span>E <span class="p">to </span>C<span class="p">.</span></p><p class="s13" style="padding-top: 13pt;padding-left: 88pt;text-indent: 0pt;line-height: 93%;text-align: justify;">E <span class="p">is required to have total participation in each of </span>R<span class="s97">A</span><span class="p">, </span>R<span class="s97">B</span><span class="p">, and </span>R<span class="s97">C </span><span class="p">. If the relationship set </span>R <span class="p">had any attributes, these are assigned to entity set </span>E<span class="p">; further, a special identifying attribute is created for </span>E <span class="p">(since it must be possible to distinguish diﬀerent entities in an entity set on the basis of their attribute values). For each relationship (</span>a<span class="s97">i </span><span class="p">, </span>b<span class="s97">i</span><span class="p">, </span>c<span class="s97">i</span><span class="p">) in the relationship set </span>R<span class="p">, we createa new entity </span>e<span class="s97">i </span><span class="p">in the entity set </span>E<span class="p">. Then, in each of the three new relationship sets, we insert a relationship as follows:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-left: 91pt;text-indent: 0pt;text-align: left;"><span class="s39">• </span><span class="s40">(</span>e<span class="s145">i</span><span class="p">, </span>a<span class="s145">i</span><span class="p">) in </span>R<span class="s145">A</span><span class="p">.</span></p><p class="s13" style="padding-top: 2pt;padding-left: 91pt;text-indent: 0pt;text-align: left;"><span class="s39">• </span><span class="s40">(</span>e<span class="s97">i</span><span class="p">, </span>b<span class="s97">i</span><span class="p">) in </span>R<span class="s97">B</span><span class="p">.</span></p><p class="s13" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;"><span class="s39">• </span><span class="s40">(</span>e<span class="s145">i</span><span class="p">, </span>c<span class="s145">i</span><span class="p">) in </span>R<span class="s145">C </span><span class="p">.</span></p><p style="padding-top: 13pt;padding-left: 88pt;text-indent: 17pt;text-align: justify;">We can generalize this process in a straightforward manner to <i>n</i>-ary relationship sets. Thus, conceptually, we can restrict the <span class="s44">E-R </span>model to include only binary relation- ship sets. However, this restriction is not always desirable.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s465" style="padding-left: 114pt;text-indent: 0pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><span><img width="221" height="117" alt="image" src="Image_1778.png"/></span></p><p class="s109" style="text-indent: 0pt;line-height: 8pt;text-align: left;">A</p><p style="text-indent: 0pt;text-align: left;"/><p class="s109" style="text-indent: 0pt;text-align: left;">R<span class="s194">A</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s109" style="text-indent: 0pt;line-height: 8pt;text-align: left;">B</p><p style="text-indent: 0pt;text-align: left;"/><p class="s109" style="text-indent: 0pt;text-align: left;">R<span class="s194">B</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s109" style="text-indent: 0pt;line-height: 8pt;text-align: left;">E</p><p style="text-indent: 0pt;text-align: left;"/><p class="s109" style="text-indent: 0pt;text-align: left;">R<span class="s194">C</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s109" style="text-indent: 0pt;line-height: 8pt;text-align: left;">C</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="118" height="75" alt="image" src="Image_1779.png"/></span></p><p class="s109" style="text-indent: 0pt;line-height: 8pt;text-align: left;">A</p><p style="text-indent: 0pt;text-align: left;"/><p class="s109" style="text-indent: 0pt;line-height: 8pt;text-align: left;">B</p><p style="text-indent: 0pt;text-align: left;"/><p class="s109" style="text-indent: 0pt;line-height: 8pt;text-align: left;">R</p><p style="text-indent: 0pt;text-align: left;"/><p class="s109" style="text-indent: 0pt;line-height: 8pt;text-align: left;">C</p><p style="text-indent: 0pt;text-align: left;"/><p class="s42" style="padding-top: 7pt;padding-left: 153pt;text-indent: 0pt;text-align: left;">(a)                      (b)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s73" style="padding-top: 4pt;padding-left: 59pt;text-indent: 0pt;text-align: center;">Figure 6.25 <span class="s74">Ternary relationship versus three binary relationships.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s39" style="padding-top: 4pt;padding-left: 139pt;text-indent: -16pt;text-align: justify;"><a name="bookmark128">• </a><span class="s40">An identifying attribute may have to be created for the entity set created to rep- resent the relationship set. This attribute, along with the extra relationship sets required, increases the complexity of the design and (as we shall see in Section 6.7) overall storage requirements.</span><a name="bookmark157">&zwnj;</a></p><p class="s39" style="padding-top: 4pt;padding-left: 139pt;text-indent: -16pt;text-align: justify;">• <span class="s40">An </span><span class="s13">n</span><span class="p">-ary relationship set shows more clearly that several entities participate in a single relationship.</span></p><p class="s13" style="padding-top: 4pt;padding-left: 139pt;text-indent: -16pt;text-align: justify;"><span class="s39">• </span><span class="s40">There may not be a way to translate constraints on the ternary relationship into constraints on the binary relationships. For example, consider a constraint that says that </span>R <span class="p">is many-to-one from </span>A<span class="p">, </span>B <span class="p">to </span>C<span class="p">; that is, each pair of entities from </span>A <span class="p">and </span>B <span class="p">is associated with at most one </span>C <span class="p">entity. This constraint cannot be expressed by using cardinality constraints on the relationship sets </span>R<span class="s97">A</span><span class="p">, </span>R<span class="s97">B</span><span class="p">, and </span>R<span class="s97">C </span><span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_1780.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_1781.png"/></span></p><p style="padding-top: 10pt;padding-left: 119pt;text-indent: 17pt;text-align: justify;">Consider the relationship set <i>proj guide </i>in Section 6.2.2, relating <i>instructor</i>, <i>stu- dent</i>, and <i>project</i>. We cannot directly split <i>proj guide </i>into binary relationships between <i>instructor </i>and <i>project </i>and between <i>instructor </i>and <i>student</i>. If we did so, we would be able to record that instructor Katz works on projects <i>A </i>and <i>B </i>with students Shankar and Zhang; however, we would not be able to record that Katz works on project <i>A </i>with student Shankar and works on project <i>B </i>with student Zhang, but does not work on project <i>A </i>with Zhang or on project <i>B </i>with Shankar.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_1782.png"/></span></p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">The relationship set <i>proj guide </i>can be split into binary relationships by creating a new entity set as described above. However, doing so would not be very natural.</p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part139.htm">&lt; 上一个</a><span> | </span><a href="../database.html">内容</a><span> | </span><a href="part141.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
