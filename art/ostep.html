<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>()</title><link href="ostep_files/navigation.css" rel="stylesheet" type="text/css"/><link href="ostep_files/document.css" rel="stylesheet" type="text/css"/><meta name="author" content="()"/></head><body><p class="top_nav"><a href="ostep_files/part1.htm">下一个 &gt;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="padding-top: 1pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">O<span class="h3">PERATING </span>S<span class="h3">YSTEMS</span></h1><h4 style="padding-top: 2pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">T<span class="s1">HREE </span>E<span class="s1">ASY </span>P<span class="s1">IECES</span></h4><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s2" style="padding-left: 41pt;text-indent: 0pt;line-height: 11pt;text-align: left;">R<span class="s3">EMZI </span>H. A<span class="s3">RPACI</span>-D<span class="s3">USSEAU</span></p><p class="s2" style="padding-left: 41pt;text-indent: 0pt;line-height: 10pt;text-align: left;">A<span class="s3">NDREA </span>C. A<span class="s3">RPACI</span>-D<span class="s3">USSEAU</span></p><p class="s2" style="padding-left: 41pt;text-indent: 0pt;line-height: 11pt;text-align: left;">U<span class="s3">NIVERSITY OF </span>W<span class="s3">ISCONSIN</span>–M<span class="s3">ADISON</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 58pt;text-indent: 0pt;text-align: left;">.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 21pt;text-indent: 0pt;text-align: center;">Q<span class="p">c 2014 by Arpaci-Dusseau Books, Inc.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s5" style="padding-left: 21pt;text-indent: 0pt;text-align: center;">All rights reserved</p><p style="padding-top: 2pt;text-indent: 0pt;text-align: right;">i</p><p style="padding-left: 41pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="460" height="1" alt="image" src="ostep_files/Image_001.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s6" style="padding-top: 3pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">To Vedat S. Arpaci, a lifelong inspiration</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 130pt;text-indent: 0pt;text-align: left;"><span class="s4">Q</span>c 2014, A<span class="s7">RPACI</span>-D<span class="s7">USSEAU</span></p><p style="padding-top: 3pt;padding-left: 117pt;text-indent: 0pt;line-height: 89%;text-align: right;">T<span class="s7">HREE </span>E<span class="s7">ASY </span>P<span class="s7">IECES</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 41pt;text-indent: 0pt;text-align: left;"><span><img width="432" height="57" alt="image" src="ostep_files/Image_002.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="toc">&nbsp;</p><div class="toc"><a class="toc0" href="ostep_files/part1.htm">Preface</a><a class="toc1" href="ostep_files/part2.htm">To Everyone</a><a class="toc1" href="ostep_files/part3.htm">To Educators</a><a class="toc1" href="ostep_files/part4.htm">To Students</a><a class="toc1" href="ostep_files/part5.htm">Acknowledgments</a><a class="toc1" href="ostep_files/part6.htm">Final Words</a><a class="toc1" href="ostep_files/part7.htm">References</a><a class="toc0" href="ostep_files/part8.htm">Contents</a><a class="toc1" href="ostep_files/part9.htm">8  Scheduling:The Multi-Level Feedback Queue          71</a><a class="toc1" href="ostep_files/part10.htm">11 Summary Dialogue on CPU Virtualization           105</a><a class="toc1" href="ostep_files/part11.htm">24 Summary Dialogue on Memory Virtualization         255</a><a class="toc1" href="ostep_files/part12.htm">38 Redundant Arrays of Inexpensive Disks (RAIDs)       421</a><a class="toc0" href="ostep_files/part13.htm">List of Figures</a><a class="toc1" href="ostep_files/part14.htm">8.4  A Mixed I/O-intensive and CPU-intensive Workload     75</a><a class="toc0" href="ostep_files/part15.htm">List of Tables</a><a class="toc1" href="ostep_files/part16.htm">6.3  Limited Direction Execution Protocol (Timer Interrupt)    53</a><a class="toc1" href="ostep_files/part17.htm">38.5 Example: Writes To 4, 13, And Respective Parity Blocks   433</a><a class="toc1" href="ostep_files/part18.htm">40.4 File Creation Timeline (Time Increasing Downward)    473</a><a class="toc0" href="ostep_files/part19.htm">A Dialogue on the Book</a><a class="toc0" href="ostep_files/part20.htm">Introduction to Operating Systems</a><a class="toc1" href="ostep_files/part21.htm">2.1 Virtualizing the CPU</a><a class="toc1" href="ostep_files/part22.htm">2.2 Virtualizing Memory</a><a class="toc1" href="ostep_files/part23.htm">2.3 Concurrency</a><a class="toc1" href="ostep_files/part24.htm">2.4 Persistence</a><a class="toc1" href="ostep_files/part25.htm">2.5 Design Goals</a><a class="toc1" href="ostep_files/part26.htm">2.6 Some History</a><a class="toc2" href="ostep_files/part27.htm">Early Operating Systems: Just Libraries</a><a class="toc2" href="ostep_files/part28.htm">Beyond Libraries: Protection</a><a class="toc2" href="ostep_files/part29.htm">The Era of Multiprogramming</a><a class="toc2" href="ostep_files/part30.htm">The Modern Era</a><a class="toc1" href="ostep_files/part31.htm">2.7 Summary</a><a class="toc1" href="ostep_files/part32.htm">References</a><a class="toc0" href="ostep_files/part33.htm">Virtualization</a><a class="toc1" href="ostep_files/part34.htm">A Dialogue on Virtualization</a><a class="toc1" href="ostep_files/part35.htm">The Abstraction: The Process</a><a class="toc2" href="ostep_files/part36.htm">4.1 The Abstraction: A Process</a><a class="toc2" href="ostep_files/part37.htm">4.2 Process API</a><a class="toc2" href="ostep_files/part38.htm">4.3 Process Creation: A Little More Detail</a><a class="toc2" href="ostep_files/part39.htm">4.4 Process States</a><a class="toc2" href="ostep_files/part40.htm">4.5 Data Structures</a><a class="toc2" href="ostep_files/part41.htm">4.6 Summary</a><a class="toc2" href="ostep_files/part42.htm">References</a><a class="toc1" href="ostep_files/part43.htm">Interlude: Process API</a><a class="toc2" href="ostep_files/part44.htm">5.1 The fork() System Call</a><a class="toc2" href="ostep_files/part45.htm">5.2  Adding wait() System Call</a><a class="toc2" href="ostep_files/part46.htm">5.3 Finally, the exec() System Call</a><a class="toc2" href="ostep_files/part47.htm">5.4 Why? Motivating the API</a><a class="toc2" href="ostep_files/part48.htm">5.5 Other Parts of the API</a><a class="toc2" href="ostep_files/part49.htm">5.6 Summary</a><a class="toc2" href="ostep_files/part50.htm">References</a><a class="toc1" href="ostep_files/part51.htm">Mechanism: Limited Direct Execution</a><a class="toc2" href="ostep_files/part52.htm">6.1 Basic Technique: Limited Direct Execution</a><a class="toc2" href="ostep_files/part54.htm">6.2 Problem #1: Restricted Operations</a><a class="toc2" href="ostep_files/part55.htm">6.3 Problem #2: Switching Between Processes</a><a class="toc2" href="ostep_files/part60.htm">6.4 Worried About Concurrency?</a><a class="toc2" href="ostep_files/part61.htm">6.5 Summary</a><a class="toc2" href="ostep_files/part62.htm">References</a><a class="toc2" href="ostep_files/part63.htm">Homework (Measurement)</a><a class="toc1" href="ostep_files/part64.htm">Scheduling: Introduction</a><a class="toc2" href="ostep_files/part65.htm">7.1 Workload Assumptions</a><a class="toc2" href="ostep_files/part67.htm">7.2 Scheduling Metrics</a><a class="toc2" href="ostep_files/part68.htm">7.3 First In, First Out (FIFO)</a><a class="toc2" href="ostep_files/part69.htm">7.4 Shortest Job First (SJF)</a><a class="toc2" href="ostep_files/part70.htm">7.5 Shortest Time-to-Completion First (STCF)</a><a class="toc2" href="ostep_files/part71.htm">7.6 Round Robin</a><a class="toc2" href="ostep_files/part72.htm">7.7 Incorporating I/O</a><a class="toc2" href="ostep_files/part73.htm">7.8 No More Oracle</a><a class="toc2" href="ostep_files/part74.htm">7.9 Summary</a><a class="toc2" href="ostep_files/part75.htm">References</a><a class="toc2" href="ostep_files/part76.htm">Homework</a><a class="toc1" href="ostep_files/part78.htm">Scheduling:           The Multi-Level Feedback Queue</a><a class="toc2" href="ostep_files/part79.htm">8.1 MLFQ: Basic Rules</a><a class="toc2" href="ostep_files/part80.htm">8.2 Attempt #1: How to Change Priority</a><a class="toc2" href="ostep_files/part86.htm">8.3 Attempt #2: The Priority Boost</a><a class="toc2" href="ostep_files/part88.htm">8.4 Attempt #3: Better Accounting</a><a class="toc2" href="ostep_files/part89.htm">8.5 Tuning MLFQ And Other Issues</a><a class="toc2" href="ostep_files/part90.htm">8.6 MLFQ: Summary</a><a class="toc2" href="ostep_files/part91.htm">References</a><a class="toc2" href="ostep_files/part92.htm">Homework</a><a class="toc1" href="ostep_files/part94.htm">Scheduling: Proportional Share</a><a class="toc2" href="ostep_files/part95.htm">9.1 Basic Concept: Tickets Represent Your Share</a><a class="toc2" href="ostep_files/part96.htm">9.2 Ticket Mechanisms</a><a class="toc2" href="ostep_files/part97.htm">9.3 Implementation</a><a class="toc2" href="ostep_files/part98.htm">9.4 An Example</a><a class="toc2" href="ostep_files/part99.htm">9.5 How To Assign Tickets?</a><a class="toc2" href="ostep_files/part100.htm">9.6 Why Not Deterministic?</a><a class="toc2" href="ostep_files/part101.htm">9.7 Summary</a><a class="toc2" href="ostep_files/part102.htm">References</a><a class="toc2" href="ostep_files/part103.htm">Homework</a><a class="toc1" href="ostep_files/part105.htm">Multiprocessor Scheduling (Advanced)</a><a class="toc2" href="ostep_files/part106.htm">10.1 Background: Multiprocessor Architecture</a><a class="toc2" href="ostep_files/part107.htm">10.2 Don’t Forget Synchronization</a><a class="toc2" href="ostep_files/part108.htm">10.3 One Final Issue: Cache Affinity</a><a class="toc2" href="ostep_files/part109.htm">10.4 Single-Queue Scheduling</a><a class="toc2" href="ostep_files/part110.htm">10.5 Multi-Queue Scheduling</a><a class="toc2" href="ostep_files/part111.htm">10.6 Linux Multiprocessor Schedulers</a><a class="toc2" href="ostep_files/part112.htm">10.7 Summary</a><a class="toc2" href="ostep_files/part113.htm">References</a><a class="toc1" href="ostep_files/part114.htm">Summary Dialogue on CPU Virtualization</a><a class="toc1" href="ostep_files/part115.htm">A Dialogue on Memory Virtualization</a><a class="toc1" href="ostep_files/part116.htm">The Abstraction: Address Spaces</a><a class="toc2" href="ostep_files/part117.htm">13.1 Early Systems</a><a class="toc2" href="ostep_files/part118.htm">13.2 Multiprogramming and Time Sharing</a><a class="toc2" href="ostep_files/part119.htm">13.3 The Address Space</a><a class="toc2" href="ostep_files/part120.htm">13.4 Goals</a><a class="toc2" href="ostep_files/part121.htm">13.5 Summary</a><a class="toc2" href="ostep_files/part122.htm">References</a><a class="toc1" href="ostep_files/part123.htm">Interlude: Memory API</a><a class="toc2" href="ostep_files/part124.htm">14.1 Types of Memory</a><a class="toc2" href="ostep_files/part125.htm">14.2 The malloc() Call</a><a class="toc2" href="ostep_files/part126.htm">14.3 The free() Call</a><a class="toc2" href="ostep_files/part127.htm">14.4 Common Errors</a><a class="toc2" href="ostep_files/part136.htm">14.5 Underlying OS Support</a><a class="toc2" href="ostep_files/part137.htm">14.6 Other Calls</a><a class="toc2" href="ostep_files/part138.htm">14.7 Summary</a><a class="toc2" href="ostep_files/part139.htm">References</a><a class="toc1" href="ostep_files/part140.htm">Mechanism: Address Translation</a><a class="toc2" href="ostep_files/part141.htm">15.1 Assumptions</a><a class="toc2" href="ostep_files/part142.htm">15.2 An Example</a><a class="toc2" href="ostep_files/part143.htm">15.3 Dynamic (Hardware-based) Relocation</a><a class="toc2" href="ostep_files/part145.htm">15.4 OS Issues</a><a class="toc2" href="ostep_files/part146.htm">15.5 Summary</a><a class="toc2" href="ostep_files/part147.htm">References</a><a class="toc2" href="ostep_files/part148.htm">Homework</a><a class="toc1" href="ostep_files/part150.htm">Segmentation</a><a class="toc2" href="ostep_files/part151.htm">16.1 Segmentation: Generalized Base/Bounds</a><a class="toc2" href="ostep_files/part152.htm">16.2 Which Segment Are We Referring To?</a><a class="toc2" href="ostep_files/part153.htm">16.3 What About The Stack?</a><a class="toc2" href="ostep_files/part155.htm">16.4 Support for Sharing</a><a class="toc2" href="ostep_files/part156.htm">16.5 Fine-grained vs. Coarse-grained Segmentation</a><a class="toc2" href="ostep_files/part157.htm">16.6 OS Support</a><a class="toc2" href="ostep_files/part158.htm">16.7 Summary</a><a class="toc2" href="ostep_files/part159.htm">References</a><a class="toc2" href="ostep_files/part160.htm">Homework</a><a class="toc1" href="ostep_files/part162.htm">Free-Space Management</a><a class="toc2" href="ostep_files/part163.htm">17.1 Assumptions</a><a class="toc2" href="ostep_files/part164.htm">17.2 Low-level Mechanisms</a><a class="toc2" href="ostep_files/part169.htm">17.3 Basic Strategies</a><a class="toc2" href="ostep_files/part175.htm">17.4 Other Approaches</a><a class="toc2" href="ostep_files/part179.htm">17.5 Summary</a><a class="toc2" href="ostep_files/part180.htm">References</a><a class="toc1" href="ostep_files/part181.htm">Paging: Introduction</a><a class="toc2" href="ostep_files/part182.htm">18.1 Where Are Page Tables Stored?</a><a class="toc2" href="ostep_files/part183.htm">18.2 What’s Actually In The Page Table?</a><a class="toc2" href="ostep_files/part184.htm">18.3 Paging: Also Too Slow</a><a class="toc2" href="ostep_files/part185.htm">18.4 A Memory Trace</a><a class="toc2" href="ostep_files/part186.htm">18.5 Summary</a><a class="toc2" href="ostep_files/part187.htm">References</a><a class="toc2" href="ostep_files/part188.htm">Homework</a><a class="toc1" href="ostep_files/part190.htm">Paging: Faster Translations (TLBs)</a><a class="toc2" href="ostep_files/part191.htm">19.1 TLB Basic Algorithm</a><a class="toc2" href="ostep_files/part192.htm">19.2 Example: Accessing An Array</a><a class="toc2" href="ostep_files/part193.htm">19.3 Who Handles The TLB Miss?</a><a class="toc2" href="ostep_files/part194.htm">19.4 TLB Contents: What’s In There?</a><a class="toc2" href="ostep_files/part195.htm">19.5 TLB Issue: Context Switches</a><a class="toc2" href="ostep_files/part196.htm">19.6 Issue: Replacement Policy</a><a class="toc2" href="ostep_files/part197.htm">19.7 A Real TLB Entry</a><a class="toc2" href="ostep_files/part198.htm">19.8 Summary</a><a class="toc2" href="ostep_files/part199.htm">References</a><a class="toc2" href="ostep_files/part200.htm">Homework (Measurement)</a><a class="toc1" href="ostep_files/part202.htm">Paging: Smaller Tables</a><a class="toc2" href="ostep_files/part203.htm">20.1 Simple Solution: Bigger Pages</a><a class="toc2" href="ostep_files/part204.htm">20.2 Hybrid Approach: Paging and Segments</a><a class="toc2" href="ostep_files/part205.htm">20.3 Multi-level Page Tables</a><a class="toc2" href="ostep_files/part209.htm">20.4 Inverted Page Tables</a><a class="toc2" href="ostep_files/part210.htm">20.5 Swapping the Page Tables to Disk</a><a class="toc2" href="ostep_files/part211.htm">20.6 Summary</a><a class="toc2" href="ostep_files/part212.htm">References</a><a class="toc2" href="ostep_files/part213.htm">Homework</a><a class="toc1" href="ostep_files/part215.htm">Beyond Physical Memory: Mechanisms</a><a class="toc2" href="ostep_files/part216.htm">21.1 Swap Space</a><a class="toc2" href="ostep_files/part217.htm">21.2 The Present Bit</a><a class="toc2" href="ostep_files/part218.htm">21.3 The Page Fault</a><a class="toc2" href="ostep_files/part219.htm">21.4 What If Memory Is Full?</a><a class="toc2" href="ostep_files/part220.htm">21.5 Page Fault Control Flow</a><a class="toc2" href="ostep_files/part221.htm">21.6 When Replacements Really Occur</a><a class="toc2" href="ostep_files/part222.htm">21.7 Summary</a><a class="toc2" href="ostep_files/part223.htm">References</a><a class="toc1" href="ostep_files/part224.htm">Beyond Physical Memory: Policies</a><a class="toc2" href="ostep_files/part225.htm">22.1 Cache Management</a><a class="toc2" href="ostep_files/part226.htm">22.2 The Optimal Replacement Policy</a><a class="toc2" href="ostep_files/part227.htm">22.3 A Simple Policy: FIFO</a><a class="toc2" href="ostep_files/part228.htm">22.4 Another Simple Policy: Random</a><a class="toc2" href="ostep_files/part229.htm">22.5 Using History: LRU</a><a class="toc2" href="ostep_files/part230.htm">22.6 Workload Examples</a><a class="toc2" href="ostep_files/part237.htm">22.7 Implementing Historical Algorithms</a><a class="toc2" href="ostep_files/part238.htm">22.8 Approximating LRU</a><a class="toc2" href="ostep_files/part241.htm">22.9 Considering Dirty Pages</a><a class="toc2" href="ostep_files/part242.htm">22.10 Other VM Policies</a><a class="toc2" href="ostep_files/part243.htm">22.11 Thrashing</a><a class="toc2" href="ostep_files/part244.htm">22.12 Summary</a><a class="toc2" href="ostep_files/part245.htm">References</a><a class="toc2" href="ostep_files/part246.htm">Homework</a><a class="toc1" href="ostep_files/part248.htm">The VAX/VMS Virtual Memory System</a><a class="toc2" href="ostep_files/part249.htm">23.1 Background</a><a class="toc2" href="ostep_files/part250.htm">23.2 Memory Management Hardware</a><a class="toc2" href="ostep_files/part251.htm">23.3 A Real Address Space</a><a class="toc2" href="ostep_files/part252.htm">23.4 Page Replacement</a><a class="toc2" href="ostep_files/part255.htm">23.5 Other Neat VM Tricks</a><a class="toc2" href="ostep_files/part256.htm">23.6 Summary</a><a class="toc2" href="ostep_files/part257.htm">References</a><a class="toc1" href="ostep_files/part258.htm">Summary Dialogue on Memory Virtualization</a><a class="toc0" href="ostep_files/part259.htm">Concurrency</a><a class="toc1" href="ostep_files/part260.htm">A Dialogue on Concurrency</a><a class="toc1" href="ostep_files/part261.htm">Concurrency: An Introduction</a><a class="toc2" href="ostep_files/part262.htm">26.1 An Example: Thread Creation</a><a class="toc2" href="ostep_files/part263.htm">26.2 Why It Gets Worse: Shared Data</a><a class="toc2" href="ostep_files/part264.htm">26.3 The Heart of the Problem: Uncontrolled Scheduling</a><a class="toc2" href="ostep_files/part265.htm">26.4 The Wish For Atomicity</a><a class="toc2" href="ostep_files/part266.htm">26.5 One More Problem: Waiting For Another</a><a class="toc2" href="ostep_files/part267.htm">26.6 Summary: Why in OS Class?</a><a class="toc2" href="ostep_files/part268.htm">References</a><a class="toc2" href="ostep_files/part269.htm">Homework</a><a class="toc1" href="ostep_files/part271.htm">Interlude: Thread API</a><a class="toc2" href="ostep_files/part272.htm">27.1 Thread Creation</a><a class="toc2" href="ostep_files/part273.htm">27.2 Thread Completion</a><a class="toc2" href="ostep_files/part274.htm">27.3 Locks</a><a class="toc2" href="ostep_files/part275.htm">27.4 Condition Variables</a><a class="toc2" href="ostep_files/part276.htm">27.5 Compiling and Running</a><a class="toc2" href="ostep_files/part277.htm">27.6 Summary</a><a class="toc2" href="ostep_files/part278.htm">References</a><a class="toc1" href="ostep_files/part279.htm">Locks</a><a class="toc2" href="ostep_files/part280.htm">28.1 Locks: The Basic Idea</a><a class="toc2" href="ostep_files/part281.htm">28.2 Pthread Locks</a><a class="toc2" href="ostep_files/part282.htm">28.3 Building A Lock</a><a class="toc2" href="ostep_files/part283.htm">28.4 Evaluating Locks</a><a class="toc2" href="ostep_files/part284.htm">28.5 Controlling Interrupts</a><a class="toc2" href="ostep_files/part285.htm">28.6 Test And Set (Atomic Exchange)</a><a class="toc2" href="ostep_files/part286.htm">28.7 Building A Working Spin Lock</a><a class="toc2" href="ostep_files/part287.htm">28.8 Evaluating Spin Locks</a><a class="toc2" href="ostep_files/part288.htm">28.9 Compare-And-Swap</a><a class="toc2" href="ostep_files/part289.htm">28.10 Load-Linked and Store-Conditional</a><a class="toc2" href="ostep_files/part290.htm">28.11 Fetch-And-Add</a><a class="toc2" href="ostep_files/part291.htm">28.12 Summary: So Much Spinning</a><a class="toc2" href="ostep_files/part292.htm">28.13 A Simple Approach: Just Yield, Baby</a><a class="toc2" href="ostep_files/part293.htm">28.14 Using Queues: Sleeping Instead Of Spinning</a><a class="toc2" href="ostep_files/part294.htm">28.15 Different OS, Different Support</a><a class="toc2" href="ostep_files/part295.htm">28.16 Two-Phase Locks</a><a class="toc2" href="ostep_files/part296.htm">28.17 Summary</a><a class="toc2" href="ostep_files/part297.htm">References</a><a class="toc1" href="ostep_files/part298.htm">Lock-based Concurrent Data Structures</a><a class="toc2" href="ostep_files/part299.htm">29.1 Concurrent Counters</a><a class="toc2" href="ostep_files/part302.htm">29.2 Concurrent Linked Lists</a><a class="toc2" href="ostep_files/part304.htm">29.3 Concurrent Queues</a><a class="toc2" href="ostep_files/part305.htm">29.4 Concurrent Hash Table</a><a class="toc2" href="ostep_files/part306.htm">29.5 Summary</a><a class="toc2" href="ostep_files/part307.htm">References</a><a class="toc1" href="ostep_files/part308.htm">Condition Variables</a><a class="toc2" href="ostep_files/part309.htm">30.1 Definition and Routines</a><a class="toc2" href="ostep_files/part310.htm">30.2 The Producer/Consumer (Bound Buffer) Problem</a><a class="toc2" href="ostep_files/part315.htm">30.3 Covering Conditions</a><a class="toc2" href="ostep_files/part316.htm">30.4 Summary</a><a class="toc2" href="ostep_files/part317.htm">References</a><a class="toc1" href="ostep_files/part318.htm">Semaphores</a><a class="toc2" href="ostep_files/part319.htm">31.1 Semaphores: A Definition</a><a class="toc2" href="ostep_files/part320.htm">31.2 Binary Semaphores (Locks)</a><a class="toc2" href="ostep_files/part321.htm">31.3 Semaphores As Condition Variables</a><a class="toc2" href="ostep_files/part322.htm">31.4 The Producer/Consumer (Bounded-Buffer) Problem</a><a class="toc2" href="ostep_files/part327.htm">31.5 Reader-Writer Locks</a><a class="toc2" href="ostep_files/part328.htm">31.6 The Dining Philosophers</a><a class="toc2" href="ostep_files/part331.htm">31.7 How To Implement Semaphores</a><a class="toc2" href="ostep_files/part332.htm">31.8 Summary</a><a class="toc2" href="ostep_files/part333.htm">References</a><a class="toc1" href="ostep_files/part334.htm">Common Concurrency Problems</a><a class="toc2" href="ostep_files/part335.htm">32.1 What Types Of Bugs Exist?</a><a class="toc2" href="ostep_files/part336.htm">32.2 Non-Deadlock Bugs</a><a class="toc2" href="ostep_files/part340.htm">32.3 Deadlock Bugs</a><a class="toc2" href="ostep_files/part350.htm">32.4 Summary</a><a class="toc2" href="ostep_files/part351.htm">References</a><a class="toc1" href="ostep_files/part352.htm">Event-based Concurrency (Advanced)</a><a class="toc2" href="ostep_files/part353.htm">33.1 The Basic Idea: An Event Loop</a><a class="toc2" href="ostep_files/part354.htm">33.2 An Important API: select() (or poll())</a><a class="toc2" href="ostep_files/part355.htm">33.3 Using select()</a><a class="toc2" href="ostep_files/part356.htm">33.4 Why Simpler? No Locks Needed</a><a class="toc2" href="ostep_files/part357.htm">33.5 A Problem: Blocking System Calls</a><a class="toc2" href="ostep_files/part358.htm">33.6 A Solution: Asynchronous I/O</a><a class="toc2" href="ostep_files/part359.htm">33.7 Another Problem: State Management</a><a class="toc2" href="ostep_files/part360.htm">33.8 What Is Still Difficult With Events</a><a class="toc2" href="ostep_files/part361.htm">33.9 Summary</a><a class="toc2" href="ostep_files/part362.htm">References</a><a class="toc1" href="ostep_files/part363.htm">Summary Dialogue on Concurrency</a><a class="toc0" href="ostep_files/part364.htm">Persistence</a><a class="toc1" href="ostep_files/part365.htm">A Dialogue on Persistence</a><a class="toc1" href="ostep_files/part366.htm">I/O Devices</a><a class="toc2" href="ostep_files/part367.htm">36.1 System Architecture</a><a class="toc2" href="ostep_files/part368.htm">36.2 A Canonical Device</a><a class="toc2" href="ostep_files/part369.htm">36.3 The Canonical Protocol</a><a class="toc2" href="ostep_files/part370.htm">36.4 Lowering CPU Overhead With Interrupts</a><a class="toc2" href="ostep_files/part371.htm">36.5 More Efficient Data Movement With DMA</a><a class="toc2" href="ostep_files/part372.htm">36.6 Methods Of Device Interaction</a><a class="toc2" href="ostep_files/part373.htm">36.7 Fitting Into The OS: The Device Driver</a><a class="toc2" href="ostep_files/part374.htm">36.8 Case Study: A Simple IDE Disk Driver</a><a class="toc2" href="ostep_files/part375.htm">36.9 Historical Notes</a><a class="toc2" href="ostep_files/part376.htm">36.10 Summary</a><a class="toc2" href="ostep_files/part377.htm">References</a><a class="toc1" href="ostep_files/part378.htm">Hard Disk Drives</a><a class="toc2" href="ostep_files/part379.htm">37.1 The Interface</a><a class="toc2" href="ostep_files/part380.htm">37.2 Basic Geometry</a><a class="toc2" href="ostep_files/part381.htm">37.3 A Simple Disk Drive</a><a class="toc2" href="ostep_files/part385.htm">37.4 I/O Time: Doing The Math</a><a class="toc2" href="ostep_files/part386.htm">37.5 Disk Scheduling</a><a class="toc2" href="ostep_files/part391.htm">37.6 Summary</a><a class="toc2" href="ostep_files/part392.htm">References</a><a class="toc2" href="ostep_files/part393.htm">Homework</a><a class="toc1" href="ostep_files/part394.htm">Redundant Arrays of Inexpensive Disks</a><a class="toc2" href="ostep_files/part395.htm">38.1 Interface And RAID Internals</a><a class="toc2" href="ostep_files/part396.htm">38.2 Fault Model</a><a class="toc2" href="ostep_files/part397.htm">38.3 How To Evaluate A RAID</a><a class="toc2" href="ostep_files/part398.htm">38.4 RAID Level 0: Striping</a><a class="toc2" href="ostep_files/part403.htm">38.5 RAID Level 1: Mirroring</a><a class="toc2" href="ostep_files/part405.htm">38.6 RAID Level 4: Saving Space With Parity</a><a class="toc2" href="ostep_files/part408.htm">38.7 RAID Level 5: Rotating Parity</a><a class="toc2" href="ostep_files/part410.htm">38.8 RAID Comparison: A Summary</a><a class="toc2" href="ostep_files/part411.htm">38.9 Other Interesting RAID Issues</a><a class="toc2" href="ostep_files/part412.htm">38.10 Summary</a><a class="toc2" href="ostep_files/part413.htm">References</a><a class="toc2" href="ostep_files/part414.htm">Homework</a><a class="toc1" href="ostep_files/part416.htm">Interlude: File and Directories</a><a class="toc2" href="ostep_files/part417.htm">39.1 Files and Directories</a><a class="toc2" href="ostep_files/part418.htm">39.2 The File System Interface</a><a class="toc2" href="ostep_files/part419.htm">39.3 Creating Files</a><a class="toc2" href="ostep_files/part420.htm">39.4 Reading and Writing Files</a><a class="toc2" href="ostep_files/part421.htm">39.5 Reading And Writing, But Not Sequentially</a><a class="toc2" href="ostep_files/part422.htm">39.6 Writing Immediately with fsync()</a><a class="toc2" href="ostep_files/part423.htm">39.7 Renaming Files</a><a class="toc2" href="ostep_files/part424.htm">39.8 Getting Information About Files</a><a class="toc2" href="ostep_files/part425.htm">39.9 Removing Files</a><a class="toc2" href="ostep_files/part426.htm">39.10 Making Directories</a><a class="toc2" href="ostep_files/part427.htm">39.11 Reading Directories</a><a class="toc2" href="ostep_files/part428.htm">39.12 Deleting Directories</a><a class="toc2" href="ostep_files/part429.htm">39.13 Hard Links</a><a class="toc2" href="ostep_files/part430.htm">39.14 Symbolic Links</a><a class="toc2" href="ostep_files/part431.htm">39.15 Making and Mounting a File System</a><a class="toc2" href="ostep_files/part432.htm">39.16 Summary</a><a class="toc2" href="ostep_files/part433.htm">References</a><a class="toc2" href="ostep_files/part434.htm">Homework</a><a class="toc1" href="ostep_files/part436.htm">File System Implementation</a><a class="toc2" href="ostep_files/part437.htm">40.1 The Way To Think</a><a class="toc2" href="ostep_files/part438.htm">40.2 Overall Organization</a><a class="toc2" href="ostep_files/part439.htm">40.3 File Organization: The Inode</a><a class="toc2" href="ostep_files/part441.htm">40.4 Directory Organization</a><a class="toc2" href="ostep_files/part442.htm">40.5 Free Space Management</a><a class="toc2" href="ostep_files/part443.htm">40.6 Access Paths: Reading and Writing</a><a class="toc2" href="ostep_files/part447.htm">40.7 Caching and Buffering</a><a class="toc2" href="ostep_files/part448.htm">40.8 Summary</a><a class="toc2" href="ostep_files/part449.htm">References</a><a class="toc2" href="ostep_files/part450.htm">Homework</a><a class="toc1" href="ostep_files/part452.htm">Locality and The Fast File System</a><a class="toc2" href="ostep_files/part453.htm">41.1 The Problem: Poor Performance</a><a class="toc2" href="ostep_files/part454.htm">41.2 FFS: Disk Awareness Is The Solution</a><a class="toc2" href="ostep_files/part455.htm">41.3 Organizing Structure: The Cylinder Group</a><a class="toc2" href="ostep_files/part456.htm">41.4 Policies: How To Allocate Files and Directories</a><a class="toc2" href="ostep_files/part457.htm">41.5 Measuring File Locality</a><a class="toc2" href="ostep_files/part458.htm">41.6 The Large-File Exception</a><a class="toc2" href="ostep_files/part459.htm">41.7 A Few Other Things About FFS</a><a class="toc2" href="ostep_files/part460.htm">41.8 Summary</a><a class="toc2" href="ostep_files/part461.htm">References</a><a class="toc1" href="ostep_files/part462.htm">Crash Consistency: FSCK and Journaling</a><a class="toc2" href="ostep_files/part463.htm">42.1 A Detailed Example</a><a class="toc2" href="ostep_files/part466.htm">42.2 Solution #1: The File System Checker</a><a class="toc2" href="ostep_files/part467.htm">42.3 Solution #2: Journaling (or Write-Ahead Logging)</a><a class="toc2" href="ostep_files/part475.htm">42.4 Solution #3: Other Approaches</a><a class="toc2" href="ostep_files/part476.htm">42.5 Summary</a><a class="toc2" href="ostep_files/part477.htm">References</a><a class="toc1" href="ostep_files/part478.htm">Log-structured File Systems</a><a class="toc2" href="ostep_files/part479.htm">43.1 Writing To Disk Sequentially</a><a class="toc2" href="ostep_files/part480.htm">43.2 Writing Sequentially And Effectively</a><a class="toc2" href="ostep_files/part481.htm">43.3 How Much To Buffer?</a><a class="toc2" href="ostep_files/part482.htm">43.4 Problem: Finding Inodes</a><a class="toc2" href="ostep_files/part483.htm">43.5 Solution Through Indirection: The Inode Map</a><a class="toc2" href="ostep_files/part484.htm">43.6 The Checkpoint Region</a><a class="toc2" href="ostep_files/part485.htm">43.7 Reading A File From Disk: A Recap</a><a class="toc2" href="ostep_files/part486.htm">43.8 What About Directories?</a><a class="toc2" href="ostep_files/part487.htm">43.9 A New Problem: Garbage Collection</a><a class="toc2" href="ostep_files/part488.htm">43.10 Determining Block Liveness</a><a class="toc2" href="ostep_files/part489.htm">43.11 A Policy Question: Which Blocks To Clean, And When?</a><a class="toc2" href="ostep_files/part490.htm">43.12 Crash Recovery And The Log</a><a class="toc2" href="ostep_files/part491.htm">43.13 Summary</a><a class="toc2" href="ostep_files/part492.htm">References</a><a class="toc1" href="ostep_files/part493.htm">Data Integrity and Protection</a><a class="toc2" href="ostep_files/part494.htm">44.1 Disk Failure Modes</a><a class="toc2" href="ostep_files/part495.htm">44.2 Handling Latent Sector Errors</a><a class="toc2" href="ostep_files/part496.htm">44.3 Detecting Corruption: The Checksum</a><a class="toc2" href="ostep_files/part499.htm">44.4 Using Checksums</a><a class="toc2" href="ostep_files/part500.htm">44.5 A New Problem: Misdirected Writes</a><a class="toc2" href="ostep_files/part501.htm">44.6 One Last Problem: Lost Writes</a><a class="toc2" href="ostep_files/part502.htm">44.7 Scrubbing</a><a class="toc2" href="ostep_files/part503.htm">44.8 Overheads Of Checksumming</a><a class="toc2" href="ostep_files/part504.htm">44.9 Summary</a><a class="toc2" href="ostep_files/part505.htm">References</a><a class="toc1" href="ostep_files/part506.htm">Summary Dialogue on Persistence</a><a class="toc1" href="ostep_files/part507.htm">A Dialogue on Distribution</a><a class="toc1" href="ostep_files/part508.htm">Distributed Systems</a><a class="toc2" href="ostep_files/part509.htm">47.1 Communication Basics</a><a class="toc2" href="ostep_files/part510.htm">47.2 Unreliable Communication Layers</a><a class="toc2" href="ostep_files/part511.htm">47.3 Reliable Communication Layers</a><a class="toc2" href="ostep_files/part512.htm">47.4 Communication Abstractions</a><a class="toc2" href="ostep_files/part513.htm">47.5 Remote Procedure Call (RPC)</a><a class="toc2" href="ostep_files/part517.htm">47.6 Summary</a><a class="toc2" href="ostep_files/part518.htm">References</a><a class="toc1" href="ostep_files/part519.htm">Sun’s Network File System (NFS)</a><a class="toc2" href="ostep_files/part520.htm">48.1 A Basic Distributed File System</a><a class="toc2" href="ostep_files/part521.htm">48.2 On To NFS</a><a class="toc2" href="ostep_files/part522.htm">48.3 Focus: Simple and Fast Server Crash Recovery</a><a class="toc2" href="ostep_files/part523.htm">48.4 Key To Fast Crash Recovery: Statelessness</a><a class="toc2" href="ostep_files/part524.htm">48.5 The NFSv2 Protocol</a><a class="toc2" href="ostep_files/part525.htm">48.6 From Protocol to Distributed File System</a><a class="toc2" href="ostep_files/part526.htm">48.7 Handling Server Failure with Idempotent Operations</a><a class="toc2" href="ostep_files/part527.htm">48.8 Improving Performance: Client-side Caching</a><a class="toc2" href="ostep_files/part528.htm">48.9 The Cache Consistency Problem</a><a class="toc2" href="ostep_files/part529.htm">48.10 Assessing NFS Cache Consistency</a><a class="toc2" href="ostep_files/part530.htm">48.11 Implications on Server-Side Write Buffering</a><a class="toc2" href="ostep_files/part531.htm">48.12 Summary</a><a class="toc2" href="ostep_files/part532.htm">References</a><a class="toc1" href="ostep_files/part533.htm">The Andrew File System (AFS)</a><a class="toc2" href="ostep_files/part534.htm">49.1 AFS Version 1</a><a class="toc2" href="ostep_files/part535.htm">49.2 Problems with Version 1</a><a class="toc2" href="ostep_files/part536.htm">49.3 Improving the Protocol</a><a class="toc2" href="ostep_files/part537.htm">49.4 AFS Version 2</a><a class="toc2" href="ostep_files/part539.htm">49.5 Cache Consistency</a><a class="toc2" href="ostep_files/part540.htm">49.6 Crash Recovery</a><a class="toc2" href="ostep_files/part541.htm">49.7 Scale And Performance Of AFSv2</a><a class="toc2" href="ostep_files/part542.htm">49.8 AFS: Other Improvements</a><a class="toc2" href="ostep_files/part543.htm">49.9 Summary</a><a class="toc2" href="ostep_files/part544.htm">References</a><a class="toc1" href="ostep_files/part545.htm">Summary Dialogue on Distribution</a><a class="toc1" href="ostep_files/part546.htm">General Index</a><a class="toc1" href="ostep_files/part547.htm">Asides</a><a class="toc1" href="ostep_files/part548.htm">Tips</a><a class="toc1" href="ostep_files/part549.htm">Cruces</a></div><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="ostep_files/part1.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
