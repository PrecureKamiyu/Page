<?xml version="1.0" encoding="utf-8"?><html xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:svg="http://www.w3.org/2000/svg" xmlns:epub="http://www.idpf.org/2007/ops" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" epub:prefix="index: http://www.index.com/"><head>
<meta name="dcterms.conformsTo" content="PXE Basic 1.0"></meta>
<meta name="generator" content="PXE Tools version 1.39.109"></meta>
<!--Created by pxe.pl for standard version PXE Basic 1.0,data-profile-product=standard by PXE Tools 1.39.109, partial=false-->
<title>1.3 The Network Core</title><link rel="alternate stylesheet" type="text/css" title="sepia" href="../css/sepia.css"></link><link rel="alternate stylesheet" type="text/css" title="night" href="../css/night.css"></link><link rel="stylesheet" type="text/css" title="day" href="../css/main.css"></link><link rel="stylesheet" type="text/css" title="day" href="../css/print.css"></link>
<script src="js/format_lg_obj.js"></script>
</head><body epub:type="bodymatter">
<section id="P7001011952000000000000000000542" class="level1"><header><h1 class="title" id="P70010119520000000000000000097B1" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097B1" epub:type="title"><span class="number">1.3</span> The Network Core</h1></header>
<p id="P70010119520000000000000000097B2" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097B2">Having examined the Internet’s edge, let us now delve more deeply inside the network core—the mesh of packet switches and links that interconnects the Internet’s end systems. <a class="xref" href="#P7001011952000000000000000000546" data-foobar="1"><span class="label">Figure</span> <span class="number">1.10</span></a> highlights the network core with thick, shaded lines.<span class="pagebreak" title="22" id="P7001011952000000000000000000545" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000545" epub:type="pagebreak" role="doc-pagebreak"></span></p>
<figure id="P7001011952000000000000000000546" class="figure" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000546">
<img alt="An illustration of the network core." height="858" width="657" aria-describedby="P700101195200000000000000000054A" id="P70010119520000000000000000097B3" data-uri="P7001011952000000000000000005506" src="../images/4055101010.png"></img>
<figcaption id="P70010119520000000000000000097B4" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097B4"><header><h1 class="title" id="P70010119520000000000000000097B5" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097B5" epub:type="title"><span class="label">Figure </span> <span class="number">1.10</span> The network core</h1></header>

</figcaption>
</figure><div class="longdesc" id="P700101195200000000000000000054A" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000054A" aria-hidden="false"><a class="xref" aria-hidden="false" href="../longalt/la_4055101010.xhtml#la_4055101010"><span class="label">Description</span></a></div>
<section id="P700101195200000000000000000054C" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000054C" class="level2"><header><h1 class="title" id="P70010119520000000000000000097B7" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097B7" epub:type="title"><span class="pagebreak" title="23" id="P700101195200000000000000000054E" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000054E" epub:type="pagebreak" role="doc-pagebreak"></span><span class="number">1.3.1</span> Packet Switching</h1></header>
<p id="P70010119520000000000000000097B8" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097B8">In a network application, end systems exchange <span class="keyword" id="P7001011952000000000000000000550" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000550"><b>messages</b></span> with each other. Messages can contain anything the application designer wants. Messages may perform a control function (for example, the “Hi” messages in our handshaking example in <a class="xref" href="fileP7001011952000000000000000000461.xhtml#P7001011952000000000000000000498" data-foobar="7"><span class="label">Figure</span> <span class="number">1.2</span></a>) or can contain data, such as an e-mail message, a JPEG image, or an MP3 audio file. To send a message from a source end system to a destination end system, the source breaks long messages into smaller chunks of data known as <span class="keyword" id="P7001011952000000000000000000551" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000551"><b>packets</b></span>. Between source and destination, each packet travels through communication links and <span class="keyword" id="P7001011952000000000000000000552" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000552"><b>packet switches</b></span> (for which there are two predominant types, <span class="keyword" id="P7001011952000000000000000000553" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000553"><b>routers</b></span> and <span class="keyword" id="P7001011952000000000000000000554" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000554"><b>link-layer switches</b></span>). Packets are transmitted over each communication link at a rate equal to the <i>full</i> transmission rate of the link. So, if a source end system or a packet switch is sending a packet of <i>L</i> bits over a link with transmission rate <i>R</i> bits/sec, then the time to transmit the packet is <i>L / R</i> seconds.</p>
<section id="P7001011952000000000000000000555" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000555" class="level3"><header><h1 class="title" id="P70010119520000000000000000097B9" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097B9" epub:type="title">Store-and-Forward Transmission</h1></header>
<p id="P70010119520000000000000000097BA" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097BA">Most packet switches use <span class="keyword" id="P7001011952000000000000000000558" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000558"><b>store-and-forward transmission</b></span> at the inputs to the links. Store-and-forward transmission means that the packet switch must receive the entire packet before it can begin to transmit the first bit of the packet onto the outbound link. To explore store-and-forward transmission in more detail, consider a simple network consisting of two end systems connected by a single router, as shown in <a class="xref" href="#P700101195200000000000000000055A" data-foobar="1"><span class="label">Figure</span> <span class="number">1.11</span></a>. A router will typically have many incident links, since its job is to switch an incoming packet onto an outgoing link; in this simple example, the router has the rather simple task of transferring a packet from one (input) link to the only other attached link. In this example, the source has three packets, each consisting of <i>L</i> bits, to send to the destination. At the snapshot of time shown in <a class="xref" href="#P700101195200000000000000000055A" data-foobar="1"><span class="label">Figure</span> <span class="number">1.11</span></a>, the source has transmitted some of packet 1, and the front of packet 1 has already arrived at the router. Because the router employs store-and-forwarding, at this instant of time, the router cannot transmit the bits it has received; instead it must first buffer (i.e., “store”) the packet’s bits. Only after the router has received <i>all</i> of the packet’s bits can it begin to transmit (i.e., “forward”) the packet onto the outbound link. To gain some insight into store-and-forward transmission, let’s now calculate the amount of time that elapses from when the source begins to send the packet until the destination has received the entire packet. (Here we will ignore propagation delay—the time it takes for the bits to travel across the wire at near the speed of light—which will be discussed in <a class="xref" href="fileP70010119520000000000000000005CD.xhtml#P70010119520000000000000000005CD" data-foobar="7"><span class="label">Section</span> <span class="number">1.4</span></a>.) The source begins to transmit at time 0; at time <i>L</i>/<i>R</i> seconds, the source has transmitted the entire packet, and the entire packet has been received and stored at the router (since there is no propagation delay). At time <i>L</i>/<i>R</i> seconds, since the router has just received the entire packet, it can begin to transmit the packet onto the outbound link towards the destination; at time 2<i>L</i>/<i>R</i>, the router has transmitted the entire packet, and the entire packet has been received by the destination. Thus, the total delay is 2<i>L</i>/<i>R</i>. If the<span class="pagebreak" title="24" id="P7001011952000000000000000000559" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000559" epub:type="pagebreak" role="doc-pagebreak"></span></p>
<figure id="P700101195200000000000000000055A" class="figure" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000055A">
<img alt="An illustration of Store-and-forward packet switching." height="161" width="528" aria-describedby="P700101195200000000000000000055E" id="P70010119520000000000000000097BB" data-uri="P7001011952000000000000000005507" src="../images/4055101011.png"></img>
<figcaption id="P70010119520000000000000000097BC" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097BC"><header><h1 class="title" id="P70010119520000000000000000097BD" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097BD" epub:type="title"><span class="label">Figure </span> <span class="number">1.11</span> Store-and-forward packet switching</h1></header>

</figcaption>
</figure><div class="longdesc" id="P700101195200000000000000000055E" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000055E" aria-hidden="false"><a class="xref" aria-hidden="false" href="../longalt/la_4055101011.xhtml#la_4055101011"><span class="label">Description</span></a></div>
<p class="continued" id="P70010119520000000000000000097BF" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097BF">switch instead forwarded bits as soon as they arrive (without first receiving the entire packet), then the total delay would be <i>L</i>/<i>R</i> since bits are not held up at the router. But, as we will discuss in <a class="xref" href="fileP70010119520000000000000000005CD.xhtml#P70010119520000000000000000005CD" data-foobar="7"><span class="label">Section</span> <span class="number">1.4</span></a>, routers need to receive, store, and <i>process</i> the entire packet before forwarding.</p>
<p id="P70010119520000000000000000097C0" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097C0">Now let’s calculate the amount of time that elapses from when the source begins to send the first packet until the destination has received all three packets. As before, at time <i>L</i>/<i>R</i>, the router begins to forward the first packet. But also at time <i>L</i>/<i>R</i> the source will begin to send the second packet, since it has just finished sending the entire first packet. Thus, at time 2<i>L</i>/<i>R</i>, the destination has received the first packet and the router has received the second packet. Similarly, at time 3<i>L</i>/<i>R</i>, the destination has received the first two packets and the router has received the third packet. Finally, at time 4<i>L</i>/<i>R</i> the destination has received all three packets!</p>
<p id="P70010119520000000000000000097C1" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097C1">Let’s now consider the general case of sending one packet from source to destination over a path consisting of <i>N</i> links each of rate <i>R</i> (thus, there are <i>N</i>-1 routers between source and destination). Applying the same logic as above, we see that the end-to-end delay is:</p>
<div class="equation" id="P7001011952000000000000000000563" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000563"><m:math display="block" alttext="" data-uri="" altimg-width="127" altimg-height="40" altimg="../images/ch01math01.png"><m:mrow><m:msub><m:mi>d</m:mi><m:mrow><m:mtext>end-to-end</m:mtext></m:mrow></m:msub><m:mo>=</m:mo><m:mi>N</m:mi><m:mfrac><m:mi>L</m:mi><m:mi>R</m:mi></m:mfrac></m:mrow></m:math><span class="number">(1.1)</span></div>
<p class="continued" id="P70010119520000000000000000097C2" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097C2">You may now want to try to determine what the delay would be for <i>P</i> packets sent over a series of <i>N</i> links.</p>
</section>
<section id="P7001011952000000000000000000565" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000565" class="level3"><header><h1 class="title" id="P70010119520000000000000000097C3" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097C3" epub:type="title">Queuing Delays and Packet Loss</h1></header>
<p id="P70010119520000000000000000097C4" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097C4">Each packet switch has multiple links attached to it. For each attached link, the packet switch has an <span class="keyword" id="P7001011952000000000000000000568" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000568"><b>output buffer</b></span> (also called an <span class="keyword" id="P7001011952000000000000000000569" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000569"><b>output queue</b></span>), which stores packets that the router is about to send into that link. The output buffers play a key role in packet switching. If an arriving packet needs to be transmitted onto a link but finds the link busy with the transmission of another packet, the arriving packet must wait in the output buffer. Thus, in addition to the store-and-forward delays, packets suffer output buffer <span class="keyword" id="P700101195200000000000000000056A" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000056A"><b>queuing delays</b></span>. These delays are variable and depend on the level of congestion in the network. Since the amount of buffer space is finite, an<span class="pagebreak" title="25" id="P700101195200000000000000000056B" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000056B" epub:type="pagebreak" role="doc-pagebreak"></span></p>
<figure id="P700101195200000000000000000056C" class="figure" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000056C">
<img alt="An illustration of Packet Switching." height="345" width="549" aria-describedby="P7001011952000000000000000000570" id="P70010119520000000000000000097C5" data-uri="P7001011952000000000000000005508" src="../images/4055101012.png"></img>
<figcaption id="P70010119520000000000000000097C6" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097C6"><header><h1 class="title" id="P70010119520000000000000000097C7" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097C7" epub:type="title"><span class="label">Figure </span> <span class="number">1.12</span> Packet switching</h1></header>

</figcaption>
</figure><div class="longdesc" id="P7001011952000000000000000000570" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000570" aria-hidden="false"><a class="xref" aria-hidden="false" href="../longalt/la_4055101012.xhtml#la_4055101012"><span class="label">Description</span></a></div>
<p class="continued" id="P70010119520000000000000000097C9" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097C9">arriving packet may find that the buffer is completely full with other packets waiting for transmission. In this case, <span class="keyword" id="P7001011952000000000000000000573" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000573"><b>packet loss</b></span> will occur—either the arriving packet or one of the already-queued packets will be dropped.</p>
<p id="P70010119520000000000000000097CA" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097CA"><a class="xref" href="#P700101195200000000000000000056C" data-foobar="1"><span class="label">Figure</span> <span class="number">1.12</span></a> illustrates a simple packet-switched network. As in <a class="xref" href="#P700101195200000000000000000055A" data-foobar="1"><span class="label">Figure</span> <span class="number">1.11</span></a>, packets are represented by three-dimensional slabs. The width of a slab represents the number of bits in the packet. In this figure, all packets have the same width and hence the same length. Suppose Hosts A and B are sending packets to Host E. Hosts A and B first send their packets along 100 Mbps Ethernet links to the first router. The router then directs these packets to the 15 Mbps link. If, during a short interval of time, the arrival rate of packets to the router (when converted to bits per second) exceeds 15 Mbps, congestion will occur at the router as packets queue in the link’s output buffer before being transmitted onto the link. For example, if Host A and B each send a burst of five packets back-to-back at the same time, then most of these packets will spend some time waiting in the queue. The situation is, in fact, entirely analogous to many common-day situations—for example, when we wait in line for a bank teller or wait in front of a tollbooth. We’ll examine this queuing delay in more detail in <a class="xref" href="fileP70010119520000000000000000005CD.xhtml#P70010119520000000000000000005CD" data-foobar="7"><span class="label">Section</span> <span class="number">1.4</span></a>.</p>
</section>
<section id="P7001011952000000000000000000575" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000575" class="level3"><header><h1 class="title" id="P70010119520000000000000000097CB" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097CB" epub:type="title">Forwarding Tables and Routing Protocols</h1></header>
<p id="P70010119520000000000000000097CC" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097CC">Earlier, we said that a router takes a packet arriving on one of its attached communication links and forwards that packet onto another one of its attached communication links. But how does the router determine which link it should forward the packet onto? Packet forwarding is actually done in different ways in different types of computer networks. Here, we briefly describe how it is done in the Internet.</p>
<p id="P70010119520000000000000000097CD" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097CD"><span class="pagebreak" title="26" id="P7001011952000000000000000000579" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000579" epub:type="pagebreak" role="doc-pagebreak"></span>In the Internet, every end system has an address called an IP address. When a source end system wants to send a packet to a destination end system, the source includes the destination’s IP address in the packet’s header. As with postal addresses, this address has a hierarchical structure. When a packet arrives at a router in the network, the router examines a portion of the packet’s destination address and forwards the packet to an adjacent router. More specifically, each router has a <span class="keyword" id="P700101195200000000000000000057A" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000057A"><b>forwarding table</b></span> that maps destination addresses (or portions of the destination addresses) to that router’s outbound links. When a packet arrives at a router, the router examines the address and searches its forwarding table, using this destination address, to find the appropriate outbound link. The router then directs the packet to this outbound link.</p>
<p id="P70010119520000000000000000097CE" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097CE">The end-to-end routing process is analogous to a car driver who does not use maps but instead prefers to ask for directions. For example, suppose Joe is driving from Philadelphia to 156 Lakeside Drive in Orlando, Florida. Joe first drives to his neighborhood gas station and asks how to get to 156 Lakeside Drive in Orlando, Florida. The gas station attendant extracts the Florida portion of the address and tells Joe that he needs to get onto the interstate highway I-95 South, which has an entrance just next to the gas station. He also tells Joe that once he enters Florida, he should ask someone else there. Joe then takes I-95 South until he gets to Jacksonville, Florida, at which point he asks another gas station attendant for directions. The attendant extracts the Orlando portion of the address and tells Joe that he should continue on I-95 to Daytona Beach and then ask someone else. In Daytona Beach, another gas station attendant also extracts the Orlando portion of the address and tells Joe that he should take I-4 directly to Orlando. Joe takes I-4 and gets off at the Orlando exit. Joe goes to another gas station attendant, and this time the attendant extracts the Lakeside Drive portion of the address and tells Joe the road he must follow to get to Lakeside Drive. Once Joe reaches Lakeside Drive, he asks a kid on a bicycle how to get to his destination. The kid extracts the 156 portion of the address and points to the house. Joe finally reaches his ultimate destination. In the above analogy, the gas station attendants and kids on bicycles are analogous to routers.</p>
<p id="P70010119520000000000000000097CF" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097CF">We just learned that a router uses a packet’s destination address to index a forwarding table and determine the appropriate outbound link. But this statement begs yet another question: How do forwarding tables get set? Are they configured by hand in each and every router, or does the Internet use a more automated procedure? This issue will be studied in depth in <a class="xref" href="fileP7001011952000000000000000001EDE.xhtml#P7001011952000000000000000001EDE" data-foobar="7"><span class="label">Chapter</span> <span class="number">5</span></a>. But to whet your appetite here, we’ll note now that the Internet has a number of special <span class="keyword" id="P700101195200000000000000000057D" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000057D"><b>routing protocols</b></span> that are used to automatically set the forwarding tables. A routing protocol may, for example, determine the shortest path from each router to each destination and use the shortest path results to configure the forwarding tables in the routers.</p>
<p id="P70010119520000000000000000097D0" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097D0">How would you actually like to see the end-to-end route that packets take in the Internet? We now invite you to get your hands dirty by interacting with the Trace-route program. Simply visit the site <a class="ulink" href="http://www.traceroute.org">www.traceroute.org</a>, choose a source in a particular country, and trace the route from that source to your computer. (For a discussion of Traceroute, see <a class="xref" href="fileP70010119520000000000000000005CD.xhtml#P70010119520000000000000000005CD" data-foobar="7"><span class="label">Section</span> <span class="number">1.4</span></a>.)</p>
</section>
</section>
<section id="P700101195200000000000000000057F" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000057F" class="level2"><header><h1 class="title" id="P70010119520000000000000000097D1" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097D1" epub:type="title"><span class="pagebreak" title="27" id="P7001011952000000000000000000581" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000581" epub:type="pagebreak" role="doc-pagebreak"></span><span class="number">1.3.2</span> Circuit Switching</h1></header>
<p id="P70010119520000000000000000097D2" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097D2">There are two fundamental approaches to moving data through a network of links and switches: <span class="keyword" id="P7001011952000000000000000000583" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000583"><b>circuit switching</b></span> and <span class="keyword" id="P7001011952000000000000000000584" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000584"><b>packet switching</b></span>. Having covered packet-switched networks in the previous subsection, we now turn our attention to circuit-switched networks.</p>
<p id="P70010119520000000000000000097D3" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097D3">In circuit-switched networks, the resources needed along a path (buffers, link transmission rate) to provide for communication between the end systems are <i>reserved</i> for the duration of the communication session between the end systems. In packet-switched networks, these resources are <i>not</i> reserved; a session’s messages use the resources on demand and, as a consequence, may have to wait (that is, queue) for access to a communication link. As a simple analogy, consider two restaurants, one that requires reservations and another that neither requires reservations nor accepts them. For the restaurant that requires reservations, we have to go through the hassle of calling before we leave home. But when we arrive at the restaurant we can, in principle, immediately be seated and order our meal. For the restaurant that does not require reservations, we don’t need to bother to reserve a table. But when we arrive at the restaurant, we may have to wait for a table before we can be seated.</p>
<p id="P70010119520000000000000000097D4" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097D4">Traditional telephone networks are examples of circuit-switched networks. ­Consider what happens when one person wants to send information (voice or facsimile) to another over a telephone network. Before the sender can send the information, the network must establish a connection between the sender and the receiver. This is a <i>bona fide</i> connection for which the switches on the path between the sender and receiver maintain connection state for that connection. In the jargon of telephony, this connection is called a <span class="keyword" id="P7001011952000000000000000000587" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000587"><b>circuit</b></span>. When the network establishes the circuit, it also reserves a constant transmission rate in the network’s links (representing a fraction of each link’s transmission capacity) for the duration of the connection. Since a given transmission rate has been reserved for this sender-to-receiver connection, the sender can transfer the data to the receiver at the <i>guaranteed</i> constant rate.</p>
<p id="P70010119520000000000000000097D5" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097D5"><a class="xref" href="#P700101195200000000000000000058B" data-foobar="1"><span class="label">Figure</span> <span class="number">1.13</span></a> illustrates a circuit-switched network. In this network, the four circuit switches are interconnected by four links. Each of these links has four circuits, so that each link can support four simultaneous connections. The hosts (for example, PCs and workstations) are each directly connected to one of the switches. When two hosts want to communicate, the network establishes a dedicated <span class="keyword" id="P7001011952000000000000000000589" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000589"><b>end-to-end connection</b></span> between the two hosts. Thus, in order for Host A to communicate with Host B, the network must first reserve one circuit on each of two links. In this example, the dedicated end-to-end connection uses the second circuit in the first link and the fourth circuit in the second link. Because each link has four circuits, for each link used by the end-to-end connection, the connection gets one fourth of the link’s total transmission capacity for the duration of the connection. Thus, for example, if each link between adjacent switches has a transmission rate of 1 Mbps, then each end-to-end circuit-switch connection gets 250 kbps of dedicated transmission rate.<span class="pagebreak" title="28" id="P700101195200000000000000000058A" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000058A" epub:type="pagebreak" role="doc-pagebreak"></span></p>
<figure id="P700101195200000000000000000058B" class="figure" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000058B">
<img alt="An illustration of a circuit-switched network." height="297" width="426" aria-describedby="P700101195200000000000000000058F" id="P70010119520000000000000000097D6" data-uri="P7001011952000000000000000005509" src="../images/4055101013.png"></img>
<figcaption id="P70010119520000000000000000097D7" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097D7"><header><h1 class="title" id="P70010119520000000000000000097D8" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097D8" epub:type="title"><span class="label">Figure </span> <span class="number">1.13</span> A simple circuit-switched network consisting of four switches and four links</h1></header>

</figcaption>
</figure><div class="longdesc" id="P700101195200000000000000000058F" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000058F" aria-hidden="false"><a class="xref" aria-hidden="false" href="../longalt/la_4055101013.xhtml#la_4055101013"><span class="label">Description</span></a></div>
<p id="P70010119520000000000000000097DA" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097DA">In contrast, consider what happens when one host wants to send a packet to another host over a packet-switched network, such as the Internet. As with circuit switching, the packet is transmitted over a series of communication links. But different from circuit switching, the packet is sent into the network without reserving any link resources whatsoever. If one of the links is congested because other packets need to be transmitted over the link at the same time, then the packet will have to wait in a buffer at the sending side of the transmission link and suffer a delay. The Internet makes its best effort to deliver packets in a timely manner, but it does not make any guarantees.</p>
<section id="P7001011952000000000000000000592" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000592" class="level3"><header><h1 class="title" id="P70010119520000000000000000097DB" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097DB" epub:type="title">Multiplexing in Circuit-Switched Networks</h1></header>
<p id="P70010119520000000000000000097DC" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097DC">A circuit in a link is implemented with either <span class="keyword" id="P7001011952000000000000000000595" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000595"><b>frequency-division multiplexing (FDM)</b></span> or <span class="keyword" id="P7001011952000000000000000000596" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000596"><b>time-division multiplexing (TDM)</b></span>. With FDM, the frequency spectrum of a link is divided up among the connections established across the link. Specifically, the link dedicates a frequency band to each connection for the ­duration of the connection. In telephone networks, this frequency band typically has a width of 4 kHz (that is, 4,000 hertz or 4,000 cycles per second). The width of the band is called, not surprisingly, the <b>bandwidth</b>. FM radio stations also use FDM to share the frequency spectrum between 88 MHz and 108 MHz, with each station being allocated a specific frequency band.</p>
<p id="P70010119520000000000000000097DD" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097DD">For a TDM link, time is divided into frames of fixed duration, and each frame is divided into a fixed number of time slots. When the network establishes a connection across a link, the network dedicates one time slot in every frame to this connection. These slots are dedicated for the sole use of that connection, with one time slot available for use (in every frame) to transmit the connection’s data.<span class="pagebreak" title="29" id="P7001011952000000000000000000598" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000598" epub:type="pagebreak" role="doc-pagebreak"></span></p>
<figure id="P7001011952000000000000000000599" class="figure" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000599">
<img alt="An illustration of frequency-division multiplexing (FDM). An illustration of time-division multiplexing (TDM)." height="132" width="378" aria-describedby="P700101195200000000000000000059E" id="P70010119520000000000000000097DE" data-uri="P700101195200000000000000000550A" src="../images/4055101014.png"></img>
<img alt="An illustration of time-division multiplexing (TDM)." height="186" width="390" aria-describedby="P700101195200000000000000000059E" id="P70010119520000000000000000097DF" data-uri="P700101195200000000000000000550B" src="../images/4055101014a.png"></img>
<figcaption id="P70010119520000000000000000097E0" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097E0"><header><h1 class="title" id="P70010119520000000000000000097E1" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097E1" epub:type="title"><span class="label">Figure </span> <span class="number">1.14</span></h1></header>
<div class="caption" id="P70010119520000000000000000097E2" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097E2"><p id="P70010119520000000000000000097E3" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097E3">With FDM, each circuit continuously gets a fraction of the bandwidth. With TDM, each circuit gets all of the bandwidth periodically during brief intervals of time (that is, during slots)</p></div>

</figcaption>
</figure><div class="longdesc" id="P700101195200000000000000000059E" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000059E" aria-hidden="false"><a class="xref" aria-hidden="false" href="../longalt/la_4055101014.xhtml#la_4055101014"><span class="label">Description</span></a></div>
<p id="P70010119520000000000000000097E7" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097E7"><a class="xref" href="#P7001011952000000000000000000599" data-foobar="1"><span class="label">Figure</span> <span class="number">1.14</span></a> illustrates FDM and TDM for a specific network link supporting up to four circuits. For FDM, the frequency domain is segmented into four bands, each of bandwidth 4 kHz. For TDM, the time domain is segmented into frames, with four time slots in each frame; each circuit is assigned the same dedicated slot in the revolving TDM frames. For TDM, the transmission rate of a circuit is equal to the frame rate multiplied by the number of bits in a slot. For example, if the link transmits 8,000 frames per second and each slot consists of 8 bits, then the transmission rate of each circuit is 64 kbps.</p>
<p id="P70010119520000000000000000097E8" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097E8">Proponents of packet switching have always argued that circuit switching is wasteful because the dedicated circuits are idle during <span class="keyword" id="P70010119520000000000000000005A3" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000005A3"><b>silent periods</b></span>. For example, when one person in a telephone call stops talking, the idle network resources (frequency bands or time slots in the links along the connection’s route) cannot be used by other ongoing connections. As another example of how these resources can be underutilized, consider a radiologist who uses a circuit-switched network to remotely access a series of x-rays. The radiologist sets up a connection, requests an image, contemplates the image, and then requests a new image. Network resources are allocated to the connection but are not used (i.e., are wasted) during the radiologist’s contemplation periods. Proponents of packet switching also enjoy pointing out that establishing end-to-end circuits and reserving end-to-end transmission capacity is complicated and requires complex signaling software to coordinate the operation of the switches along the end-to-end path.</p>
<p id="P70010119520000000000000000097E9" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097E9"><span class="pagebreak" title="30" id="P70010119520000000000000000005A5" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000005A5" epub:type="pagebreak" role="doc-pagebreak"></span>Before we finish our discussion of circuit switching, let’s work through a numerical example that should shed further insight on the topic. Let us consider how long it takes to send a file of 640,000 bits from Host A to Host B over a circuit-switched network. Suppose that all links in the network use TDM with 24 slots and have a bit rate of 1.536 Mbps. Also suppose that it takes 500 msec to establish an end-to-end circuit before Host A can begin to transmit the file. How long does it take to send the file? Each circuit has a transmission rate of <span class="inlineequation"><m:math display="inline" alttext="" data-uri="" altimg-width="226" altimg-height="17" altimg="../images/ch01math02.png"><m:mrow><m:mrow><m:mo>(</m:mo><m:mrow><m:mn>1.536</m:mn><m:mtext> Mbps</m:mtext></m:mrow><m:mo>)</m:mo></m:mrow><m:mo>/</m:mo><m:mn>24</m:mn><m:mo>=</m:mo><m:mn>64</m:mn><m:mtext> kbps</m:mtext><m:mo>,</m:mo></m:mrow></m:math></span> so it takes <span class="inlineequation"><m:math display="inline" alttext="" data-uri="" altimg-width="232" altimg-height="17" altimg="../images/ch01math03.png"><m:mrow><m:mrow><m:mo>(</m:mo><m:mrow><m:mn>640</m:mn><m:mo>,</m:mo><m:mn>000</m:mn><m:mtext> bits</m:mtext></m:mrow><m:mo>)</m:mo></m:mrow><m:mo>/</m:mo><m:mrow><m:mo>(</m:mo><m:mrow><m:mn>64</m:mn><m:mtext> kbps</m:mtext></m:mrow><m:mo>)</m:mo></m:mrow><m:mo>=</m:mo><m:mn>10</m:mn></m:mrow></m:math></span> seconds to transmit the file. To this 10 seconds we add the circuit establishment time, giving 10.5 seconds to send the file. Note that the transmission time is independent of the number of links: The transmission time would be 10 seconds if the end-to-end circuit passed through one link or a hundred links. (The actual end-to-end delay also includes a propagation delay; see <a class="xref" href="fileP70010119520000000000000000005CD.xhtml#P70010119520000000000000000005CD" data-foobar="7"><span class="label">Section</span> <span class="number">1.4</span></a>.)</p>
</section>
<section id="P70010119520000000000000000005A6" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000005A6" class="level3"><header><h1 class="title" id="P70010119520000000000000000097EA" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097EA" epub:type="title">Packet Switching Versus Circuit Switching</h1></header>
<p id="P70010119520000000000000000097EB" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097EB">Having described circuit switching and packet switching, let us compare the two. Critics of packet switching have often argued that packet switching is not suitable for real-time services (for example, telephone calls and video conference calls) because of its variable and unpredictable end-to-end delays (due primarily to variable and unpredictable queuing delays). Proponents of packet switching argue that (1) it offers better sharing of transmission capacity than circuit switching and (2) it is simpler, more efficient, and less costly to implement than circuit switching. An interesting discussion of packet switching versus circuit switching is <a class="biblioref" href="fileP70010119520000000000000000037E0.xhtml#P7001011952000000000000000003A56" data-foobar="7">[Molinero-Fernandez 2002]</a>. Generally speaking, people who do not like to hassle with ­restaurant reservations prefer packet switching to circuit switching.</p>
<p id="P70010119520000000000000000097EC" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097EC">Why is packet switching more efficient? Let’s look at a simple example. Suppose users share a 1 Mbps link. Also suppose that each user alternates between periods of activity, when a user generates data at a constant rate of 100 kbps, and periods of inactivity, when a user generates no data. Suppose further that a user is active only 10 percent of the time (and is idly drinking coffee during the remaining 90 percent of the time). With circuit switching, 100 kbps must be <i>reserved</i> for <i>each</i> user at all times. For example, with circuit-switched TDM, if a one-second frame is divided into 10 time slots of 100 ms each, then each user would be allocated one time slot per frame.</p>
<p id="P70010119520000000000000000097ED" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097ED">Thus, the circuit-switched link can support only <span class="inlineequation"><m:math display="inline" alttext="" data-uri="" altimg-width="188" altimg-height="17" altimg="../images/ch01math04.png"><m:mrow><m:mn>10</m:mn><m:mrow><m:mo>(</m:mo><m:mrow><m:mo>=</m:mo><m:mn>1</m:mn><m:mtext> Mbps</m:mtext><m:mo>/</m:mo><m:mn>100</m:mn><m:mtext> kbps</m:mtext></m:mrow><m:mo>)</m:mo></m:mrow></m:mrow></m:math></span> simultaneous users. With packet switching, the probability that a specific user is active is 0.1 (that is, 10 percent). If there are 35 users, the probability that there are 11 or more simultaneously active users is approximately 0.0004. (<a class="xref" href="fileP70010119520000000000000000007B0.xhtml#P700101195200000000000000000086A" data-foobar="7">Homework Problem P8</a> outlines how this probability is obtained.) When there are 10 or fewer simultaneously active users (which happens with probability 0.9996), the aggregate arrival rate of data is less than or equal to 1 Mbps, the output rate of the link. Thus, when there are 10 or fewer active users, users’ packets flow through the link essentially <span class="pagebreak" title="31" id="P70010119520000000000000000005AB" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000005AB" epub:type="pagebreak" role="doc-pagebreak"></span>without delay, as is the case with circuit switching. When there are more than 10 simultaneously active users, then the aggregate arrival rate of packets exceeds the output capacity of the link, and the output queue will begin to grow. (It continues to grow until the aggregate input rate falls back below 1 Mbps, at which point the queue will begin to diminish in length.) Because the probability of having more than 10 simultaneously active users is minuscule in this example, packet switching provides essentially the same performance as circuit switching, <i>but does so while allowing for more than three times the number of users.</i></p>
<p id="P70010119520000000000000000097EE" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097EE">Let’s now consider a second simple example. Suppose there are 10 users and that one user suddenly generates one thousand 1,000-bit packets, while other users remain quiescent and do not generate packets. Under TDM circuit switching with 10 slots per frame and each slot consisting of 1,000 bits, the active user can only use its one time slot per frame to transmit data, while the remaining nine time slots in each frame remain idle. It will be 10 seconds before all of the active user’s one million bits of data has been transmitted. In the case of packet switching, the active user can continuously send its packets at the full link rate of 1 Mbps, since there are no other users generating packets that need to be multiplexed with the active user’s packets. In this case, all of the active user’s data will be transmitted within 1 second.</p>
<p id="P70010119520000000000000000097EF" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097EF">The above examples illustrate two ways in which the performance of packet switching can be superior to that of circuit switching. They also highlight the crucial difference between the two forms of sharing a link’s transmission rate among multiple data streams. Circuit switching pre-allocates use of the transmission link regardless of demand, with allocated but unneeded link time going unused. Packet switching on the other hand allocates link use <i>on demand.</i> Link transmission capacity will be shared on a packet-by-packet basis only among those users who have packets that need to be transmitted over the link.</p>
<p id="P70010119520000000000000000097F0" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097F0">Although packet switching and circuit switching are both prevalent in today’s telecommunication networks, the trend has certainly been in the direction of packet switching. Even many of today’s circuit-switched telephone networks are slowly migrating toward packet switching. In particular, telephone networks often use packet switching for the expensive overseas portion of a telephone call.</p>
</section>
</section>
<section id="P70010119520000000000000000005AF" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000005AF" class="level2"><header><h1 class="title" id="P70010119520000000000000000097F1" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097F1" epub:type="title"><span class="number">1.3.3</span> A Network of Networks</h1></header>
<p id="P70010119520000000000000000097F2" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097F2">We saw earlier that end systems (PCs, smartphones, Web servers, mail servers, and so on) connect into the Internet via an access ISP. The access ISP can provide either wired or wireless connectivity, using an array of access technologies including DSL, cable, FTTH, Wi-Fi, and cellular. Note that the access ISP does not have to be a telco or a cable company; instead it can be, for example, a university (providing Internet access to students, staff, and faculty), or a company (providing access for its employees). But connecting end users and content providers into an access ISP is only a small piece of solving the puzzle of connecting the billions of end systems that make up the Internet. To complete this puzzle, the access ISPs themselves must be <span class="pagebreak" title="32" id="P70010119520000000000000000005B2" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000005B2" epub:type="pagebreak" role="doc-pagebreak"></span>interconnected. This is done by creating a <i>network of networks</i>—understanding this phrase is the key to understanding the Internet.</p>
<p id="P70010119520000000000000000097F3" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097F3">Over the years, the network of networks that forms the Internet has evolved into a very complex structure. Much of this evolution is driven by economics and national policy, rather than by performance considerations. In order to understand today’s Internet network structure, let’s incrementally build a series of network structures, with each new structure being a better approximation of the complex Internet that we have today. Recall that the overarching goal is to interconnect the access ISPs so that all end systems can send packets to each other. One naive approach would be to have each access ISP <i>directly</i> connect with every other access ISP. Such a mesh design is, of course, much too costly for the access ISPs, as it would require each access ISP to have a separate communication link to each of the hundreds of thousands of other access ISPs all over the world.</p>
<p id="P70010119520000000000000000097F4" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097F4">Our first network structure, <i>Network Structure 1</i>, interconnects all of the access ISPs with a <i>single</i> <i>global transit ISP</i>. Our (imaginary) global transit ISP is a network of routers and communication links that not only spans the globe, but also has at least one router near each of the hundreds of thousands of access ISPs. Of course, it would be very costly for the global ISP to build such an extensive network. To be profitable, it would naturally charge each of the access ISPs for connectivity, with the pricing reflecting (but not necessarily directly proportional to) the amount of traffic an access ISP exchanges with the global ISP. Since the access ISP pays the global transit ISP, the access ISP is said to be a <span class="keyword" id="P70010119520000000000000000005B5" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000005B5"><b>customer</b></span> and the global transit ISP is said to be a <span class="keyword" id="P70010119520000000000000000005B6" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000005B6"><b>provider</b></span>.</p>
<p id="P70010119520000000000000000097F5" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097F5">Now if some company builds and operates a global transit ISP that is profitable, then it is natural for other companies to build their own global transit ISPs and compete with the original global transit ISP. This leads to <i>Network Structure 2</i>, which consists of the hundreds of thousands of access ISPs and <i>multiple</i> global ­transit ISPs. The access ISPs certainly prefer Network Structure 2 over Network Structure 1 since they can now choose among the competing global transit providers as a function of their pricing and services. Note, however, that the global transit ISPs themselves must interconnect: Otherwise access ISPs connected to one of the global transit providers would not be able to communicate with access ISPs connected to the other global transit providers.</p>
<p id="P70010119520000000000000000097F6" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097F6">Network Structure 2, just described, is a two-tier hierarchy with global transit providers residing at the top tier and access ISPs at the bottom tier. This assumes that global transit ISPs are not only capable of getting close to each and every access ISP, but also find it economically desirable to do so. In reality, although some ISPs do have impressive global coverage and do directly connect with many access ISPs, no ISP has presence in each and every city in the world. Instead, in any given region, there may be a <span class="keyword" id="P70010119520000000000000000005B9" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000005B9"><b>regional ISP</b></span> to which the access ISPs in the region connect. Each regional ISP then connects to <span class="keyword" id="P70010119520000000000000000005BA" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000005BA"><b>tier-1 ISPs</b></span>. Tier-1 ISPs are similar to our (imaginary) global transit ISP; but tier-1 ISPs, which actually do exist, do not have a presence in every city in the world. There are approximately a dozen tier-1 ISPs, including Level 3 Communications, AT&amp;T, Sprint, and NTT. Interestingly, no group officially <span class="pagebreak" title="33" id="P70010119520000000000000000005BB" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000005BB" epub:type="pagebreak" role="doc-pagebreak"></span>sanctions tier-1 status; as the saying goes—if you have to ask if you’re a member of a group, you’re probably not.</p>
<p id="P70010119520000000000000000097F7" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097F7">Returning to this network of networks, not only are there multiple competing tier-1 ISPs, there may be multiple competing regional ISPs in a region. In such a hierarchy, each access ISP pays the regional ISP to which it connects, and each regional ISP pays the tier-1 ISP to which it connects. (An access ISP can also connect directly to a tier-1 ISP, in which case it pays the tier-1 ISP). Thus, there is customer-provider relationship at each level of the hierarchy. Note that the tier-1 ISPs do not pay anyone as they are at the top of the hierarchy. To further complicate matters, in some regions, there may be a larger regional ISP (possibly spanning an entire country) to which the smaller regional ISPs in that region connect; the larger regional ISP then connects to a tier-1 ISP. For example, in China, there are access ISPs in each city, which connect to provincial ISPs, which in turn connect to national ISPs, which finally connect to tier-1 ISPs <a class="biblioref" href="fileP70010119520000000000000000037E0.xhtml#P7001011952000000000000000003C47" data-foobar="7">[Tian 2012]</a>. We refer to this multi-tier hierarchy, which is still only a crude approximation of today’s Internet, as <i>Network Structure 3</i>.</p>
<p id="P70010119520000000000000000097F8" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097F8">To build a network that more closely resembles today’s Internet, we must add points of presence (PoPs), multi-homing, peering, and Internet exchange points (IXPs) to the hierarchical Network Structure 3. PoPs exist in all levels of the hierarchy, except for the bottom (access ISP) level. A <span class="keyword" id="P70010119520000000000000000005BE" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000005BE"><b>PoP</b></span> is simply a group of one or more routers (at the same location) in the provider’s network where customer ISPs can connect into the provider ISP. For a customer network to connect to a provider’s PoP, it can lease a high-speed link from a third-party telecommunications provider to directly connect one of its routers to a router at the PoP. Any ISP (except for tier-1 ISPs) may choose to <span class="keyword" id="P70010119520000000000000000005BF" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000005BF"><b>multi-home</b></span>, that is, to connect to two or more provider ISPs. So, for example, an access ISP may multi-home with two regional ISPs, or it may multi-home with two regional ISPs and also with a tier-1 ISP. Similarly, a regional ISP may multi-home with multiple tier-1 ISPs. When an ISP multi-homes, it can continue to send and receive packets into the Internet even if one of its providers has a failure.</p>
<p id="P70010119520000000000000000097F9" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097F9">As we just learned, customer ISPs pay their provider ISPs to obtain global Internet interconnectivity. The amount that a customer ISP pays a provider ISP reflects the amount of traffic it exchanges with the provider. To reduce these costs, a pair of nearby ISPs at the same level of the hierarchy can <span class="keyword" id="P70010119520000000000000000005C1" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000005C1"><b>peer</b></span>, that is, they can directly connect their networks together so that all the traffic between them passes over the direct connection rather than through upstream intermediaries. When two ISPs peer, it is typically settlement-free, that is, neither ISP pays the other. As noted earlier, tier-1 ISPs also peer with one another, settlement-free. For a readable discussion of peering and customer-provider relationships, see <a class="biblioref" href="fileP70010119520000000000000000037E0.xhtml#P7001011952000000000000000003C5A" data-foobar="7">[Van der Berg 2008]</a>. Along these same lines, a third-party company can create an <span class="keyword" id="P70010119520000000000000000005C2" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000005C2"><b>Internet Exchange Point (IXP)</b></span>, which is a meeting point where multiple ISPs can peer together. An IXP is typically in a stand-alone building with its own switches <a class="biblioref" href="fileP70010119520000000000000000037E0.xhtml#P70010119520000000000000000037F7" data-foobar="7">[Ager 2012]</a>. There are over 400 IXPs in the Internet today <a class="biblioref" href="fileP70010119520000000000000000037E0.xhtml#P70010119520000000000000000039AC" data-foobar="7">[IXP List 2016]</a>. We refer to this ecosystem—consisting of access ISPs, regional ISPs, tier-1 ISPs, PoPs, multi-homing, peering, and IXPs—as <i>Network Structure 4</i>.</p>
<p id="P70010119520000000000000000097FA" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097FA"><span class="pagebreak" title="34" id="P70010119520000000000000000005C4" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000005C4" epub:type="pagebreak" role="doc-pagebreak"></span>We now finally arrive at <i>Network Structure 5,</i> which describes today’s Internet. Network Structure 5, illustrated in <a class="xref" href="#P70010119520000000000000000005C7" data-foobar="1"><span class="label">Figure</span> <span class="number">1.15</span></a>, builds on top of Network Structure 4 by adding <span class="keyword" id="P70010119520000000000000000005C5" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000005C5"><b>content-provider networks</b></span>. Google is currently one of the leading examples of such a content-provider network. As of this writing, it is estimated that Google has 50–100 data centers distributed across North America, Europe, Asia, South America, and Australia. Some of these data centers house over one hundred thousand servers, while other data centers are smaller, housing only hundreds of servers. The Google data centers are all interconnected via Google’s private TCP/IP network, which spans the entire globe but is nevertheless separate from the public Internet. Importantly, the Google private network only carries traffic to/from Google servers. As shown in <a class="xref" href="#P70010119520000000000000000005C7" data-foobar="1"><span class="label">Figure</span> <span class="number">1.15</span></a>, the Google private network attempts to “bypass” the upper tiers of the Internet by peering (settlement free) with lower-tier ISPs, either by directly connecting with them or by connecting with them at IXPs <a class="biblioref" href="fileP70010119520000000000000000037E0.xhtml#P7001011952000000000000000003A09" data-foobar="7">[Labovitz 2010]</a>. However, because many access ISPs can still only be reached by transiting through tier-1 networks, the Google network also connects to tier-1 ISPs, and pays those ISPs for the traffic it exchanges with them. By creating its own network, a content provider not only reduces its payments to upper-tier ISPs, but also has greater control of how its services are ultimately delivered to end users. Google’s network infrastructure is described in greater detail in <a class="xref" href="fileP7001011952000000000000000000DC1.xhtml#P7001011952000000000000000000DC1" data-foobar="7"><span class="label">Section</span> <span class="number">2.6</span></a>.</p>
<p id="P70010119520000000000000000097FB" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097FB">In summary, today’s Internet—a network of networks—is complex, consisting of a dozen or so tier-1 ISPs and hundreds of thousands of lower-tier ISPs. The ISPs are diverse in their coverage, with some spanning multiple continents and oceans, and others limited to narrow geographic regions. The lower-tier ISPs connect to the higher-tier ISPs, and the higher-tier ISPs interconnect with one another. Users and content providers are customers of lower-tier ISPs, and lower-tier ISPs are customers of higher-tier ISPs. In recent years, major content providers have also created their own networks and connect directly into lower-tier ISPs where possible.</p>
<figure id="P70010119520000000000000000005C7" class="figure" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000005C7">
<img alt="An illustration of the interconnection of ISPs." height="293" width="671" aria-describedby="P70010119520000000000000000005CB" id="P70010119520000000000000000097FC" data-uri="P700101195200000000000000000550C" src="../images/4055101015.png"></img>
<figcaption id="P70010119520000000000000000097FD" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097FD"><header><h1 class="title" id="P70010119520000000000000000097FE" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000097FE" epub:type="title"><span class="label">Figure </span> <span class="number">1.15</span> Interconnection of ISPs</h1></header>

</figcaption>
</figure><div class="longdesc" id="P70010119520000000000000000005CB" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000005CB" aria-hidden="false"><a class="xref" aria-hidden="false" href="../longalt/la_4055101015.xhtml#la_4055101015"><span class="label">Description</span></a></div>
</section>
</section></body></html>