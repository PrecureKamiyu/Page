<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>38.4 RAID Level 0: Striping</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part397.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part399.htm">下一个 &gt;</a></p><p class="s40" style="padding-left: 38pt;text-indent: 0pt;text-align: left;">38.4 RAID Level 0: Striping</p><p style="padding-top: 7pt;padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: justify;">The first RAID level is actually not a RAID level at all, in that there is no redundancy. However, RAID level 0, or <b>striping </b>as it is better known, serves as an excellent upper-bound on performance and capacity and thus is worth understanding.</p><p style="padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: justify;">The simplest form of striping will <b>stripe </b>blocks across the disks of the system as follows (assume here a 4-disk array):</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:144.388pt" cellspacing="0"><tr style="height:9pt"><td style="width:34pt;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F"><p class="s108" style="padding-left: 1pt;padding-right: 1pt;text-indent: 0pt;line-height: 8pt;text-align: center;">Disk 0</p></td><td style="width:35pt;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F"><p class="s108" style="padding-left: 1pt;padding-right: 1pt;text-indent: 0pt;line-height: 8pt;text-align: center;">Disk 1</p></td><td style="width:34pt;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">Disk 2</p></td><td style="width:34pt;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F"><p class="s108" style="padding-left: 4pt;padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: center;">Disk 3</p></td></tr><tr style="height:10pt"><td style="width:34pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:35pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">1</p></td><td style="width:34pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">2</p></td><td style="width:34pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">3</p></td></tr><tr style="height:10pt"><td style="width:34pt"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">4</p></td><td style="width:35pt"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">5</p></td><td style="width:34pt"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">6</p></td><td style="width:34pt"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">7</p></td></tr><tr style="height:10pt"><td style="width:34pt"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">8</p></td><td style="width:35pt"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">9</p></td><td style="width:34pt"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">10</p></td><td style="width:34pt"><p class="s108" style="padding-left: 4pt;padding-right: 4pt;text-indent: 0pt;line-height: 9pt;text-align: center;">11</p></td></tr><tr style="height:9pt"><td style="width:34pt"><p class="s108" style="padding-left: 1pt;padding-right: 1pt;text-indent: 0pt;line-height: 8pt;text-align: center;">12</p></td><td style="width:35pt"><p class="s108" style="padding-left: 1pt;padding-right: 1pt;text-indent: 0pt;line-height: 8pt;text-align: center;">13</p></td><td style="width:34pt"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">14</p></td><td style="width:34pt"><p class="s108" style="padding-left: 4pt;padding-right: 4pt;text-indent: 0pt;line-height: 8pt;text-align: center;">15</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 139pt;text-indent: 0pt;text-align: left;">Table 38.1: <b>RAID-0: Simple Striping</b></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: justify;">From Table <span style=" color: #00AEEF;">38.1</span>, you get the basic idea: spread the blocks of the array across the disks in a round-robin fashion. This approach is designed to extract the most parallelism from the array when requests are made for contiguous chunks of the array (as in a large, sequential read, for exam- ple). We call the blocks in the same row a <b>stripe</b>; thus, blocks 0, 1, 2, and 3 are in the same stripe above.</p><p style="padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: justify;">In the example, we have made the simplifying assumption that only 1 block (each of say size 4KB) is placed on each disk before moving on to the next. However, this arrangement need not be the case. For example, we could arrange the blocks across disks as in Table <span style=" color: #00AEEF;">38.2</span>:</p><p class="s5" style="padding-top: 1pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">2 blocks</p><p style="text-indent: 0pt;text-align: left;"/><p class="s5" style="padding-top: 1pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">chunk size:</p><p style="text-indent: 0pt;text-align: left;"/><p class="s5" style="padding-top: 1pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">6</p><p class="s5" style="padding-top: 1pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">7</p><p style="text-indent: 0pt;text-align: left;"/><p class="s5" style="padding-top: 3pt;padding-left: 121pt;text-indent: 0pt;text-align: justify;">Disk 0  Disk 1  Disk 2  Disk 3</p><p style="padding-left: 115pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="259" height="0" alt="image" src="Image_560.png"/></span></p><p class="s5" style="padding-left: 130pt;text-indent: 0pt;text-align: left;">0    2    4</p><p class="s5" style="padding-top: 1pt;padding-left: 130pt;text-indent: 0pt;line-height: 10pt;text-align: left;">1    3    5</p><p class="s5" style="padding-left: 130pt;text-indent: 0pt;line-height: 10pt;text-align: left;">8    10    12    14</p><p class="s5" style="padding-left: 130pt;text-indent: 0pt;line-height: 10pt;text-align: left;">9    11    13    15</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 120pt;text-indent: 0pt;text-align: justify;">Table 38.2: <b>Striping with a Bigger Chunk Size</b></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: justify;">In this example, we place two 4KB blocks on each disk before moving on to the next disk. Thus, the <b>chunk size </b>of this RAID array is 8KB, and a stripe thus consists of 4 chunks or 32KB of data.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-top: 6pt;padding-left: 71pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><span class="p">A</span><span class="s7">SIDE</span><span class="p">: </span>T<span class="s45">HE </span>RAID M<span class="s45">APPING </span>P<span class="s45">ROBLEM</span></p><p style="padding-left: 9pt;text-indent: 0pt;line-height: 89%;text-align: justify;">Before studying the capacity, reliability, and performance characteristics of the RAID, we first present an aside on what we call <b>the mapping prob- lem</b>. This problem arises in all RAID arrays; simply put, given a logical block to read or write, how does the RAID know exactly which physical disk and offset to access?</p><p style="padding-left: 9pt;text-indent: 0pt;line-height: 89%;text-align: justify;">For these simple RAID levels, we do not need much sophistication in order to correctly map logical blocks onto their physical locations. Take the first striping example above (chunk size = 1 block = 4KB). In this case, given a logical block address A, the RAID can easily compute the desired disk and offset with two simple equations:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s38" style="padding-left: 84pt;text-indent: 0pt;text-align: left;">Disk = A % number_of_disks Offset = A / number_of_disks</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 9pt;text-indent: 0pt;line-height: 90%;text-align: left;">Note that these are all integer operations (e.g., 4 / 3 = 1 not 1.33333...). Let’s see how these equations work for a simple example. Imagine in the first RAID above that a request arrives for block 14. Given that there are 4 disks, this would mean that the disk we are interested in is (14 % 4 = 2): disk 2. The exact block is calculated as (14 / 4 = 3): block 3. Thus, block 14 should be found on the fourth block (block 3, starting at 0) of the third disk (disk 2, starting at 0), which is exactly where it is.</p><p style="padding-left: 9pt;text-indent: 0pt;line-height: 90%;text-align: left;">You can think about how these equations would be modified to support different chunk sizes. Try it! It’s not too hard.</p><p style="padding-left: 32pt;text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="toc">&nbsp;</p><div class="toc"><a class="toc0" href="part399.htm">Chunk Sizes</a><a class="toc0" href="part400.htm">Back To RAID-0 Analysis</a><a class="toc0" href="part401.htm">Evaluating RAID Performance</a><a class="toc0" href="part402.htm">Back To RAID-0 Analysis, Again</a></div><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part397.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part399.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
