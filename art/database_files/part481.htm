<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>A.2   DDL</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part480.htm">&lt; 上一个</a><span> | </span><a href="../database.html">内容</a><span> | </span><a href="part482.htm">下一个 &gt;</a></p><p class="s65" style="padding-left: 40pt;text-indent: 0pt;text-align: left;">A.2   <span style=" color: #00AEEF;">DDL</span></p><p style="padding-top: 12pt;padding-left: 88pt;text-indent: 0pt;text-align: justify;">In this section, we present a relatively complete <span class="s44">SQL </span>data deﬁnition for our example. Besides listing a datatype for each attribute, we include a substantial number of con- straints.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3507.png"/></span></p><p class="s13" style="padding-left: 175pt;text-indent: -13pt;text-align: left;"><b>create table </b>classroom <span class="p">(</span>building   <b>varchar </b><span class="p">(15), </span>room number <b>varchar </b><span class="p">(7),</span></p><p class="s13" style="padding-left: 178pt;text-indent: 0pt;text-align: left;">capacity   <b>numeric </b><span class="p">(4,0),</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3508.png"/></span></p><p style="padding-left: 178pt;text-indent: 0pt;text-align: left;"><b>primary key </b>(<i>building</i>, <i>room number</i>));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s46" style="padding-left: 162pt;text-indent: 0pt;text-align: left;">create table <i>department</i></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3509.png"/></span></p><p style="padding-left: 175pt;text-indent: 0pt;text-align: left;">(<i>dept name  </i><b>varchar </b>(20),</p><p class="s13" style="padding-left: 178pt;text-indent: 0pt;text-align: left;">building   <b>varchar </b><span class="p">(15),</span></p><p style="padding-left: 178pt;text-indent: 0pt;text-align: left;"><i>budget   </i><b>numeric </b>(12,2) <b>check </b>(<i>budget </i>&gt; 0),</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3510.png"/></span></p><p style="padding-left: 178pt;text-indent: 0pt;text-align: left;"><b>primary key </b>(<i>dept name</i>));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s46" style="padding-top: 4pt;padding-left: 158pt;text-indent: 0pt;text-align: left;">create table <i>course</i></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3511.png"/></span></p><p style="padding-left: 171pt;text-indent: 0pt;text-align: left;">(<i>course id  </i><b>varchar </b>(7),</p><p class="s13" style="padding-left: 173pt;text-indent: 0pt;text-align: left;">title    <b>varchar </b><span class="p">(50),</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3512.png"/></span></p><p class="s13" style="padding-left: 173pt;text-indent: 0pt;text-align: left;">dept name  <b>varchar </b><span class="p">(20),</span></p><p style="padding-left: 173pt;text-indent: 0pt;text-align: left;"><i>credits   </i><b>numeric </b>(2,0) <b>check </b>(<i>credits </i>&gt; 0),</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3513.png"/></span></p><p style="padding-left: 173pt;text-indent: 0pt;text-align: left;"><b>primary key </b>(<i>course id</i>),</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3514.png"/></span></p><p style="padding-left: 173pt;text-indent: 0pt;text-align: left;"><b>foreign key </b>(<i>dept name</i>) <b>references </b><i>department</i></p><p class="s46" style="padding-left: 235pt;text-indent: 0pt;text-align: left;">on delete set null<span class="p">);</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s46" style="padding-left: 158pt;text-indent: 0pt;text-align: left;">create table <i>instructor</i></p><p style="padding-left: 171pt;text-indent: 0pt;text-align: left;">(<span class="s69">ID     </span><b>varchar </b>(5),</p><p class="s46" style="padding-left: 173pt;text-indent: 0pt;text-align: left;"><i>name    </i>varchar <span class="p">(20) </span>not null<span class="p">,</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3515.png"/></span></p><p class="s13" style="padding-left: 173pt;text-indent: 0pt;text-align: left;">dept name  <b>varchar </b><span class="p">(20),</span></p><p style="padding-left: 173pt;text-indent: 0pt;text-align: left;"><i>salary    </i><b>numeric </b>(8,2) <b>check </b>(<i>salary </i>&gt; 29000),</p><p style="padding-left: 173pt;text-indent: 0pt;text-align: left;"><b>primary key </b>(<span class="s69">ID</span>),</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3516.png"/></span></p><p style="padding-left: 173pt;text-indent: 0pt;text-align: left;"><b>foreign key </b>(<i>dept name</i>) <b>references </b><i>department</i></p><p class="s46" style="padding-left: 235pt;text-indent: 0pt;text-align: left;">on delete set null<span class="p">);</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s46" style="padding-left: 158pt;text-indent: 0pt;text-align: left;">create table <i>section</i></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3517.png"/></span></p><p style="padding-left: 171pt;text-indent: 0pt;text-align: left;">(<i>course id  </i><b>varchar </b>(8),</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3518.png"/></span></p><p class="s13" style="padding-left: 173pt;text-indent: 0pt;text-align: left;">sec id    <b>varchar </b><span class="p">(8),</span></p><p class="s46" style="padding-left: 173pt;text-indent: 0pt;text-align: left;"><i>semester   </i>varchar <span class="p">(6) </span>check <span class="p">(</span><i>semester </i>in</p><p style="padding-left: 173pt;text-indent: 105pt;text-align: left;">(’Fall’, ’Winter’, ’Spring’, ’Summer’)), <i>year    </i><b>numeric </b>(4,0) <b>check </b>(<i>year </i>&gt; 1701 and <i>year </i>&lt; 2100), <i>building   </i><b>varchar </b>(15),</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3519.png"/></span></p><p class="s13" style="padding-left: 173pt;text-indent: 0pt;text-align: left;">room number <b>varchar </b><span class="p">(7),</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3520.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3521.png"/></span></p><p class="s13" style="padding-left: 173pt;text-indent: 0pt;text-align: left;">time slot id  <b>varchar </b><span class="p">(4),</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3522.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3523.png"/></span></p><p style="padding-left: 173pt;text-indent: 0pt;text-align: left;"><b>primary key </b>(<i>course id</i>, <i>sec id</i>, <i>semester</i>, <i>year</i>),</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3524.png"/></span></p><p style="padding-left: 173pt;text-indent: 0pt;text-align: left;"><b>foreign key </b>(<i>course id</i>) <b>references </b><i>course</i></p><p class="s46" style="padding-left: 235pt;text-indent: 0pt;text-align: left;">on delete cascade<span class="p">,</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3525.png"/></span></p><p style="padding-left: 173pt;text-indent: 0pt;text-align: left;"><b>foreign key </b>(<i>building</i>, <i>room number</i>) <b>references </b><i>classroom</i></p><p class="s46" style="padding-left: 235pt;text-indent: 0pt;text-align: left;">on delete set null<span class="p">);</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">In the preceding <span class="s44">DDL</span>, we add the <b>on delete cascade </b>speciﬁcation to a foreign key constraint if the existence of the tuple depends on the referenced tuple. For example, we add the <b>on delete cascade </b>speciﬁcation to the foreign key constraint from <i>section </i>(which was generated from weak entity <i>section</i>), to <i>course </i>(which was its identifying re- lationship). In other foreign key constraints we either specify <b>on delete set null</b>, which allows deletion of a referenced tuple by setting the referencing value to null, or we do not add any speciﬁcation, which prevents the deletion of any referenced tuple. For ex- ample, if a department is deleted, we would not wish to delete associated instructors;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3526.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3527.png"/></span></p><p style="padding-top: 4pt;padding-left: 88pt;text-indent: 0pt;text-align: justify;">the foreign key constraint from <i>instructor </i>to <i>department </i>instead sets the <i>dept name </i>at- tribute to null. On the other hand, the foreign key constraint for the <i>prereq </i>relation, shown later, prevents the deletion of a course that is required as a prerequisite for an- other course. For the <i>advisor </i>relation, shown later, we allow <i>i </i><span class="s101">ID </span>to be set to null if an instructor is deleted but delete an <i>advisor </i>tuple if the referenced student is deleted.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s46" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">create table <i>teaches</i></p><p style="padding-left: 147pt;text-indent: 0pt;text-align: left;">(<span class="s69">ID     </span><b>varchar </b>(5),</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3528.png"/></span></p><p class="s13" style="padding-left: 150pt;text-indent: 0pt;text-align: left;">course id  <b>varchar </b><span class="p">(8),</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3529.png"/></span></p><p class="s13" style="padding-left: 150pt;text-indent: 0pt;text-align: left;">sec id    <b>varchar </b><span class="p">(8),</span></p><p class="s13" style="padding-left: 150pt;text-indent: 0pt;text-align: left;">semester   <b>varchar </b><span class="p">(6),</span></p><p class="s13" style="padding-left: 150pt;text-indent: 0pt;text-align: left;">year    <b>numeric </b><span class="p">(4,0),</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3530.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3531.png"/></span></p><p style="padding-left: 150pt;text-indent: 0pt;text-align: left;"><b>primary key </b>(<span class="s69">ID</span>, <i>course id</i>, <i>sec id</i>, <i>semester</i>, <i>year</i>),</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3532.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3533.png"/></span></p><p style="padding-left: 150pt;text-indent: 0pt;text-align: left;"><b>foreign key </b>(<i>course id</i>, <i>sec id</i>, <i>semester</i>, <i>year</i>) <b>references </b><i>section</i></p><p style="padding-left: 150pt;text-indent: 61pt;text-align: left;"><b>on delete cascade</b>, <b>foreign key </b>(<span class="s69">ID</span>) <b>references </b><i>instructor</i></p><p class="s46" style="padding-left: 212pt;text-indent: 0pt;text-align: left;">on delete cascade<span class="p">);</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s46" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">create table <i>student</i></p><p style="padding-left: 147pt;text-indent: 0pt;text-align: left;">(<span class="s69">ID     </span><b>varchar </b>(5),</p><p class="s46" style="padding-left: 150pt;text-indent: 0pt;text-align: left;"><i>name    </i>varchar <span class="p">(20) </span>not null<span class="p">,</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3534.png"/></span></p><p class="s13" style="padding-left: 150pt;text-indent: 0pt;text-align: left;">dept name  <b>varchar </b><span class="p">(20),</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3535.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3536.png"/></span></p><p style="padding-left: 150pt;text-indent: 0pt;text-align: left;"><i>tot cred   </i><b>numeric </b>(3,0) <b>check </b>(<i>tot cred </i>&gt;= 0),</p><p style="padding-left: 150pt;text-indent: 0pt;text-align: left;"><b>primary key </b>(<span class="s69">ID</span>),</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3537.png"/></span></p><p style="padding-left: 150pt;text-indent: 0pt;text-align: left;"><b>foreign key </b>(<i>dept name</i>) <b>references </b><i>department</i></p><p class="s46" style="padding-left: 212pt;text-indent: 0pt;text-align: left;">on delete set null<span class="p">);</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s46" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">create table <i>takes</i></p><p style="padding-left: 147pt;text-indent: 0pt;text-align: left;">(<span class="s69">ID     </span><b>varchar </b>(5),</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3538.png"/></span></p><p class="s13" style="padding-left: 150pt;text-indent: 0pt;text-align: left;">course id  <b>varchar </b><span class="p">(8),</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3539.png"/></span></p><p class="s13" style="padding-left: 150pt;text-indent: 0pt;text-align: left;">sec id    <b>varchar </b><span class="p">(8),</span></p><p class="s13" style="padding-left: 150pt;text-indent: 0pt;text-align: left;">semester   <b>varchar </b><span class="p">(6),</span></p><p class="s13" style="padding-left: 150pt;text-indent: 0pt;text-align: left;">year    <b>numeric </b><span class="p">(4,0),</span></p><p class="s13" style="padding-left: 150pt;text-indent: 0pt;text-align: left;">grade    <b>varchar </b><span class="p">(2),</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3540.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3541.png"/></span></p><p style="padding-left: 150pt;text-indent: 0pt;text-align: left;"><b>primary key </b>(<span class="s69">ID</span>, <i>course id</i>, <i>sec id</i>, <i>semester</i>, <i>year</i>),</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3542.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3543.png"/></span></p><p style="padding-left: 150pt;text-indent: 0pt;text-align: left;"><b>foreign key </b>(<i>course id</i>, <i>sec id</i>, <i>semester</i>, <i>year</i>) <b>references </b><i>section</i></p><p style="padding-left: 150pt;text-indent: 61pt;text-align: left;"><b>on delete cascade</b>, <b>foreign key </b>(<span class="s69">ID</span>) <b>references </b><i>student</i></p><p class="s46" style="padding-left: 212pt;text-indent: 0pt;text-align: left;">on delete cascade<span class="p">);</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s46" style="padding-top: 4pt;padding-left: 207pt;text-indent: 0pt;text-align: left;">create table <i>advisor</i></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3544.png"/></span></p><p style="padding-left: 220pt;text-indent: 0pt;text-align: left;">(<i>s </i><span class="s101">ID    </span><b>varchar </b>(5),</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3545.png"/></span></p><p class="s13" style="padding-left: 220pt;text-indent: 0pt;text-align: left;">i <span class="s101">ID     </span><b>varchar </b><span class="p">(5),</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3546.png"/></span></p><p style="padding-left: 223pt;text-indent: 0pt;text-align: left;"><b>primary key </b>(<i>s </i><span class="s101">ID</span>),</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3547.png"/></span></p><p style="padding-left: 223pt;text-indent: 0pt;text-align: left;"><b>foreign key </b>(<i>i </i><span class="s101">ID</span>) <b>references </b><i>instructor </i>(<span class="s69">ID</span>)</p><p class="s46" style="padding-left: 285pt;text-indent: 0pt;text-align: left;">on delete set null<span class="p">,</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3548.png"/></span></p><p style="padding-left: 223pt;text-indent: 0pt;text-align: left;"><b>foreign key </b>(<i>s </i><span class="s101">ID</span>) <b>references </b><i>student </i>(<span class="s69">ID</span>)</p><p class="s46" style="padding-left: 285pt;text-indent: 0pt;text-align: left;">on delete cascade<span class="p">);</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s46" style="padding-left: 207pt;text-indent: 0pt;text-align: left;">create table <i>prereq</i></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3549.png"/></span></p><p style="padding-left: 220pt;text-indent: 0pt;text-align: left;">(<i>course id  </i><b>varchar</b>(8),</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3550.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3551.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3552.png"/></span></p><p style="padding-left: 223pt;text-indent: 0pt;text-align: left;"><i>prereq id   </i><b>varchar</b>(8), <b>primary key </b>(<i>course id</i>, <i>prereq id</i>),</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3553.png"/></span></p><p style="padding-left: 223pt;text-indent: 0pt;text-align: left;"><b>foreign key </b>(<i>course id</i>) <b>references </b><i>course</i></p><p class="s46" style="padding-left: 285pt;text-indent: 0pt;text-align: left;">on delete cascade<span class="p">,</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3554.png"/></span></p><p style="padding-left: 223pt;text-indent: 0pt;text-align: left;"><b>foreign key </b>(<i>prereq id</i>) <b>references </b><i>course</i>);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3555.png"/></span></p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">The following <b>create table </b>statement for the table <i>time slot </i>can be run on most database systems, but it does not work on Oracle (at least as of Oracle version 11), since Oracle does not support the <span class="s44">SQL </span>standard type <b>time</b>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s46" style="padding-left: 145pt;text-indent: 0pt;text-align: left;">create table <i>timeslot</i></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3556.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3557.png"/></span></p><p style="padding-left: 158pt;text-indent: 0pt;text-align: left;">(<i>time slot id  </i><b>varchar </b>(4),</p><p class="s46" style="padding-left: 161pt;text-indent: 0pt;text-align: left;"><i>day    </i>varchar <span class="p">(1) </span>check <span class="p">(</span><i>day </i>in <span class="p">(’M’, ’T’, ’W’, ’R’, ’F’, ’S’, ’U’)),</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3558.png"/></span></p><p class="s13" style="padding-left: 161pt;text-indent: 0pt;text-align: left;">start time  <b>time</b><span class="p">,</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3559.png"/></span></p><p class="s13" style="padding-left: 161pt;text-indent: 0pt;text-align: left;">end time   <b>time</b><span class="p">,</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3560.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3561.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3562.png"/></span></p><p style="padding-left: 161pt;text-indent: 0pt;text-align: left;"><b>primary key </b>(<i>time slot id</i>, <i>day</i>, <i>start time</i>));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 119pt;text-indent: 17pt;text-align: justify;">The syntax for specifying time in <span class="s44">SQL </span>is illustrated by these examples: ’08:30’, ’13:55’, and ’5:30 PM’. Since Oracle does not support the <b>time </b>type, for Oracle we use the following schema instead:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s46" style="padding-left: 151pt;text-indent: 0pt;text-align: left;">create table <i>timeslot</i></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3563.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3564.png"/></span></p><p style="padding-left: 164pt;text-indent: 0pt;text-align: left;">(<i>time slot id  </i><b>varchar </b>(4),</p><p class="s13" style="padding-left: 167pt;text-indent: 0pt;text-align: left;">day    <b>varchar </b><span class="p">(1),</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3565.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3566.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3567.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3568.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3569.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3570.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3571.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3572.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3573.png"/></span></p><p class="s13" style="padding-left: 167pt;text-indent: 0pt;text-align: left;">start hr   <b>numeric </b><span class="p">(2) check (</span>start hr <span class="p">&gt;=0 and </span>end hr <span class="p">&lt; 24), </span>start min   <b>numeric </b><span class="p">(2) check (</span>start min <span class="p">&gt;=0 and </span>start min <span class="p">&lt; 60), </span>end hr    <b>numeric </b><span class="p">(2) check (</span>end hr <span class="p">&gt;=0 and </span>end hr <span class="p">&lt; 24),</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3574.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3575.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3576.png"/></span></p><p class="s13" style="padding-left: 167pt;text-indent: 0pt;text-align: left;">end min   <b>numeric </b><span class="p">(2) check (</span>end min <span class="p">&gt;= 0 and </span>end min <span class="p">&lt; 60),</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3577.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3578.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3579.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3580.png"/></span></p><p style="padding-left: 167pt;text-indent: 0pt;text-align: left;"><b>primary key </b>(<i>time slot id</i>, <i>day</i>, <i>start hr</i>, <i>start min</i>));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3581.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3582.png"/></span></p><p style="padding-left: 119pt;text-indent: 0pt;text-align: right;">The diﬀerence is that <i>start time </i>has been replaced by two attributes <i>start hr </i>and</p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3583.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3584.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3585.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3586.png"/></span></p><p class="s13" style="padding-left: 87pt;text-indent: 0pt;text-align: right;">start min<span class="p">, and similarly </span>end time <span class="p">has been replaced by attributes </span>end hr <span class="p">and </span>end min<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="1" alt="image" src="Image_3587.png"/></span></p><p style="padding-top: 4pt;padding-left: 88pt;text-indent: 0pt;text-align: justify;">These attributes also have constraints that ensure that only numbers representing valid time values appear in those attributes. This version of the schema for <i>time slot </i>works on all databases, including Oracle. Note that although Oracle supports the <b>datetime </b>datatype, <b>datetime </b>includes a speciﬁc day, month, and year as well as a time, and is not appropriate here since we want only a time. There are two alternatives to splitting the time attributes into an hour and a minute component, but neither is desirable. The ﬁrst alternative is to use a <b>varchar </b>type, but that makes it hard to enforce validity con- straints on the string as well as to perform comparison on time. The second alternative is to encode time as an integer representing a number of minutes (or seconds) from midnight, but this alternative requires extra code with each query to convert values be- tween the standard time representation and the integer encoding. We therefore choose the two-part solution.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part480.htm">&lt; 上一个</a><span> | </span><a href="../database.html">内容</a><span> | </span><a href="part482.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
