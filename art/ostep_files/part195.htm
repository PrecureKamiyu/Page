<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>19.5 TLB Issue: Context Switches</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part194.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part196.htm">下一个 &gt;</a></p><p class="s40" style="padding-left: 38pt;text-indent: 0pt;text-align: left;">19.5 TLB Issue: Context Switches</p><p style="padding-top: 7pt;padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: left;">With TLBs, some new issues arise when switching between processes (and hence address spaces). Specifically, the TLB contains virtual-to-physical translations that are only valid for the currently running process; these translations are not meaningful for other processes. As a result, when switching from one process to another, the hardware or OS (or both) must be careful to ensure that the about-to-be-run process does not accidentally use translations from some previously run process.</p><p style="padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: right;">To understand this situation better, let’s look at an example. When one process (P1) is running, it assumes the TLB might be caching translations that are valid for it, i.e., that come from P1’s page table. Assume, for this example, that the 10th virtual page of P1 is mapped to physical frame 100. In this example, assume another process (P2) exists, and the OS soon might decide to perform a context switch and run it. Assume here that the 10th virtual page of P2 is mapped to physical frame 170. If entries for</p><p style="padding-left: 49pt;text-indent: 0pt;line-height: 10pt;text-align: center;">both processes were in the TLB, the contents of the TLB would be:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:127.588pt" cellspacing="0"><tr style="height:10pt"><td style="width:29pt;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: center;">VPN</p></td><td style="width:29pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: right;">PFN</p></td><td style="width:30pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: center;">valid</p></td><td style="width:27pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: center;">prot</p></td></tr><tr style="height:10pt"><td style="width:29pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: center;">10</p></td><td style="width:29pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 7pt;text-indent: 0pt;line-height: 9pt;text-align: right;">100</p></td><td style="width:30pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">1</p></td><td style="width:27pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: center;">rwx</p></td></tr><tr style="height:10pt"><td style="width:29pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">—</p></td><td style="width:29pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 9pt;text-indent: 0pt;line-height: 9pt;text-align: right;">—</p></td><td style="width:30pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:27pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">—</p></td></tr><tr style="height:10pt"><td style="width:29pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: center;">10</p></td><td style="width:29pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 7pt;text-indent: 0pt;line-height: 9pt;text-align: right;">170</p></td><td style="width:30pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">1</p></td><td style="width:27pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: center;">rwx</p></td></tr><tr style="height:10pt"><td style="width:29pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">—</p></td><td style="width:29pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-right: 9pt;text-indent: 0pt;line-height: 8pt;text-align: right;">—</p></td><td style="width:30pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">0</p></td><td style="width:27pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">—</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 41pt;text-indent: 11pt;line-height: 89%;text-align: justify;">In the TLB above, we clearly have a problem: VPN 10 translates to either PFN 100 (P1) or PFN 170 (P2), but the hardware can’t distinguish which entry is meant for which process. Thus, we need to do some more work in order for the TLB to correctly and efficiently support virtualiza- tion across multiple processes. And thus, a crux:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;line-height: 11pt;text-align: center;">T<span class="s7">HE </span>C<span class="s7">RUX</span>:</p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 10pt;text-align: center;">H<span class="s7">OW </span>T<span class="s7">O </span>M<span class="s7">ANAGE </span>TLB C<span class="s7">ONTENTS </span>O<span class="s7">N </span>A C<span class="s7">ONTEXT </span>S<span class="s7">WITCH</span></p><p style="padding-left: 9pt;text-indent: 0pt;line-height: 89%;text-align: justify;">When context-switching between processes, the translations in the TLB for the last process are not meaningful to the about-to-be-run process. What should the hardware or OS do in order to solve this problem?</p><p style="padding-left: 32pt;text-indent: 0pt;text-align: left;"/><p style="padding-top: 7pt;padding-left: 41pt;text-indent: 11pt;line-height: 89%;text-align: justify;">There are a number of possible solutions to this problem. One ap- proach is to simply <b>flush </b>the TLB on context switches, thus emptying it before running the next process. On a software-based system, this can be accomplished with an explicit (and privileged) hardware instruc- tion; with a hardware-managed TLB, the flush could be enacted when the page-table base register is changed (note the OS must change the PTBR on a context switch anyhow). In either case, the flush operation simply sets all valid bits to 0, essentially clearing the contents of the TLB.</p><p style="padding-left: 41pt;text-indent: 11pt;line-height: 89%;text-align: justify;">By flushing the TLB on each context switch, we now have a working solution, as a process will never accidentally encounter the wrong trans- lations in the TLB. However, there is a cost: each time a process runs, it must incur TLB misses as it touches its data and code pages. If the OS switches between processes frequently, this cost may be high.</p><p style="padding-left: 41pt;text-indent: 11pt;line-height: 89%;text-align: justify;">To reduce this overhead, some systems add hardware support to en- able sharing of the TLB across context switches. In particular, some hard- ware systems provide an <b>address space identifier </b>(<b>ASID</b>) field in the TLB. You can think of the ASID as a <b>process identifier </b>(<b>PID</b>), but usu- ally it has fewer bits (e.g., 8 bits for the ASID versus 32 bits for a PID).</p><p style="padding-left: 41pt;text-indent: 11pt;line-height: 89%;text-align: justify;">If we take our example TLB from above and add ASIDs, it is clear processes can readily share the TLB: only the ASID field is needed to dif- ferentiate otherwise identical translations. Here is a depiction of a TLB with the added ASID field:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:111.748pt" cellspacing="0"><tr style="height:10pt"><td style="width:29pt;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: center;">VPN</p></td><td style="width:29pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: center;">PFN</p></td><td style="width:30pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: center;">valid</p></td><td style="width:27pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: center;">prot</p></td><td style="width:31pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F"><p class="s108" style="padding-left: 4pt;padding-right: 4pt;text-indent: 0pt;line-height: 8pt;text-align: center;">ASID</p></td></tr><tr style="height:10pt"><td style="width:29pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: center;">10</p></td><td style="width:29pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: center;">100</p></td><td style="width:30pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">1</p></td><td style="width:27pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: center;">rwx</p></td><td style="width:31pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">1</p></td></tr><tr style="height:10pt"><td style="width:29pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">—</p></td><td style="width:29pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">—</p></td><td style="width:30pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">0</p></td><td style="width:27pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">—</p></td><td style="width:31pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">—</p></td></tr><tr style="height:10pt"><td style="width:29pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: center;">10</p></td><td style="width:29pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: center;">170</p></td><td style="width:30pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">1</p></td><td style="width:27pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: center;">rwx</p></td><td style="width:31pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">2</p></td></tr><tr style="height:10pt"><td style="width:29pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">—</p></td><td style="width:29pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">—</p></td><td style="width:30pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">0</p></td><td style="width:27pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">—</p></td><td style="width:31pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">—</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: justify;">Thus, with address-space identifiers, the TLB can hold translations from different processes at the same time without any confusion. Of course, the hardware also needs to know which process is currently run- ning in order to perform translations, and thus the OS must, on a context switch, set some privileged register to the ASID of the current process.</p><p style="padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: justify;">As an aside, you may also have thought of another case where two entries of the TLB are remarkably similar. In this example, there are two entries for two different processes with two different VPNs that point to the <i>same </i>physical page:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:139.708pt" cellspacing="0"><tr style="height:10pt"><td style="width:29pt;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: center;">VPN</p></td><td style="width:29pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: center;">PFN</p></td><td style="width:30pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: center;">valid</p></td><td style="width:27pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: center;">prot</p></td><td style="width:31pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-bottom-style:solid;border-bottom-width:1pt;border-bottom-color:#221E1F"><p class="s108" style="padding-left: 4pt;padding-right: 4pt;text-indent: 0pt;line-height: 8pt;text-align: center;">ASID</p></td></tr><tr style="height:10pt"><td style="width:29pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: center;">10</p></td><td style="width:29pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: center;">101</p></td><td style="width:30pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">1</p></td><td style="width:27pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 9pt;text-align: center;">r-x</p></td><td style="width:31pt;border-top-style:solid;border-top-width:1pt;border-top-color:#221E1F;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">1</p></td></tr><tr style="height:10pt"><td style="width:29pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">—</p></td><td style="width:29pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">—</p></td><td style="width:30pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">0</p></td><td style="width:27pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">—</p></td><td style="width:31pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 9pt;text-align: center;">—</p></td></tr><tr style="height:10pt"><td style="width:29pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: center;">50</p></td><td style="width:29pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: center;">101</p></td><td style="width:30pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">1</p></td><td style="width:27pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="padding-left: 5pt;padding-right: 5pt;text-indent: 0pt;line-height: 8pt;text-align: center;">r-x</p></td><td style="width:31pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">2</p></td></tr><tr style="height:10pt"><td style="width:29pt;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">—</p></td><td style="width:29pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">—</p></td><td style="width:30pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">0</p></td><td style="width:27pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F;border-right-style:solid;border-right-width:1pt;border-right-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">—</p></td><td style="width:31pt;border-left-style:solid;border-left-width:1pt;border-left-color:#221E1F"><p class="s108" style="text-indent: 0pt;line-height: 8pt;text-align: center;">—</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 68pt;text-indent: 11pt;line-height: 89%;text-align: justify;">This situation might arise, for example, when two processes <i>share </i>a page (a code page, for example). In the example above, Process 1 is shar- ing physical page 101 with Process 2; P1 maps this page into the 10th page of its address space, whereas P2 maps it to the 50th page of its ad- dress space. Sharing of code pages (in binaries, or shared libraries) is useful as it reduces the number of physical pages in use, thus reducing memory overheads.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part194.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part196.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
