<?xml version="1.0" encoding="utf-8"?><html xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:svg="http://www.w3.org/2000/svg" xmlns:epub="http://www.idpf.org/2007/ops" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" epub:prefix="index: http://www.index.com/"><head>
<meta name="dcterms.conformsTo" content="PXE Basic 1.0"></meta>
<meta name="generator" content="PXE Tools version 1.39.109"></meta>
<!--Created by pxe.pl for standard version PXE Basic 1.0,data-profile-product=standard by PXE Tools 1.39.109, partial=false-->
<title>1.5 Protocol Layers and Their Service Models</title><link rel="alternate stylesheet" type="text/css" title="sepia" href="../css/sepia.css"></link><link rel="alternate stylesheet" type="text/css" title="night" href="../css/night.css"></link><link rel="stylesheet" type="text/css" title="day" href="../css/main.css"></link><link rel="stylesheet" type="text/css" title="day" href="../css/print.css"></link>
<script src="js/format_lg_obj.js"></script>
</head><body epub:type="bodymatter">
<section id="P700101195200000000000000000065D" class="level1"><header><h1 class="title" id="P7001011952000000000000000009858" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000009858" epub:type="title"><span class="pagebreak" title="47" id="P700101195200000000000000000065F" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000065F" epub:type="pagebreak" role="doc-pagebreak"></span><span class="number">1.5</span> Protocol Layers and Their Service Models</h1></header>
<p id="P7001011952000000000000000009859" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000009859">From our discussion thus far, it is apparent that the Internet is an <i>extremely</i> complicated system. We have seen that there are many pieces to the Internet: numerous applications and protocols, various types of end systems, packet switches, and various types of link-level media. Given this enormous complexity, is there any hope of organizing a network architecture, or at least our discussion of network architecture? Fortunately, the answer to both questions is yes.</p>
<section id="P7001011952000000000000000000661" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000661" class="level2"><header><h1 class="title" id="P700101195200000000000000000985A" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000985A" epub:type="title"><span class="number">1.5.1</span> Layered Architecture</h1></header>
<p id="P700101195200000000000000000985B" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000985B">Before attempting to organize our thoughts on Internet architecture, let’s look for a human analogy. Actually, we deal with complex systems all the time in our everyday life. Imagine if someone asked you to describe, for example, the airline system. How would you find the structure to describe this complex system that has ticketing agents, baggage checkers, gate personnel, pilots, airplanes, air traffic control, and a worldwide system for routing airplanes? One way to describe this system might be to describe the series of actions you take (or others take for you) when you fly on an airline. You purchase your ticket, check your bags, go to the gate, and eventually get loaded onto the plane. The plane takes off and is routed to its destination. After your plane lands, you deplane at the gate and claim your bags. If the trip was bad, you complain about the flight to the ticket agent (getting nothing for your effort). This scenario is shown in <a class="xref" href="#P7001011952000000000000000000664" data-foobar="1"><span class="label">Figure</span> <span class="number">1.21</span></a>.</p>
<figure id="P7001011952000000000000000000664" class="figure" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000664">
<img alt="An illustration of the actions involved in taking an airplane trip." height="329" width="420" aria-describedby="P7001011952000000000000000000668" id="P700101195200000000000000000985C" data-uri="P7001011952000000000000000005513" src="../images/4055101021.png"></img>
<figcaption id="P700101195200000000000000000985D" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000985D"><header><h1 class="title" id="P700101195200000000000000000985E" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000985E" epub:type="title"><span class="label">Figure </span> <span class="number">1.21</span> Taking an airplane trip: actions</h1></header>

</figcaption>
</figure><div class="longdesc" id="P7001011952000000000000000000668" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000668" aria-hidden="false"><a class="xref" aria-hidden="false" href="../longalt/la_4055101021.xhtml#la_4055101021"><span class="label">Description</span></a></div>
<figure id="P7001011952000000000000000000682" class="figure" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000682">
<img alt="The horizontal layering of airline functionality." height="255" width="767" aria-describedby="P7001011952000000000000000000687" id="P7001011952000000000000000009878" data-uri="P7001011952000000000000000005514" src="../images/4055101022.png"></img>
<figcaption id="P7001011952000000000000000009879" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000009879"><header><h1 class="title" id="P700101195200000000000000000987A" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000987A" epub:type="title"><span class="pagebreak" title="48" id="P7001011952000000000000000000686" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000686" epub:type="pagebreak" role="doc-pagebreak"></span><span class="label">Figure </span> <span class="number">1.22</span> Horizontal layering of airline functionality</h1></header>

</figcaption>
</figure><div class="longdesc" id="P7001011952000000000000000000687" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000687" aria-hidden="false"><a class="xref" aria-hidden="false" href="../longalt/la_4055101022.xhtml#la_4055101022"><span class="label">Description</span></a></div>
<p id="P7001011952000000000000000009893" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000009893">Already, we can see some analogies here with computer networking: You are being shipped from source to destination by the airline; a packet is shipped from source host to destination host in the Internet. But this is not quite the analogy we are after. We are looking for some <i>structure</i> in <a class="xref" href="#P7001011952000000000000000000664" data-foobar="1"><span class="label">Figure</span> <span class="number">1.21</span></a>. Looking at <a class="xref" href="#P7001011952000000000000000000664" data-foobar="1"><span class="label">Figure</span> <span class="number">1.21</span></a>, we note that there is a ticketing function at each end; there is also a baggage function for already-ticketed passengers, and a gate function for already-ticketed and already-baggage-checked passengers. For passengers who have made it through the gate (that is, passengers who are already ticketed, baggage-checked, and through the gate), there is a takeoff and landing function, and while in flight, there is an airplane-routing function. This suggests that we can look at the functionality in <a class="xref" href="#P7001011952000000000000000000664" data-foobar="1"><span class="label">Figure</span> <span class="number">1.21</span></a> in a <i>horizontal</i> manner, as shown in <a class="xref" href="#P7001011952000000000000000000682" data-foobar="1"><span class="label">Figure</span> <span class="number">1.22</span></a>.</p>
<p id="P7001011952000000000000000009894" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000009894"><a class="xref" href="#P7001011952000000000000000000682" data-foobar="1"><span class="label">Figure</span> <span class="number">1.22</span></a> has divided the airline functionality into layers, providing a framework in which we can discuss airline travel. Note that each layer, combined with the layers below it, implements some functionality, some <i>service.</i> At the ticketing layer and below, airline-counter-to-airline-counter transfer of a person is accomplished. At the baggage layer and below, baggage-check-to-baggage-claim transfer of a person and bags is accomplished. Note that the baggage layer provides this service only to an already-ticketed person. At the gate layer, departure-gate-to-arrival-gate transfer of a person and bags is accomplished. At the takeoff/landing layer, runway-to-runway transfer of people and their bags is accomplished. Each layer provides its service by (1) performing certain actions within that layer (for example, at the gate layer, loading and unloading people from an airplane) and by (2) using the services of the layer directly below it (for example, in the gate layer, using the runway-to-runway passenger transfer service of the takeoff/landing layer).</p>
<p id="P7001011952000000000000000009895" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000009895">A layered architecture allows us to discuss a well-defined, specific part of a large and complex system. This simplification itself is of considerable value by providing modularity, making it much easier to change the implementation of the service provided by the layer. As long as the layer provides the same service to the layer above it, and uses the same services from the layer below it, the remainder of <span class="pagebreak" title="49" id="P70010119520000000000000000006A3" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006A3" epub:type="pagebreak" role="doc-pagebreak"></span>the system remains unchanged when a layer’s implementation is changed. (Note that changing the implementation of a service is very different from changing the service itself!) For example, if the gate functions were changed (for instance, to have people board and disembark by height), the remainder of the airline system would remain unchanged since the gate layer still provides the same function (loading and unloading people); it simply implements that function in a different manner after the change. For large and complex systems that are constantly being updated, the ability to change the implementation of a service without affecting other components of the system is another important advantage of layering.</p>
<section id="P70010119520000000000000000006A4" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006A4" class="level3"><header><h1 class="title" id="P7001011952000000000000000009896" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000009896" epub:type="title">Protocol Layering</h1></header>
<p id="P7001011952000000000000000009897" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000009897">But enough about airlines. Let’s now turn our attention to network protocols. To provide structure to the design of network protocols, network designers organize protocols—and the network hardware and software that implement the protocols—in <span class="keyword" id="P70010119520000000000000000006A7" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006A7"><b>layers</b></span>. Each protocol belongs to one of the layers, just as each function in the airline architecture in <a class="xref" href="#P7001011952000000000000000000682" data-foobar="1"><span class="label">Figure</span> <span class="number">1.22</span></a> belonged to a layer. We are again interested in the <span class="keyword" id="P70010119520000000000000000006A8" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006A8"><b>services</b></span> that a layer offers to the layer above—the so-called <span class="keyword" id="P70010119520000000000000000006A9" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006A9"><b>service model</b></span> of a layer. Just as in the case of our airline example, each layer provides its service by (1) performing certain actions within that layer and by (2) using the services of the layer directly below it. For example, the services provided by layer <i>n</i> may include reliable delivery of messages from one edge of the network to the other. This might be implemented by using an unreliable edge-to-edge message delivery service of layer <span class="inlineequation"><m:math display="inline" alttext="" data-uri="" altimg-width="47" altimg-height="13" altimg="../images/ch01math27.png"><m:mrow><m:mi>n</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:math></span>, and adding layer <i>n</i> functionality to detect and retransmit lost messages.</p>
<p id="P7001011952000000000000000009898" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000009898">A protocol layer can be implemented in software, in hardware, or in a combination of the two. Application-layer protocols—such as HTTP and SMTP—are almost always implemented in software in the end systems; so are transport-layer protocols. Because the physical layer and data link layers are responsible for handling communication over a specific link, they are typically implemented in a network interface card (for example, Ethernet or WiFi interface cards) associated with a given link. The network layer is often a mixed implementation of hardware and software. Also note that just as the functions in the layered airline architecture were distributed among the various airports and flight control centers that make up the system, so too is a layer <i>n</i> protocol <i>distributed</i> among the end systems, packet switches, and other components that make up the network. That is, there’s often a piece of a layer <i>n</i> protocol in each of these network components.</p>
<p id="P7001011952000000000000000009899" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000009899">Protocol layering has conceptual and structural advantages <a class="biblioref" href="fileP70010119520000000000000000037E0.xhtml#P7001011952000000000000000003B79" data-foobar="7">[RFC 3439]</a>. As we have seen, layering provides a structured way to discuss system components. Modularity makes it easier to update system components. We mention, however, that some researchers and networking engineers are vehemently opposed to layering <a class="biblioref" href="fileP70010119520000000000000000037E0.xhtml#P7001011952000000000000000003C68" data-foobar="7">[Wakeman 1992]</a>. One potential drawback of layering is that one layer may duplicate lower-layer functionality. For example, many protocol stacks provide error recovery<span class="pagebreak" title="50" id="P70010119520000000000000000006AC" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006AC" epub:type="pagebreak" role="doc-pagebreak"></span></p>
<figure id="P70010119520000000000000000006AD" class="figure" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006AD">
<img alt="" height="211" width="126" id="P700101195200000000000000000989A" data-uri="P7001011952000000000000000005515" aria-describedby="P70010119520000000000000000006B2" src="../images/4055101023.png"></img>
<img alt="" height="270" width="126" id="P700101195200000000000000000989B" data-uri="P7001011952000000000000000005516" aria-describedby="P70010119520000000000000000006B2" src="../images/4055101023a.png"></img>
<figcaption id="P700101195200000000000000000989C" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000989C"><header><h1 class="title" id="P700101195200000000000000000989D" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000989D" epub:type="title"><span class="label">Figure </span> <span class="number">1.23</span> The Internet protocol stack (a) and OSI reference model (b)</h1></header>

</figcaption>
</figure><div class="longdesc" id="P70010119520000000000000000006B2" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006B2" aria-hidden="false"><a class="xref" aria-hidden="false" href="../longalt/la_4055101023.xhtml#la_4055101023"><span class="label">Description</span></a></div>
<p class="continued" id="P70010119520000000000000000098AC" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098AC">on both a per-link basis and an end-to-end basis. A second potential drawback is that functionality at one layer may need information (for example, a timestamp value) that is present only in another layer; this violates the goal of separation of layers.</p>
<p id="P70010119520000000000000000098AD" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098AD">When taken together, the protocols of the various layers are called the <span class="keyword" id="P70010119520000000000000000006C3" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006C3"><b>protocol stack</b></span>. The Internet protocol stack consists of five layers: the physical, link, network, transport, and application layers, as shown in <a class="xref" href="#P70010119520000000000000000006AD" data-foobar="1"><span class="label">Figure</span> <span class="number">1.23(a)</span></a>. If you examine the Table of Contents, you will see that we have roughly organized this book using the layers of the Internet protocol stack. We take a <span class="keyword" id="P70010119520000000000000000006C4" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006C4"><b>top-down approach</b></span>, first covering the application layer and then proceeding downward.</p>
</section>
<section id="P70010119520000000000000000006C5" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006C5" class="level3"><header><h1 class="title" id="P70010119520000000000000000098AE" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098AE" epub:type="title">Application Layer</h1></header>
<p id="P70010119520000000000000000098AF" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098AF">The application layer is where network applications and their application-layer protocols reside. The Internet’s application layer includes many protocols, such as the HTTP protocol (which provides for Web document request and transfer), SMTP (which provides for the transfer of e-mail messages), and FTP (which provides for the transfer of files between two end systems). We’ll see that certain network functions, such as the translation of human-friendly names for Internet end systems like <a class="ulink" href="http://www.ietf.org">www.ietf.org</a> to a 32-bit network address, are also done with the help of a specific application-layer protocol, namely, the domain name system (DNS). We’ll see in <a class="xref" href="fileP700101195200000000000000000096B.xhtml#P700101195200000000000000000096B" data-foobar="7"><span class="label">Chapter</span> <span class="number">2</span></a> that it is very easy to create and deploy our own new application-layer protocols.</p>
<p id="P70010119520000000000000000098B0" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098B0">An application-layer protocol is distributed over multiple end systems, with the application in one end system using the protocol to exchange packets of information with the application in another end system. We’ll refer to this packet of information at the application layer as a <span class="keyword" id="P70010119520000000000000000006C9" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006C9"><b>message</b></span>.</p>
</section>
<section id="P70010119520000000000000000006CA" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006CA" class="level3"><header><h1 class="title" id="P70010119520000000000000000098B1" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098B1" epub:type="title"><span class="pagebreak" title="51" id="P70010119520000000000000000006CC" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006CC" epub:type="pagebreak" role="doc-pagebreak"></span>Transport Layer</h1></header>
<p id="P70010119520000000000000000098B2" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098B2">The Internet’s transport layer transports application-layer messages between application endpoints. In the Internet there are two transport protocols, TCP and UDP, either of which can transport application-layer messages. TCP provides a ­connection-oriented service to its applications. This service includes guaranteed delivery of application-layer messages to the destination and flow control (that is, sender/receiver speed matching). TCP also breaks long messages into shorter ­segments and provides a congestion-control mechanism, so that a source throttles its transmission rate when the network is congested. The UDP protocol provides a connectionless service to its applications. This is a no-frills service that provides no reliability, no flow control, and no congestion control. In this book, we’ll refer to a transport-layer packet as a <span class="keyword" id="P70010119520000000000000000006CE" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006CE"><b>segment</b></span>.</p>
</section>
<section id="P70010119520000000000000000006CF" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006CF" class="level3"><header><h1 class="title" id="P70010119520000000000000000098B3" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098B3" epub:type="title">Network Layer</h1></header>
<p id="P70010119520000000000000000098B4" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098B4">The Internet’s network layer is responsible for moving network-layer packets known as <span class="keyword" id="P70010119520000000000000000006D2" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006D2"><b>datagrams</b></span> from one host to another. The Internet transport-layer protocol (TCP or UDP) in a source host passes a transport-layer segment and a destination address to the network layer, just as you would give the postal service a letter with a destination address. The network layer then provides the service of delivering the segment to the transport layer in the destination host.</p>
<p id="P70010119520000000000000000098B5" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098B5">The Internet’s network layer includes the celebrated IP protocol, which defines the fields in the datagram as well as how the end systems and routers act on these fields. There is only one IP protocol, and all Internet components that have a network layer must run the IP protocol. The Internet’s network layer also contains routing protocols that determine the routes that datagrams take between sources and destinations. The Internet has many routing protocols. As we saw in <a class="xref" href="fileP7001011952000000000000000000542.xhtml#P7001011952000000000000000000542" data-foobar="7"><span class="label">Section</span> <span class="number">1.3</span></a>, the Internet is a network of networks, and within a network, the network administrator can run any routing protocol desired. Although the network layer contains both the IP protocol and numerous routing protocols, it is often simply referred to as the IP layer, reflecting the fact that IP is the glue that binds the Internet together.</p>
</section>
<section id="P70010119520000000000000000006D4" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006D4" class="level3"><header><h1 class="title" id="P70010119520000000000000000098B6" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098B6" epub:type="title">Link Layer</h1></header>
<p id="P70010119520000000000000000098B7" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098B7">The Internet’s network layer routes a datagram through a series of routers between the source and destination. To move a packet from one node (host or router) to the next node in the route, the network layer relies on the services of the link layer. In particular, at each node, the network layer passes the datagram down to the link layer, which delivers the datagram to the next node along the route. At this next node, the link layer passes the datagram up to the network layer.</p>
<p id="P70010119520000000000000000098B8" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098B8">The services provided by the link layer depend on the specific link-layer protocol that is employed over the link. For example, some link-layer protocols provide <span class="pagebreak" title="52" id="P70010119520000000000000000006D8" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006D8" epub:type="pagebreak" role="doc-pagebreak"></span>reliable delivery, from transmitting node, over one link, to receiving node. Note that this reliable delivery service is different from the reliable delivery service of TCP, which provides reliable delivery from one end system to another. Examples of link-layer protocols include Ethernet, WiFi, and the cable access network’s DOCSIS protocol. As datagrams typically need to traverse several links to travel from source to destination, a datagram may be handled by different link-layer protocols at different links along its route. For example, a datagram may be handled by Ethernet on one link and by PPP on the next link. The network layer will receive a different service from each of the different link-layer protocols. In this book, we’ll refer to the link-layer packets as <span class="keyword" id="P70010119520000000000000000006D9" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006D9"><b>frames</b></span>.</p>
</section>
<section id="P70010119520000000000000000006DA" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006DA" class="level3"><header><h1 class="title" id="P70010119520000000000000000098B9" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098B9" epub:type="title">Physical Layer</h1></header>
<p id="P70010119520000000000000000098BA" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098BA">While the job of the link layer is to move entire frames from one network element to an adjacent network element, the job of the physical layer is to move the <i>individual bits</i> within the frame from one node to the next. The protocols in this layer are again link dependent and further depend on the actual transmission medium of the link (for example, twisted-pair copper wire, single-mode fiber optics). For example, Ethernet has many physical-layer protocols: one for twisted-pair copper wire, another for coaxial cable, another for fiber, and so on. In each case, a bit is moved across the link in a different way.</p>
</section>
<section id="P70010119520000000000000000006DD" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006DD" class="level3"><header><h1 class="title" id="P70010119520000000000000000098BB" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098BB" epub:type="title">The OSI Model</h1></header>
<p id="P70010119520000000000000000098BC" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098BC">Having discussed the Internet protocol stack in detail, we should mention that it is not the only protocol stack around. In particular, back in the late 1970s, the International Organization for Standardization (ISO) proposed that computer networks be organized around seven layers, called the Open Systems Interconnection (OSI) model <a class="biblioref" href="fileP70010119520000000000000000037E0.xhtml#P7001011952000000000000000003999" data-foobar="7">[ISO 2016]</a>. The OSI model took shape when the protocols that were to become the Internet protocols were in their infancy, and were but one of many different protocol suites under development; in fact, the inventors of the original OSI model probably did not have the Internet in mind when creating it. Nevertheless, beginning in the late 1970s, many training and university courses picked up on the ISO mandate and organized courses around the seven-layer model. Because of its early impact on networking education, the seven-layer model continues to linger on in some networking textbooks and training courses.</p>
<p id="P70010119520000000000000000098BD" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098BD">The seven layers of the OSI reference model, shown in <a class="xref" href="#P70010119520000000000000000006AD" data-foobar="1"><span class="label">Figure</span> <span class="number">1.23(b)</span></a>, are: application layer, presentation layer, session layer, transport layer, network layer, data link layer, and physical layer. The functionality of five of these layers is roughly the same as their similarly named Internet counterparts. Thus, let’s consider the two additional layers present in the OSI reference model—the presentation layer and the session layer. The role of the presentation layer is to provide services that allow communicating applications to interpret the meaning of data exchanged. These services <span class="pagebreak" title="53" id="P70010119520000000000000000006E1" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006E1" epub:type="pagebreak" role="doc-pagebreak"></span>include data compression and data encryption (which are self-explanatory) as well as data description (which frees the applications from having to worry about the internal format in which data are represented/stored—formats that may differ from one computer to another). The session layer provides for delimiting and synchronization of data exchange, including the means to build a checkpointing and recovery scheme.</p>
<p id="P70010119520000000000000000098BE" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098BE">The fact that the Internet lacks two layers found in the OSI reference model poses a couple of interesting questions: Are the services provided by these layers unimportant? What if an application <i>needs</i> one of these services? The Internet’s answer to both of these questions is the same—it’s up to the application developer. It’s up to the application developer to decide if a service is important, and if the service <i>is</i> important, it’s up to the application developer to build that functionality into the application.</p>
</section>
</section>
<section id="P70010119520000000000000000006E3" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006E3" class="level2"><header><h1 class="title" id="P70010119520000000000000000098BF" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098BF" epub:type="title"><span class="number">1.5.2</span> Encapsulation</h1></header>
<p id="P70010119520000000000000000098C0" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098C0"><a class="xref" href="#P70010119520000000000000000006E6" data-foobar="1"><span class="label">Figure</span> <span class="number">1.24</span></a> shows the physical path that data takes down a sending end system’s protocol stack, up and down the protocol stacks of an intervening link-layer switch</p>
<figure id="P70010119520000000000000000006E6" class="figure" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006E6">
<img alt="An illustration of the physical path that data travels from source to destination, via the protocol stacks of a link-layer switch and a router." height="493" width="839" aria-describedby="P70010119520000000000000000006EA" id="P70010119520000000000000000098C1" data-uri="P7001011952000000000000000005517" src="../images/4055101024.png"></img>
<figcaption id="P70010119520000000000000000098C2" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098C2"><header><h1 class="title" id="P70010119520000000000000000098C3" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098C3" epub:type="title"><span class="label">Figure </span> <span class="number">1.24</span> Hosts, routers, and link-layer switches; each contains a ­different set of layers, reflecting their differences in ­functionality</h1></header>

</figcaption>
</figure><div class="longdesc" id="P70010119520000000000000000006EA" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000006EA" aria-hidden="false"><a class="xref" aria-hidden="false" href="../longalt/la_4055101024.xhtml#la_4055101024"><span class="label">Description</span></a></div>
<p class="continued" id="P70010119520000000000000000098E9" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098E9"><span class="pagebreak" title="54" id="P7001011952000000000000000000711" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000711" epub:type="pagebreak" role="doc-pagebreak"></span>and router, and then up the protocol stack at the receiving end system. As we discuss later in this book, routers and link-layer switches are both packet switches. Similar to end systems, routers and link-layer switches organize their networking hardware and software into layers. But routers and link-layer switches do not implement <i>all</i> of the layers in the protocol stack; they typically implement only the bottom layers. As shown in <a class="xref" href="#P70010119520000000000000000006E6" data-foobar="1"><span class="label">Figure</span> <span class="number">1.24</span></a>, link-layer switches implement layers 1 and 2; routers implement layers 1 through 3. This means, for example, that Internet routers are capable of implementing the IP protocol (a layer 3 protocol), while link-layer switches are not. We’ll see later that while link-layer switches do not recognize IP addresses, they are capable of recognizing layer 2 addresses, such as Ethernet addresses. Note that hosts implement all five layers; this is consistent with the view that the Internet architecture puts much of its complexity at the edges of the network.</p>
<p id="P70010119520000000000000000098EA" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098EA"><a class="xref" href="#P70010119520000000000000000006E6" data-foobar="1"><span class="label">Figure</span> <span class="number">1.24</span></a> also illustrates the important concept of <span class="keyword" id="P7001011952000000000000000000713" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000713"><b>encapsulation</b></span>. At the sending host, an <span class="keyword" id="P7001011952000000000000000000714" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000714"><b>application-layer message</b></span> (M in <a class="xref" href="#P70010119520000000000000000006E6" data-foobar="1"><span class="label">Figure</span> <span class="number">1.24</span></a>) is passed to the transport layer. In the simplest case, the transport layer takes the message and appends additional information (so-called transport-layer header information, H<sub><i>t</i></sub> in <a class="xref" href="#P70010119520000000000000000006E6" data-foobar="1"><span class="label">Figure</span> <span class="number">1.24</span></a>) that will be used by the receiver-side transport layer. The application-layer message and the transport-layer header information together constitute the <span class="keyword" id="P7001011952000000000000000000715" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000715"><b>transport-layer segment</b></span>. The transport-layer segment thus encapsulates the application-layer message. The added information might include information allowing the receiver-side transport layer to deliver the message up to the appropriate application, and error-detection bits that allow the receiver to determine whether bits in the message have been changed in route. The transport layer then passes the segment to the network layer, which adds network-layer header information (H<sub><i>n</i></sub> in <a class="xref" href="#P70010119520000000000000000006E6" data-foobar="1"><span class="label">Figure</span> <span class="number">1.24</span></a>) such as source and destination end system addresses, creating a <span class="keyword" id="P7001011952000000000000000000716" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000716"><b>network-layer datagram</b></span>. The datagram is then passed to the link layer, which (of course!) will add its own link-layer header information and create a <span class="keyword" id="P7001011952000000000000000000717" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000717"><b>link-layer frame</b></span>. Thus, we see that at each layer, a packet has two types of fields: header fields and a <span class="keyword" id="P7001011952000000000000000000718" data-uri="M01_KURO4140_07_SE_C01.xhtml#P7001011952000000000000000000718"><b>payload field</b></span>. The payload is typically a packet from the layer above.</p>
<p id="P70010119520000000000000000098EB" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098EB">A useful analogy here is the sending of an interoffice memo from one corporate branch office to another via the public postal service. Suppose Alice, who is in one branch office, wants to send a memo to Bob, who is in another branch office. The <i>memo</i> is analogous to the <i>application-layer message</i>. Alice puts the memo in an interoffice envelope with Bob’s name and department written on the front of the envelope. The <i>interoffice envelope</i> is analogous to a <i>transport-layer segment</i>—it contains header information (Bob’s name and department number) and it encapsulates the application-layer message (the memo). When the sending branch-office mailroom receives the interoffice envelope, it puts the interoffice envelope inside yet another envelope, which is suitable for sending through the public postal service. The sending mailroom also writes the postal address of the sending and receiving branch offices on the postal envelope. Here, the <i>postal envelope</i> is analogous to the <i>datagram</i>—it encapsulates the transport-layer segment (the interoffice envelope), which encapsulates the original message (the memo). The postal service delivers the <span class="pagebreak" title="55" id="P700101195200000000000000000071A" data-uri="M01_KURO4140_07_SE_C01.xhtml#P700101195200000000000000000071A" epub:type="pagebreak" role="doc-pagebreak"></span>postal envelope to the receiving branch-office mailroom. There, the process of de-encapsulation is begun. The mailroom extracts the interoffice memo and forwards it to Bob. Finally, Bob opens the envelope and removes the memo.</p>
<p id="P70010119520000000000000000098EC" data-uri="M01_KURO4140_07_SE_C01.xhtml#P70010119520000000000000000098EC">The process of encapsulation can be more complex than that described above. For example, a large message may be divided into multiple transport-layer segments (which might themselves each be divided into multiple network-layer datagrams). At the receiving end, such a segment must then be reconstructed from its constituent datagrams.</p>
</section>
</section></body></html>