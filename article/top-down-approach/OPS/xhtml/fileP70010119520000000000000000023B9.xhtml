<?xml version="1.0" encoding="utf-8"?><html xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:svg="http://www.w3.org/2000/svg" xmlns:epub="http://www.idpf.org/2007/ops" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" epub:prefix="index: http://www.index.com/"><head>
<meta name="dcterms.conformsTo" content="PXE Basic 1.0"></meta>
<meta name="generator" content="PXE Tools version 1.39.109"></meta>
<!--Created by pxe.pl for standard version PXE Basic 1.0,data-profile-product=standard by PXE Tools 1.39.109, partial=false-->
<title>6.1 Introduction to the Link Layer</title><link rel="alternate stylesheet" type="text/css" title="sepia" href="../css/sepia.css"></link><link rel="alternate stylesheet" type="text/css" title="night" href="../css/night.css"></link><link rel="stylesheet" type="text/css" title="day" href="../css/main.css"></link><link rel="stylesheet" type="text/css" title="day" href="../css/print.css"></link></head><body epub:type="bodymatter">
<section id="P70010119520000000000000000023B9" class="level1"><header><h1 class="title" id="P700101195200000000000000000AF18" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF18" epub:type="title"><span class="number">6.1</span> Introduction to the Link Layer</h1></header>
<p id="P700101195200000000000000000AF19" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF19">Let’s begin with some important terminology. We’ll find it convenient in this chapter to refer to any device that runs a link-layer (i.e., layer 2) protocol as a <span class="keyword" id="P70010119520000000000000000023BC" data-uri="M06_KURO4140_07_SE_C06.xhtml#P70010119520000000000000000023BC"><b>node</b></span>. Nodes include hosts, routers, switches, and WiFi access points (discussed in <a class="xref" href="fileP70010119520000000000000000028C7.xhtml#P70010119520000000000000000028C7" data-foobar="7"><span class="label">Chapter</span> <span class="number">7</span></a>). We will also refer to the communication channels that connect adjacent nodes along the communication path as <span class="keyword" id="P70010119520000000000000000023BD" data-uri="M06_KURO4140_07_SE_C06.xhtml#P70010119520000000000000000023BD"><b>links</b></span>. In order for a datagram to be transferred from source host to destination host, it must be moved over each of the <i>individual links</i> in the end-to-end path. As an example, in the company network shown at the bottom of <a class="xref" href="#P70010119520000000000000000023C1" data-foobar="1"><span class="label">Figure</span> <span class="number">6.1</span></a>, consider sending a datagram from one of the wireless hosts to one of the servers. This datagram will actually pass through six links: a WiFi link between sending host and WiFi access point, an Ethernet link between the access point and a link-layer switch; a link between the link-layer switch and the router, a link between the two routers; an Ethernet link between the router and a link-layer switch; and finally an Ethernet link between the switch and the server. Over a given link, a transmitting node encapsulates the datagram in a <span class="keyword" id="P70010119520000000000000000023BE" data-uri="M06_KURO4140_07_SE_C06.xhtml#P70010119520000000000000000023BE"><b>link-layer frame</b></span> and transmits the frame into the link.</p>
<p id="P700101195200000000000000000AF1A" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF1A">In order to gain further insight into the link layer and how it relates to the ­network layer, let’s consider a transportation analogy. Consider a travel agent who is planning a trip for a tourist traveling from Princeton, New Jersey, to Lausanne, Switzerland. The travel agent decides that it is most convenient for the tourist to take a limousine from Princeton to JFK airport, then a plane from JFK airport to Geneva’s airport, and finally a train from Geneva’s airport to Lausanne’s train station. Once the travel agent makes the three reservations, it is the responsibility of the Princeton limousine company to get the tourist from Princeton to JFK; it is the responsibility of the airline company to get the tourist from JFK to Geneva; and it is the responsibility<span class="pagebreak" title="441" id="P70010119520000000000000000023C0" data-uri="M06_KURO4140_07_SE_C06.xhtml#P70010119520000000000000000023C0" epub:type="pagebreak" role="doc-pagebreak"></span></p>
<figure id="P70010119520000000000000000023C1" class="figure" data-uri="M06_KURO4140_07_SE_C06.xhtml#P70010119520000000000000000023C1">
<img alt="Six link-layer hops between wireless host and server." height="858" width="657" aria-describedby="P70010119520000000000000000023C5" id="P700101195200000000000000000AF1B" data-uri="P70010119520000000000000000055C4" src="../images/4055106001.png"></img>
<figcaption id="P700101195200000000000000000AF1C" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF1C"><header><h1 class="title" id="P700101195200000000000000000AF1D" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF1D" epub:type="title"><span class="label">Figure </span> <span class="number">6.1</span> Six link-layer hops between wireless host and server</h1></header>

</figcaption>
</figure><div class="longdesc" id="P70010119520000000000000000023C5" data-uri="M06_KURO4140_07_SE_C06.xhtml#P70010119520000000000000000023C5" aria-hidden="false"><a class="xref" aria-hidden="false" href="../longalt/la_4055106001.xhtml#la_4055106001"><span class="label">Description</span></a></div>
<p class="continued" id="P700101195200000000000000000AF1F" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF1F"><span class="pagebreak" title="442" id="P70010119520000000000000000023C8" data-uri="M06_KURO4140_07_SE_C06.xhtml#P70010119520000000000000000023C8" epub:type="pagebreak" role="doc-pagebreak"></span>of the Swiss train service to get the tourist from Geneva to Lausanne. Each of the three segments of the trip is “direct” between two “adjacent” locations. Note that the three transportation segments are managed by different companies and use entirely different transportation modes (limousine, plane, and train). Although the transportation modes are different, they each provide the basic service of moving passengers from one location to an adjacent location. In this transportation analogy, the tourist is a datagram, each transportation segment is a link, the transportation mode is a link-layer protocol, and the travel agent is a routing protocol.</p>
<section id="P70010119520000000000000000023C9" data-uri="M06_KURO4140_07_SE_C06.xhtml#P70010119520000000000000000023C9" class="level2"><header><h1 class="title" id="P700101195200000000000000000AF20" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF20" epub:type="title"><span class="number">6.1.1</span> The Services Provided by the Link Layer</h1></header>
<p id="P700101195200000000000000000AF21" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF21">Although the basic service of any link layer is to move a datagram from one node to an adjacent node over a single communication link, the details of the provided service can vary from one link-layer protocol to the next. Possible services that can be offered by a link-layer protocol include:</p>
<ul id="P700101195200000000000000000AF22" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF22">
<li id="P700101195200000000000000000AF23" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF23"><p id="P700101195200000000000000000AF24" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF24"><span class="leadin">Framing.</span> Almost all link-layer protocols encapsulate each network-layer datagram within a link-layer frame before transmission over the link. A frame consists of a data field, in which the network-layer datagram is inserted, and a number of header fields. The structure of the frame is specified by the link-layer protocol. We’ll see several different frame formats when we examine specific link-layer protocols in the second half of this chapter.</p></li>
<li id="P700101195200000000000000000AF25" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF25"><p id="P700101195200000000000000000AF26" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF26"><span class="leadin">Link access.</span> A medium access control (MAC) protocol specifies the rules by which a frame is transmitted onto the link. For point-to-point links that have a single sender at one end of the link and a single receiver at the other end of the link, the MAC protocol is simple (or nonexistent)—the sender can send a frame whenever the link is idle. The more interesting case is when multiple nodes share a single broadcast link—the so-called multiple access problem. Here, the MAC protocol serves to coordinate the frame transmissions of the many nodes.</p></li>
<li id="P700101195200000000000000000AF27" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF27"><p id="P700101195200000000000000000AF28" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF28"><span class="leadin">Reliable delivery.</span> When a link-layer protocol provides reliable delivery service, it guarantees to move each network-layer datagram across the link without error. Recall that certain transport-layer protocols (such as TCP) also provide a reliable delivery service. Similar to a transport-layer reliable delivery service, a link-layer reliable delivery service can be achieved with acknowledgments and retransmissions (see <a class="xref" href="fileP700101195200000000000000000120D.xhtml#P700101195200000000000000000120D" data-foobar="7"><span class="label">Section</span> <span class="number">3.4</span></a>). A link-layer reliable delivery service is often used for links that are prone to high error rates, such as a wireless link, with the goal of correcting an error locally—on the link where the error occurs—rather than forcing an end-to-end retransmission of the data by a transport- or application-layer protocol. However, link-layer reliable delivery can be considered an unnecessary overhead for low bit-error links, including fiber, coax, and many twisted-pair copper links. For this reason, many wired link-layer protocols do not provide a reliable delivery service.</p></li>
<li id="P700101195200000000000000000AF29" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF29"><p id="P700101195200000000000000000AF2A" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF2A"><span class="pagebreak" title="443" id="P70010119520000000000000000023D5" data-uri="M06_KURO4140_07_SE_C06.xhtml#P70010119520000000000000000023D5" epub:type="pagebreak" role="doc-pagebreak"></span><span class="leadin">Error detection and correction.</span> The link-layer hardware in a receiving node can incorrectly decide that a bit in a frame is zero when it was transmitted as a one, and vice versa. Such bit errors are introduced by signal attenuation and electromagnetic noise. Because there is no need to forward a datagram that has an error, many link-layer protocols provide a mechanism to detect such bit errors. This is done by having the transmitting node include error-detection bits in the frame, and having the receiving node perform an error check. Recall from <a class="xref" href="fileP70010119520000000000000000010EC.xhtml#P70010119520000000000000000010EC" data-foobar="7"><span class="label">Chapters</span> <span class="number">3</span></a> and <a class="xref" href="fileP70010119520000000000000000019C1.xhtml#P70010119520000000000000000019C1" data-foobar="7"><span class="number">4</span></a> that the Internet’s transport layer and network layer also provide a limited form of error detection—the Internet checksum. Error detection in the link layer is usually more sophisticated and is implemented in hardware. Error correction is similar to error detection, except that a receiver not only detects when bit errors have occurred in the frame but also determines exactly where in the frame the errors have occurred (and then corrects these errors).</p></li>
</ul>
</section>
<section id="P70010119520000000000000000023D6" data-uri="M06_KURO4140_07_SE_C06.xhtml#P70010119520000000000000000023D6" class="level2"><header><h1 class="title" id="P700101195200000000000000000AF2B" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF2B" epub:type="title"><span class="number">6.1.2</span> Where Is the Link Layer Implemented?</h1></header>
<p id="P700101195200000000000000000AF2C" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF2C">Before diving into our detailed study of the link layer, let’s conclude this introduction by considering the question of where the link layer is implemented. We’ll focus here on an end system, since we learned in <a class="xref" href="fileP70010119520000000000000000019C1.xhtml#P70010119520000000000000000019C1" data-foobar="7"><span class="label">Chapter</span> <span class="number">4</span></a> that the link layer is implemented in a router’s line card. Is a host’s link layer implemented in hardware or software? Is it implemented on a separate card or chip, and how does it interface with the rest of a host’s hardware and operating system components?</p>
<p id="P700101195200000000000000000AF2D" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF2D"><a class="xref" href="#P70010119520000000000000000023DF" data-foobar="1"><span class="label">Figure</span> <span class="number">6.2</span></a> shows a typical host architecture. For the most part, the link layer is implemented in a <span class="keyword" id="P70010119520000000000000000023DA" data-uri="M06_KURO4140_07_SE_C06.xhtml#P70010119520000000000000000023DA"><b>network adapter</b></span>, also sometimes known as a <span class="keyword" id="P70010119520000000000000000023DB" data-uri="M06_KURO4140_07_SE_C06.xhtml#P70010119520000000000000000023DB"><b>network interface card (NIC)</b></span>. At the heart of the network adapter is the link-layer controller, usually a single, special-purpose chip that implements many of the link-layer services (framing, link access, error detection, and so on). Thus, much of a link-layer controller’s functionality is implemented in hardware. For example, Intel’s 710 adapter <a class="biblioref" href="fileP70010119520000000000000000037E0.xhtml#P7001011952000000000000000003991" data-foobar="7">[Intel 2016]</a> implements the Ethernet protocols we’ll study in <a class="xref" href="fileP7001011952000000000000000002690.xhtml#P7001011952000000000000000002690" data-foobar="7"><span class="label">Section</span> <span class="number">6.5</span></a>; the Atheros AR5006 <a class="biblioref" href="fileP70010119520000000000000000037E0.xhtml#P7001011952000000000000000003816" data-foobar="7">[Atheros 2016]</a> controller implements the 802.11 WiFi protocols we’ll study in <a class="xref" href="fileP70010119520000000000000000028C7.xhtml#P70010119520000000000000000028C7" data-foobar="7"><span class="label">Chapter</span> <span class="number">7</span></a>. Until the late 1990s, most network adapters were physically separate cards (such as a PCMCIA card or a plug-in card fitting into a PC’s PCI card slot) but increasingly, network adapters are being integrated onto the host’s motherboard—a so-called LAN-on-motherboard configuration.</p>
<p id="P700101195200000000000000000AF2E" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF2E">On the sending side, the controller takes a datagram that has been created and stored in host memory by the higher layers of the protocol stack, encapsulates the datagram in a link-layer frame (filling in the frame’s various fields), and then transmits the frame into the communication link, following the link-access protocol. On the receiving side, a controller receives the entire frame, and extracts the network-layer datagram. If the link layer performs error detection, then it is the sending controller that sets the error-detection bits in the frame header and it is the receiving controller that performs error detection.</p>
<p id="P700101195200000000000000000AF2F" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF2F"><a class="xref" href="#P70010119520000000000000000023DF" data-foobar="1"><span class="label">Figure</span> <span class="number">6.2</span></a> shows a network adapter attaching to a host’s bus (e.g., a PCI or PCI-X bus), where it looks much like any other I/O device to the other host<span class="pagebreak" title="444" id="P70010119520000000000000000023DE" data-uri="M06_KURO4140_07_SE_C06.xhtml#P70010119520000000000000000023DE" epub:type="pagebreak" role="doc-pagebreak"></span></p>
<figure id="P70010119520000000000000000023DF" class="figure" data-uri="M06_KURO4140_07_SE_C06.xhtml#P70010119520000000000000000023DF">
<img alt="Network adapter: its relationship to other host components and to protocol stack functionality." height="419" width="542" aria-describedby="P70010119520000000000000000023E3" id="P700101195200000000000000000AF30" data-uri="P70010119520000000000000000055C5" src="../images/4055106002.png"></img>
<figcaption id="P700101195200000000000000000AF31" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF31"><header><h1 class="title" id="P700101195200000000000000000AF32" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF32" epub:type="title"><span class="label">Figure </span> <span class="number">6.2</span> Network adapter: Its relationship to other host components and to protocol stack functionality</h1></header>

</figcaption>
</figure><div class="longdesc" id="P70010119520000000000000000023E3" data-uri="M06_KURO4140_07_SE_C06.xhtml#P70010119520000000000000000023E3" aria-hidden="false"><a class="xref" aria-hidden="false" href="../longalt/la_4055106002.xhtml#la_4055106002"><span class="label">Description</span></a></div>
<p class="continued" id="P700101195200000000000000000AF36" data-uri="M06_KURO4140_07_SE_C06.xhtml#P700101195200000000000000000AF36">components. <a class="xref" href="#P70010119520000000000000000023DF" data-foobar="1"><span class="label">Figure</span> <span class="number">6.2</span></a> also shows that while most of the link layer is implemented in hardware, part of the link layer is implemented in software that runs on the host’s CPU. The software components of the link layer implement higher-level link-layer functionality such as assembling link-layer addressing information and activating the controller hardware. On the receiving side, link-layer software responds to controller interrupts (e.g., due to the receipt of one or more frames), handling error conditions and passing a datagram up to the network layer. Thus, the link layer is a combination of hardware and software—the place in the protocol stack where software meets hardware. <a class="biblioref" href="fileP70010119520000000000000000037E0.xhtml#P7001011952000000000000000003991" data-foobar="7">[Intel 2016]</a> provides a readable overview (as well as a detailed description) of the XL710 controller from a software-programming point of view.</p>
</section>
</section></body></html>