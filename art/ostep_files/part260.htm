<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>A Dialogue on Concurrency</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part259.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part261.htm">下一个 &gt;</a></p><p class="s8" style="padding-top: 2pt;padding-left: 153pt;text-indent: 0pt;text-align: left;">A Dialogue on Concurrency</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s6" style="padding-top: 10pt;padding-left: 41pt;text-indent: 0pt;line-height: 92%;text-align: left;"><b>Professor: </b>And thus we reach the second of our three pillars of operating sys- tems: <b>concurrency</b>.</p><p class="s27" style="padding-top: 2pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">Student: <i>I thought there were four pillars...?</i></p><p class="s27" style="padding-top: 2pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">Professor: <i>Nope, that was in an older version of the book.</i></p><p class="s27" style="padding-top: 2pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">Student: <i>Umm... OK. So what is concurrency, oh wonderful professor?</i></p><p class="s27" style="padding-top: 2pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">Professor: <i>Well, imagine we have a peach –</i></p><p class="s27" style="padding-top: 2pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">Student: <i>(interrupting) Peaches again! What is it with you and peaches?</i></p><p class="s27" style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Professor: <i>Ever read T.S. Eliot? The Love Song of J. Alfred Prufrock, “Do I dare to eat a peach”, and all that fun stuff?</i></p><p class="s27" style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Student: <i>Oh yes! In English class in high school. Great stuff! I really liked the part where –</i></p><p class="s27" style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Professor: <i>(interrupting) This has nothing to do with that – I just like peaches. Anyhow, imagine there are a lot of peaches on a table, and a lot of people who wish to eat them. Let’s say we did it this way: each eater first identifies a peach visually, and then tries to grab it and eat it. What is wrong with this approach?</i></p><p class="s27" style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;line-height: 93%;text-align: justify;">Student: <i>Hmmm... seems like you might see a peach that somebody else also sees. If they get there first, when you reach out, no peach for you!</i></p><p class="s27" style="padding-top: 2pt;padding-left: 41pt;text-indent: 0pt;text-align: justify;">Professor: <i>Exactly! So what should we do about it?</i></p><p class="s27" style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Student: <i>Well, probably develop a better way of going about this. Maybe form a line, and when you get to the front, grab a peach and get on with it.</i></p><p class="s27" style="padding-top: 2pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">Professor: <i>Good! But what’s wrong with your approach?</i></p><p class="s27" style="padding-top: 2pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">Student: <i>Sheesh, do I have to do all the work?</i></p><p class="s27" style="padding-top: 2pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">Professor: <i>Yes.</i></p><p class="s27" style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Student: <i>OK, let me think. Well, we used to have many people grabbing for peaches all at once, which is faster. But in my way, we just go one at a time, which is correct, but quite a bit slower. The best kind of approach would be fast and correct, probably.</i></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s27" style="padding-top: 3pt;padding-left: 68pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Professor: <i>You are really starting to impress. In fact, you just told us everything we need to know about concurrency! Well done.</i></p><p class="s27" style="padding-top: 3pt;padding-left: 68pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Student: <i>I did? I thought we were just talking about peaches. Remember, this is usually a part where you make it about computers again.</i></p><p class="s6" style="padding-top: 3pt;padding-left: 68pt;text-indent: 0pt;line-height: 92%;text-align: justify;"><b>Professor: </b>Indeed. My apologies! One must never forget the concrete. Well, as it turns out, there are certain types of programs that we call <b>multi-threaded </b>applications; each <b>thread </b>is kind of like an independent agent running around in this program, doing things on the program’s behalf. But these threads access memory, and for them, each spot of memory is kind of like one of those peaches. If we don’t coordinate access to memory between threads, the program won’t work as expected. Make sense?</p><p class="s27" style="padding-top: 3pt;padding-left: 68pt;text-indent: 0pt;line-height: 92%;text-align: justify;">Student: <i>Kind of. But why do we talk about this in an OS class? Isn’t that just application programming?</i></p><p class="s6" style="padding-top: 3pt;padding-left: 68pt;text-indent: 0pt;line-height: 92%;text-align: justify;"><b>Professor: </b>Good question! A few reasons, actually. First, the OS must support multi-threaded applications with primitives such as <b>locks </b>and <b>condition vari- ables</b>, which we’ll talk about soon. Second, the OS itself was the first concurrent program – it must access its own memory very carefully or many strange and terrible things will happen. Really, it can get quite grisly.</p><p class="s27" style="padding-top: 2pt;padding-left: 68pt;text-indent: 0pt;text-align: justify;">Student: <i>I see. Sounds interesting. There are more details, I imagine?</i></p><p class="s27" style="padding-top: 2pt;padding-left: 68pt;text-indent: 0pt;text-align: justify;">Professor: <i>Indeed there are...</i></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part259.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part261.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
