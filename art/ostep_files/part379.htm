<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>37.1 The Interface</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part378.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part380.htm">下一个 &gt;</a></p><p class="s40" style="padding-top: 2pt;padding-left: 11pt;text-indent: 0pt;text-align: left;">37.1 The Interface</p><p style="padding-top: 7pt;padding-left: 41pt;text-indent: 11pt;line-height: 89%;text-align: justify;">Let’s start by understanding the interface to a modern disk drive. The basic interface for all modern drives is straightforward. The drive consists of a large number of sectors (512-byte blocks), each of which can be read or written. The sectors are numbered from <span class="s44">0 </span>to <span class="s43">n </span><span class="s4">− </span><span class="s44">1 </span>on a disk with <span class="s43">n </span>sectors. Thus, we can view the disk as an array of sectors; <span class="s44">0 </span>to <span class="s43">n </span><span class="s4">− </span><span class="s44">1 </span>is thus the <b>address space </b>of the drive.</p><p style="padding-left: 41pt;text-indent: 11pt;line-height: 89%;text-align: justify;">Multi-sector operations are possible; indeed, many file systems will read or write 4KB at a time (or more). However, when updating the disk, the only guarantee drive manufactures make is that a single 512- byte write is <b>atomic </b>(i.e., it will either complete in its entirety or it won’t complete at all); thus, if an untimely power loss occurs, only a portion of a larger write may complete (sometimes called a <b>torn write</b>).</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 21pt;text-indent: 0pt;text-align: center;">403</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="78" height="78" alt="image" src="Image_537.png"/></span></p><p class="s46" style="padding-left: 12pt;text-indent: 0pt;line-height: 9pt;text-align: center;">8 <span class="s155">9 </span>10</p><p class="s46" style="padding-top: 1pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">7    11</p><p class="s84" style="padding-top: 1pt;padding-left: 11pt;text-indent: 0pt;line-height: 4pt;text-align: center;">Spindle</p><p class="s46" style="text-indent: 0pt;line-height: 6pt;text-align: left;">6     0</p><p class="s46" style="padding-top: 5pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">5    1</p><p style="text-indent: 0pt;text-align: left;"/><p class="s46" style="text-indent: 0pt;line-height: 6pt;text-align: left;">4  2</p><p style="text-indent: 0pt;text-align: left;"/><p class="s46" style="text-indent: 0pt;line-height: 6pt;text-align: left;">3</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 2pt;padding-left: 122pt;text-indent: 0pt;text-align: left;">Figure 37.1: <b>A Disk With Just A Single Track</b></p><p style="padding-top: 3pt;padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: left;">There are some assumptions most clients of disk drives make, but that are not specified directly in the interface; Schlosser and Ganger have called this the “unwritten contract” of disk drives [SG04]. Specifically, one can usually assume that accessing two blocks that are near one-another within the drive’s address space will be faster than accessing two blocks that are far apart. One can also usually assume that accessing blocks in a contiguous chunk (i.e., a sequential read or write) is the fastest access mode, and usually much faster than any more random access pattern.</p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part378.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part380.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
