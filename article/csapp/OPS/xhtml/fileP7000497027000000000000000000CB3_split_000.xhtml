<?xml version='1.0' encoding='utf-8'?>
<html xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:svg="http://www.w3.org/2000/svg" xmlns:epub="http://www.idpf.org/2007/ops" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" epub:prefix="index: http://www.index.com/">
  <head>
    <meta name="dcterms.conformsTo" content="PXE Basic 1.0"/>
    <meta name="generator" content="PXE Tools version 1.39.52"/>
    <!--Created by pxe.pl for standard version PXE Basic 1.0,data-profile-product=standard by PXE Tools 1.39.52, partial=false-->
    <title>2.3 Integer Arithmetic</title>
    <link rel="alternate stylesheet" type="text/css" title="night" href="../css/theme/night.css"/>
    <link rel="alternate stylesheet" type="text/css" title="sepia" href="../css/theme/sepia.css"/>
    <script src="js/format_lg_obj.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../../page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body epub:type="bodymatter" class="calibre pcalibre pcalibre1">
<section id="P7000497027000000000000000000CB3" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title pcalibre1" id="P700049702700000000000000003F027" data-uri="chapter02.xhtml#P700049702700000000000000003F027" epub:type="title"><span class="pcalibre label pcalibre1">2.3 </span>Integer Arithmetic</h1></header>
<p id="P700049702700000000000000003F028" data-uri="chapter02.xhtml#P700049702700000000000000003F028" class="pcalibre1 pcalibre calibre2">Many beginning programmers are surprised to find that adding two positive numbers can yield a negative result, and that the comparison <code id="P700049702700000000000000003F029" data-uri="chapter02.xhtml#P700049702700000000000000003F029" class="pcalibre1 calibre8 pcalibre">x &lt; y</code> can yield a different result than the comparison <code id="P700049702700000000000000003F02A" data-uri="chapter02.xhtml#P700049702700000000000000003F02A" class="pcalibre1 calibre8 pcalibre">x-y &lt; 0</code>. These properties are artifacts of the finite nature of computer arithmetic. Understanding the nuances of computer arithmetic can help programmers write more reliable code.</p>
<section id="P7000497027000000000000000000CB8" data-uri="chapter02.xhtml#P7000497027000000000000000000CB8" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title1 pcalibre1" id="P700049702700000000000000003F02B" data-uri="chapter02.xhtml#P700049702700000000000000003F02B" epub:type="title"><span class="pcalibre label pcalibre1">2.3.1 </span>Unsigned Addition</h1></header>
<p id="P700049702700000000000000003F02C" data-uri="chapter02.xhtml#P700049702700000000000000003F02C" class="pcalibre1 pcalibre calibre2">Consider two nonnegative integers <var class="calibre5 pcalibre pcalibre1">x</var> and <var class="calibre5 pcalibre pcalibre1">y</var>, such that 0 ≤ <i class="calibre5 pcalibre pcalibre1">x, y</i> &lt; 2<sup class="calibre51 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">w</var></sup>. Each of these values can be represented by a <var class="calibre5 pcalibre pcalibre1">w</var>-bit unsigned number. If we compute their sum, however, we have a possible range <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="187" altimg-height="23" altimg="../images/ch02-new40.png"><m:mrow><m:mn>0</m:mn><m:mo>≤</m:mo><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mo>≤</m:mo><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>+</m:mo><m:mn>1</m:mn></m:mrow></m:msup><m:mo>−</m:mo><m:mn>2</m:mn></m:mrow></m:math></span>. Representing this sum could require <var class="calibre5 pcalibre pcalibre1">w</var> + 1 bits. For example, <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000000CB3_split_000.xhtml#P7000497027000000000000000000CBD"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">2.21</span></a> shows a plot of the function <var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var> when <var class="calibre5 pcalibre pcalibre1">x</var> and <var class="calibre5 pcalibre pcalibre1">y</var> have 4-bit representations. The arguments (shown on the horizontal axes) range from 0 to 15, but the sum ranges from 0 to 30. The shape of the function is a sloping plane (the function is linear in both dimensions). If we were to maintain the sum as a (<var class="calibre5 pcalibre pcalibre1">w</var> + 1)-bit number and add it to another value, we may require <var class="calibre5 pcalibre pcalibre1">w</var> + 2 bits, and so on. This continued “word size</p>
<p id="P700049702700000000000000003F02D" data-uri="chapter02.xhtml#P700049702700000000000000003F02D" class="pcalibre1 pcalibre calibre2"><span class="pcalibre pagebreak pcalibre1" id="P7000497027000000000000000000CBC" title="85" data-uri="chapter02.xhtml#P7000497027000000000000000000CBC" epub:type="pagebreak"></span></p>
<figure class="pcalibre5 figure pcalibre" id="P7000497027000000000000000000CBD" data-uri="chapter02.xhtml#P7000497027000000000000000000CBD">
<img alt="Decorative image." id="P700049702700000000000000003F02E" data-uri="P700049702700000000000000000B7A0" src="../images/p85-1.png" class="pcalibre1 pcalibre calibre67"/>
<figcaption id="P700049702700000000000000003F02F" data-uri="chapter02.xhtml#P700049702700000000000000003F02F" class="calibre11 pcalibre pcalibre1"><header class="pcalibre halftitlepage pcalibre1"><h1 class="title3 pcalibre pcalibre1" id="P700049702700000000000000003F030" data-uri="chapter02.xhtml#P700049702700000000000000003F030" epub:type="title"><span class="pcalibre1 label2 pcalibre">Figure </span><span class="number pcalibre pcalibre1">2.21 </span>Integer addition.</h1></header><div class="caption pcalibre pcalibre1" id="P700049702700000000000000003F031" data-uri="chapter02.xhtml#P700049702700000000000000003F031"><p id="P700049702700000000000000003F032" data-uri="chapter02.xhtml#P700049702700000000000000003F032" class="pcalibre calibre3 pcalibre1">With a 4–bit word size, the sum could require 5 bits.</p></div></figcaption>
</figure>
<p class="pcalibre1 pcalibre calibre2" id="P700049702700000000000000003F033" data-uri="chapter02.xhtml#P700049702700000000000000003F033">inflation” means we cannot place any bound on the word size required to fully represent the results of arithmetic operations. Some programming languages, such as Lisp, actually support <i class="calibre5 pcalibre pcalibre1">arbitrary size</i> arithmetic to allow integers of any size (within the memory limits of the computer, of course.) More commonly, programming languages support fixed-size arithmetic, and hence operations such as “addition” and “multiplication” differ from their counterpart operations over integers.</p>
<p id="P700049702700000000000000003F034" data-uri="chapter02.xhtml#P700049702700000000000000003F034" class="pcalibre1 pcalibre calibre2">Let us define the operation <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="22" altimg-height="22" altimg="../images/ch02-eq61.png"><m:mrow><m:msubsup><m:mo>+</m:mo><m:mi>w</m:mi><m:mtext>u</m:mtext></m:msubsup></m:mrow></m:math> </span>for arguments <var class="calibre5 pcalibre pcalibre1">x</var> and <var class="calibre5 pcalibre pcalibre1">y</var>, where 0 ≤ <i class="calibre5 pcalibre pcalibre1">x, y</i> &lt; 2<sup class="calibre51 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">w</var></sup>, as the result of truncating the integer sum <var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var> to be <var class="calibre5 pcalibre pcalibre1">w</var> bits long and then viewing the result as an unsigned number. This can be characterized as a form of modular arithmetic, computing the sum modulo 2<sup class="calibre51 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">w</var></sup> by simply discarding any bits with weight greater than 2<sup class="calibre51 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">w</var>–1</sup> in the bit-level representation of <var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var>. For example, consider a 4–bit number representation with <var class="calibre5 pcalibre pcalibre1">x</var> = 9 and <var class="calibre5 pcalibre pcalibre1">y</var> = 12, having bit representations [1001] and [1100], respectively. Their sum is 21, having a 5–bit representation [10101]. But if we discard the high-order bit, we get [0101], that is, decimal value 5. This matches the value 21 mod 16 = 5.</p>
<aside class="sidebar pcalibre5 pcalibre" id="P7000497027000000000000000000CC5" data-uri="chapter02.xhtml#P7000497027000000000000000000CC5"><header class="pcalibre halftitlepage pcalibre1"><h1 class="pcalibre1 title2 pcalibre" id="P700049702700000000000000003F035" data-uri="chapter02.xhtml#P700049702700000000000000003F035" epub:type="title"><span class="pcalibre pagebreak pcalibre1" id="P7000497027000000000000000000CC7" title="86" data-uri="chapter02.xhtml#P7000497027000000000000000000CC7" epub:type="pagebreak"></span><span class="pcalibre label1 pcalibre1">Aside </span>Security vulnerability in <code id="P700049702700000000000000003F036" data-uri="chapter02.xhtml#P700049702700000000000000003F036" class="calibre55 pcalibre pcalibre1">getpeername</code></h1></header>
<p id="P700049702700000000000000003F037" data-uri="chapter02.xhtml#P700049702700000000000000003F037" class="calibre13 pcalibre pcalibre1">In 2002, programmers involved in the FreeBSD open-source operating systems project realized that their implementation of the <code id="P700049702700000000000000003F038" data-uri="chapter02.xhtml#P700049702700000000000000003F038" class="pcalibre1 calibre8 pcalibre">getpeername</code> library function had a security vulnerability. A simplified version of their code went something like this:</p>
<pre id="P700049702700000000000000003F039" data-uri="chapter02.xhtml#P700049702700000000000000003F039" class="calibre9 pcalibre pcalibre1"><code id="P700049702700000000000000003F03A" data-uri="chapter02.xhtml#P700049702700000000000000003F03A" class="calibre10 pcalibre pcalibre1">
1	 /*
2	* Illustration of code vulnerability similar to that found in
3	* FreeBSD's implementation of getpeername()
4	*/
5
6	/* Declaration of library function memcpy */
7	void *memcpy(void *dest, void *src, size_t n);
8
9	/* Kernel memory region holding user-accessible data */
10	#define KSIZE 1024
11	char kbuf[KSIZE];
12
13	/* Copy at most maxlen bytes from kernel region to user buffer */
14	int copy_from_kernel(void *user_dest, int maxlen) {
15		/* Byte count len is minimum of buffer size and maxlen */
16		int len = KSIZE &lt; maxlen ? KSIZE : maxlen;
17		memcpy(user_dest, kbuf, len);
18		return len;
19	}
</code></pre>
<p id="P700049702700000000000000003F03B" data-uri="chapter02.xhtml#P700049702700000000000000003F03B" class="calibre13 pcalibre pcalibre1">In this code, we show the prototype for library function memcpy on line 7, which is designed to copy a specified number of bytes <code id="P700049702700000000000000003F03C" data-uri="chapter02.xhtml#P700049702700000000000000003F03C" class="pcalibre1 calibre8 pcalibre">n</code> from one region of memory to another.</p>
<p id="P700049702700000000000000003F03D" data-uri="chapter02.xhtml#P700049702700000000000000003F03D" class="calibre13 pcalibre pcalibre1">The function <code id="P700049702700000000000000003F03E" data-uri="chapter02.xhtml#P700049702700000000000000003F03E" class="pcalibre1 calibre8 pcalibre">copy_from_kernel</code>, starting at line 14, is designed to copy some of the data maintained by the operating system kernel to a designated region of memory accessible to the user. Most of the data structures maintained by the kernel should not be readable by a user, since they may contain sensitive information about other users and about other jobs running on the system, but the region shown as <code id="P700049702700000000000000003F03F" data-uri="chapter02.xhtml#P700049702700000000000000003F03F" class="pcalibre1 calibre8 pcalibre">kbuf</code> was intended to be one that the user could read. The parameter <code id="P700049702700000000000000003F040" data-uri="chapter02.xhtml#P700049702700000000000000003F040" class="pcalibre1 calibre8 pcalibre">maxlen</code> is intended to be the length of the buffer allocated by the user and indicated by argument <code id="P700049702700000000000000003F041" data-uri="chapter02.xhtml#P700049702700000000000000003F041" class="pcalibre1 calibre8 pcalibre">user_dest</code>. The computation at line 16 then makes sure that no more bytes are copied than are available in either the source or the destination buffer.</p>
<p id="P700049702700000000000000003F042" data-uri="chapter02.xhtml#P700049702700000000000000003F042" class="calibre13 pcalibre pcalibre1">Suppose, however, that some malicious programmer writes code that calls <code id="P700049702700000000000000003F043" data-uri="chapter02.xhtml#P700049702700000000000000003F043" class="pcalibre1 calibre8 pcalibre">copy_from_kernel</code> with a negative value of <code id="P700049702700000000000000003F044" data-uri="chapter02.xhtml#P700049702700000000000000003F044" class="pcalibre1 calibre8 pcalibre">maxlen</code>. Then the minimum computation on line 16 will compute this value for <code id="P700049702700000000000000003F045" data-uri="chapter02.xhtml#P700049702700000000000000003F045" class="pcalibre1 calibre8 pcalibre">len</code>, which will then be passed as the parameter <code id="P700049702700000000000000003F046" data-uri="chapter02.xhtml#P700049702700000000000000003F046" class="pcalibre1 calibre8 pcalibre">n</code> to memcpy. Note, however, that parameter n is declared as having data type <code id="P700049702700000000000000003F047" data-uri="chapter02.xhtml#P700049702700000000000000003F047" class="pcalibre1 calibre8 pcalibre">size_t</code>. This data type is declared (via <code id="P700049702700000000000000003F048" data-uri="chapter02.xhtml#P700049702700000000000000003F048" class="pcalibre1 calibre8 pcalibre">typedef</code>) in the library file <code id="P700049702700000000000000003F049" data-uri="chapter02.xhtml#P700049702700000000000000003F049" class="pcalibre1 calibre8 pcalibre">stdio.h</code>. Typically, it is defined to be <code id="P700049702700000000000000003F04A" data-uri="chapter02.xhtml#P700049702700000000000000003F04A" class="pcalibre1 calibre8 pcalibre">unsigned</code> for 32–bit programs and <code id="P700049702700000000000000003F04B" data-uri="chapter02.xhtml#P700049702700000000000000003F04B" class="pcalibre1 calibre8 pcalibre">unsigned long</code> for 64–bit programs. Since argument <code id="P700049702700000000000000003F04C" data-uri="chapter02.xhtml#P700049702700000000000000003F04C" class="pcalibre1 calibre8 pcalibre">n</code> is unsigned, <code id="P700049702700000000000000003F04D" data-uri="chapter02.xhtml#P700049702700000000000000003F04D" class="pcalibre1 calibre8 pcalibre">memcpy</code> will treat it as a very large positive number and attempt to copy that many bytes from the kernel region to the user's buffer. Copying that many bytes (at least 2<sup class="calibre51 pcalibre pcalibre1">31</sup>) will not actually work, because the program will encounter invalid addresses in the process, but the program could read regions of the kernel memory for which it is not authorized.</p>
<p id="P700049702700000000000000003F04E" data-uri="chapter02.xhtml#P700049702700000000000000003F04E" class="pcalibre calibre3 pcalibre1"><span class="pcalibre pagebreak pcalibre1" id="P7000497027000000000000000000CE1" title="87" data-uri="chapter02.xhtml#P7000497027000000000000000000CE1" epub:type="pagebreak"></span>We can see that this problem arises due to the mismatch between data types: in one place the length parameter is signed; in another place it is unsigned. Such mismatches can be a source of bugs and, as this example shows, can even lead to security vulnerabilities. Fortunately, there were no reported cases where a programmer had exploited the vulnerability in FreeBSD. They issued a security advisory “FreeBSD-SA-02:38.signed-error” advising system administrators on how to apply a patch that would remove the vulnerability. The bug can be fixed by declaring parameter <code id="P700049702700000000000000003F04F" data-uri="chapter02.xhtml#P700049702700000000000000003F04F" class="pcalibre1 calibre8 pcalibre">maxlen</code> to <code id="P700049702700000000000000003F050" data-uri="chapter02.xhtml#P700049702700000000000000003F050" class="pcalibre1 calibre8 pcalibre">copy_from_kernel</code> to be of type <code id="P700049702700000000000000003F051" data-uri="chapter02.xhtml#P700049702700000000000000003F051" class="pcalibre1 calibre8 pcalibre">size_t</code>, to be consistent with parameter <code id="P700049702700000000000000003F052" data-uri="chapter02.xhtml#P700049702700000000000000003F052" class="pcalibre1 calibre8 pcalibre">n</code> of <code id="P700049702700000000000000003F053" data-uri="chapter02.xhtml#P700049702700000000000000003F053" class="pcalibre1 calibre8 pcalibre">memcpy</code>. We should also declare local variable <code id="P700049702700000000000000003F054" data-uri="chapter02.xhtml#P700049702700000000000000003F054" class="pcalibre1 calibre8 pcalibre">len</code> and the return value to be of type <code id="P700049702700000000000000003F055" data-uri="chapter02.xhtml#P700049702700000000000000003F055" class="pcalibre1 calibre8 pcalibre">size_t</code>.</p>
</aside>
<p id="P700049702700000000000000003F056" data-uri="chapter02.xhtml#P700049702700000000000000003F056" class="pcalibre1 pcalibre calibre2">We can characterize operation <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="22" altimg-height="22" altimg="../images/ch02-eq62.png"><m:mrow><m:msubsup><m:mo>+</m:mo><m:mi>w</m:mi><m:mtext>u</m:mtext></m:msubsup></m:mrow></m:math> </span>as follows:</p>
<section class="feature pcalibre pcalibre1" id="P700049702700000000000000003F057" data-uri="chapter02.xhtml#P700049702700000000000000003F057"><header class="calibre61 pcalibre pcalibre1"><h1 class="pcalibre1 pcalibre title8" id="P700049702700000000000000003F058" data-uri="chapter02.xhtml#P700049702700000000000000003F058" epub:type="title"><span class="pcalibre label pcalibre1">Principle: </span></h1></header>
<p id="P700049702700000000000000003F059" data-uri="chapter02.xhtml#P700049702700000000000000003F059" class="pcalibre1 pcalibre calibre2">Unsigned addition</p>
<p id="P700049702700000000000000003F05A" data-uri="chapter02.xhtml#P700049702700000000000000003F05A" class="pcalibre1 pcalibre calibre2">For <var class="calibre5 pcalibre pcalibre1">x</var> and <var class="calibre5 pcalibre pcalibre1">y</var> such that 0 ≤ <i class="calibre5 pcalibre pcalibre1">x, y</i> &lt; 2<sup class="calibre51 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">w</var></sup>:</p>
<div class="informalequation pcalibre pcalibre1" id="P7000497027000000000000000000CEE" data-uri="chapter02.xhtml#P7000497027000000000000000000CEE"><m:math display="block" alttext="" data-uri="" altimg-width="498" altimg-height="50" altimg="../images/ch02-eq63.png"><m:mrow><m:mi>x</m:mi><m:msubsup><m:mo>+</m:mo><m:mi>w</m:mi><m:mi>u</m:mi></m:msubsup><m:mi>y</m:mi><m:mo>=</m:mo><m:mrow><m:mo>{</m:mo><m:mrow><m:mtable columnalign="left"><m:mtr columnalign="left"><m:mtd columnalign="left"><m:mrow><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mo>,</m:mo></m:mrow></m:mtd><m:mtd columnalign="left"><m:mrow><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mo>&lt;</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mtext> </m:mtext><m:mtext>Normal</m:mtext></m:mrow></m:mtd></m:mtr><m:mtr columnalign="left"><m:mtd columnalign="left"><m:mrow><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>,</m:mo></m:mrow></m:mtd><m:mtd columnalign="left"><m:mrow><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>≤</m:mo><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mo>&lt;</m:mo><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>+</m:mo><m:mn>1</m:mn></m:mrow></m:msup><m:mtext> </m:mtext><m:mtext>Overflow</m:mtext></m:mrow></m:mtd></m:mtr></m:mtable></m:mrow></m:mrow></m:mrow></m:math>
<span class="number3 pcalibre pcalibre1">(2.11)</span>
</div>
</section>
<p id="P700049702700000000000000003F05B" data-uri="chapter02.xhtml#P700049702700000000000000003F05B" class="pcalibre1 pcalibre calibre2">The two cases of <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000000CB3_split_000.xhtml#P7000497027000000000000000000CEE"><span class="pcalibre label pcalibre1">Equation </span><span class="pcalibre label pcalibre1">2.11</span></a> are illustrated in <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000000CB3_split_000.xhtml#P7000497027000000000000000000CF5"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">2.22</span></a>, showing the sum <var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var> on the left mapping to the unsigned <var class="calibre5 pcalibre pcalibre1">w</var>-bit sum <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="56" altimg-height="21" altimg="../images/ch02-eq64.png"><m:mrow><m:mi>x</m:mi><m:msubsup><m:mo>+</m:mo><m:mi>w</m:mi><m:mtext>u</m:mtext></m:msubsup><m:mi>y</m:mi></m:mrow></m:math></span> on the right. The normal case preserves the value of <var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var>, while the overflow case has the effect of decrementing this sum by 2<sup class="calibre51 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">w</var></sup>.</p>
<section class="feature pcalibre pcalibre1" id="P700049702700000000000000003F05C" data-uri="chapter02.xhtml#P700049702700000000000000003F05C"><header class="calibre61 pcalibre pcalibre1"><h1 class="pcalibre1 pcalibre title8" id="P700049702700000000000000003F05D" data-uri="chapter02.xhtml#P700049702700000000000000003F05D" epub:type="title"><span class="pcalibre label pcalibre1">Derivation: </span></h1></header>
<p id="P700049702700000000000000003F05E" data-uri="chapter02.xhtml#P700049702700000000000000003F05E" class="pcalibre1 pcalibre calibre2">Unsigned addition</p>
<p id="P700049702700000000000000003F05F" data-uri="chapter02.xhtml#P700049702700000000000000003F05F" class="pcalibre1 pcalibre calibre2">In general, we can see that if <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="94" altimg-height="19" altimg="../images/ch02-new41.png"><m:mrow><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mo>&lt;</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup></m:mrow></m:math></span>, the leading bit in the (<var class="calibre5 pcalibre pcalibre1">w</var> + 1)-bit representation of the sum will equal 0, and hence discarding it will not change the numeric value. On the other hand, if <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="163" altimg-height="24" altimg="../images/ch02-new42.png"><m:mrow><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>≤</m:mo><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mo>&lt;</m:mo><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>+</m:mo><m:mn>1</m:mn></m:mrow></m:msup></m:mrow></m:math></span>, the leading bit in the (<var class="calibre5 pcalibre pcalibre1">w</var> + 1)-bit representation of the sum will equal 1, and hence discarding it is equivalent to subtracting 2<sup class="calibre51 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">w</var></sup> from the sum.</p>
</section>
<p id="P700049702700000000000000003F060" data-uri="chapter02.xhtml#P700049702700000000000000003F060" class="pcalibre1 pcalibre calibre2">An arithmetic operation is said to <i class="calibre5 pcalibre pcalibre1">overflow</i> when the full integer result cannot fit within the word size limits of the data type. As <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000000CB3_split_000.xhtml#P7000497027000000000000000000CEE"><span class="pcalibre label pcalibre1">Equation </span><span class="pcalibre label pcalibre1">2.11</span></a> indicates, overflow</p>
<figure class="pcalibre5 figure pcalibre" id="P7000497027000000000000000000CF5" data-uri="chapter02.xhtml#P7000497027000000000000000000CF5">
<img alt="A diagram compares overflow and normal addition." id="P700049702700000000000000003F061" data-uri="P700049702700000000000000000B7AB" src="../images/p87-1.png" class="calibre68 pcalibre pcalibre1"/>
<figcaption id="P700049702700000000000000003F062" data-uri="chapter02.xhtml#P700049702700000000000000003F062" class="calibre11 pcalibre pcalibre1"><header class="pcalibre halftitlepage pcalibre1"><h1 class="title3 pcalibre pcalibre1" id="P700049702700000000000000003F063" data-uri="chapter02.xhtml#P700049702700000000000000003F063" epub:type="title"><span class="pcalibre1 label2 pcalibre">Figure </span><span class="number pcalibre pcalibre1">2.22 </span>Relation between integer addition and unsigned addition.</h1></header><div class="edition pcalibre pcalibre1" id="P700049702700000000000000003F064" data-uri="chapter02.xhtml#P700049702700000000000000003F064"><p id="P700049702700000000000000003F065" data-uri="chapter02.xhtml#P700049702700000000000000003F065" class="pcalibre calibre3 pcalibre1">When <var class="calibre5 pcalibre pcalibre1">x</var> +<var class="calibre5 pcalibre pcalibre1">y</var> is greater than 2<sup class="calibre51 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">w</var></sup> – 1, the sum overflows.</p></div>
<details class="longdesc pcalibre pcalibre1" id="P700049702700000000000000001F340" data-uri="chapter02.xhtml#P700049702700000000000000001F340">
<summary class="pcalibre6 pcalibre1 pcalibre calibre30"><span class="number pcalibre pcalibre1">Description</span></summary>
<p id="P700049702700000000000000003F066" data-uri="chapter02.xhtml#P700049702700000000000000003F066" class="pcalibre calibre3 pcalibre1">A diagram shows a blue arrow representing normal pointing from between x + y 0 and 2<sup class="calibre51 pcalibre pcalibre1">W</sup> to x + <sup class="calibre51 pcalibre pcalibre1">u</sup>y, and a gray arrow representing overflow pointing from between overflow 2<sup class="calibre51 pcalibre pcalibre1">W</sup> and 2<sup class="calibre51 pcalibre pcalibre1">W+1</sup> to x + <sup class="calibre51 pcalibre pcalibre1">u</sup>y.</p>
</details>
</figcaption>
</figure>
<p id="P700049702700000000000000003F067" data-uri="chapter02.xhtml#P700049702700000000000000003F067" class="pcalibre1 pcalibre calibre2"><span class="pcalibre pagebreak pcalibre1" id="P7000497027000000000000000000CFC" title="88" data-uri="chapter02.xhtml#P7000497027000000000000000000CFC" epub:type="pagebreak"></span></p>
<figure class="pcalibre5 figure pcalibre" id="P7000497027000000000000000000CFD" data-uri="chapter02.xhtml#P7000497027000000000000000000CFD">
<img alt="Decorative image." id="P700049702700000000000000003F068" data-uri="P700049702700000000000000000B7B2" src="../images/p88-1.png" class="calibre69 pcalibre pcalibre1"/>
<figcaption id="P700049702700000000000000003F069" data-uri="chapter02.xhtml#P700049702700000000000000003F069" class="calibre11 pcalibre pcalibre1"><header class="pcalibre halftitlepage pcalibre1"><h1 class="title3 pcalibre pcalibre1" id="P700049702700000000000000003F06A" data-uri="chapter02.xhtml#P700049702700000000000000003F06A" epub:type="title"><span class="pcalibre1 label2 pcalibre">Figure </span><span class="number pcalibre pcalibre1">2.23 </span>Unsigned addition.</h1></header><div class="caption pcalibre pcalibre1" id="P700049702700000000000000003F06B" data-uri="chapter02.xhtml#P700049702700000000000000003F06B"><p id="P700049702700000000000000003F06C" data-uri="chapter02.xhtml#P700049702700000000000000003F06C" class="pcalibre calibre3 pcalibre1">With a 4-bit word size, addition is performed modulo 16.</p></div></figcaption>
</figure>
<p class="pcalibre1 pcalibre calibre2" id="P700049702700000000000000003F06D" data-uri="chapter02.xhtml#P700049702700000000000000003F06D">occurs when the two operands sum to 2<sup class="calibre51 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">w</var></sup> or more. <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000000CB3_split_000.xhtml#P7000497027000000000000000000CFD"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">2.23</span></a> shows a plot of the unsigned addition function for word size <var class="calibre5 pcalibre pcalibre1">w</var> = 4. The sum is computed modulo 2<sup class="calibre51 pcalibre pcalibre1">4</sup> = 16. When <var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var> &lt; 16, there is no overflow, and <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="51" altimg-height="22" altimg="../images/ch02-eq65.png"><m:mrow><m:mi>x</m:mi><m:msubsup><m:mo>+</m:mo><m:mn>4</m:mn><m:mtext>u</m:mtext></m:msubsup><m:mi>y</m:mi></m:mrow></m:math> </span>is simply <var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var>. This is shown as the region forming a sloping plane labeled “Normal.” When <var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var> ≥ 16, the addition overflows, having the effect of decrementing the sum by 16. This is shown as the region forming a sloping plane labeled “Overflow.”</p>
<p id="P700049702700000000000000003F06E" data-uri="chapter02.xhtml#P700049702700000000000000003F06E" class="pcalibre1 pcalibre calibre2">When executing C programs, overflows are not signaled as errors. At times, however, we might wish to determine whether or not overflow has occurred.</p>
<section class="feature pcalibre pcalibre1" id="P700049702700000000000000003F06F" data-uri="chapter02.xhtml#P700049702700000000000000003F06F"><header class="calibre61 pcalibre pcalibre1"><h1 class="pcalibre1 pcalibre title8" id="P700049702700000000000000003F070" data-uri="chapter02.xhtml#P700049702700000000000000003F070" epub:type="title"><span class="pcalibre label pcalibre1">Principle: </span></h1></header>
<p id="P700049702700000000000000003F071" data-uri="chapter02.xhtml#P700049702700000000000000003F071" class="pcalibre1 pcalibre calibre2">Detecting overflow of unsigned addition</p>
<p id="P700049702700000000000000003F072" data-uri="chapter02.xhtml#P700049702700000000000000003F072" class="pcalibre1 pcalibre calibre2">For <var class="calibre5 pcalibre pcalibre1">x</var> and <var class="calibre5 pcalibre pcalibre1">y</var> in the range <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="162" altimg-height="20" altimg="../images/ch02-new43.png"><m:mrow><m:mn>0</m:mn><m:mo>≤</m:mo><m:mi>x</m:mi><m:mo>,</m:mo><m:mi>y</m:mi><m:mo>≤</m:mo><m:mi>U</m:mi><m:mi>M</m:mi><m:mi>a</m:mi><m:msub><m:mi>x</m:mi><m:mi>w</m:mi></m:msub></m:mrow></m:math></span>, let <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="89" altimg-height="22" altimg="../images/ch02-eq66.png"><m:mrow><m:mi>s</m:mi><m:mtext> </m:mtext><m:mo>≐</m:mo><m:mi>x</m:mi><m:msubsup><m:mo>+</m:mo><m:mi>w</m:mi><m:mtext>u</m:mtext></m:msubsup><m:mi>y</m:mi></m:mrow></m:math></span>. Then the computation of <var class="calibre5 pcalibre pcalibre1">s</var> overflowed if and only if <var class="calibre5 pcalibre pcalibre1">s</var> &lt; <var class="calibre5 pcalibre pcalibre1">x</var> (or equivalently, <var class="calibre5 pcalibre pcalibre1">s</var> &lt; <var class="calibre5 pcalibre pcalibre1">y</var>).</p>
</section>
<p id="P700049702700000000000000003F073" data-uri="chapter02.xhtml#P700049702700000000000000003F073" class="pcalibre1 pcalibre calibre2">As an illustration, in our earlier example, we saw that <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="94" altimg-height="23" altimg="../images/ch02-eq67.png"><m:mrow><m:mn>9</m:mn><m:msubsup><m:mo>+</m:mo><m:mn>4</m:mn><m:mtext>u</m:mtext></m:msubsup><m:mn>12</m:mn><m:mo>=</m:mo><m:mn>5</m:mn></m:mrow></m:math></span>. We can see that overflow occurred, since 5 &lt; 9.</p>
<section class="feature pcalibre pcalibre1" id="P700049702700000000000000003F074" data-uri="chapter02.xhtml#P700049702700000000000000003F074"><header class="calibre61 pcalibre pcalibre1"><h1 class="pcalibre1 pcalibre title8" id="P700049702700000000000000003F075" data-uri="chapter02.xhtml#P700049702700000000000000003F075" epub:type="title"><span class="pcalibre pagebreak pcalibre1" id="P7000497027000000000000000000D0C" title="89" data-uri="chapter02.xhtml#P7000497027000000000000000000D0C" epub:type="pagebreak"></span><span class="pcalibre label pcalibre1">Derivation: </span></h1></header>
<p id="P700049702700000000000000003F076" data-uri="chapter02.xhtml#P700049702700000000000000003F076" class="pcalibre1 pcalibre calibre2">Detecting overflow of unsigned addition</p>
<p id="P700049702700000000000000003F077" data-uri="chapter02.xhtml#P700049702700000000000000003F077" class="pcalibre1 pcalibre calibre2">Observe that <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="83" altimg-height="17" altimg="../images/ch02-new44.png"><m:mrow><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mo>≥</m:mo><m:mi>x</m:mi></m:mrow></m:math></span>, and hence if <var class="calibre5 pcalibre pcalibre1">s</var> did not overflow, we will surely have <var class="calibre5 pcalibre pcalibre1">s</var> ≥ <i class="calibre5 pcalibre pcalibre1">x.</i> On the other hand, if <var class="calibre5 pcalibre pcalibre1">s</var> did overflow, we have <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="131" altimg-height="20" altimg="../images/ch02-new45.png"><m:mrow><m:mi>s</m:mi><m:mo>=</m:mo><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup></m:mrow></m:math></span>. Given that <var class="calibre5 pcalibre pcalibre1">y</var> &lt; 2<i class="calibre5 pcalibre pcalibre1"><sup class="calibre51 pcalibre pcalibre1">w</sup></i>, we have <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="95" altimg-height="20" altimg="../images/ch02-new46.png"><m:mrow><m:mi>y</m:mi><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>&lt;</m:mo><m:mn>0</m:mn></m:mrow></m:math></span>, and hence <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="189" altimg-height="20" altimg="../images/ch02-new47.png"><m:mrow><m:mi>s</m:mi><m:mo>=</m:mo><m:mi>x</m:mi><m:mo>+</m:mo><m:mrow><m:mo>(</m:mo><m:mrow><m:mi>y</m:mi><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup></m:mrow><m:mo>)</m:mo></m:mrow><m:mo>&lt;</m:mo><m:mi>x</m:mi></m:mrow></m:math></span>.</p>
</section>
<section id="P7000497027000000000000000000D0F" data-uri="chapter02.xhtml#P7000497027000000000000000000D0F" epub:type="practice" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="title5 pcalibre pcalibre1" id="P700049702700000000000000003F078" data-uri="chapter02.xhtml#P700049702700000000000000003F078" epub:type="title"><span class="pcalibre label pcalibre1">Practice Problem </span><span class="pcalibre label pcalibre1">2.27</span> (solution page <a class="ulink pcalibre pcalibre4 pcalibre2 pcalibre3 pcalibre1" epub:type="pagebreak" href="fileP70004970270000000000000000017AE_split_001.xhtml#P7000497027000000000000000001ACF">152</a>)</h1></header>
<ol class="practicelist pcalibre pcalibre1" id="P700049702700000000000000003F079" data-uri="chapter02.xhtml#P700049702700000000000000003F079">
<li class="general-problem pcalibre pcalibre1" id="P700049702700000000000000003F07A" data-uri="chapter02.xhtml#P700049702700000000000000003F07A">
<div class="edition pcalibre pcalibre1" id="P700049702700000000000000003F07B" data-uri="chapter02.xhtml#P700049702700000000000000003F07B"><p id="P700049702700000000000000003F07C" data-uri="chapter02.xhtml#P700049702700000000000000003F07C" class="pcalibre calibre3 pcalibre1">Write a function with the following prototype:</p>
<pre id="P700049702700000000000000003F07D" data-uri="chapter02.xhtml#P700049702700000000000000003F07D" class="calibre9 pcalibre pcalibre1">
<code id="P700049702700000000000000003F07E" data-uri="chapter02.xhtml#P700049702700000000000000003F07E" class="calibre10 pcalibre pcalibre1">/* Determine whether arguments can be added without overflow */
int uadd_ok(unsigned x, unsigned y);</code>
</pre>
<p id="P700049702700000000000000003F07F" data-uri="chapter02.xhtml#P700049702700000000000000003F07F" class="pcalibre calibre3 pcalibre1">This function should return 1 if arguments <code id="P700049702700000000000000003F080" data-uri="chapter02.xhtml#P700049702700000000000000003F080" class="pcalibre1 calibre8 pcalibre">x</code> and <code id="P700049702700000000000000003F081" data-uri="chapter02.xhtml#P700049702700000000000000003F081" class="pcalibre1 calibre8 pcalibre">y</code> can be added without causing overflow.</p>
</div></li></ol>
</section>
<p id="P700049702700000000000000003F082" data-uri="chapter02.xhtml#P700049702700000000000000003F082" class="pcalibre1 pcalibre calibre2">Modular addition forms a mathematical structure known as an <i class="calibre5 pcalibre pcalibre1">abelian group</i>, named after the Norwegian mathematician Niels Henrik Abel (1802–1829). That is, it is commutative (that's where the “abelian” part comes in) and associative; it has an identity element 0, and every element has an additive inverse. Let us consider the set of <var class="calibre5 pcalibre pcalibre1">w</var>-bit unsigned numbers with addition operation <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="22" altimg-height="21" altimg="../images/ch02-eq68.png"><m:mrow><m:msubsup><m:mo>+</m:mo><m:mi>w</m:mi><m:mtext>u</m:mtext></m:msubsup></m:mrow></m:math></span>. For every value <var class="calibre5 pcalibre pcalibre1">x</var>, there must be some value <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="38" altimg-height="21" altimg="../images/ch02-eq69.png"><m:mrow><m:msubsup><m:mo>−</m:mo><m:mi>w</m:mi><m:mtext>u</m:mtext></m:msubsup><m:mi>x</m:mi></m:mrow></m:math> </span>such that <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="120" altimg-height="22" altimg="../images/ch02-eq70.png"><m:mrow><m:msubsup><m:mo>−</m:mo><m:mi>w</m:mi><m:mtext>u</m:mtext></m:msubsup><m:mi>x</m:mi><m:mtext> </m:mtext><m:msubsup><m:mo>+</m:mo><m:mi>w</m:mi><m:mtext>u</m:mtext></m:msubsup><m:mtext> </m:mtext><m:mi>x</m:mi><m:mo>=</m:mo><m:mn>0</m:mn></m:mrow></m:math></span>. This additive inverse operation can be characterized as follows:</p>
<section class="feature pcalibre pcalibre1" id="P700049702700000000000000003F083" data-uri="chapter02.xhtml#P700049702700000000000000003F083"><header class="calibre61 pcalibre pcalibre1"><h1 class="pcalibre1 pcalibre title8" id="P700049702700000000000000003F084" data-uri="chapter02.xhtml#P700049702700000000000000003F084" epub:type="title"><span class="pcalibre label pcalibre1">Principle: </span></h1></header>
<p id="P700049702700000000000000003F085" data-uri="chapter02.xhtml#P700049702700000000000000003F085" class="pcalibre1 pcalibre calibre2">Unsigned negation</p>
<p id="P700049702700000000000000003F086" data-uri="chapter02.xhtml#P700049702700000000000000003F086" class="pcalibre1 pcalibre calibre2">For any number <var class="calibre5 pcalibre pcalibre1">x</var> such that 0 ≤ <var class="calibre5 pcalibre pcalibre1">x</var> &lt; 2<i class="calibre5 pcalibre pcalibre1"><sup class="calibre51 pcalibre pcalibre1">w</sup></i>, its <var class="calibre5 pcalibre pcalibre1">w</var>-bit unsigned negation <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="37" altimg-height="22" altimg="../images/ch02-eq71.png"><m:mrow><m:msubsup><m:mo>−</m:mo><m:mi>w</m:mi><m:mtext>u</m:mtext></m:msubsup><m:mtext> </m:mtext><m:mi>x</m:mi></m:mrow></m:math> </span>is given by the following:</p>
<div class="informalequation pcalibre pcalibre1" id="P7000497027000000000000000000D1F" data-uri="chapter02.xhtml#P7000497027000000000000000000D1F"><m:math display="block" alttext="" data-uri="" altimg-width="216" altimg-height="50" altimg="../images/ch02-eq72.png"><m:mrow><m:msubsup><m:mo>−</m:mo><m:mi>w</m:mi><m:mi>u</m:mi></m:msubsup><m:mi>x</m:mi><m:mo>=</m:mo><m:mrow><m:mo>{</m:mo><m:mrow><m:mtable columnalign="left"><m:mtr columnalign="left"><m:mtd columnalign="left"><m:mrow><m:mi>x</m:mi><m:mo>,</m:mo></m:mrow></m:mtd><m:mtd columnalign="left"><m:mrow><m:mi>x</m:mi><m:mo>=</m:mo><m:mn>0</m:mn></m:mrow></m:mtd></m:mtr><m:mtr columnalign="left"><m:mtd columnalign="left"><m:mrow><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>−</m:mo><m:mi>x</m:mi><m:mo>,</m:mo></m:mrow></m:mtd><m:mtd columnalign="left"><m:mrow><m:mi>x</m:mi><m:mo>&gt;</m:mo><m:mn>0</m:mn></m:mrow></m:mtd></m:mtr></m:mtable></m:mrow></m:mrow></m:mrow></m:math>
<span class="number3 pcalibre pcalibre1">(2.12)</span>
</div>
</section>
<p id="P700049702700000000000000003F087" data-uri="chapter02.xhtml#P700049702700000000000000003F087" class="pcalibre1 pcalibre calibre2">This result can readily be derived by case analysis:</p>
<section class="feature pcalibre pcalibre1" id="P700049702700000000000000003F088" data-uri="chapter02.xhtml#P700049702700000000000000003F088"><header class="calibre61 pcalibre pcalibre1"><h1 class="pcalibre1 pcalibre title8" id="P700049702700000000000000003F089" data-uri="chapter02.xhtml#P700049702700000000000000003F089" epub:type="title"><span class="pcalibre label pcalibre1">Derivation: </span></h1></header>
<p id="P700049702700000000000000003F08A" data-uri="chapter02.xhtml#P700049702700000000000000003F08A" class="pcalibre1 pcalibre calibre2">Unsigned negation</p>
<p id="P700049702700000000000000003F08B" data-uri="chapter02.xhtml#P700049702700000000000000003F08B" class="pcalibre1 pcalibre calibre2">When <var class="calibre5 pcalibre pcalibre1">x</var> = 0, the additive inverse is clearly 0. For <var class="calibre5 pcalibre pcalibre1">x</var> &gt; 0, consider the value 2<sup class="calibre51 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">w</var></sup> – <var class="calibre5 pcalibre pcalibre1">x</var>. Observe that this number is in the range <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="144" altimg-height="16" altimg="../images/ch02-new48.png"><m:mrow><m:mn>0</m:mn><m:mo>&lt;</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>−</m:mo><m:mi>x</m:mi><m:mo>&lt;</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup></m:mrow></m:math></span>. We can also see that <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="341" altimg-height="19" altimg="../images/ch02-new49.png"><m:mrow><m:mrow><m:mo>(</m:mo><m:mrow><m:mi>x</m:mi><m:mo>+</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>−</m:mo><m:mi>x</m:mi></m:mrow><m:mo>)</m:mo></m:mrow><m:mtext> </m:mtext><m:mi>mod</m:mi><m:mtext> </m:mtext><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>=</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mtext> </m:mtext><m:mi>mod</m:mi><m:mtext> </m:mtext><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>=</m:mo><m:mn>0</m:mn></m:mrow></m:math></span>. Hence it is the inverse of <var class="calibre5 pcalibre pcalibre1">x</var> under <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="22" altimg-height="22" altimg="../images/ch02-eq73.png"><m:mrow><m:msubsup><m:mo>+</m:mo><m:mi>w</m:mi><m:mtext>u</m:mtext></m:msubsup></m:mrow></m:math></span>.</p>
</section>
<section id="P7000497027000000000000000000D25" data-uri="chapter02.xhtml#P7000497027000000000000000000D25" epub:type="practice" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="title5 pcalibre pcalibre1" id="P700049702700000000000000003F08C" data-uri="chapter02.xhtml#P700049702700000000000000003F08C" epub:type="title"><span class="pcalibre label pcalibre1">Practice Problem </span><span class="pcalibre label pcalibre1">2.28</span> (solution page <a class="ulink pcalibre pcalibre4 pcalibre2 pcalibre3 pcalibre1" epub:type="pagebreak" href="fileP70004970270000000000000000017AE_split_001.xhtml#P7000497027000000000000000001ACF">152</a>)</h1></header>
<ol class="practicelist pcalibre pcalibre1" id="P700049702700000000000000003F08D" data-uri="chapter02.xhtml#P700049702700000000000000003F08D">
<li class="general-problem pcalibre pcalibre1" id="P700049702700000000000000003F08E" data-uri="chapter02.xhtml#P700049702700000000000000003F08E">
<div class="edition pcalibre pcalibre1" id="P700049702700000000000000003F08F" data-uri="chapter02.xhtml#P700049702700000000000000003F08F"><p id="P700049702700000000000000003F090" data-uri="chapter02.xhtml#P700049702700000000000000003F090" class="pcalibre calibre3 pcalibre1">We can represent a bit pattern of length <var class="calibre5 pcalibre pcalibre1">w</var> = 4 with a single hex digit. For an unsigned interpretation of these digits, use <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000000CB3_split_000.xhtml#P7000497027000000000000000000D1F"><span class="pcalibre label pcalibre1">Equation </span><span class="pcalibre label pcalibre1">2.12</span></a> to fill in the following table giving the values and the bit representations (in hex) of the unsigned additive inverses of the digits shown.</p>
<p id="P700049702700000000000000003F091" data-uri="chapter02.xhtml#P700049702700000000000000003F091" class="pcalibre calibre3 pcalibre1"><span class="pcalibre pagebreak pcalibre1" id="P7000497027000000000000000000D2C" title="90" data-uri="chapter02.xhtml#P7000497027000000000000000000D2C" epub:type="pagebreak"></span></p>
<table class="informaltable pcalibre pcalibre1" id="P700049702700000000000000003F092" data-uri="chapter02.xhtml#P700049702700000000000000003F092">
<thead class="pcalibre1 pcalibre calibre16">
<tr class="pcalibre calibre17 pcalibre1">
<th colspan="2" id="P700049702700000000000000003F093" data-uri="chapter02.xhtml#P700049702700000000000000003F093" class="calibre18 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">x</var></th>
<th colspan="2" id="P700049702700000000000000003F094" data-uri="chapter02.xhtml#P700049702700000000000000003F094" class="calibre18 pcalibre pcalibre1">
<span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="31" altimg-height="20" altimg="../images/ch02-eq74.png"><m:mrow><m:msubsup><m:mo>–</m:mo><m:mi>4</m:mi><m:mtext>u</m:mtext></m:msubsup><m:mtext> </m:mtext><m:mi>x</m:mi></m:mrow></m:math></span>
</th>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<th id="P700049702700000000000000003F095" data-uri="chapter02.xhtml#P700049702700000000000000003F095" class="calibre18 pcalibre pcalibre1">Hex</th>
<th id="P700049702700000000000000003F096" data-uri="chapter02.xhtml#P700049702700000000000000003F096" class="calibre18 pcalibre pcalibre1">Decimal</th>
<th id="P700049702700000000000000003F097" data-uri="chapter02.xhtml#P700049702700000000000000003F097" class="calibre18 pcalibre pcalibre1">Decimal</th>
<th id="P700049702700000000000000003F098" data-uri="chapter02.xhtml#P700049702700000000000000003F098" class="calibre18 pcalibre pcalibre1">Hex</th>
</tr>
</thead>
<tbody class="calibre19 pcalibre pcalibre1">
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F099" data-uri="chapter02.xhtml#P700049702700000000000000003F099" class="calibre20 pcalibre pcalibre1">0</td>
<td id="P700049702700000000000000003F09A" data-uri="chapter02.xhtml#P700049702700000000000000003F09A" class="calibre20 pcalibre pcalibre1">___________</td>
<td id="P700049702700000000000000003F09B" data-uri="chapter02.xhtml#P700049702700000000000000003F09B" class="calibre20 pcalibre pcalibre1">___________</td>
<td id="P700049702700000000000000003F09C" data-uri="chapter02.xhtml#P700049702700000000000000003F09C" class="calibre20 pcalibre pcalibre1">___________</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F09D" data-uri="chapter02.xhtml#P700049702700000000000000003F09D" class="calibre20 pcalibre pcalibre1">5</td>
<td id="P700049702700000000000000003F09E" data-uri="chapter02.xhtml#P700049702700000000000000003F09E" class="calibre20 pcalibre pcalibre1">___________</td>
<td id="P700049702700000000000000003F09F" data-uri="chapter02.xhtml#P700049702700000000000000003F09F" class="calibre20 pcalibre pcalibre1">___________</td>
<td id="P700049702700000000000000003F0A0" data-uri="chapter02.xhtml#P700049702700000000000000003F0A0" class="calibre20 pcalibre pcalibre1">___________</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F0A1" data-uri="chapter02.xhtml#P700049702700000000000000003F0A1" class="calibre20 pcalibre pcalibre1">8</td>
<td id="P700049702700000000000000003F0A2" data-uri="chapter02.xhtml#P700049702700000000000000003F0A2" class="calibre20 pcalibre pcalibre1">___________</td>
<td id="P700049702700000000000000003F0A3" data-uri="chapter02.xhtml#P700049702700000000000000003F0A3" class="calibre20 pcalibre pcalibre1">___________</td>
<td id="P700049702700000000000000003F0A4" data-uri="chapter02.xhtml#P700049702700000000000000003F0A4" class="calibre20 pcalibre pcalibre1">___________</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F0A5" data-uri="chapter02.xhtml#P700049702700000000000000003F0A5" class="calibre20 pcalibre pcalibre1">D</td>
<td id="P700049702700000000000000003F0A6" data-uri="chapter02.xhtml#P700049702700000000000000003F0A6" class="calibre20 pcalibre pcalibre1">___________</td>
<td id="P700049702700000000000000003F0A7" data-uri="chapter02.xhtml#P700049702700000000000000003F0A7" class="calibre20 pcalibre pcalibre1">___________</td>
<td id="P700049702700000000000000003F0A8" data-uri="chapter02.xhtml#P700049702700000000000000003F0A8" class="calibre20 pcalibre pcalibre1">___________</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F0A9" data-uri="chapter02.xhtml#P700049702700000000000000003F0A9" class="calibre20 pcalibre pcalibre1">F</td>
<td id="P700049702700000000000000003F0AA" data-uri="chapter02.xhtml#P700049702700000000000000003F0AA" class="calibre20 pcalibre pcalibre1">___________</td>
<td id="P700049702700000000000000003F0AB" data-uri="chapter02.xhtml#P700049702700000000000000003F0AB" class="calibre20 pcalibre pcalibre1">___________</td>
<td id="P700049702700000000000000003F0AC" data-uri="chapter02.xhtml#P700049702700000000000000003F0AC" class="calibre20 pcalibre pcalibre1">___________</td>
</tr>
</tbody>
</table></div></li></ol>
</section>
</section>
<section id="P7000497027000000000000000000D48" data-uri="chapter02.xhtml#P7000497027000000000000000000D48" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title1 pcalibre1" id="P700049702700000000000000003F0AD" data-uri="chapter02.xhtml#P700049702700000000000000003F0AD" epub:type="title"><span class="pcalibre label pcalibre1">2.3.2 </span>Two's-Complement Addition</h1></header>
<p id="P700049702700000000000000003F0AE" data-uri="chapter02.xhtml#P700049702700000000000000003F0AE" class="pcalibre1 pcalibre calibre2">With two's-complement addition, we must decide what to do when the result is either too large (positive) or too small (negative) to represent. Given integer values <var class="calibre5 pcalibre pcalibre1">x</var> and <var class="calibre5 pcalibre pcalibre1">y</var> in the range <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="220" altimg-height="24" altimg="../images/ch02-new50.png"><m:mrow><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msup><m:mo>≤</m:mo><m:mi>x</m:mi><m:mo>,</m:mo><m:mi>y</m:mi><m:mo>≤</m:mo><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msup><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:math></span>, their sum is in the range <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="197" altimg-height="20" altimg="../images/ch02-new51.png"><m:mrow><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>≤</m:mo><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mo>≤</m:mo><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msup><m:mo>−</m:mo><m:mn>2</m:mn></m:mrow></m:math></span>, potentially requiring <var class="calibre5 pcalibre pcalibre1">w</var> + 1 bits to represent exactly. As before, we avoid ever-expanding data sizes by truncating the representation to <var class="calibre5 pcalibre pcalibre1">w</var> bits. The result is not as familiar mathematically as modular addition, however. Let us define <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="56" altimg-height="24" altimg="../images/ch02-eq75.png"><m:mrow><m:mi>x</m:mi><m:msubsup><m:mo>+</m:mo><m:mi>w</m:mi><m:mtext>t</m:mtext></m:msubsup><m:mtext> </m:mtext><m:mi>y</m:mi></m:mrow></m:math> </span>to be the result of truncating the integer sum <var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var> to be <var class="calibre5 pcalibre pcalibre1">w</var> bits long and then viewing the result as a two's-complement number.</p>
<section class="feature pcalibre pcalibre1" id="P700049702700000000000000003F0AF" data-uri="chapter02.xhtml#P700049702700000000000000003F0AF"><header class="calibre61 pcalibre pcalibre1"><h1 class="pcalibre1 pcalibre title8" id="P700049702700000000000000003F0B0" data-uri="chapter02.xhtml#P700049702700000000000000003F0B0" epub:type="title"><span class="pcalibre label pcalibre1">Principle: </span></h1></header>
<p id="P700049702700000000000000003F0B1" data-uri="chapter02.xhtml#P700049702700000000000000003F0B1" class="pcalibre1 pcalibre calibre2">Two's-complement addition</p>
<p id="P700049702700000000000000003F0B2" data-uri="chapter02.xhtml#P700049702700000000000000003F0B2" class="pcalibre1 pcalibre calibre2">For integer values <var class="calibre5 pcalibre pcalibre1">x</var> and <var class="calibre5 pcalibre pcalibre1">y</var> in the range <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="222" altimg-height="24" altimg="../images/ch02-eq76.png"><m:mrow><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msup><m:mo>≤</m:mo><m:mi>x</m:mi><m:mo>,</m:mo><m:mtext> </m:mtext><m:mi>y</m:mi><m:mtext> </m:mtext><m:mo>≤</m:mo><m:mtext> </m:mtext><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msup><m:mo>−</m:mo><m:mn>1</m:mn><m:mo>:</m:mo></m:mrow></m:math></span></p>
<div class="informalequation pcalibre pcalibre1" id="P7000497027000000000000000000D4F" data-uri="chapter02.xhtml#P7000497027000000000000000000D4F"><m:math display="block" alttext="" data-uri="" altimg-width="568" altimg-height="88" altimg="../images/ch02-eq77.png"><m:mrow><m:mi>x</m:mi><m:msubsup><m:mo>+</m:mo><m:mi>w</m:mi><m:mi>t</m:mi></m:msubsup><m:mi>y</m:mi><m:mo>=</m:mo><m:mrow><m:mo>{</m:mo><m:mrow><m:mtable columnalign="left"><m:mtr columnalign="left"><m:mtd columnalign="left"><m:mrow><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>,</m:mo></m:mrow></m:mtd><m:mtd columnalign="left"><m:mrow><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msup><m:mo>≤</m:mo><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mtext> </m:mtext><m:mtext> </m:mtext><m:mtext> </m:mtext><m:mtext> </m:mtext><m:mtext> </m:mtext><m:mtext> </m:mtext><m:mtext> </m:mtext><m:mtext> </m:mtext><m:mtext> </m:mtext><m:mtext> </m:mtext><m:mtext>Positive</m:mtext><m:mtext> </m:mtext><m:mtext>overflow</m:mtext></m:mrow></m:mtd></m:mtr><m:mtr columnalign="left"><m:mtd columnalign="left"><m:mrow><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mo>,</m:mo></m:mrow></m:mtd><m:mtd columnalign="left"><m:mrow><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msup><m:mo>≤</m:mo><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mo>&lt;</m:mo><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msup><m:mtext> </m:mtext><m:mtext> </m:mtext><m:mtext> </m:mtext><m:mtext>Normal</m:mtext></m:mrow></m:mtd></m:mtr><m:mtr columnalign="left"><m:mtd columnalign="left"><m:mrow><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mo>+</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>,</m:mo></m:mrow></m:mtd><m:mtd columnalign="left"><m:mrow><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mo>&lt;</m:mo><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msup><m:mtext> </m:mtext><m:mtext> </m:mtext><m:mtext> </m:mtext><m:mtext> </m:mtext><m:mtext> </m:mtext><m:mtext>Negative</m:mtext><m:mtext> </m:mtext><m:mtext>overflow</m:mtext></m:mrow></m:mtd></m:mtr></m:mtable></m:mrow></m:mrow></m:mrow></m:math>
<span class="number3 pcalibre pcalibre1">(2.13)</span>
</div>
</section>
<p id="P700049702700000000000000003F0B3" data-uri="chapter02.xhtml#P700049702700000000000000003F0B3" class="pcalibre1 pcalibre calibre2">This principle is illustrated in <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000000CB3_split_000.xhtml#P7000497027000000000000000000D58"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">2.24</span></a>, where the sum <var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var> is shown on the left, having a value in the range <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="192" altimg-height="19" altimg="../images/ch02-new52.png"><m:mrow><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>≤</m:mo><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mo>≤</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>−</m:mo><m:mn>2</m:mn></m:mrow></m:math></span>, and the result of truncating the sum to a <var class="calibre5 pcalibre pcalibre1">w</var>-bit, two's-complement number is shown on the right. (The labels “Case 1” to “Case 4” in this figure are for the case analysis of the formal derivation of the principle.) When the sum <var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var> exceeds <i class="calibre5 pcalibre pcalibre1">TMax<sub class="pcalibre1 calibre47 pcalibre">w</sub></i> (<span class="pcalibre label pcalibre1">Case </span><span class="pcalibre label pcalibre1">4</span>), we say that <i class="calibre5 pcalibre pcalibre1">positive overflow</i> has occurred. In this case, the effect of truncation is to subtract 2<i class="calibre5 pcalibre pcalibre1"><sup class="calibre51 pcalibre pcalibre1">w</sup></i> from the sum. When the sum <var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var> is less than <i class="calibre5 pcalibre pcalibre1">TMin<sub class="pcalibre1 calibre47 pcalibre">w</sub></i> (Case 1), we say that <i class="calibre5 pcalibre pcalibre1">negative overflow</i> has occurred. In this case, the effect of truncation is to add 2<i class="calibre5 pcalibre pcalibre1"><sup class="calibre51 pcalibre pcalibre1">w</sup></i> to the sum.</p>
<p id="P700049702700000000000000003F0B4" data-uri="chapter02.xhtml#P700049702700000000000000003F0B4" class="pcalibre1 pcalibre calibre2">The <var class="calibre5 pcalibre pcalibre1">w</var>-bit two's-complement sum of two numbers has the exact same bit-level representation as the unsigned sum. In fact, most computers use the same machine instruction to perform either unsigned or signed addition.</p>
<section class="feature pcalibre pcalibre1" id="P700049702700000000000000003F0B5" data-uri="chapter02.xhtml#P700049702700000000000000003F0B5"><header class="calibre61 pcalibre pcalibre1"><h1 class="pcalibre1 pcalibre title8" id="P700049702700000000000000003F0B6" data-uri="chapter02.xhtml#P700049702700000000000000003F0B6" epub:type="title"><span class="pcalibre label pcalibre1">Derivation: </span></h1></header>
<p id="P700049702700000000000000003F0B7" data-uri="chapter02.xhtml#P700049702700000000000000003F0B7" class="pcalibre1 pcalibre calibre2">Two's-complement addition</p>
<p id="P700049702700000000000000003F0B8" data-uri="chapter02.xhtml#P700049702700000000000000003F0B8" class="pcalibre1 pcalibre calibre2">Since two's-complement addition has the exact same bit-level representation as unsigned addition, we can characterize the operation <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="21" altimg-height="23" altimg="../images/ch02-eq78.png"><m:mrow><m:msubsup><m:mo>+</m:mo><m:mi>w</m:mi><m:mtext>t</m:mtext></m:msubsup></m:mrow></m:math> </span>as one of converting its arguments to unsigned, performing unsigned addition, and then converting back to two's complement:</p>
<p id="P700049702700000000000000003F0B9" data-uri="chapter02.xhtml#P700049702700000000000000003F0B9" class="pcalibre1 pcalibre calibre2"><span class="pcalibre pagebreak pcalibre1" id="P7000497027000000000000000000D57" title="91" data-uri="chapter02.xhtml#P7000497027000000000000000000D57" epub:type="pagebreak"></span></p>
<figure class="pcalibre5 figure pcalibre" id="P7000497027000000000000000000D58" data-uri="chapter02.xhtml#P7000497027000000000000000000D58">
<img alt="A diagram compares four cases of addition." id="P700049702700000000000000003F0BA" data-uri="P700049702700000000000000000B7B7" src="../images/p91-1.png" class="calibre70 pcalibre pcalibre1"/>
<figcaption id="P700049702700000000000000003F0BB" data-uri="chapter02.xhtml#P700049702700000000000000003F0BB" class="calibre11 pcalibre pcalibre1"><header class="calibre71 pcalibre pcalibre1"><h1 class="pcalibre1 pcalibre title8" id="P700049702700000000000000003F0BC" data-uri="chapter02.xhtml#P700049702700000000000000003F0BC" epub:type="title"><span class="pcalibre1 label2 pcalibre">Figure </span><span class="number pcalibre pcalibre1">2.24 </span>Relation between integer and two's-complement addition.</h1></header><div class="edition pcalibre pcalibre1" id="P700049702700000000000000003F0BD" data-uri="chapter02.xhtml#P700049702700000000000000003F0BD"><p id="P700049702700000000000000003F0BE" data-uri="chapter02.xhtml#P700049702700000000000000003F0BE" class="pcalibre calibre3 pcalibre1">When <var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var> is less than –2<sup class="calibre51 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">w</var>–1</sup>, there is a negative overflow. When it is greater than or equal to 2<sup class="calibre51 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">w</var>–1</sup>, there is a positive overflow.</p></div>
<details class="longdesc pcalibre pcalibre1" id="P700049702700000000000000001F39A" data-uri="chapter02.xhtml#P700049702700000000000000001F39A">
<summary class="pcalibre6 pcalibre1 pcalibre calibre30"><span class="number pcalibre pcalibre1">Description</span></summary>
<p id="P700049702700000000000000003F0BF" data-uri="chapter02.xhtml#P700049702700000000000000003F0BF" class="pcalibre1 pcalibre calibre2">A diagram shows arrows pointing from x + y to x + <sup class="calibre51 pcalibre pcalibre1">t</sup>y, as summarized below.</p>
<ul id="P700049702700000000000000003F0C0" data-uri="chapter02.xhtml#P700049702700000000000000003F0C0" class="pcalibre calibre31 pcalibre1">
<li id="P700049702700000000000000003F0C1" data-uri="chapter02.xhtml#P700049702700000000000000003F0C1" class="calibre12 pcalibre pcalibre1"><p id="P700049702700000000000000003F0C2" data-uri="chapter02.xhtml#P700049702700000000000000003F0C2" class="pcalibre calibre3 pcalibre1">Case 1: negative overflow, from between x + y negative 2<sup class="calibre51 pcalibre pcalibre1">W</sup> and negative 2<sup class="calibre51 pcalibre pcalibre1">W-1</sup> to between x + <sup class="calibre51 pcalibre pcalibre1">t</sup>y 0 and +2<sup class="calibre51 pcalibre pcalibre1">W-1</sup>.</p></li>
<li id="P700049702700000000000000003F0C3" data-uri="chapter02.xhtml#P700049702700000000000000003F0C3" class="calibre12 pcalibre pcalibre1"><p id="P700049702700000000000000003F0C4" data-uri="chapter02.xhtml#P700049702700000000000000003F0C4" class="pcalibre calibre3 pcalibre1">Case 2: normal, from between x + y negative 2<sup class="calibre51 pcalibre pcalibre1">W-1</sup> and 0 to between x + <sup class="calibre51 pcalibre pcalibre1">t</sup>y negative 2<sup class="calibre51 pcalibre pcalibre1">W-1</sup> and 0.</p></li>
<li id="P700049702700000000000000003F0C5" data-uri="chapter02.xhtml#P700049702700000000000000003F0C5" class="calibre12 pcalibre pcalibre1"><p id="P700049702700000000000000003F0C6" data-uri="chapter02.xhtml#P700049702700000000000000003F0C6" class="pcalibre calibre3 pcalibre1">Case 3: normal, from between x + y 0 and +2<sup class="calibre51 pcalibre pcalibre1">W-1</sup> to between x + <sup class="calibre51 pcalibre pcalibre1">t</sup>y 0 and +2<sup class="calibre51 pcalibre pcalibre1">W-1</sup>.</p></li>
<li id="P700049702700000000000000003F0C7" data-uri="chapter02.xhtml#P700049702700000000000000003F0C7" class="calibre12 pcalibre pcalibre1"><p id="P700049702700000000000000003F0C8" data-uri="chapter02.xhtml#P700049702700000000000000003F0C8" class="pcalibre calibre3 pcalibre1">Case 4: positive overflow, from between +2<sup class="calibre51 pcalibre pcalibre1">W-1</sup> and +2<sup class="calibre51 pcalibre pcalibre1">W</sup> to between x + <sup class="calibre51 pcalibre pcalibre1">t</sup>y negative 2<sup class="calibre51 pcalibre pcalibre1">W-1</sup> and 0.</p></li>
</ul>
</details>
</figcaption>
</figure>
<div class="informalequation pcalibre pcalibre1" id="P7000497027000000000000000000D5E" data-uri="chapter02.xhtml#P7000497027000000000000000000D5E"><m:math display="block" alttext="" data-uri="" altimg-width="346" altimg-height="24" altimg="../images/ch02-eq79.png"><m:mrow><m:mi>x</m:mi><m:msubsup><m:mo>+</m:mo><m:mi>w</m:mi><m:mi>t</m:mi></m:msubsup><m:mi>y</m:mi><m:mo>=</m:mo><m:mi>U</m:mi><m:mn>2</m:mn><m:msub><m:mi>T</m:mi><m:mi>w</m:mi></m:msub><m:mrow><m:mo>(</m:mo><m:mrow><m:mi>T</m:mi><m:mn>2</m:mn><m:msub><m:mi>U</m:mi><m:mi>w</m:mi></m:msub><m:mrow><m:mo>(</m:mo><m:mi>x</m:mi><m:mo>)</m:mo></m:mrow><m:msubsup><m:mo>+</m:mo><m:mi>w</m:mi><m:mi>u</m:mi></m:msubsup><m:mi>T</m:mi><m:mn>2</m:mn><m:msub><m:mi>U</m:mi><m:mi>w</m:mi></m:msub><m:mrow><m:mo>(</m:mo><m:mi>y</m:mi><m:mo>)</m:mo></m:mrow></m:mrow><m:mo>)</m:mo></m:mrow></m:mrow></m:math>
<span class="number3 pcalibre pcalibre1">(2.14)</span>
</div>
<p id="P700049702700000000000000003F0C9" data-uri="chapter02.xhtml#P700049702700000000000000003F0C9" class="pcalibre1 pcalibre calibre2">By <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP700049702700000000000000000077D_split_000.xhtml#P7000497027000000000000000000AE1"><span class="pcalibre label pcalibre1">Equation </span><span class="pcalibre label pcalibre1">2.6</span></a>, we can write <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="219" altimg-height="20" altimg="../images/ch02-new53.png"><m:mrow><m:mi>T</m:mi><m:mn>2</m:mn><m:msub><m:mi>U</m:mi><m:mi>w</m:mi></m:msub><m:mrow><m:mo>(</m:mo><m:mi>x</m:mi><m:mo>)</m:mo></m:mrow><m:mtext> </m:mtext><m:mtext>as</m:mtext><m:mtext> </m:mtext><m:msub><m:mi>x</m:mi><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msub><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>+</m:mo><m:mi>x</m:mi></m:mrow></m:math> </span>and <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="79" altimg-height="20" altimg="../images/ch02-new54.png"><m:mrow><m:mi>T</m:mi><m:mn>2</m:mn><m:msub><m:mi>U</m:mi><m:mi>w</m:mi></m:msub><m:mrow><m:mo>(</m:mo><m:mi>y</m:mi><m:mo>)</m:mo></m:mrow></m:mrow></m:math> </span>as <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="100" altimg-height="20" altimg="../images/ch02-new55.png"><m:mrow><m:msub><m:mi>y</m:mi><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msub><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>+</m:mo><m:mi>y</m:mi></m:mrow></m:math></span>. Using the property that <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="22" altimg-height="21" altimg="../images/ch02-eq80.png"><m:mrow><m:msubsup><m:mo>+</m:mo><m:mi>w</m:mi><m:mtext>u</m:mtext></m:msubsup></m:mrow></m:math> </span>is simply addition modulo 2<i class="calibre5 pcalibre pcalibre1"><sup class="calibre51 pcalibre pcalibre1">w</sup></i>, along with the properties of modular addition, we then have</p>
<div class="informalequation pcalibre pcalibre1" id="P700049702700000000000000003F0CA" data-uri="chapter02.xhtml#P700049702700000000000000003F0CA"><m:math display="block" alttext="" data-uri="" altimg-width="466" altimg-height="99" altimg="../images/ch02-eq81.png"><m:mrow><m:mtable columnalign="left"><m:mtr columnalign="left"><m:mtd columnalign="left"><m:mrow><m:mi>x</m:mi><m:msubsup><m:mo>+</m:mo><m:mi>w</m:mi><m:mi>t</m:mi></m:msubsup><m:mi>y</m:mi></m:mrow></m:mtd><m:mtd columnalign="left"><m:mo>=</m:mo></m:mtd><m:mtd columnalign="left"><m:mrow><m:mi>U</m:mi><m:mn>2</m:mn><m:msub><m:mi>T</m:mi><m:mi>w</m:mi></m:msub><m:mrow><m:mo>(</m:mo><m:mrow><m:mi>T</m:mi><m:mn>2</m:mn><m:msub><m:mi>U</m:mi><m:mi>w</m:mi></m:msub><m:mrow><m:mo>(</m:mo><m:mi>x</m:mi><m:mo>)</m:mo></m:mrow><m:msubsup><m:mo>+</m:mo><m:mi>w</m:mi><m:mi>u</m:mi></m:msubsup><m:mi>T</m:mi><m:mn>2</m:mn><m:msub><m:mi>U</m:mi><m:mi>w</m:mi></m:msub><m:mrow><m:mo>(</m:mo><m:mi>y</m:mi><m:mo>)</m:mo></m:mrow></m:mrow><m:mo>)</m:mo></m:mrow></m:mrow></m:mtd></m:mtr><m:mtr columnalign="left"><m:mtd columnalign="left"><m:mtext> </m:mtext></m:mtd><m:mtd columnalign="left"><m:mo>=</m:mo></m:mtd><m:mtd columnalign="left"><m:mrow><m:mi>U</m:mi><m:mn>2</m:mn><m:msub><m:mi>T</m:mi><m:mi>w</m:mi></m:msub><m:mrow><m:mo>[</m:mo><m:mrow><m:mrow><m:mo>(</m:mo><m:mrow><m:msub><m:mi>x</m:mi><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msub><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>+</m:mo><m:mi>x</m:mi><m:mo>+</m:mo><m:msub><m:mi>y</m:mi><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msub><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>+</m:mo><m:mi>y</m:mi></m:mrow><m:mo>)</m:mo></m:mrow><m:mtext> </m:mtext><m:mi>mod</m:mi><m:mtext> </m:mtext><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup></m:mrow><m:mo>]</m:mo></m:mrow></m:mrow></m:mtd></m:mtr><m:mtr columnalign="left"><m:mtd columnalign="left"><m:mtext> </m:mtext></m:mtd><m:mtd columnalign="left"><m:mo>=</m:mo></m:mtd><m:mtd columnalign="left"><m:mrow><m:mi>U</m:mi><m:mn>2</m:mn><m:msub><m:mi>T</m:mi><m:mi>w</m:mi></m:msub><m:mrow><m:mo>[</m:mo><m:mrow><m:mrow><m:mo>(</m:mo><m:mrow><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi></m:mrow><m:mo>)</m:mo></m:mrow><m:mtext> </m:mtext><m:mi>mod</m:mi><m:mtext> </m:mtext><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup></m:mrow><m:mo>]</m:mo></m:mrow></m:mrow></m:mtd></m:mtr></m:mtable></m:mrow></m:math></div>
<p id="P700049702700000000000000003F0CB" data-uri="chapter02.xhtml#P700049702700000000000000003F0CB" class="pcalibre1 pcalibre calibre2">The terms <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="64" altimg-height="20" altimg="../images/ch02-new56.png"><m:mrow><m:msub><m:mi>x</m:mi><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msub><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup></m:mrow></m:math> </span>and <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="63" altimg-height="20" altimg="../images/ch02-new57.png"><m:mrow><m:msub><m:mi>y</m:mi><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msub><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup></m:mrow></m:math> </span>drop out since they equal 0 modulo 2<i class="calibre5 pcalibre pcalibre1"><sup class="calibre51 pcalibre pcalibre1">w</sup></i>.</p>
<p id="P700049702700000000000000003F0CC" data-uri="chapter02.xhtml#P700049702700000000000000003F0CC" class="pcalibre1 pcalibre calibre2">To better understand this quantity, let us define <var class="calibre5 pcalibre pcalibre1">z</var> as the integer sum <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="107" altimg-height="21" altimg="../images/ch02-eq82.png"><m:mrow><m:mi>z</m:mi><m:mo>≐</m:mo><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mo>,</m:mo><m:mtext> </m:mtext><m:mi>z</m:mi><m:mo>'</m:mo></m:mrow></m:math> </span>as <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="49" altimg-height="17" altimg="../images/ch02-eq83.png"><m:mrow><m:mi>z</m:mi><m:mo>'</m:mo><m:mo>≐</m:mo><m:mi>z</m:mi></m:mrow></m:math> </span>mod 2<i class="calibre5 pcalibre pcalibre1"><sup class="calibre51 pcalibre pcalibre1">w</sup></i>, and <var class="calibre5 pcalibre pcalibre1">z</var>″ as <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="176" altimg-height="22" altimg="../images/ch02-eq84.png"><m:mrow><m:msup><m:mi>z</m:mi><m:mo>″</m:mo></m:msup><m:mo>≐</m:mo><m:mi>U</m:mi><m:mn>2</m:mn><m:msub><m:mi>T</m:mi><m:mi>w</m:mi></m:msub><m:mrow><m:mo>(</m:mo><m:msup><m:mi>z</m:mi><m:mo>′</m:mo></m:msup><m:mo>)</m:mo></m:mrow></m:mrow></m:math></span>. The value <var class="calibre5 pcalibre pcalibre1">z</var>″ is equal to <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="55" altimg-height="23" altimg="../images/ch02-eq85.png"><m:mrow><m:mi>x</m:mi><m:mtext> </m:mtext><m:msubsup><m:mo>+</m:mo><m:mi>w</m:mi><m:mtext>t</m:mtext></m:msubsup><m:mtext> </m:mtext><m:mi>y</m:mi></m:mrow></m:math></span>. We can divide the analysis into four cases as illustrated in <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000000CB3_split_000.xhtml#P7000497027000000000000000000D58"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">2.24</span></a>:</p>
<ol id="P700049702700000000000000003F0CD" data-uri="chapter02.xhtml#P700049702700000000000000003F0CD" class="calibre72 pcalibre pcalibre1">
<li id="P700049702700000000000000003F0CE" data-uri="chapter02.xhtml#P700049702700000000000000003F0CE" class="calibre12 pcalibre pcalibre1"><p id="P700049702700000000000000003F0CF" data-uri="chapter02.xhtml#P700049702700000000000000003F0CF" class="pcalibre calibre3 pcalibre1"><span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="154" altimg-height="22" altimg="../images/ch02-new58.png"><m:mrow><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>≤</m:mo><m:mi>z</m:mi><m:mo>&lt;</m:mo><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:math></span>. Then we will have <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="96" altimg-height="18" altimg="../images/ch02-new59.png"><m:mrow><m:msup><m:mi>z</m:mi><m:mo>′</m:mo></m:msup><m:mo>=</m:mo><m:mi>z</m:mi><m:mo>+</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup></m:mrow></m:math></span>. This gives <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="249" altimg-height="23" altimg="../images/ch02-new60.png"><m:mrow><m:mn>0</m:mn><m:mo>≤</m:mo><m:msup><m:mi>z</m:mi><m:mo>′</m:mo></m:msup><m:mo>&lt;</m:mo><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msup><m:mo>+</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>=</m:mo><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msup></m:mrow></m:math></span>. Examining <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP700049702700000000000000000077D_split_001.xhtml#P7000497027000000000000000000AFE"><span class="pcalibre label pcalibre1">Equation </span><span class="pcalibre label pcalibre1">2.7</span></a>, we see that <var class="calibre5 pcalibre pcalibre1">z</var>′ is in the range such that <var class="calibre5 pcalibre pcalibre1">z</var>″ = <var class="calibre5 pcalibre pcalibre1">z</var>′. This is the case of negative overflow. We have added two negative numbers <var class="calibre5 pcalibre pcalibre1">x</var> and <var class="calibre5 pcalibre pcalibre1">y</var> (that's the only way we can have <var class="calibre5 pcalibre pcalibre1">z</var> &lt; –2<sup class="calibre51 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">w</var>–1</sup>) and obtained a nonnegative result <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="139" altimg-height="20" altimg="../images/ch02-new61.png"><m:mrow><m:msup><m:msup><m:mi>z</m:mi><m:mo>′</m:mo></m:msup><m:mo>′</m:mo></m:msup><m:mo>=</m:mo><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mo>+</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup></m:mrow></m:math></span>.</p></li>
<li id="P700049702700000000000000003F0D0" data-uri="chapter02.xhtml#P700049702700000000000000003F0D0" class="calibre12 pcalibre pcalibre1"><p id="P700049702700000000000000003F0D1" data-uri="chapter02.xhtml#P700049702700000000000000003F0D1" class="pcalibre calibre3 pcalibre1"><span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="128" altimg-height="22" altimg="../images/ch02-new62.png"><m:mrow><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msup><m:mo>≤</m:mo><m:mi>z</m:mi><m:mo>&lt;</m:mo><m:mn>0</m:mn></m:mrow></m:math></span>. Then we will again have <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="97" altimg-height="18" altimg="../images/ch02-new63.png"><m:mrow><m:msup><m:mi>z</m:mi><m:mo>′</m:mo></m:msup><m:mo>=</m:mo><m:mi>z</m:mi><m:mo>+</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup></m:mrow></m:math></span>, giving <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="262" altimg-height="23" altimg="../images/ch02-new64.png"><m:mrow><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msup><m:mo>+</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>=</m:mo><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msup><m:mo>≤</m:mo><m:msup><m:mi>z</m:mi><m:mo>′</m:mo></m:msup><m:mo>&lt;</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup></m:mrow></m:math></span>. Examining <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP700049702700000000000000000077D_split_001.xhtml#P7000497027000000000000000000AFE"><span class="pcalibre label pcalibre1">Equation </span><span class="pcalibre label pcalibre1">2.7</span></a>, we see that <var class="calibre5 pcalibre pcalibre1">z</var>′ is in such a range that <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="105" altimg-height="16" altimg="../images/ch02-new65.png"><m:mrow><m:msup><m:msup><m:mi>z</m:mi><m:mo>′</m:mo></m:msup><m:mo>′</m:mo></m:msup><m:mo>=</m:mo><m:msup><m:mi>z</m:mi><m:mo>′</m:mo></m:msup><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup></m:mrow></m:math></span>, and therefore <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="271" altimg-height="18" altimg="../images/ch02-new66.png"><m:mrow><m:msup><m:msup><m:mi>z</m:mi><m:mo>′</m:mo></m:msup><m:mo>′</m:mo></m:msup><m:mo>=</m:mo><m:msup><m:mi>z</m:mi><m:mo>′</m:mo></m:msup><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>=</m:mo><m:mi>z</m:mi><m:mo>+</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>=</m:mo><m:mi>z</m:mi></m:mrow></m:math></span>. That is, our two's-complement sum <var class="calibre5 pcalibre pcalibre1">z</var>″ equals the integer sum <var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var>.</p></li>
<li id="P700049702700000000000000003F0D2" data-uri="chapter02.xhtml#P700049702700000000000000003F0D2" class="calibre12 pcalibre pcalibre1"><p id="P700049702700000000000000003F0D3" data-uri="chapter02.xhtml#P700049702700000000000000003F0D3" class="pcalibre calibre3 pcalibre1"><span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="111" altimg-height="22" altimg="../images/ch02-new67.png"><m:mrow><m:mn>0</m:mn><m:mo>≤</m:mo><m:mi>z</m:mi><m:mo>&lt;</m:mo><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msup></m:mrow></m:math></span>. Then we will have <var class="calibre5 pcalibre pcalibre1">z</var>′ = <var class="calibre5 pcalibre pcalibre1">z</var>, giving <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="117" altimg-height="22" altimg="../images/ch02-new68.png"><m:mrow><m:mn>0</m:mn><m:mo>≤</m:mo><m:msup><m:mi>z</m:mi><m:mo>′</m:mo></m:msup><m:mo>&lt;</m:mo><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msup></m:mrow></m:math></span>, and hence <var class="calibre5 pcalibre pcalibre1">z</var>″ = <var class="calibre5 pcalibre pcalibre1">z</var>′ = <i class="calibre5 pcalibre pcalibre1">z.</i> Again, the two's-complement sum <var class="calibre5 pcalibre pcalibre1">z</var>″ equals the integer sum <var class="calibre5 pcalibre pcalibre1">x</var> + <i class="calibre5 pcalibre pcalibre1">y.</i></p></li>
<li id="P700049702700000000000000003F0D4" data-uri="chapter02.xhtml#P700049702700000000000000003F0D4" class="calibre12 pcalibre pcalibre1"><p id="P700049702700000000000000003F0D5" data-uri="chapter02.xhtml#P700049702700000000000000003F0D5" class="pcalibre calibre3 pcalibre1"><span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="125" altimg-height="22" altimg="../images/ch02-new69.png"><m:mrow><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msup><m:mo>≤</m:mo><m:mi>z</m:mi><m:mo>&lt;</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup></m:mrow></m:math></span>. We will again have <var class="calibre5 pcalibre pcalibre1">z</var>′ = <var class="calibre5 pcalibre pcalibre1">z</var>, giving <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="130" altimg-height="22" altimg="../images/ch02-new70.png"><m:mrow><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msup><m:mo>≤</m:mo><m:msup><m:mi>z</m:mi><m:mo>′</m:mo></m:msup><m:mo>&lt;</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup></m:mrow></m:math></span>. But in this range we have <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="104" altimg-height="16" altimg="../images/ch02-new71.png"><m:mrow><m:msup><m:msup><m:mi>z</m:mi><m:mo>′</m:mo></m:msup><m:mo>′</m:mo></m:msup><m:mo>=</m:mo><m:msup><m:mi>z</m:mi><m:mo>′</m:mo></m:msup><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup></m:mrow></m:math></span>, giving <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="138" altimg-height="20" altimg="../images/ch02-new72.png"><m:mrow><m:msup><m:msup><m:mi>z</m:mi><m:mo>′</m:mo></m:msup><m:mo>′</m:mo></m:msup><m:mo>=</m:mo><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup></m:mrow></m:math></span>. This is the case of positive overflow. We have added two positive numbers <var class="calibre5 pcalibre pcalibre1">x</var> and <var class="calibre5 pcalibre pcalibre1">y</var> (that's the only way we can have <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="76" altimg-height="22" altimg="../images/ch02-new73.png"><m:mrow><m:mi>z</m:mi><m:mo>≥</m:mo><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msup></m:mrow></m:math></span>) and obtained a negative result <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="139" altimg-height="21" altimg="../images/ch02-new74.png"><m:mrow><m:msup><m:msup><m:mi>z</m:mi><m:mo>′</m:mo></m:msup><m:mo>′</m:mo></m:msup><m:mo>=</m:mo><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup></m:mrow></m:math></span>.</p></li>
</ol>
</section>
<p id="P700049702700000000000000003F0D6" data-uri="chapter02.xhtml#P700049702700000000000000003F0D6" class="pcalibre1 pcalibre calibre2"><span class="pcalibre pagebreak pcalibre1" id="P7000497027000000000000000000D6D" title="92" data-uri="chapter02.xhtml#P7000497027000000000000000000D6D" epub:type="pagebreak"></span></p>
<figure class="pcalibre5 figure pcalibre" id="P7000497027000000000000000000D6E" data-uri="chapter02.xhtml#P7000497027000000000000000000D6E">
<table class="pcalibre largetable pcalibre1" id="P700049702700000000000000003F0D7" data-uri="chapter02.xhtml#P700049702700000000000000003F0D7">
<thead class="pcalibre1 pcalibre calibre16">
<tr class="pcalibre calibre17 pcalibre1">
<th id="P700049702700000000000000003F0D8" data-uri="chapter02.xhtml#P700049702700000000000000003F0D8" class="calibre18 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">x</var></th>
<th id="P700049702700000000000000003F0D9" data-uri="chapter02.xhtml#P700049702700000000000000003F0D9" class="calibre18 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">y</var></th>
<th id="P700049702700000000000000003F0DA" data-uri="chapter02.xhtml#P700049702700000000000000003F0DA" class="calibre18 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var></th>
<th id="P700049702700000000000000003F0DB" data-uri="chapter02.xhtml#P700049702700000000000000003F0DB" class="calibre18 pcalibre pcalibre1"><span class="inlineequation1 pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="47" altimg-height="22" altimg="../images/ch02-eq86.png"><m:mrow><m:mi>x</m:mi><m:msubsup><m:mo>+</m:mo><m:mn>4</m:mn><m:mtext>t</m:mtext></m:msubsup><m:mi>y</m:mi></m:mrow></m:math></span></th>
<th id="P700049702700000000000000003F0DC" data-uri="chapter02.xhtml#P700049702700000000000000003F0DC" class="calibre18 pcalibre pcalibre1">Case</th>
</tr>
</thead>
<tbody class="calibre19 pcalibre pcalibre1">
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F0DD" data-uri="chapter02.xhtml#P700049702700000000000000003F0DD" class="calibre20 pcalibre pcalibre1">–8</td>
<td id="P700049702700000000000000003F0DE" data-uri="chapter02.xhtml#P700049702700000000000000003F0DE" class="calibre20 pcalibre pcalibre1">–5</td>
<td id="P700049702700000000000000003F0DF" data-uri="chapter02.xhtml#P700049702700000000000000003F0DF" class="calibre20 pcalibre pcalibre1">–13</td>
<td id="P700049702700000000000000003F0E0" data-uri="chapter02.xhtml#P700049702700000000000000003F0E0" class="calibre20 pcalibre pcalibre1">3</td>
<td id="P700049702700000000000000003F0E1" data-uri="chapter02.xhtml#P700049702700000000000000003F0E1" class="calibre20 pcalibre pcalibre1">1</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F0E2" data-uri="chapter02.xhtml#P700049702700000000000000003F0E2" class="calibre20 pcalibre pcalibre1">[1000]</td>
<td id="P700049702700000000000000003F0E3" data-uri="chapter02.xhtml#P700049702700000000000000003F0E3" class="calibre20 pcalibre pcalibre1">[1011]</td>
<td id="P700049702700000000000000003F0E4" data-uri="chapter02.xhtml#P700049702700000000000000003F0E4" class="calibre20 pcalibre pcalibre1">[10011]</td>
<td id="P700049702700000000000000003F0E5" data-uri="chapter02.xhtml#P700049702700000000000000003F0E5" class="calibre20 pcalibre pcalibre1">[0011]</td>
<td class="calibre20 pcalibre pcalibre1"/>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F0E6" data-uri="chapter02.xhtml#P700049702700000000000000003F0E6" class="calibre20 pcalibre pcalibre1">–8</td>
<td id="P700049702700000000000000003F0E7" data-uri="chapter02.xhtml#P700049702700000000000000003F0E7" class="calibre20 pcalibre pcalibre1">–8</td>
<td id="P700049702700000000000000003F0E8" data-uri="chapter02.xhtml#P700049702700000000000000003F0E8" class="calibre20 pcalibre pcalibre1">–16</td>
<td id="P700049702700000000000000003F0E9" data-uri="chapter02.xhtml#P700049702700000000000000003F0E9" class="calibre20 pcalibre pcalibre1">0</td>
<td id="P700049702700000000000000003F0EA" data-uri="chapter02.xhtml#P700049702700000000000000003F0EA" class="calibre20 pcalibre pcalibre1">1</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F0EB" data-uri="chapter02.xhtml#P700049702700000000000000003F0EB" class="calibre20 pcalibre pcalibre1">[1000]</td>
<td id="P700049702700000000000000003F0EC" data-uri="chapter02.xhtml#P700049702700000000000000003F0EC" class="calibre20 pcalibre pcalibre1">[1000]</td>
<td id="P700049702700000000000000003F0ED" data-uri="chapter02.xhtml#P700049702700000000000000003F0ED" class="calibre20 pcalibre pcalibre1">[10000]</td>
<td id="P700049702700000000000000003F0EE" data-uri="chapter02.xhtml#P700049702700000000000000003F0EE" class="calibre20 pcalibre pcalibre1">[0000]</td>
<td class="calibre20 pcalibre pcalibre1"/>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F0EF" data-uri="chapter02.xhtml#P700049702700000000000000003F0EF" class="calibre20 pcalibre pcalibre1">–8</td>
<td id="P700049702700000000000000003F0F0" data-uri="chapter02.xhtml#P700049702700000000000000003F0F0" class="calibre20 pcalibre pcalibre1">5</td>
<td id="P700049702700000000000000003F0F1" data-uri="chapter02.xhtml#P700049702700000000000000003F0F1" class="calibre20 pcalibre pcalibre1">–3</td>
<td id="P700049702700000000000000003F0F2" data-uri="chapter02.xhtml#P700049702700000000000000003F0F2" class="calibre20 pcalibre pcalibre1">–3</td>
<td id="P700049702700000000000000003F0F3" data-uri="chapter02.xhtml#P700049702700000000000000003F0F3" class="calibre20 pcalibre pcalibre1">2</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F0F4" data-uri="chapter02.xhtml#P700049702700000000000000003F0F4" class="calibre20 pcalibre pcalibre1">[1000]</td>
<td id="P700049702700000000000000003F0F5" data-uri="chapter02.xhtml#P700049702700000000000000003F0F5" class="calibre20 pcalibre pcalibre1">[0101]</td>
<td id="P700049702700000000000000003F0F6" data-uri="chapter02.xhtml#P700049702700000000000000003F0F6" class="calibre20 pcalibre pcalibre1">[11101]</td>
<td id="P700049702700000000000000003F0F7" data-uri="chapter02.xhtml#P700049702700000000000000003F0F7" class="calibre20 pcalibre pcalibre1">[1101]</td>
<td class="calibre20 pcalibre pcalibre1"/>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F0F8" data-uri="chapter02.xhtml#P700049702700000000000000003F0F8" class="calibre20 pcalibre pcalibre1">2</td>
<td id="P700049702700000000000000003F0F9" data-uri="chapter02.xhtml#P700049702700000000000000003F0F9" class="calibre20 pcalibre pcalibre1">5</td>
<td id="P700049702700000000000000003F0FA" data-uri="chapter02.xhtml#P700049702700000000000000003F0FA" class="calibre20 pcalibre pcalibre1">7</td>
<td id="P700049702700000000000000003F0FB" data-uri="chapter02.xhtml#P700049702700000000000000003F0FB" class="calibre20 pcalibre pcalibre1">7</td>
<td id="P700049702700000000000000003F0FC" data-uri="chapter02.xhtml#P700049702700000000000000003F0FC" class="calibre20 pcalibre pcalibre1">3</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F0FD" data-uri="chapter02.xhtml#P700049702700000000000000003F0FD" class="calibre20 pcalibre pcalibre1">[0010]</td>
<td id="P700049702700000000000000003F0FE" data-uri="chapter02.xhtml#P700049702700000000000000003F0FE" class="calibre20 pcalibre pcalibre1">[0101]</td>
<td id="P700049702700000000000000003F0FF" data-uri="chapter02.xhtml#P700049702700000000000000003F0FF" class="calibre20 pcalibre pcalibre1">[00111]</td>
<td id="P700049702700000000000000003F100" data-uri="chapter02.xhtml#P700049702700000000000000003F100" class="calibre20 pcalibre pcalibre1">[0111]</td>
<td class="calibre20 pcalibre pcalibre1"/>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F101" data-uri="chapter02.xhtml#P700049702700000000000000003F101" class="calibre20 pcalibre pcalibre1">5</td>
<td id="P700049702700000000000000003F102" data-uri="chapter02.xhtml#P700049702700000000000000003F102" class="calibre20 pcalibre pcalibre1">5</td>
<td id="P700049702700000000000000003F103" data-uri="chapter02.xhtml#P700049702700000000000000003F103" class="calibre20 pcalibre pcalibre1">10</td>
<td id="P700049702700000000000000003F104" data-uri="chapter02.xhtml#P700049702700000000000000003F104" class="calibre20 pcalibre pcalibre1">–6</td>
<td id="P700049702700000000000000003F105" data-uri="chapter02.xhtml#P700049702700000000000000003F105" class="calibre20 pcalibre pcalibre1">4</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F106" data-uri="chapter02.xhtml#P700049702700000000000000003F106" class="calibre20 pcalibre pcalibre1">[0101]</td>
<td id="P700049702700000000000000003F107" data-uri="chapter02.xhtml#P700049702700000000000000003F107" class="calibre20 pcalibre pcalibre1">[0101]</td>
<td id="P700049702700000000000000003F108" data-uri="chapter02.xhtml#P700049702700000000000000003F108" class="calibre20 pcalibre pcalibre1">[01010]</td>
<td id="P700049702700000000000000003F109" data-uri="chapter02.xhtml#P700049702700000000000000003F109" class="calibre20 pcalibre pcalibre1">[1010]</td>
<td class="calibre20 pcalibre pcalibre1"/>
</tr>
</tbody>
</table>
<figcaption id="P700049702700000000000000003F10A" data-uri="chapter02.xhtml#P700049702700000000000000003F10A" class="calibre11 pcalibre pcalibre1"><header class="pcalibre halftitlepage pcalibre1"><h1 class="title3 pcalibre pcalibre1" id="P700049702700000000000000003F10B" data-uri="chapter02.xhtml#P700049702700000000000000003F10B" epub:type="title"><span class="pcalibre1 label2 pcalibre">Figure </span><span class="number pcalibre pcalibre1">2.25 </span>Two's-complement addition examples.</h1></header><div class="caption pcalibre pcalibre1" id="P700049702700000000000000003F10C" data-uri="chapter02.xhtml#P700049702700000000000000003F10C"><p id="P700049702700000000000000003F10D" data-uri="chapter02.xhtml#P700049702700000000000000003F10D" class="pcalibre calibre3 pcalibre1">The bit-level representation of the 4-bit two's-complement sum can be obtained by performing binary addition of the operands and truncating the result to 4 bits.</p></div></figcaption>
</figure>
<p id="P700049702700000000000000003F10E" data-uri="chapter02.xhtml#P700049702700000000000000003F10E" class="pcalibre1 pcalibre calibre2">As illustrations of two's-complement addition, <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000000CB3_split_000.xhtml#P7000497027000000000000000000D6E"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">2.25</span></a> shows some examples when <var class="calibre5 pcalibre pcalibre1">w</var> = 4. Each example is labeled by the case to which it corresponds in the derivation of <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000000CB3_split_000.xhtml#P7000497027000000000000000000D4F"><span class="pcalibre label pcalibre1">Equation </span><span class="pcalibre label pcalibre1">2.13</span></a>. Note that 2<sup class="calibre51 pcalibre pcalibre1">4</sup> = 16, and hence negative overflow yields a result 16 more than the integer sum, and positive overflow yields a result 16 less. We include bit-level representations of the operands and the result. Observe that the result can be obtained by performing binary addition of the operands and truncating the result to 4 bits.</p>
<p id="P700049702700000000000000003F10F" data-uri="chapter02.xhtml#P700049702700000000000000003F10F" class="pcalibre1 pcalibre calibre2"><a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000000CB3_split_000.xhtml#P7000497027000000000000000000DB0"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">2.26</span></a> illustrates two's-complement addition for word size <var class="calibre5 pcalibre pcalibre1">w</var> = 4. The operands range between –8 and 7. When <var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var> &lt; –8, two's-complement addition has a negative overflow, causing the sum to be incremented by 16. When –8 ≤ <var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var> &lt; 8, the addition yields <var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var>. When <var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var> ≥ 8, the addition has a positive overflow, causing the sum to be decremented by 16. Each of these three ranges forms a sloping plane in the figure.</p>
<p id="P700049702700000000000000003F110" data-uri="chapter02.xhtml#P700049702700000000000000003F110" class="pcalibre1 pcalibre calibre2"><a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000000CB3_split_000.xhtml#P7000497027000000000000000000D4F"><span class="pcalibre label pcalibre1">Equation </span><span class="pcalibre label pcalibre1">2.13</span></a> also lets us identify the cases where overflow has occurred:</p>
<section class="feature pcalibre pcalibre1" id="P700049702700000000000000003F111" data-uri="chapter02.xhtml#P700049702700000000000000003F111"><header class="calibre61 pcalibre pcalibre1"><h1 class="pcalibre1 pcalibre title8" id="P700049702700000000000000003F112" data-uri="chapter02.xhtml#P700049702700000000000000003F112" epub:type="title"><span class="pcalibre label pcalibre1">Principle: </span></h1></header>
<p id="P700049702700000000000000003F113" data-uri="chapter02.xhtml#P700049702700000000000000003F113" class="pcalibre1 pcalibre calibre2">Detecting overflow in two's-complement addition</p>
<p id="P700049702700000000000000003F114" data-uri="chapter02.xhtml#P700049702700000000000000003F114" class="pcalibre1 pcalibre calibre2">For <var class="calibre5 pcalibre pcalibre1">x</var> and <var class="calibre5 pcalibre pcalibre1">y</var> in the range <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="210" altimg-height="20" altimg="../images/ch02-new75.png"><m:mrow><m:mi>T</m:mi><m:mi>M</m:mi><m:mi>i</m:mi><m:msub><m:mi>n</m:mi><m:mi>w</m:mi></m:msub><m:mo>&lt;</m:mo><m:mi>x</m:mi><m:mo>,</m:mo><m:mtext> </m:mtext><m:mi>y</m:mi><m:mo>≤</m:mo><m:mi>T</m:mi><m:mi>M</m:mi><m:mi>a</m:mi><m:msub><m:mi>x</m:mi><m:mi>w</m:mi></m:msub></m:mrow></m:math></span>, let <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="89" altimg-height="23" altimg="../images/ch02-eq87.png"><m:mrow><m:mi>s</m:mi><m:mo>≐</m:mo><m:mi>x</m:mi><m:msubsup><m:mo>+</m:mo><m:mi>w</m:mi><m:mtext>t</m:mtext></m:msubsup><m:mtext> </m:mtext><m:mi>y</m:mi></m:mrow></m:math></span>. Then the computation of <var class="calibre5 pcalibre pcalibre1">s</var> has had positive overflow if and only if <var class="calibre5 pcalibre pcalibre1">x</var> &gt; 0 and <var class="calibre5 pcalibre pcalibre1">y</var> &gt; 0 but <var class="calibre5 pcalibre pcalibre1">s</var> ≤ 0. The computation has had negative overflow if and only if <var class="calibre5 pcalibre pcalibre1">x</var> &lt; 0 and <var class="calibre5 pcalibre pcalibre1">y</var> &lt; 0 but <var class="calibre5 pcalibre pcalibre1">s</var> ≥ 0.</p>
</section>
<p id="P700049702700000000000000003F115" data-uri="chapter02.xhtml#P700049702700000000000000003F115" class="pcalibre1 pcalibre calibre2"><a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000000CB3_split_000.xhtml#P7000497027000000000000000000D6E"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">2.25</span></a> shows several illustrations of this principle for <var class="calibre5 pcalibre pcalibre1">w</var> = 4. The first entry shows a case of negative overflow, where two negative numbers sum to a positive one. The final entry shows a case of positive overflow, where two positive numbers sum to a negative one.</p>
<p id="P700049702700000000000000003F116" data-uri="chapter02.xhtml#P700049702700000000000000003F116" class="pcalibre1 pcalibre calibre2"><span class="pcalibre pagebreak pcalibre1" id="P7000497027000000000000000000DAF" title="93" data-uri="chapter02.xhtml#P7000497027000000000000000000DAF" epub:type="pagebreak"></span></p>
<figure class="pcalibre5 figure pcalibre" id="P7000497027000000000000000000DB0" data-uri="chapter02.xhtml#P7000497027000000000000000000DB0">
<img alt="Decorative image." id="P700049702700000000000000003F117" data-uri="P700049702700000000000000000B7C3" src="../images/p93-1.png" class="calibre73 pcalibre pcalibre1"/>
<figcaption id="P700049702700000000000000003F118" data-uri="chapter02.xhtml#P700049702700000000000000003F118" class="calibre11 pcalibre pcalibre1"><header class="pcalibre halftitlepage pcalibre1"><h1 class="title3 pcalibre pcalibre1" id="P700049702700000000000000003F119" data-uri="chapter02.xhtml#P700049702700000000000000003F119" epub:type="title"><span class="pcalibre1 label2 pcalibre">Figure </span><span class="number pcalibre pcalibre1">2.26 </span>Two's-complement addition.</h1></header><div class="caption pcalibre pcalibre1" id="P700049702700000000000000003F11A" data-uri="chapter02.xhtml#P700049702700000000000000003F11A"><p id="P700049702700000000000000003F11B" data-uri="chapter02.xhtml#P700049702700000000000000003F11B" class="pcalibre calibre3 pcalibre1">With a 4-bit word size, addition can have a negative overflow when <var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var> &lt; –8 and a positive overflow when <var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var> ≥ 8.</p></div></figcaption>
</figure>
<section class="feature pcalibre pcalibre1" id="P700049702700000000000000003F11C" data-uri="chapter02.xhtml#P700049702700000000000000003F11C"><header class="calibre61 pcalibre pcalibre1"><h1 class="pcalibre1 pcalibre title8" id="P700049702700000000000000003F11D" data-uri="chapter02.xhtml#P700049702700000000000000003F11D" epub:type="title"><span class="pcalibre label pcalibre1">Derivation: </span></h1></header>
<p id="P700049702700000000000000003F11E" data-uri="chapter02.xhtml#P700049702700000000000000003F11E" class="pcalibre1 pcalibre calibre2">Detecting overflow of two's-complement addition</p>
<p id="P700049702700000000000000003F11F" data-uri="chapter02.xhtml#P700049702700000000000000003F11F" class="pcalibre1 pcalibre calibre2">Let us first do the analysis for positive overflow. If both <var class="calibre5 pcalibre pcalibre1">x</var> &gt; 0 and <var class="calibre5 pcalibre pcalibre1">y</var> &gt; 0 but <var class="calibre5 pcalibre pcalibre1">s</var> ≤ 0, then clearly positive overflow has occurred. Conversely, positive overflow requires (1) that <var class="calibre5 pcalibre pcalibre1">x</var> &gt; 0 and <var class="calibre5 pcalibre pcalibre1">y</var> &gt; 0 (otherwise, <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="138" altimg-height="20" altimg="../images/ch02-new76.png"><m:mrow><m:mi>x</m:mi><m:mo>+</m:mo><m:mi>y</m:mi><m:mo>&lt;</m:mo><m:mi>T</m:mi><m:mi>M</m:mi><m:mi>a</m:mi><m:msub><m:mi>x</m:mi><m:mi>w</m:mi></m:msub></m:mrow></m:math></span>), and (2) <var class="calibre5 pcalibre pcalibre1">s</var> ≤ 0 (from <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000000CB3_split_000.xhtml#P7000497027000000000000000000D4F"><span class="pcalibre label pcalibre1">Equation </span><span class="pcalibre label pcalibre1">2.13</span></a>.) A similar set of arguments holds for negative overflow.</p>
</section>
<section id="P7000497027000000000000000000DBA" data-uri="chapter02.xhtml#P7000497027000000000000000000DBA" epub:type="practice" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="title5 pcalibre pcalibre1" id="P700049702700000000000000003F120" data-uri="chapter02.xhtml#P700049702700000000000000003F120" epub:type="title"><span class="pcalibre label pcalibre1">Practice Problem </span><span class="pcalibre label pcalibre1">2.29</span> (solution page <a class="ulink pcalibre pcalibre4 pcalibre2 pcalibre3 pcalibre1" epub:type="pagebreak" href="fileP70004970270000000000000000017AE_split_001.xhtml#P7000497027000000000000000001ACF">152</a>)</h1></header>
<ol class="practicelist pcalibre pcalibre1" id="P700049702700000000000000003F121" data-uri="chapter02.xhtml#P700049702700000000000000003F121">
<li class="general-problem pcalibre pcalibre1" id="P700049702700000000000000003F122" data-uri="chapter02.xhtml#P700049702700000000000000003F122">
<div class="edition pcalibre pcalibre1" id="P700049702700000000000000003F123" data-uri="chapter02.xhtml#P700049702700000000000000003F123"><p id="P700049702700000000000000003F124" data-uri="chapter02.xhtml#P700049702700000000000000003F124" class="pcalibre calibre3 pcalibre1">Fill in the following table in the style of <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000000CB3_split_000.xhtml#P7000497027000000000000000000D6E"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">2.25</span></a>. Give the integer values of the 5-bit arguments, the values of both their integer and two's-complement sums, the bit-level representation of the two's-complement sum, and the case from the derivation of <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000000CB3_split_000.xhtml#P7000497027000000000000000000D4F"><span class="pcalibre label pcalibre1">Equation </span><span class="pcalibre label pcalibre1">2.13</span></a>.</p>
<p id="P700049702700000000000000003F125" data-uri="chapter02.xhtml#P700049702700000000000000003F125" class="pcalibre calibre3 pcalibre1"><span class="pcalibre pagebreak pcalibre1" id="P7000497027000000000000000000DC1" title="94" data-uri="chapter02.xhtml#P7000497027000000000000000000DC1" epub:type="pagebreak"></span></p>
<table class="informaltable pcalibre pcalibre1" id="P700049702700000000000000003F126" data-uri="chapter02.xhtml#P700049702700000000000000003F126">
<thead class="pcalibre1 pcalibre calibre16">
<tr class="pcalibre calibre17 pcalibre1">
<th id="P700049702700000000000000003F127" data-uri="chapter02.xhtml#P700049702700000000000000003F127" class="calibre18 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">x</var></th>
<th id="P700049702700000000000000003F128" data-uri="chapter02.xhtml#P700049702700000000000000003F128" class="calibre18 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">y</var></th>
<th id="P700049702700000000000000003F129" data-uri="chapter02.xhtml#P700049702700000000000000003F129" class="calibre18 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">y</var></th>
<th id="P700049702700000000000000003F12A" data-uri="chapter02.xhtml#P700049702700000000000000003F12A" class="calibre18 pcalibre pcalibre1"><span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="48" altimg-height="22" altimg="../images/ch02-eq88.png"><m:mrow><m:mi>x</m:mi><m:mtext> </m:mtext><m:msubsup><m:mo>+</m:mo><m:mn>5</m:mn><m:mtext>t</m:mtext></m:msubsup><m:mi>y</m:mi></m:mrow></m:math></span></th>
<th id="P700049702700000000000000003F12B" data-uri="chapter02.xhtml#P700049702700000000000000003F12B" class="calibre18 pcalibre pcalibre1">Case</th>
</tr>
</thead>
<tbody class="calibre19 pcalibre pcalibre1">
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F12C" data-uri="chapter02.xhtml#P700049702700000000000000003F12C" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F12D" data-uri="chapter02.xhtml#P700049702700000000000000003F12D" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F12E" data-uri="chapter02.xhtml#P700049702700000000000000003F12E" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F12F" data-uri="chapter02.xhtml#P700049702700000000000000003F12F" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F130" data-uri="chapter02.xhtml#P700049702700000000000000003F130" class="calibre20 pcalibre pcalibre1">_____________</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F131" data-uri="chapter02.xhtml#P700049702700000000000000003F131" class="calibre20 pcalibre pcalibre1">[10100]</td>
<td id="P700049702700000000000000003F132" data-uri="chapter02.xhtml#P700049702700000000000000003F132" class="calibre20 pcalibre pcalibre1">[10001]</td>
<td id="P700049702700000000000000003F133" data-uri="chapter02.xhtml#P700049702700000000000000003F133" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F134" data-uri="chapter02.xhtml#P700049702700000000000000003F134" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F135" data-uri="chapter02.xhtml#P700049702700000000000000003F135" class="calibre20 pcalibre pcalibre1">_____________</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F136" data-uri="chapter02.xhtml#P700049702700000000000000003F136" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F137" data-uri="chapter02.xhtml#P700049702700000000000000003F137" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F138" data-uri="chapter02.xhtml#P700049702700000000000000003F138" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F139" data-uri="chapter02.xhtml#P700049702700000000000000003F139" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F13A" data-uri="chapter02.xhtml#P700049702700000000000000003F13A" class="calibre20 pcalibre pcalibre1">_____________</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F13B" data-uri="chapter02.xhtml#P700049702700000000000000003F13B" class="calibre20 pcalibre pcalibre1">[11000]</td>
<td id="P700049702700000000000000003F13C" data-uri="chapter02.xhtml#P700049702700000000000000003F13C" class="calibre20 pcalibre pcalibre1">[11000]</td>
<td id="P700049702700000000000000003F13D" data-uri="chapter02.xhtml#P700049702700000000000000003F13D" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F13E" data-uri="chapter02.xhtml#P700049702700000000000000003F13E" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F13F" data-uri="chapter02.xhtml#P700049702700000000000000003F13F" class="calibre20 pcalibre pcalibre1">_____________</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F140" data-uri="chapter02.xhtml#P700049702700000000000000003F140" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F141" data-uri="chapter02.xhtml#P700049702700000000000000003F141" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F142" data-uri="chapter02.xhtml#P700049702700000000000000003F142" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F143" data-uri="chapter02.xhtml#P700049702700000000000000003F143" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F144" data-uri="chapter02.xhtml#P700049702700000000000000003F144" class="calibre20 pcalibre pcalibre1">_____________</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F145" data-uri="chapter02.xhtml#P700049702700000000000000003F145" class="calibre20 pcalibre pcalibre1">[10111]</td>
<td id="P700049702700000000000000003F146" data-uri="chapter02.xhtml#P700049702700000000000000003F146" class="calibre20 pcalibre pcalibre1">[01000]</td>
<td id="P700049702700000000000000003F147" data-uri="chapter02.xhtml#P700049702700000000000000003F147" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F148" data-uri="chapter02.xhtml#P700049702700000000000000003F148" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F149" data-uri="chapter02.xhtml#P700049702700000000000000003F149" class="calibre20 pcalibre pcalibre1">_____________</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F14A" data-uri="chapter02.xhtml#P700049702700000000000000003F14A" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F14B" data-uri="chapter02.xhtml#P700049702700000000000000003F14B" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F14C" data-uri="chapter02.xhtml#P700049702700000000000000003F14C" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F14D" data-uri="chapter02.xhtml#P700049702700000000000000003F14D" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F14E" data-uri="chapter02.xhtml#P700049702700000000000000003F14E" class="calibre20 pcalibre pcalibre1">_____________</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F14F" data-uri="chapter02.xhtml#P700049702700000000000000003F14F" class="calibre20 pcalibre pcalibre1">[00010]</td>
<td id="P700049702700000000000000003F150" data-uri="chapter02.xhtml#P700049702700000000000000003F150" class="calibre20 pcalibre pcalibre1">[00101]</td>
<td id="P700049702700000000000000003F151" data-uri="chapter02.xhtml#P700049702700000000000000003F151" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F152" data-uri="chapter02.xhtml#P700049702700000000000000003F152" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F153" data-uri="chapter02.xhtml#P700049702700000000000000003F153" class="calibre20 pcalibre pcalibre1">_____________</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F154" data-uri="chapter02.xhtml#P700049702700000000000000003F154" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F155" data-uri="chapter02.xhtml#P700049702700000000000000003F155" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F156" data-uri="chapter02.xhtml#P700049702700000000000000003F156" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F157" data-uri="chapter02.xhtml#P700049702700000000000000003F157" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F158" data-uri="chapter02.xhtml#P700049702700000000000000003F158" class="calibre20 pcalibre pcalibre1">_____________</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F159" data-uri="chapter02.xhtml#P700049702700000000000000003F159" class="calibre20 pcalibre pcalibre1">[01100]</td>
<td id="P700049702700000000000000003F15A" data-uri="chapter02.xhtml#P700049702700000000000000003F15A" class="calibre20 pcalibre pcalibre1">[00100]</td>
<td id="P700049702700000000000000003F15B" data-uri="chapter02.xhtml#P700049702700000000000000003F15B" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F15C" data-uri="chapter02.xhtml#P700049702700000000000000003F15C" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F15D" data-uri="chapter02.xhtml#P700049702700000000000000003F15D" class="calibre20 pcalibre pcalibre1">_____________</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F15E" data-uri="chapter02.xhtml#P700049702700000000000000003F15E" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F15F" data-uri="chapter02.xhtml#P700049702700000000000000003F15F" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F160" data-uri="chapter02.xhtml#P700049702700000000000000003F160" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F161" data-uri="chapter02.xhtml#P700049702700000000000000003F161" class="calibre20 pcalibre pcalibre1">_____________</td>
<td id="P700049702700000000000000003F162" data-uri="chapter02.xhtml#P700049702700000000000000003F162" class="calibre20 pcalibre pcalibre1">_____________</td>
</tr>
</tbody>
</table></div></li></ol>
</section>
<section id="P7000497027000000000000000000DFF" data-uri="chapter02.xhtml#P7000497027000000000000000000DFF" epub:type="practice" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="title5 pcalibre pcalibre1" id="P700049702700000000000000003F163" data-uri="chapter02.xhtml#P700049702700000000000000003F163" epub:type="title"><span class="pcalibre label pcalibre1">Practice Problem </span><span class="pcalibre label pcalibre1">2.30</span> (solution page <a class="ulink pcalibre pcalibre4 pcalibre2 pcalibre3 pcalibre1" epub:type="pagebreak" href="fileP70004970270000000000000000017AE_split_001.xhtml#P7000497027000000000000000001B33">153</a>)</h1></header>
<ol class="practicelist pcalibre pcalibre1" id="P700049702700000000000000003F164" data-uri="chapter02.xhtml#P700049702700000000000000003F164">
<li class="general-problem pcalibre pcalibre1" id="P700049702700000000000000003F165" data-uri="chapter02.xhtml#P700049702700000000000000003F165">
<div class="edition pcalibre pcalibre1" id="P700049702700000000000000003F166" data-uri="chapter02.xhtml#P700049702700000000000000003F166"><p id="P700049702700000000000000003F167" data-uri="chapter02.xhtml#P700049702700000000000000003F167" class="pcalibre calibre3 pcalibre1">Write a function with the following prototype:</p>
<pre id="P700049702700000000000000003F168" data-uri="chapter02.xhtml#P700049702700000000000000003F168" class="calibre9 pcalibre pcalibre1"><code id="P700049702700000000000000003F169" data-uri="chapter02.xhtml#P700049702700000000000000003F169" class="calibre10 pcalibre pcalibre1">/* Determine whether arguments can be added without overflow */ int tadd_ok(int x, int y);</code></pre>
<p id="P700049702700000000000000003F16A" data-uri="chapter02.xhtml#P700049702700000000000000003F16A" class="pcalibre calibre3 pcalibre1">This function should return 1 if arguments <code id="P700049702700000000000000003F16B" data-uri="chapter02.xhtml#P700049702700000000000000003F16B" class="pcalibre1 calibre8 pcalibre">x</code> and <code id="P700049702700000000000000003F16C" data-uri="chapter02.xhtml#P700049702700000000000000003F16C" class="pcalibre1 calibre8 pcalibre">y</code> can be added without causing overflow.</p>
</div></li></ol>
</section>
<section id="P7000497027000000000000000000E0A" data-uri="chapter02.xhtml#P7000497027000000000000000000E0A" epub:type="practice" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="title5 pcalibre pcalibre1" id="P700049702700000000000000003F16D" data-uri="chapter02.xhtml#P700049702700000000000000003F16D" epub:type="title"><span class="pcalibre label pcalibre1">Practice Problem </span><span class="pcalibre label pcalibre1">2.31</span> (solution page <a class="ulink pcalibre pcalibre4 pcalibre2 pcalibre3 pcalibre1" epub:type="pagebreak" href="fileP70004970270000000000000000017AE_split_001.xhtml#P7000497027000000000000000001B33">153</a>)</h1></header>
<ol class="practicelist pcalibre pcalibre1" id="P700049702700000000000000003F16E" data-uri="chapter02.xhtml#P700049702700000000000000003F16E">
<li class="general-problem pcalibre pcalibre1" id="P700049702700000000000000003F16F" data-uri="chapter02.xhtml#P700049702700000000000000003F16F">
<div class="edition pcalibre pcalibre1" id="P700049702700000000000000003F170" data-uri="chapter02.xhtml#P700049702700000000000000003F170"><p id="P700049702700000000000000003F171" data-uri="chapter02.xhtml#P700049702700000000000000003F171" class="pcalibre calibre3 pcalibre1">Your coworker gets impatient with your analysis of the overflow conditions for two's-complement addition and presents you with the following implementation of <code id="P700049702700000000000000003F172" data-uri="chapter02.xhtml#P700049702700000000000000003F172" class="pcalibre1 calibre8 pcalibre">tadd_ok:</code></p>
<pre id="P700049702700000000000000003F173" data-uri="chapter02.xhtml#P700049702700000000000000003F173" class="calibre9 pcalibre pcalibre1">
<code id="P700049702700000000000000003F174" data-uri="chapter02.xhtml#P700049702700000000000000003F174" class="calibre10 pcalibre pcalibre1">/* Determine whether arguments can be added without overflow */
/* WARNING: This code is buggy. */
int tadd_ok(int x, int y) {
	int sum = x+y;
	return (sum-x == y) &amp;&amp; (sum-y == x);
}</code>
</pre>
<p id="P700049702700000000000000003F175" data-uri="chapter02.xhtml#P700049702700000000000000003F175" class="pcalibre calibre3 pcalibre1">You look at the code and laugh. Explain why.</p></div>
</li></ol>
</section>
<section id="P7000497027000000000000000000E14" data-uri="chapter02.xhtml#P7000497027000000000000000000E14" epub:type="practice" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="title5 pcalibre pcalibre1" id="P700049702700000000000000003F176" data-uri="chapter02.xhtml#P700049702700000000000000003F176" epub:type="title"><span class="pcalibre label pcalibre1">Practice Problem </span><span class="pcalibre label pcalibre1">2.32</span> (solution page <a class="ulink pcalibre pcalibre4 pcalibre2 pcalibre3 pcalibre1" epub:type="pagebreak" href="fileP70004970270000000000000000017AE_split_001.xhtml#P7000497027000000000000000001B33">153</a>)</h1></header>
<ol class="practicelist pcalibre pcalibre1" id="P700049702700000000000000003F177" data-uri="chapter02.xhtml#P700049702700000000000000003F177">
<li class="general-problem pcalibre pcalibre1" id="P700049702700000000000000003F178" data-uri="chapter02.xhtml#P700049702700000000000000003F178">
<div class="edition pcalibre pcalibre1" id="P700049702700000000000000003F179" data-uri="chapter02.xhtml#P700049702700000000000000003F179"><p id="P700049702700000000000000003F17A" data-uri="chapter02.xhtml#P700049702700000000000000003F17A" class="pcalibre calibre3 pcalibre1">You are assigned the task of writing code for a function <code id="P700049702700000000000000003F17B" data-uri="chapter02.xhtml#P700049702700000000000000003F17B" class="pcalibre1 calibre8 pcalibre">tsub_ok</code>, with arguments <code id="P700049702700000000000000003F17C" data-uri="chapter02.xhtml#P700049702700000000000000003F17C" class="pcalibre1 calibre8 pcalibre">x</code> and <code id="P700049702700000000000000003F17D" data-uri="chapter02.xhtml#P700049702700000000000000003F17D" class="pcalibre1 calibre8 pcalibre">y</code>, that will return 1 if computing <code id="P700049702700000000000000003F17E" data-uri="chapter02.xhtml#P700049702700000000000000003F17E" class="pcalibre1 calibre8 pcalibre">x-y</code> does not cause overflow. Having just written the code for <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP70004970270000000000000000017AE_split_001.xhtml#P7000497027000000000000000001B31"><span class="pcalibre label pcalibre1">Problem </span><span class="pcalibre label pcalibre1">2.30</span></a>, you write the following:</p>
<pre id="P700049702700000000000000003F17F" data-uri="chapter02.xhtml#P700049702700000000000000003F17F" class="calibre9 pcalibre pcalibre1"><code id="P700049702700000000000000003F180" data-uri="chapter02.xhtml#P700049702700000000000000003F180" class="calibre10 pcalibre pcalibre1">/* Determine whether arguments can be subtracted without overflow */</code>
<span class="pcalibre pagebreak pcalibre1" id="P7000497027000000000000000000E20" title="95" data-uri="chapter02.xhtml#P7000497027000000000000000000E20" epub:type="pagebreak"></span>
<code id="P700049702700000000000000003F181" data-uri="chapter02.xhtml#P700049702700000000000000003F181" class="calibre10 pcalibre pcalibre1">/* WARNING: This code is buggy. */
int tsub_ok(int x, int y) {
return tadd_ok(x, –y);
}</code></pre>
<p id="P700049702700000000000000003F182" data-uri="chapter02.xhtml#P700049702700000000000000003F182" class="pcalibre calibre3 pcalibre1">For what values of <code id="P700049702700000000000000003F183" data-uri="chapter02.xhtml#P700049702700000000000000003F183" class="pcalibre1 calibre8 pcalibre">x</code> and <code id="P700049702700000000000000003F184" data-uri="chapter02.xhtml#P700049702700000000000000003F184" class="pcalibre1 calibre8 pcalibre">y</code> will this function give incorrect results? Writing a correct version of this function is left as an exercise (<a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000001498.xhtml#P70004970270000000000000000015C7"><span class="pcalibre label pcalibre1">Problem </span><span class="pcalibre label pcalibre1">2.74</span></a>).</p>
</div></li></ol></section>
</section>
<section id="P7000497027000000000000000000E25" data-uri="chapter02.xhtml#P7000497027000000000000000000E25" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title1 pcalibre1" id="P700049702700000000000000003F185" data-uri="chapter02.xhtml#P700049702700000000000000003F185" epub:type="title"><span class="pcalibre label pcalibre1">2.3.3 </span>Two's-Complement Negation</h1></header>
<p id="P700049702700000000000000003F186" data-uri="chapter02.xhtml#P700049702700000000000000003F186" class="pcalibre1 pcalibre calibre2">We can see that every number <var class="calibre5 pcalibre pcalibre1">x</var> in the range <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="187" altimg-height="20" altimg="../images/ch02-new77.png"><m:mrow><m:mi>T</m:mi><m:mi>M</m:mi><m:mi>i</m:mi><m:msub><m:mi>n</m:mi><m:mi>w</m:mi></m:msub><m:mo>≤</m:mo><m:mi>x</m:mi><m:mo>≤</m:mo><m:mi>T</m:mi><m:mi>M</m:mi><m:mi>a</m:mi><m:msub><m:mi>x</m:mi><m:mi>w</m:mi></m:msub></m:mrow></m:math> </span>has an additive inverse under <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="22" altimg-height="24" altimg="../images/ch02-eq89.png"><m:mrow><m:msubsup><m:mo>−</m:mo><m:mi>w</m:mi><m:mtext>t</m:mtext></m:msubsup><m:mtext> </m:mtext></m:mrow></m:math></span>, which we denote <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="37" altimg-height="24" altimg="../images/ch02-eq90.png"><m:mrow><m:msubsup><m:mo>−</m:mo><m:mi>w</m:mi><m:mtext>t</m:mtext></m:msubsup><m:mtext> </m:mtext><m:mi>x</m:mi></m:mrow></m:math> </span>as follows:</p>
<section class="feature pcalibre pcalibre1" id="P700049702700000000000000003F187" data-uri="chapter02.xhtml#P700049702700000000000000003F187"><header class="calibre61 pcalibre pcalibre1"><h1 class="pcalibre1 pcalibre title8" id="P700049702700000000000000003F188" data-uri="chapter02.xhtml#P700049702700000000000000003F188" epub:type="title"><span class="pcalibre label pcalibre1">Principle: </span></h1></header>
<p id="P700049702700000000000000003F189" data-uri="chapter02.xhtml#P700049702700000000000000003F189" class="pcalibre1 pcalibre calibre2">Two's-complement negation</p>
<p id="P700049702700000000000000003F18A" data-uri="chapter02.xhtml#P700049702700000000000000003F18A" class="pcalibre1 pcalibre calibre2">For <var class="calibre5 pcalibre pcalibre1">x</var> in the range <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="188" altimg-height="20" altimg="../images/ch02-new78.png"><m:mrow><m:mi>T</m:mi><m:mi>M</m:mi><m:mi>i</m:mi><m:msub><m:mi>n</m:mi><m:mi>w</m:mi></m:msub><m:mo>≤</m:mo><m:mi>x</m:mi><m:mo>≤</m:mo><m:mi>T</m:mi><m:mi>M</m:mi><m:mi>a</m:mi><m:msub><m:mi>x</m:mi><m:mi>w</m:mi></m:msub></m:mrow></m:math></span>, its two's-complement negation <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="37" altimg-height="23" altimg="../images/ch02-eq91.png"><m:mrow><m:msubsup><m:mo>−</m:mo><m:mi>w</m:mi><m:mtext>t</m:mtext></m:msubsup><m:mtext> </m:mtext><m:mi>x</m:mi></m:mrow></m:math> </span>is given by the formula</p>
<div class="informalequation pcalibre pcalibre1" id="P7000497027000000000000000000E2C" data-uri="chapter02.xhtml#P7000497027000000000000000000E2C"><m:math display="block" alttext="" data-uri="" altimg-width="271" altimg-height="51" altimg="../images/ch02-eq92.png"><m:mrow><m:msubsup><m:mo>−</m:mo><m:mi>w</m:mi><m:mi>t</m:mi></m:msubsup><m:mi>x</m:mi><m:mo>=</m:mo><m:mrow><m:mo>{</m:mo><m:mrow><m:mtable columnalign="left"><m:mtr columnalign="left"><m:mtd columnalign="left"><m:mrow><m:mi>T</m:mi><m:mi>M</m:mi><m:mi>i</m:mi><m:msub><m:mi>n</m:mi><m:mi>w</m:mi></m:msub><m:mo>,</m:mo></m:mrow></m:mtd><m:mtd columnalign="left"><m:mrow><m:mi>x</m:mi><m:mo>=</m:mo><m:mi>T</m:mi><m:mi>M</m:mi><m:mi>i</m:mi><m:msub><m:mi>n</m:mi><m:mi>w</m:mi></m:msub></m:mrow></m:mtd></m:mtr><m:mtr columnalign="left"><m:mtd columnalign="left"><m:mrow><m:mo>−</m:mo><m:mi>x</m:mi></m:mrow></m:mtd><m:mtd columnalign="left"><m:mrow><m:mi>x</m:mi><m:mo>&gt;</m:mo><m:mi>T</m:mi><m:mi>M</m:mi><m:mi>i</m:mi><m:msub><m:mi>n</m:mi><m:mi>w</m:mi></m:msub></m:mrow></m:mtd></m:mtr></m:mtable></m:mrow></m:mrow></m:mrow></m:math>
<span class="number3 pcalibre pcalibre1">(2.15)</span>
</div>
<p id="P700049702700000000000000003F18B" data-uri="chapter02.xhtml#P700049702700000000000000003F18B" class="pcalibre1 pcalibre calibre2">That is, for <var class="calibre5 pcalibre pcalibre1">w</var>-bit, two's-complement addition, <i class="calibre5 pcalibre pcalibre1">TMin<sub class="pcalibre1 calibre47 pcalibre">w</sub></i> is its own additive in-verse, while any other value <var class="calibre5 pcalibre pcalibre1">x</var> has –<var class="calibre5 pcalibre pcalibre1">x</var> as its additive inverse.</p>
</section>
<section class="feature pcalibre pcalibre1" id="P700049702700000000000000003F18C" data-uri="chapter02.xhtml#P700049702700000000000000003F18C"><header class="calibre61 pcalibre pcalibre1"><h1 class="pcalibre1 pcalibre title8" id="P700049702700000000000000003F18D" data-uri="chapter02.xhtml#P700049702700000000000000003F18D" epub:type="title"><span class="pcalibre label pcalibre1">Derivation: </span></h1></header>
<p id="P700049702700000000000000003F18E" data-uri="chapter02.xhtml#P700049702700000000000000003F18E" class="pcalibre1 pcalibre calibre2">Two's-complement negation</p>
<p id="P700049702700000000000000003F18F" data-uri="chapter02.xhtml#P700049702700000000000000003F18F" class="pcalibre1 pcalibre calibre2">Observe that <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="382" altimg-height="24" altimg="../images/ch02-new79.png"><m:mrow><m:mi>T</m:mi><m:mi>M</m:mi><m:mi>i</m:mi><m:msub><m:mi>n</m:mi><m:mi>w</m:mi></m:msub><m:mo>+</m:mo><m:mi>T</m:mi><m:mi>M</m:mi><m:mi>i</m:mi><m:msub><m:mi>n</m:mi><m:mi>w</m:mi></m:msub><m:mo>=</m:mo><m:mo>−</m:mo><m:mn>2</m:mn><m:mi>ω</m:mi><m:mo>−</m:mo><m:mn>1</m:mn><m:mo>+</m:mo><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msup><m:mo>=</m:mo><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup></m:mrow></m:math></span>. This would cause negative overflow, and hence <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="309" altimg-height="23" altimg="../images/ch02-eq93.png"><m:mrow><m:mi>T</m:mi><m:mi>M</m:mi><m:mi>i</m:mi><m:msub><m:mi>n</m:mi><m:mi>w</m:mi></m:msub><m:mtext> </m:mtext><m:msubsup><m:mo>+</m:mo><m:mi>w</m:mi><m:mtext>t</m:mtext></m:msubsup><m:mtext> </m:mtext><m:mi>T</m:mi><m:mi>M</m:mi><m:mi>i</m:mi><m:msub><m:mi>n</m:mi><m:mi>w</m:mi></m:msub><m:mtext> </m:mtext><m:mo>=</m:mo><m:mtext> </m:mtext><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>+</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>=</m:mo><m:mn>0</m:mn></m:mrow></m:math></span>. For values of <var class="calibre5 pcalibre pcalibre1">x</var> such that <var class="calibre5 pcalibre pcalibre1">x</var> &gt; <i class="calibre5 pcalibre pcalibre1">TMin<sub class="pcalibre1 calibre47 pcalibre">w</sub></i>, the value –<var class="calibre5 pcalibre pcalibre1">x</var> can also be represented as a <var class="calibre5 pcalibre pcalibre1">w</var>-bit, two's-complement number, and their sum will be –<var class="calibre5 pcalibre pcalibre1">x</var> + <var class="calibre5 pcalibre pcalibre1">x</var> = 0.</p>
</section>
<section id="P7000497027000000000000000000E32" data-uri="chapter02.xhtml#P7000497027000000000000000000E32" epub:type="practice" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="title5 pcalibre pcalibre1" id="P700049702700000000000000003F190" data-uri="chapter02.xhtml#P700049702700000000000000003F190" epub:type="title"><span class="pcalibre label pcalibre1">Practice Problem </span><span class="pcalibre label pcalibre1">2.33</span> (solution page <a class="ulink pcalibre pcalibre4 pcalibre2 pcalibre3 pcalibre1" epub:type="pagebreak" href="fileP70004970270000000000000000017AE_split_001.xhtml#P7000497027000000000000000001B33">153</a>)</h1></header>
<ol class="practicelist pcalibre pcalibre1" id="P700049702700000000000000003F191" data-uri="chapter02.xhtml#P700049702700000000000000003F191">
<li class="general-problem pcalibre pcalibre1" id="P700049702700000000000000003F192" data-uri="chapter02.xhtml#P700049702700000000000000003F192">
<div class="edition pcalibre pcalibre1" id="P700049702700000000000000003F193" data-uri="chapter02.xhtml#P700049702700000000000000003F193"><p id="P700049702700000000000000003F194" data-uri="chapter02.xhtml#P700049702700000000000000003F194" class="pcalibre calibre3 pcalibre1">We can represent a bit pattern of length <var class="calibre5 pcalibre pcalibre1">w</var> = 4 with a single hex digit. For a two's-complement interpretation of these digits, fill in the following table to determine the additive inverses of the digits shown:</p>
<table class="informaltable pcalibre pcalibre1" id="P700049702700000000000000003F195" data-uri="chapter02.xhtml#P700049702700000000000000003F195">
<thead class="pcalibre1 pcalibre calibre16">
<tr class="pcalibre calibre17 pcalibre1">
<th colspan="2" id="P700049702700000000000000003F196" data-uri="chapter02.xhtml#P700049702700000000000000003F196" class="calibre18 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">x</var></th>
<th colspan="2" id="P700049702700000000000000003F197" data-uri="chapter02.xhtml#P700049702700000000000000003F197" class="calibre18 pcalibre pcalibre1"><span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="31" altimg-height="22" altimg="../images/ch02-eq94.png"><m:mrow><m:msubsup><m:mo>−</m:mo><m:mn>4</m:mn><m:mtext>t</m:mtext></m:msubsup><m:mtext> </m:mtext><m:mi>x</m:mi></m:mrow></m:math></span></th>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<th id="P700049702700000000000000003F198" data-uri="chapter02.xhtml#P700049702700000000000000003F198" class="calibre18 pcalibre pcalibre1">Hex</th>
<th id="P700049702700000000000000003F199" data-uri="chapter02.xhtml#P700049702700000000000000003F199" class="calibre18 pcalibre pcalibre1">Decimal</th>
<th id="P700049702700000000000000003F19A" data-uri="chapter02.xhtml#P700049702700000000000000003F19A" class="calibre18 pcalibre pcalibre1">Decimal</th>
<th id="P700049702700000000000000003F19B" data-uri="chapter02.xhtml#P700049702700000000000000003F19B" class="calibre18 pcalibre pcalibre1">Hex</th>
</tr>
</thead>
<tbody class="calibre19 pcalibre pcalibre1">
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F19C" data-uri="chapter02.xhtml#P700049702700000000000000003F19C" class="calibre20 pcalibre pcalibre1">0</td>
<td id="P700049702700000000000000003F19D" data-uri="chapter02.xhtml#P700049702700000000000000003F19D" class="calibre20 pcalibre pcalibre1">_________________</td>
<td id="P700049702700000000000000003F19E" data-uri="chapter02.xhtml#P700049702700000000000000003F19E" class="calibre20 pcalibre pcalibre1">_________________</td>
<td id="P700049702700000000000000003F19F" data-uri="chapter02.xhtml#P700049702700000000000000003F19F" class="calibre20 pcalibre pcalibre1">_________________</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F1A0" data-uri="chapter02.xhtml#P700049702700000000000000003F1A0" class="calibre20 pcalibre pcalibre1">5</td>
<td id="P700049702700000000000000003F1A1" data-uri="chapter02.xhtml#P700049702700000000000000003F1A1" class="calibre20 pcalibre pcalibre1">_________________</td>
<td id="P700049702700000000000000003F1A2" data-uri="chapter02.xhtml#P700049702700000000000000003F1A2" class="calibre20 pcalibre pcalibre1">_________________</td>
<td id="P700049702700000000000000003F1A3" data-uri="chapter02.xhtml#P700049702700000000000000003F1A3" class="calibre20 pcalibre pcalibre1">_________________</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F1A4" data-uri="chapter02.xhtml#P700049702700000000000000003F1A4" class="calibre20 pcalibre pcalibre1">8</td>
<td id="P700049702700000000000000003F1A5" data-uri="chapter02.xhtml#P700049702700000000000000003F1A5" class="calibre20 pcalibre pcalibre1">_________________</td>
<td id="P700049702700000000000000003F1A6" data-uri="chapter02.xhtml#P700049702700000000000000003F1A6" class="calibre20 pcalibre pcalibre1">_________________</td>
<td id="P700049702700000000000000003F1A7" data-uri="chapter02.xhtml#P700049702700000000000000003F1A7" class="calibre20 pcalibre pcalibre1">_________________</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F1A8" data-uri="chapter02.xhtml#P700049702700000000000000003F1A8" class="calibre20 pcalibre pcalibre1">D</td>
<td id="P700049702700000000000000003F1A9" data-uri="chapter02.xhtml#P700049702700000000000000003F1A9" class="calibre20 pcalibre pcalibre1">_________________</td>
<td id="P700049702700000000000000003F1AA" data-uri="chapter02.xhtml#P700049702700000000000000003F1AA" class="calibre20 pcalibre pcalibre1">_________________</td>
<td id="P700049702700000000000000003F1AB" data-uri="chapter02.xhtml#P700049702700000000000000003F1AB" class="calibre20 pcalibre pcalibre1">_________________</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F1AC" data-uri="chapter02.xhtml#P700049702700000000000000003F1AC" class="calibre20 pcalibre pcalibre1">F</td>
<td id="P700049702700000000000000003F1AD" data-uri="chapter02.xhtml#P700049702700000000000000003F1AD" class="calibre20 pcalibre pcalibre1">_________________</td>
<td id="P700049702700000000000000003F1AE" data-uri="chapter02.xhtml#P700049702700000000000000003F1AE" class="calibre20 pcalibre pcalibre1">_________________</td>
<td id="P700049702700000000000000003F1AF" data-uri="chapter02.xhtml#P700049702700000000000000003F1AF" class="calibre20 pcalibre pcalibre1">_________________</td>
</tr>
</tbody>
</table>
<p id="P700049702700000000000000003F1B0" data-uri="chapter02.xhtml#P700049702700000000000000003F1B0" class="pcalibre calibre3 pcalibre1">What do you observe about the bit patterns generated by two's-complement and unsigned (<a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP7000497027000000000000000000CB3_split_000.xhtml#P7000497027000000000000000000D25"><span class="pcalibre label pcalibre1">Problem </span><span class="pcalibre label pcalibre1">2.28</span></a>) negation?</p>
</div></li></ol>
</section>
<aside class="sidebar pcalibre5 pcalibre" id="P7000497027000000000000000000E54" data-uri="chapter02.xhtml#P7000497027000000000000000000E54"><header class="pcalibre halftitlepage pcalibre1"><h1 class="pcalibre1 title2 pcalibre" id="P700049702700000000000000003F1B1" data-uri="chapter02.xhtml#P700049702700000000000000003F1B1" epub:type="title"><span class="pcalibre pagebreak pcalibre1" id="P7000497027000000000000000000E56" title="96" data-uri="chapter02.xhtml#P7000497027000000000000000000E56" epub:type="pagebreak"></span><span class="pcalibre label1 pcalibre1">Web Aside DATA:TNEG </span>it-level representation of two's-complement negation</h1></header>
<p id="P700049702700000000000000003F1B2" data-uri="chapter02.xhtml#P700049702700000000000000003F1B2" class="calibre13 pcalibre pcalibre1">There are several clever ways to determine the two's-complement negation of a value represented at the bit level. The following two techniques are both useful, such as when one encounters the value <code id="P700049702700000000000000003F1B3" data-uri="chapter02.xhtml#P700049702700000000000000003F1B3" class="pcalibre1 calibre8 pcalibre">0xfffffffa</code> when debugging a program, and they lend insight into the nature of the two's-complement representation.</p>
<p id="P700049702700000000000000003F1B4" data-uri="chapter02.xhtml#P700049702700000000000000003F1B4" class="calibre13 pcalibre pcalibre1">One technique for performing two's-complement negation at the bit level is to complement the bits and then increment the result. In C, we can state that for any integer value x, computing the expressions <code id="P700049702700000000000000003F1B5" data-uri="chapter02.xhtml#P700049702700000000000000003F1B5" class="pcalibre1 calibre8 pcalibre">–x</code> and <code id="P700049702700000000000000003F1B6" data-uri="chapter02.xhtml#P700049702700000000000000003F1B6" class="pcalibre1 calibre8 pcalibre">~x + 1</code> will give identical results.</p>
<p id="P700049702700000000000000003F1B7" data-uri="chapter02.xhtml#P700049702700000000000000003F1B7" class="calibre13 pcalibre pcalibre1">Here are some examples with a 4-bit word size:</p>
<table class="informaltable pcalibre pcalibre1" id="P700049702700000000000000003F1B8" data-uri="chapter02.xhtml#P700049702700000000000000003F1B8">
<thead class="pcalibre1 pcalibre calibre16">
<tr class="pcalibre calibre17 pcalibre1">
<th colspan="2" id="P700049702700000000000000003F1B9" data-uri="chapter02.xhtml#P700049702700000000000000003F1B9" class="calibre18 pcalibre pcalibre1"><span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="11" altimg-height="16" altimg="../images/ch02-eq95.png"><m:mover accent="true"><m:mi>x</m:mi><m:mo>→</m:mo></m:mover></m:math></span></th>
<th colspan="2" id="P700049702700000000000000003F1BA" data-uri="chapter02.xhtml#P700049702700000000000000003F1BA" class="calibre18 pcalibre pcalibre1"><span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="20" altimg-height="16" altimg="../images/ch02-eq96.png"><m:mrow><m:mo>~</m:mo><m:mover accent="true"><m:mi>x</m:mi><m:mo>→</m:mo></m:mover></m:mrow></m:math></span></th>
<th colspan="2" id="P700049702700000000000000003F1BB" data-uri="chapter02.xhtml#P700049702700000000000000003F1BB" class="calibre18 pcalibre pcalibre1"><span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="66" altimg-height="20" altimg="../images/ch02-eq97.png"><m:mrow><m:mi>i</m:mi><m:mi>n</m:mi><m:mi>c</m:mi><m:mi>r</m:mi><m:mrow><m:mo>(</m:mo><m:mrow><m:mo>~</m:mo><m:mover accent="true"><m:mi>x</m:mi><m:mo>→</m:mo></m:mover></m:mrow><m:mo>)</m:mo></m:mrow></m:mrow></m:math></span></th>
</tr>
</thead>
<tbody class="calibre19 pcalibre pcalibre1">
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F1BC" data-uri="chapter02.xhtml#P700049702700000000000000003F1BC" class="calibre20 pcalibre pcalibre1">[0101]</td>
<td id="P700049702700000000000000003F1BD" data-uri="chapter02.xhtml#P700049702700000000000000003F1BD" class="calibre20 pcalibre pcalibre1">5</td>
<td id="P700049702700000000000000003F1BE" data-uri="chapter02.xhtml#P700049702700000000000000003F1BE" class="calibre20 pcalibre pcalibre1">[1010]</td>
<td id="P700049702700000000000000003F1BF" data-uri="chapter02.xhtml#P700049702700000000000000003F1BF" class="calibre20 pcalibre pcalibre1">–6</td>
<td id="P700049702700000000000000003F1C0" data-uri="chapter02.xhtml#P700049702700000000000000003F1C0" class="calibre20 pcalibre pcalibre1">[1011]</td>
<td id="P700049702700000000000000003F1C1" data-uri="chapter02.xhtml#P700049702700000000000000003F1C1" class="calibre20 pcalibre pcalibre1">–5</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F1C2" data-uri="chapter02.xhtml#P700049702700000000000000003F1C2" class="calibre20 pcalibre pcalibre1">[0111]</td>
<td id="P700049702700000000000000003F1C3" data-uri="chapter02.xhtml#P700049702700000000000000003F1C3" class="calibre20 pcalibre pcalibre1">7</td>
<td id="P700049702700000000000000003F1C4" data-uri="chapter02.xhtml#P700049702700000000000000003F1C4" class="calibre20 pcalibre pcalibre1">[1000]</td>
<td id="P700049702700000000000000003F1C5" data-uri="chapter02.xhtml#P700049702700000000000000003F1C5" class="calibre20 pcalibre pcalibre1">–8</td>
<td id="P700049702700000000000000003F1C6" data-uri="chapter02.xhtml#P700049702700000000000000003F1C6" class="calibre20 pcalibre pcalibre1">[1001]</td>
<td id="P700049702700000000000000003F1C7" data-uri="chapter02.xhtml#P700049702700000000000000003F1C7" class="calibre20 pcalibre pcalibre1">–7</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F1C8" data-uri="chapter02.xhtml#P700049702700000000000000003F1C8" class="calibre20 pcalibre pcalibre1">[1100]</td>
<td id="P700049702700000000000000003F1C9" data-uri="chapter02.xhtml#P700049702700000000000000003F1C9" class="calibre20 pcalibre pcalibre1">–4</td>
<td id="P700049702700000000000000003F1CA" data-uri="chapter02.xhtml#P700049702700000000000000003F1CA" class="calibre20 pcalibre pcalibre1">[0011]</td>
<td id="P700049702700000000000000003F1CB" data-uri="chapter02.xhtml#P700049702700000000000000003F1CB" class="calibre20 pcalibre pcalibre1">3</td>
<td id="P700049702700000000000000003F1CC" data-uri="chapter02.xhtml#P700049702700000000000000003F1CC" class="calibre20 pcalibre pcalibre1">[0100]</td>
<td id="P700049702700000000000000003F1CD" data-uri="chapter02.xhtml#P700049702700000000000000003F1CD" class="calibre20 pcalibre pcalibre1">4</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F1CE" data-uri="chapter02.xhtml#P700049702700000000000000003F1CE" class="calibre20 pcalibre pcalibre1">[0000]</td>
<td id="P700049702700000000000000003F1CF" data-uri="chapter02.xhtml#P700049702700000000000000003F1CF" class="calibre20 pcalibre pcalibre1">0</td>
<td id="P700049702700000000000000003F1D0" data-uri="chapter02.xhtml#P700049702700000000000000003F1D0" class="calibre20 pcalibre pcalibre1">[1111]</td>
<td id="P700049702700000000000000003F1D1" data-uri="chapter02.xhtml#P700049702700000000000000003F1D1" class="calibre20 pcalibre pcalibre1">–1</td>
<td id="P700049702700000000000000003F1D2" data-uri="chapter02.xhtml#P700049702700000000000000003F1D2" class="calibre20 pcalibre pcalibre1">[0000]</td>
<td id="P700049702700000000000000003F1D3" data-uri="chapter02.xhtml#P700049702700000000000000003F1D3" class="calibre20 pcalibre pcalibre1">0</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F1D4" data-uri="chapter02.xhtml#P700049702700000000000000003F1D4" class="calibre20 pcalibre pcalibre1">[1000]</td>
<td id="P700049702700000000000000003F1D5" data-uri="chapter02.xhtml#P700049702700000000000000003F1D5" class="calibre20 pcalibre pcalibre1">–8</td>
<td id="P700049702700000000000000003F1D6" data-uri="chapter02.xhtml#P700049702700000000000000003F1D6" class="calibre20 pcalibre pcalibre1">[0111]</td>
<td id="P700049702700000000000000003F1D7" data-uri="chapter02.xhtml#P700049702700000000000000003F1D7" class="calibre20 pcalibre pcalibre1">7</td>
<td id="P700049702700000000000000003F1D8" data-uri="chapter02.xhtml#P700049702700000000000000003F1D8" class="calibre20 pcalibre pcalibre1">[1000]</td>
<td id="P700049702700000000000000003F1D9" data-uri="chapter02.xhtml#P700049702700000000000000003F1D9" class="calibre20 pcalibre pcalibre1">–8</td>
</tr>
</tbody>
</table>
<p id="P700049702700000000000000003F1DA" data-uri="chapter02.xhtml#P700049702700000000000000003F1DA" class="calibre13 pcalibre pcalibre1">For our earlier example, we know that the complement of <code id="P700049702700000000000000003F1DB" data-uri="chapter02.xhtml#P700049702700000000000000003F1DB" class="pcalibre1 calibre8 pcalibre">0xf</code> is <code id="P700049702700000000000000003F1DC" data-uri="chapter02.xhtml#P700049702700000000000000003F1DC" class="pcalibre1 calibre8 pcalibre">0x0</code> and the complement of <code id="P700049702700000000000000003F1DD" data-uri="chapter02.xhtml#P700049702700000000000000003F1DD" class="pcalibre1 calibre8 pcalibre">0xa</code> is <code id="P700049702700000000000000003F1DE" data-uri="chapter02.xhtml#P700049702700000000000000003F1DE" class="pcalibre1 calibre8 pcalibre">0x5</code>, and so <code id="P700049702700000000000000003F1DF" data-uri="chapter02.xhtml#P700049702700000000000000003F1DF" class="pcalibre1 calibre8 pcalibre">0xfffffffa</code> is the two's-complement representation of –6.</p>
<p id="P700049702700000000000000003F1E0" data-uri="chapter02.xhtml#P700049702700000000000000003F1E0" class="calibre13 pcalibre pcalibre1">A second way to perform two's-complement negation of a number <var class="calibre5 pcalibre pcalibre1">x</var> is based on splitting the bit vector into two parts. Let <var class="calibre5 pcalibre pcalibre1">k</var> be the position of the rightmost 1, so the bit-level representation of <var class="calibre5 pcalibre pcalibre1">x</var> has the form <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="280" altimg-height="21" altimg="../images/ch02-new80.png"><m:mrow><m:mrow><m:mo>[</m:mo><m:mrow><m:msub><m:mi>x</m:mi><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msub><m:mo>,</m:mo><m:msub><m:mi>x</m:mi><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>2</m:mn></m:mrow></m:msub><m:mo>,</m:mo><m:mo>…</m:mo><m:mo>,</m:mo><m:msub><m:mi>x</m:mi><m:mrow><m:mi>k</m:mi><m:mo>+</m:mo><m:mn>1</m:mn></m:mrow></m:msub><m:mo>,</m:mo><m:mn>1</m:mn><m:mo>,</m:mo><m:mn>0</m:mn><m:mo>,</m:mo><m:mo>…</m:mo><m:mn>0</m:mn></m:mrow><m:mo>]</m:mo></m:mrow></m:mrow></m:math></span>. (This is possible as long as <var class="calibre5 pcalibre pcalibre1">x</var> ≠ 0.) The negation is then written in binary form as <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="317" altimg-height="21" altimg="../images/ch02-new81.png"><m:mrow><m:mrow><m:mo>[</m:mo><m:mrow><m:mo>∼</m:mo><m:msub><m:mi>x</m:mi><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:msub><m:mo>,</m:mo><m:mo>∼</m:mo><m:msub><m:mi>x</m:mi><m:mrow><m:mi>w</m:mi><m:mo>−</m:mo><m:mn>2</m:mn></m:mrow></m:msub><m:mo>,</m:mo><m:mo>…</m:mo><m:mo>∼</m:mo><m:msub><m:mi>x</m:mi><m:mrow><m:mi>k</m:mi><m:mo>+</m:mo><m:mn>1</m:mn></m:mrow></m:msub><m:mo>,</m:mo><m:mn>1</m:mn><m:mo>,</m:mo><m:mn>0</m:mn><m:mo>,</m:mo><m:mo>…</m:mo><m:mo>,</m:mo><m:mn>0</m:mn></m:mrow><m:mo>]</m:mo></m:mrow></m:mrow></m:math></span>. That is, we complement each bit to the left of bit position <var class="calibre5 pcalibre pcalibre1">k</var>.</p>
<p id="P700049702700000000000000003F1E1" data-uri="chapter02.xhtml#P700049702700000000000000003F1E1" class="calibre13 pcalibre pcalibre1">We illustrate this idea with some 4-bit numbers, where we highlight the rightmost pattern 1, 0, ..., 0 in italics:</p>
<table class="informaltable pcalibre pcalibre1" id="P700049702700000000000000003F1E2" data-uri="chapter02.xhtml#P700049702700000000000000003F1E2">
<thead class="pcalibre1 pcalibre calibre16">
<tr class="pcalibre calibre17 pcalibre1">
<th colspan="2" id="P700049702700000000000000003F1E3" data-uri="chapter02.xhtml#P700049702700000000000000003F1E3" class="calibre18 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">x</var></th>
<th colspan="2" id="P700049702700000000000000003F1E4" data-uri="chapter02.xhtml#P700049702700000000000000003F1E4" class="calibre18 pcalibre pcalibre1">–<var class="calibre5 pcalibre pcalibre1">x</var></th>
</tr>
</thead>
<tbody class="calibre19 pcalibre pcalibre1">
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F1E5" data-uri="chapter02.xhtml#P700049702700000000000000003F1E5" class="calibre20 pcalibre pcalibre1">[1<i class="calibre5 pcalibre pcalibre1">100</i>]</td>
<td id="P700049702700000000000000003F1E6" data-uri="chapter02.xhtml#P700049702700000000000000003F1E6" class="calibre20 pcalibre pcalibre1">–4</td>
<td id="P700049702700000000000000003F1E7" data-uri="chapter02.xhtml#P700049702700000000000000003F1E7" class="calibre20 pcalibre pcalibre1">[0<i class="calibre5 pcalibre pcalibre1">100</i>]</td>
<td id="P700049702700000000000000003F1E8" data-uri="chapter02.xhtml#P700049702700000000000000003F1E8" class="calibre20 pcalibre pcalibre1">4</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F1E9" data-uri="chapter02.xhtml#P700049702700000000000000003F1E9" class="calibre20 pcalibre pcalibre1">[<i class="calibre5 pcalibre pcalibre1">1000</i>]</td>
<td id="P700049702700000000000000003F1EA" data-uri="chapter02.xhtml#P700049702700000000000000003F1EA" class="calibre20 pcalibre pcalibre1">–8</td>
<td id="P700049702700000000000000003F1EB" data-uri="chapter02.xhtml#P700049702700000000000000003F1EB" class="calibre20 pcalibre pcalibre1">[<i class="calibre5 pcalibre pcalibre1">1000</i>]</td>
<td id="P700049702700000000000000003F1EC" data-uri="chapter02.xhtml#P700049702700000000000000003F1EC" class="calibre20 pcalibre pcalibre1">–8</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F1ED" data-uri="chapter02.xhtml#P700049702700000000000000003F1ED" class="calibre20 pcalibre pcalibre1">[010<i class="calibre5 pcalibre pcalibre1">1</i>]</td>
<td id="P700049702700000000000000003F1EE" data-uri="chapter02.xhtml#P700049702700000000000000003F1EE" class="calibre20 pcalibre pcalibre1">5</td>
<td id="P700049702700000000000000003F1EF" data-uri="chapter02.xhtml#P700049702700000000000000003F1EF" class="calibre20 pcalibre pcalibre1">[101<i class="calibre5 pcalibre pcalibre1">1</i>]</td>
<td id="P700049702700000000000000003F1F0" data-uri="chapter02.xhtml#P700049702700000000000000003F1F0" class="calibre20 pcalibre pcalibre1">–5</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P700049702700000000000000003F1F1" data-uri="chapter02.xhtml#P700049702700000000000000003F1F1" class="calibre20 pcalibre pcalibre1">[011<i class="calibre5 pcalibre pcalibre1">1</i>]</td>
<td id="P700049702700000000000000003F1F2" data-uri="chapter02.xhtml#P700049702700000000000000003F1F2" class="calibre20 pcalibre pcalibre1">7</td>
<td id="P700049702700000000000000003F1F3" data-uri="chapter02.xhtml#P700049702700000000000000003F1F3" class="calibre20 pcalibre pcalibre1">[100<i class="calibre5 pcalibre pcalibre1">1</i>]</td>
<td id="P700049702700000000000000003F1F4" data-uri="chapter02.xhtml#P700049702700000000000000003F1F4" class="calibre20 pcalibre pcalibre1">–7</td>
</tr>
</tbody>
</table>
</aside>
</section>
<section id="P7000497027000000000000000000E9A" data-uri="chapter02.xhtml#P7000497027000000000000000000E9A" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title1 pcalibre1" id="P700049702700000000000000003F1F5" data-uri="chapter02.xhtml#P700049702700000000000000003F1F5" epub:type="title"><span class="pcalibre label pcalibre1">2.3.4 </span>Unsigned Multiplication</h1></header>
<p id="P700049702700000000000000003F1F6" data-uri="chapter02.xhtml#P700049702700000000000000003F1F6" class="pcalibre1 pcalibre calibre2">Integers <var class="calibre5 pcalibre pcalibre1">x</var> and <var class="calibre5 pcalibre pcalibre1">y</var> in the range <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="153" altimg-height="20" altimg="../images/ch02-new82.png"><m:mrow><m:mn>0</m:mn><m:mo>≤</m:mo><m:mi>x</m:mi><m:mo>,</m:mo><m:mi>y</m:mi><m:mo>≤</m:mo><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow></m:math> </span>can be represented as <var class="calibre5 pcalibre pcalibre1">w</var>-bit unsigned numbers, but their product <var class="calibre5 pcalibre pcalibre1">x</var> · <var class="calibre5 pcalibre pcalibre1">y</var> can range between 0 and <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="243" altimg-height="24" altimg="../images/ch02-new83.png"><m:mrow><m:msup><m:mrow><m:mrow><m:mo>(</m:mo><m:mrow><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup><m:mo>−</m:mo><m:mn>1</m:mn></m:mrow><m:mo>)</m:mo></m:mrow></m:mrow><m:mn>2</m:mn></m:msup><m:mo>=</m:mo><m:msup><m:mn>2</m:mn><m:mrow><m:mn>2</m:mn><m:mi>w</m:mi></m:mrow></m:msup><m:mo>−</m:mo><m:msup><m:mn>2</m:mn><m:mrow><m:mi>w</m:mi><m:mo>+</m:mo><m:mn>1</m:mn></m:mrow></m:msup><m:mo>+</m:mo><m:mn>1</m:mn></m:mrow></m:math></span>. This could require as many as 2<var class="calibre5 pcalibre pcalibre1">w</var> bits to represent. Instead, unsigned multiplication in C is defined to yield the <var class="calibre5 pcalibre pcalibre1">w</var>-bit value given by the low-order <var class="calibre5 pcalibre pcalibre1">w</var> bits of the 2<var class="calibre5 pcalibre pcalibre1">w</var>-bit integer product. Let us denote this value as <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="55" altimg-height="22" altimg="../images/ch02-eq98.png"><m:mrow><m:mi>x</m:mi><m:mtext> </m:mtext><m:mtext> </m:mtext><m:msubsup><m:mo>*</m:mo><m:mi>w</m:mi><m:mtext>u</m:mtext></m:msubsup><m:mtext> </m:mtext><m:mi>y</m:mi></m:mrow></m:math></span>.</p>
<p id="P700049702700000000000000003F1F7" data-uri="chapter02.xhtml#P700049702700000000000000003F1F7" class="pcalibre1 pcalibre calibre2">Truncating an unsigned number to <var class="calibre5 pcalibre pcalibre1">w</var> bits is equivalent to computing its value modulo 2<i class="calibre5 pcalibre pcalibre1"><sup class="calibre51 pcalibre pcalibre1">w</sup></i>, giving the following:</p>
<section class="feature pcalibre pcalibre1" id="P700049702700000000000000003F1F8" data-uri="chapter02.xhtml#P700049702700000000000000003F1F8"><header class="calibre61 pcalibre pcalibre1"><h1 class="pcalibre1 pcalibre title8" id="P700049702700000000000000003F1F9" data-uri="chapter02.xhtml#P700049702700000000000000003F1F9" epub:type="title"><span class="pcalibre pagebreak pcalibre1" id="P7000497027000000000000000000EA0" title="97" data-uri="chapter02.xhtml#P7000497027000000000000000000EA0" epub:type="pagebreak"></span><span class="pcalibre label pcalibre1">Principle: </span></h1></header>
<p id="P700049702700000000000000003F1FA" data-uri="chapter02.xhtml#P700049702700000000000000003F1FA" class="pcalibre1 pcalibre calibre2">Unsigned multiplication</p>
<p id="P700049702700000000000000003F1FB" data-uri="chapter02.xhtml#P700049702700000000000000003F1FB" class="pcalibre1 pcalibre calibre2">For <var class="calibre5 pcalibre pcalibre1">x</var> and <var class="calibre5 pcalibre pcalibre1">y</var> such that <span class="inlineequation pcalibre pcalibre1"><m:math display="inline" alttext="" data-uri="" altimg-width="163" altimg-height="20" altimg="../images/ch02-new84.png"><m:mrow><m:mn>0</m:mn><m:mo>≤</m:mo><m:mi>x</m:mi><m:mo>,</m:mo><m:mi>y</m:mi><m:mo>≤</m:mo><m:mi>U</m:mi><m:mi>M</m:mi><m:mi>a</m:mi><m:msub><m:mi>x</m:mi><m:mi>w</m:mi></m:msub></m:mrow></m:math></span>:</p>
<div class="informalequation pcalibre pcalibre1" id="P7000497027000000000000000000EA3" data-uri="chapter02.xhtml#P7000497027000000000000000000EA3"><m:math display="block" alttext="" data-uri="" altimg-width="206" altimg-height="24" altimg="../images/ch02-eq99.png"><m:mrow><m:mi>x</m:mi><m:msubsup><m:mo>∗</m:mo><m:mi>w</m:mi><m:mi>u</m:mi></m:msubsup><m:mi>y</m:mi><m:mo>=</m:mo><m:mrow><m:mo>(</m:mo><m:mrow><m:mi>x</m:mi><m:mo>⋅</m:mo><m:mi>y</m:mi></m:mrow><m:mo>)</m:mo></m:mrow><m:mtext> </m:mtext><m:mi>mod</m:mi><m:mtext> </m:mtext><m:msup><m:mn>2</m:mn><m:mi>w</m:mi></m:msup></m:mrow></m:math>
<span class="number3 pcalibre pcalibre1">(2.16)</span>
</div>
</section>
</section>
</section></body></html>
