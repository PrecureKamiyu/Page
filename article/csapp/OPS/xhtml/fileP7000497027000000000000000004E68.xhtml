<?xml version='1.0' encoding='utf-8'?>
<html xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:svg="http://www.w3.org/2000/svg" xmlns:epub="http://www.idpf.org/2007/ops" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" epub:prefix="index: http://www.index.com/">
  <head>
    <meta name="dcterms.conformsTo" content="PXE Basic 1.0"/>
    <meta name="generator" content="PXE Tools version 1.39.52"/>
    <!--Created by pxe.pl for standard version PXE Basic 1.0,data-profile-product=standard by PXE Tools 1.39.52, partial=false-->
    <title>5.10 Summary of Results for Optimizing Combining Code</title>
    <link rel="alternate stylesheet" type="text/css" title="night" href="../css/theme/night.css"/>
    <link rel="alternate stylesheet" type="text/css" title="sepia" href="../css/theme/sepia.css"/>
    <script src="js/format_lg_obj.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../../page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body epub:type="bodymatter" class="calibre pcalibre pcalibre1">
<section id="P7000497027000000000000000004E68" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title pcalibre1" id="P70004970270000000000000000435DB" data-uri="chapter05.xhtml#P70004970270000000000000000435DB" epub:type="title"><span class="pcalibre label pcalibre1">5.10 </span>Summary of Results for Optimizing Combining Code</h1></header>
<p id="P70004970270000000000000000435DC" data-uri="chapter05.xhtml#P70004970270000000000000000435DC" class="pcalibre1 pcalibre calibre2">Our efforts at maximizing the performance of a routine that adds or multiplies the elements of a vector have clearly paid off. The following summarizes the results we obtain with <i class="calibre5 pcalibre pcalibre1">scalar</i> code, not making use of the vector parallelism provided by AVX vector instructions:</p>
<table id="P70004970270000000000000000435DD" data-uri="chapter05.xhtml#P70004970270000000000000000435DD" class="pcalibre largetable pcalibre1">
<thead class="pcalibre1 pcalibre calibre16">
<tr class="pcalibre calibre17 pcalibre1">
<th id="P70004970270000000000000000435DE" data-uri="chapter05.xhtml#P70004970270000000000000000435DE" class="calibre18 pcalibre pcalibre1"/>
<th id="P70004970270000000000000000435DF" data-uri="chapter05.xhtml#P70004970270000000000000000435DF" class="calibre18 pcalibre pcalibre1"/>
<th id="P70004970270000000000000000435E0" data-uri="chapter05.xhtml#P70004970270000000000000000435E0" class="calibre18 pcalibre pcalibre1"/>
<th colspan="2" id="P70004970270000000000000000435E1" data-uri="chapter05.xhtml#P70004970270000000000000000435E1" class="calibre18 pcalibre pcalibre1">Integer</th>
<th colspan="2" id="P70004970270000000000000000435E2" data-uri="chapter05.xhtml#P70004970270000000000000000435E2" class="calibre18 pcalibre pcalibre1">Floating point</th>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<th id="P70004970270000000000000000435E3" data-uri="chapter05.xhtml#P70004970270000000000000000435E3" class="calibre18 pcalibre pcalibre1">Function</th>
<th id="P70004970270000000000000000435E4" data-uri="chapter05.xhtml#P70004970270000000000000000435E4" class="calibre18 pcalibre pcalibre1">Page</th>
<th id="P70004970270000000000000000435E5" data-uri="chapter05.xhtml#P70004970270000000000000000435E5" class="calibre18 pcalibre pcalibre1">Method</th>
<th id="P70004970270000000000000000435E6" data-uri="chapter05.xhtml#P70004970270000000000000000435E6" class="calibre18 pcalibre pcalibre1">+</th>
<th id="P70004970270000000000000000435E7" data-uri="chapter05.xhtml#P70004970270000000000000000435E7" class="calibre18 pcalibre pcalibre1">*</th>
<th id="P70004970270000000000000000435E8" data-uri="chapter05.xhtml#P70004970270000000000000000435E8" class="calibre18 pcalibre pcalibre1">+</th>
<th id="P70004970270000000000000000435E9" data-uri="chapter05.xhtml#P70004970270000000000000000435E9" class="calibre18 pcalibre pcalibre1">*</th>
</tr>
</thead>
<tbody class="calibre19 pcalibre pcalibre1">
<tr class="pcalibre calibre17 pcalibre1">
<td id="P70004970270000000000000000435EA" data-uri="chapter05.xhtml#P70004970270000000000000000435EA" class="calibre20 pcalibre pcalibre1"><code id="P70004970270000000000000000435EB" data-uri="chapter05.xhtml#P70004970270000000000000000435EB" class="calibre10 pcalibre pcalibre1">combine1</code></td>
<td id="P70004970270000000000000000435EC" data-uri="chapter05.xhtml#P70004970270000000000000000435EC" class="calibre20 pcalibre pcalibre1">507</td>
<td id="P70004970270000000000000000435ED" data-uri="chapter05.xhtml#P70004970270000000000000000435ED" class="calibre20 pcalibre pcalibre1">Abstract <code id="P70004970270000000000000000435EE" data-uri="chapter05.xhtml#P70004970270000000000000000435EE" class="calibre10 pcalibre pcalibre1">−01</code></td>
<td id="P70004970270000000000000000435EF" data-uri="chapter05.xhtml#P70004970270000000000000000435EF" class="calibre20 pcalibre pcalibre1">10.12</td>
<td id="P70004970270000000000000000435F0" data-uri="chapter05.xhtml#P70004970270000000000000000435F0" class="calibre20 pcalibre pcalibre1">10.12</td>
<td id="P70004970270000000000000000435F1" data-uri="chapter05.xhtml#P70004970270000000000000000435F1" class="calibre20 pcalibre pcalibre1">10.17</td>
<td id="P70004970270000000000000000435F2" data-uri="chapter05.xhtml#P70004970270000000000000000435F2" class="calibre20 pcalibre pcalibre1">11.14</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P70004970270000000000000000435F3" data-uri="chapter05.xhtml#P70004970270000000000000000435F3" class="calibre20 pcalibre pcalibre1"><code id="P70004970270000000000000000435F4" data-uri="chapter05.xhtml#P70004970270000000000000000435F4" class="calibre10 pcalibre pcalibre1">combine6</code></td>
<td id="P70004970270000000000000000435F5" data-uri="chapter05.xhtml#P70004970270000000000000000435F5" class="calibre20 pcalibre pcalibre1">537</td>
<td id="P70004970270000000000000000435F6" data-uri="chapter05.xhtml#P70004970270000000000000000435F6" class="calibre20 pcalibre pcalibre1">2 × 2 unrolling</td>
<td id="P70004970270000000000000000435F7" data-uri="chapter05.xhtml#P70004970270000000000000000435F7" class="calibre20 pcalibre pcalibre1">0.81</td>
<td id="P70004970270000000000000000435F8" data-uri="chapter05.xhtml#P70004970270000000000000000435F8" class="calibre20 pcalibre pcalibre1">1.51</td>
<td id="P70004970270000000000000000435F9" data-uri="chapter05.xhtml#P70004970270000000000000000435F9" class="calibre20 pcalibre pcalibre1">1.51</td>
<td id="P70004970270000000000000000435FA" data-uri="chapter05.xhtml#P70004970270000000000000000435FA" class="calibre20 pcalibre pcalibre1">2.51</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td class="calibre20 pcalibre pcalibre1"/>
<td class="calibre20 pcalibre pcalibre1"/>
<td id="P70004970270000000000000000435FB" data-uri="chapter05.xhtml#P70004970270000000000000000435FB" class="calibre20 pcalibre pcalibre1">10 × 10 unrolling</td>
<td id="P70004970270000000000000000435FC" data-uri="chapter05.xhtml#P70004970270000000000000000435FC" class="calibre20 pcalibre pcalibre1">0.55</td>
<td id="P70004970270000000000000000435FD" data-uri="chapter05.xhtml#P70004970270000000000000000435FD" class="calibre20 pcalibre pcalibre1">1.00</td>
<td id="P70004970270000000000000000435FE" data-uri="chapter05.xhtml#P70004970270000000000000000435FE" class="calibre20 pcalibre pcalibre1">1.01</td>
<td id="P70004970270000000000000000435FF" data-uri="chapter05.xhtml#P70004970270000000000000000435FF" class="calibre20 pcalibre pcalibre1">0.52</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td colspan="2" id="P7000497027000000000000000043600" data-uri="chapter05.xhtml#P7000497027000000000000000043600" class="calibre20 pcalibre pcalibre1">Latency bound</td>
<td class="calibre20 pcalibre pcalibre1"/>
<td id="P7000497027000000000000000043601" data-uri="chapter05.xhtml#P7000497027000000000000000043601" class="calibre20 pcalibre pcalibre1">1.00</td>
<td id="P7000497027000000000000000043602" data-uri="chapter05.xhtml#P7000497027000000000000000043602" class="calibre20 pcalibre pcalibre1">3.00</td>
<td id="P7000497027000000000000000043603" data-uri="chapter05.xhtml#P7000497027000000000000000043603" class="calibre20 pcalibre pcalibre1">3.00</td>
<td id="P7000497027000000000000000043604" data-uri="chapter05.xhtml#P7000497027000000000000000043604" class="calibre20 pcalibre pcalibre1">5.00</td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td colspan="2" id="P7000497027000000000000000043605" data-uri="chapter05.xhtml#P7000497027000000000000000043605" class="calibre20 pcalibre pcalibre1">Throughput bound</td>
<td class="calibre20 pcalibre pcalibre1"/>
<td id="P7000497027000000000000000043606" data-uri="chapter05.xhtml#P7000497027000000000000000043606" class="calibre20 pcalibre pcalibre1">0.50</td>
<td id="P7000497027000000000000000043607" data-uri="chapter05.xhtml#P7000497027000000000000000043607" class="calibre20 pcalibre pcalibre1">1.00</td>
<td id="P7000497027000000000000000043608" data-uri="chapter05.xhtml#P7000497027000000000000000043608" class="calibre20 pcalibre pcalibre1">1.00</td>
<td id="P7000497027000000000000000043609" data-uri="chapter05.xhtml#P7000497027000000000000000043609" class="calibre20 pcalibre pcalibre1">0.50</td>
</tr>
</tbody>
</table>
<p id="P700049702700000000000000004360A" data-uri="chapter05.xhtml#P700049702700000000000000004360A" class="pcalibre1 pcalibre calibre2"><span class="pcalibre pagebreak pcalibre1" id="P7000497027000000000000000004E99" title="548" data-uri="chapter05.xhtml#P7000497027000000000000000004E99" epub:type="pagebreak"></span>By using multiple optimizations, we have been able to achieve CPEs close to the throughput bounds of 0.50 and 1.00, limited only by the capacities of the functional units. These represent 10−20× improvements on the original code. This has all been done using ordinary C code and a standard compiler. Rewriting the code to take advantage of the newer SIMD instructions yields additional performance gains of nearly 4× or 8×. For example, for single-precision multiplication, the CPE drops from the original value of 11.14 down to 0.06, an overall performance gain of over 180×. This example demonstrates that modern processors have considerable amounts of computing power, but we may need to coax this power out of them by writing our programs in very stylized ways.</p>
</section></body></html>
