<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Forgetting To Free Memory</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part130.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part132.htm">下一个 &gt;</a></p><p class="s32" style="padding-left: 68pt;text-indent: 0pt;text-align: justify;">Forgetting To Free Memory</p><p style="padding-top: 3pt;padding-left: 68pt;text-indent: 0pt;line-height: 89%;text-align: justify;">Another common error is known as a <b>memory leak</b>, and it occurs when you forget to free memory. In long-running applications or systems (such as the OS itself), this is a huge problem, as slowly leaking memory even- tually leads one to run out of memory, at which point a restart is required. Thus, in general, when you are done with a chunk of memory, you should make sure to free it. Note that using a garbage-collected language doesn’t help here: if you still have a reference to some chunk of memory, no garbage collector will ever free it, and thus memory leaks remain a prob- lem even in more modern languages.</p><p style="padding-left: 68pt;text-indent: 12pt;line-height: 89%;text-align: justify;">Note that not all memory need be freed, at least, in certain cases. For example, when you write a short-lived program, you might allocate some space using <span class="s41">malloc()</span>. The program runs and is about to complete: is there need to call <span class="s41">free() </span>a bunch of times just before exiting? While it seems wrong not to, it is in this case quite fine to simply exit. After all, when your program exits, the OS will clean up everything about this process, including any memory it has allocated. Calling <span class="s41">free() </span>a bunch of times and then exiting is thus pointless, and, if you do so incorrectly, will cause the program to crash. Just call exit and be happy instead.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part130.htm">&lt; 上一个</a><span> | </span><a href="../ostep.html">内容</a><span> | </span><a href="part132.htm">下一个 &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
