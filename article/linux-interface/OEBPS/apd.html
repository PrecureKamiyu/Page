<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:pls="http://www.w3.org/2005/01/pronunciation-lexicon" xmlns:ssml="http://www.w3.org/2001/10/synthesis" xmlns:svg="http://www.w3.org/2000/svg"><head><title>Appendix D. Kernel Configuration</title><link rel="stylesheet" type="text/css" href="core.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"/><link rel="up" href="index.html" title="The Linux Programming Interface"/><link rel="prev" href="apc.html" title="Appendix C. Casting the NULL Pointer"/><link rel="next" href="ape.html" title="Appendix E. Further Sources of Information"/></head><body><section class="appendix" title="Appendix D. Kernel Configuration" epub:type="appendix" id="kernel_configuration"><div class="titlepage"><div><div><h2 class="title">Appendix D. Kernel Configuration</h2></div></div></div><p>Many features of the Linux kernel are components that can be optionally configured.
            Before compiling the kernel, these components can be disabled, enabled, or, in many
            cases, enabled as loadable kernel modules. One reason to disable an unneeded component
            is to reduce the size of the kernel binary, and thus save memory, if the component is
            not required. Enabling a component as a loadable module means that it will be loaded
            into memory only if it is required at run time. This likewise can save memory.</p><p>Kernel configuration is done by executing one of a few different
                <span class="emphasis"><em>make</em></span> commands in the root directory of the kernel source
            tree—for example, <span class="emphasis"><em>make menuconfig</em></span>, which provides a
                <span class="emphasis"><em>curses</em></span>-style configuration menu, or, more comfortably,
                <span class="emphasis"><em>make xconfig</em></span>, which provides a graphical configuration menu.
            These commands produce a <code class="literal">.config</code> file in the root
            directory of the kernel source tree that is then used during kernel compilation. This
            file contains the settings of all configuration options.<a id="IDX-APP-D-8908" class="indexterm"/></p><p>The value of each option that is enabled is shown in the <code class="literal">.config</code> file in a line of the following form:</p><a id="I_programlisting_d1e177573"/><pre class="programlisting">CONFIG_<span class="emphasis"><em>NAME</em></span>=<span class="emphasis"><em>value</em></span></pre><p>If an option is not set, then the file contains a line of this form:</p><a id="I_programlisting_d1e177582"/><pre class="programlisting"># CONFIG_<span class="emphasis"><em>NAME</em></span> is not set</pre><div class="note" title="Note"><h3 class="title">Note</h3><p>In the <code class="literal">.config</code> file, lines beginning with a
                    <code class="literal">#</code> character are comments.</p></div><p>Throughout this book, when we describe kernel options, we won’t describe precisely
            where in the <span class="emphasis"><em>menuconfig</em></span> or <span class="emphasis"><em>xconfig</em></span> menu the
            option can be found. There are a few reasons for this:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The location can often be determined fairly intuitively by navigating through
                    the menu hierarchy.</p></li><li class="listitem"><p>The location of configuration options does change over time, as the menu
                    hierarchy is restructured across kernel versions.</p></li><li class="listitem"><p>If we can’t find the location of a particular option within the menu
                    hierarchy, then both <span class="emphasis"><em>make menuconfig</em></span> and <span class="emphasis"><em>make
                        xconfig</em></span> provide search facilities. For example, we can search for
                    the string <code class="literal">CONFIG_INOTIFY</code> to find the option
                    for configuring support for the <span class="emphasis"><em>inotify</em></span> API.</p></li></ul></div><p>The configuration options that were used to build the currently running kernel are
            viewable via the <code class="literal">/proc/config.gz</code> virtual file, a
            compressed file whose contents are the same as the <code class="literal">.config</code> file that was used to build the kernel. This file can be viewed
            using <span class="emphasis"><em>zcat(1)</em></span> and searched using
            <span class="emphasis"><em>zgrep(1)</em></span>.</p></section></body></html>
