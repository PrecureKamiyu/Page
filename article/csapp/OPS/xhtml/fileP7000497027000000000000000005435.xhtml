<?xml version='1.0' encoding='utf-8'?>
<html xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:svg="http://www.w3.org/2000/svg" xmlns:epub="http://www.idpf.org/2007/ops" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" epub:prefix="index: http://www.index.com/">
  <head>
    <meta name="dcterms.conformsTo" content="PXE Basic 1.0"/>
    <meta name="generator" content="PXE Tools version 1.39.52"/>
    <!--Created by pxe.pl for standard version PXE Basic 1.0,data-profile-product=standard by PXE Tools 1.39.52, partial=false-->
    <title>6.2 Locality</title>
    <link rel="alternate stylesheet" type="text/css" title="night" href="../css/theme/night.css"/>
    <link rel="alternate stylesheet" type="text/css" title="sepia" href="../css/theme/sepia.css"/>
    <script src="js/format_lg_obj.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../../page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body epub:type="bodymatter" class="calibre pcalibre pcalibre1">
<section id="P7000497027000000000000000005435" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title pcalibre1" id="P7000497027000000000000000043BBD" data-uri="chapter06.xhtml#P7000497027000000000000000043BBD" epub:type="title"><span class="pcalibre label pcalibre1">6.2 </span>Locality</h1></header>
<p id="P7000497027000000000000000043BBE" data-uri="chapter06.xhtml#P7000497027000000000000000043BBE" class="pcalibre1 pcalibre calibre2">Well-written computer programs tend to exhibit good <i class="calibre5 pcalibre pcalibre1">locality.</i> That is, they tend to reference data items that are near other recently referenced data items or that were recently referenced themselves. This tendency, known as the <i class="calibre5 pcalibre pcalibre1">principle of locality</i>, is an enduring concept that has enormous impact on the design and performance of hardware and software systems.</p>
<p id="P7000497027000000000000000043BBF" data-uri="chapter06.xhtml#P7000497027000000000000000043BBF" class="pcalibre1 pcalibre calibre2">Locality is typically described as having two distinct forms: <i class="calibre5 pcalibre pcalibre1">temporal locality</i> and <i class="calibre5 pcalibre pcalibre1">spatial locality.</i> In a program with good temporal locality, a memory location that is referenced once is likely to be referenced again multiple times in the near future. In a program with good spatial locality, if a memory location is referenced</p>
<aside class="sidebar pcalibre5 pcalibre" id="P7000497027000000000000000005439" data-uri="chapter06.xhtml#P7000497027000000000000000005439"><header class="pcalibre halftitlepage pcalibre1"><h1 class="pcalibre1 title2 pcalibre" id="P7000497027000000000000000043BC0" data-uri="chapter06.xhtml#P7000497027000000000000000043BC0" epub:type="title"><span class="pcalibre pagebreak pcalibre1" id="P700049702700000000000000000543B" title="605" data-uri="chapter06.xhtml#P700049702700000000000000000543B" epub:type="pagebreak"></span><span class="pcalibre label1 pcalibre1">Aside </span>When cycle time stood still: The advent of multi-core processors</h1></header>
<p id="P7000497027000000000000000043BC1" data-uri="chapter06.xhtml#P7000497027000000000000000043BC1" class="calibre13 pcalibre pcalibre1">The history of computers is marked by some singular events that caused profound changes in the industry and the world. Interestingly, these inflection points tend to occur about once per decade: the development of Fortran in the 1950s, the introduction of the IBM 360 in the early 1960s, the dawn of the Internet (then called ARPANET) in the early 1970s, the introduction of the IBM PC in the early 1980s, and the creation of the World Wide Web in the early 1990s.</p>
<p id="P7000497027000000000000000043BC2" data-uri="chapter06.xhtml#P7000497027000000000000000043BC2" class="calibre13 pcalibre pcalibre1">The most recent such event occurred early in the 21st century, when computer manufacturers ran headlong into the so-called power wall, discovering that they could no longer increase CPU clock frequencies as quickly because the chips would then consume too much power. The solution was to improve performance by replacing a single large processor with multiple smaller processor <i class="calibre5 pcalibre pcalibre1">cores</i>, each a complete processor capable of executing programs independently and in parallel with the other cores. This <i class="calibre5 pcalibre pcalibre1">multi-core</i> approach works in part because the power consumed by a processor is proportional to <var class="calibre5 pcalibre pcalibre1">P</var> = <i class="calibre5 pcalibre pcalibre1">fCV</i><sup class="calibre51 pcalibre pcalibre1">2</sup>, where <var class="calibre5 pcalibre pcalibre1">f</var> is the clock frequency, <var class="calibre5 pcalibre pcalibre1">C</var> is the capacitance, and <var class="calibre5 pcalibre pcalibre1">V</var> is the voltage. The capacitance <var class="calibre5 pcalibre pcalibre1">C</var> is roughly proportional to the area, so the power drawn by multiple cores can be held constant as long as the total area of the cores is constant. As long as feature sizes continue to shrink at the exponential Moore's Law rate, the number of cores in each processor, and thus its effective performance, will continue to increase.</p>
<p id="P7000497027000000000000000043BC3" data-uri="chapter06.xhtml#P7000497027000000000000000043BC3" class="pcalibre calibre3 pcalibre1">From this point forward, computers will get faster not because the clock frequency increases but because the number of cores in each processor increases, and because architectural innovations increase the efficiency of programs running on those cores. We can see this trend clearly in <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="fileP70004970270000000000000000051B5.xhtml#P7000497027000000000000000005427"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">6.16</span></a>. CPU cycle time reached its lowest point in 2003 and then actually started to rise before leveling off and starting to decline again at a slower rate than before. However, because of the advent of multi-core processors (dual-core in 2004 and quad-core in 2007), the effective cycle time continues to decrease at close to its previous rate.</p>
</aside>
<p class="pcalibre1 pcalibre calibre2" id="P7000497027000000000000000043BC4" data-uri="chapter06.xhtml#P7000497027000000000000000043BC4">once, then the program is likely to reference a nearby memory location in the near future.</p>
<p id="P7000497027000000000000000043BC5" data-uri="chapter06.xhtml#P7000497027000000000000000043BC5" class="pcalibre1 pcalibre calibre2">Programmers should understand the principle of locality because, in general, <i class="calibre5 pcalibre pcalibre1">programs with good locality run faster than programs with poor locality.</i> All levels of modern computer systems, from the hardware, to the operating system, to application programs, are designed to exploit locality. At the hardware level, the principle of locality allows computer designers to speed up main memory accesses by introducing small fast memories known as <i class="calibre5 pcalibre pcalibre1">cache memories</i> that hold blocks of the most recently referenced instructions and data items. At the operating system level, the principle of locality allows the system to use the main memory as a cache of the most recently referenced chunks of the virtual address space. Similarly, the operating system uses main memory to cache the most recently used disk blocks in the disk file system. The principle of locality also plays a crucial role in the design of application programs. For example, Web browsers exploit temporal locality by caching recently referenced documents on a local disk. High-volume Web servers hold recently requested documents in front-end disk caches that satisfy requests for these documents without requiring any intervention from the server.</p>

<figure class="pcalibre5 figure pcalibre" id="P7000497027000000000000000005441" data-uri="chapter06.xhtml#P7000497027000000000000000005441">
<span class="pcalibre pagebreak pcalibre1" id="P7000497027000000000000000005442" title="606" data-uri="chapter06.xhtml#P7000497027000000000000000005442" epub:type="pagebreak"></span>
<pre id="P7000497027000000000000000043BC6" data-uri="chapter06.xhtml#P7000497027000000000000000043BC6" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000043BC7" data-uri="chapter06.xhtml#P7000497027000000000000000043BC7" class="calibre10 pcalibre pcalibre1">
1	int sumvec(int v[N])
2	{
3		int i, sum = 0;
4	
5		for (i = 0; i &lt; N; i++)
6			sum += v[i];
7		return sum;
8	}
</code></pre>
<p id="P7000497027000000000000000043BC8" data-uri="chapter06.xhtml#P7000497027000000000000000043BC8" class="pcalibre1 pcalibre calibre2">(a)</p>
<table class="pcalibre largetable pcalibre1" id="P7000497027000000000000000043BC9" data-uri="chapter06.xhtml#P7000497027000000000000000043BC9">
<thead class="pcalibre1 pcalibre calibre16">
<tr class="pcalibre calibre17 pcalibre1">
<th id="P7000497027000000000000000043BCA" data-uri="chapter06.xhtml#P7000497027000000000000000043BCA" class="calibre18 pcalibre pcalibre1">Address</th>
<th id="P7000497027000000000000000043BCB" data-uri="chapter06.xhtml#P7000497027000000000000000043BCB" class="calibre18 pcalibre pcalibre1">0</th>
<th id="P7000497027000000000000000043BCC" data-uri="chapter06.xhtml#P7000497027000000000000000043BCC" class="calibre18 pcalibre pcalibre1">4</th>
<th id="P7000497027000000000000000043BCD" data-uri="chapter06.xhtml#P7000497027000000000000000043BCD" class="calibre18 pcalibre pcalibre1">8</th>
<th id="P7000497027000000000000000043BCE" data-uri="chapter06.xhtml#P7000497027000000000000000043BCE" class="calibre18 pcalibre pcalibre1">12</th>
<th id="P7000497027000000000000000043BCF" data-uri="chapter06.xhtml#P7000497027000000000000000043BCF" class="calibre18 pcalibre pcalibre1">16</th>
<th id="P7000497027000000000000000043BD0" data-uri="chapter06.xhtml#P7000497027000000000000000043BD0" class="calibre18 pcalibre pcalibre1">20</th>
<th id="P7000497027000000000000000043BD1" data-uri="chapter06.xhtml#P7000497027000000000000000043BD1" class="calibre18 pcalibre pcalibre1">24</th>
<th id="P7000497027000000000000000043BD2" data-uri="chapter06.xhtml#P7000497027000000000000000043BD2" class="calibre18 pcalibre pcalibre1">28</th>
</tr>
</thead>
<tbody class="calibre19 pcalibre pcalibre1">
<tr class="pcalibre calibre17 pcalibre1">
<td id="P7000497027000000000000000043BD3" data-uri="chapter06.xhtml#P7000497027000000000000000043BD3" class="calibre20 pcalibre pcalibre1">Contents</td>
<td id="P7000497027000000000000000043BD4" data-uri="chapter06.xhtml#P7000497027000000000000000043BD4" class="calibre20 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">v</var><sub class="calibre59 pcalibre pcalibre1">0</sub></td>
<td id="P7000497027000000000000000043BD5" data-uri="chapter06.xhtml#P7000497027000000000000000043BD5" class="calibre20 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">v</var><sub class="calibre59 pcalibre pcalibre1">1</sub></td>
<td id="P7000497027000000000000000043BD6" data-uri="chapter06.xhtml#P7000497027000000000000000043BD6" class="calibre20 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">v</var><sub class="calibre59 pcalibre pcalibre1">2</sub></td>
<td id="P7000497027000000000000000043BD7" data-uri="chapter06.xhtml#P7000497027000000000000000043BD7" class="calibre20 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">v</var><sub class="calibre59 pcalibre pcalibre1">3</sub></td>
<td id="P7000497027000000000000000043BD8" data-uri="chapter06.xhtml#P7000497027000000000000000043BD8" class="calibre20 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">v</var><sub class="calibre59 pcalibre pcalibre1">4</sub></td>
<td id="P7000497027000000000000000043BD9" data-uri="chapter06.xhtml#P7000497027000000000000000043BD9" class="calibre20 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">v</var><sub class="calibre59 pcalibre pcalibre1">5</sub></td>
<td id="P7000497027000000000000000043BDA" data-uri="chapter06.xhtml#P7000497027000000000000000043BDA" class="calibre20 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">v</var><sub class="calibre59 pcalibre pcalibre1">6</sub></td>
<td id="P7000497027000000000000000043BDB" data-uri="chapter06.xhtml#P7000497027000000000000000043BDB" class="calibre20 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">v</var><sub class="calibre59 pcalibre pcalibre1">7</sub></td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P7000497027000000000000000043BDC" data-uri="chapter06.xhtml#P7000497027000000000000000043BDC" class="calibre20 pcalibre pcalibre1">Access order</td>
<td id="P7000497027000000000000000043BDD" data-uri="chapter06.xhtml#P7000497027000000000000000043BDD" class="calibre20 pcalibre pcalibre1">1</td>
<td id="P7000497027000000000000000043BDE" data-uri="chapter06.xhtml#P7000497027000000000000000043BDE" class="calibre20 pcalibre pcalibre1">2</td>
<td id="P7000497027000000000000000043BDF" data-uri="chapter06.xhtml#P7000497027000000000000000043BDF" class="calibre20 pcalibre pcalibre1">3</td>
<td id="P7000497027000000000000000043BE0" data-uri="chapter06.xhtml#P7000497027000000000000000043BE0" class="calibre20 pcalibre pcalibre1">4</td>
<td id="P7000497027000000000000000043BE1" data-uri="chapter06.xhtml#P7000497027000000000000000043BE1" class="calibre20 pcalibre pcalibre1">5</td>
<td id="P7000497027000000000000000043BE2" data-uri="chapter06.xhtml#P7000497027000000000000000043BE2" class="calibre20 pcalibre pcalibre1">6</td>
<td id="P7000497027000000000000000043BE3" data-uri="chapter06.xhtml#P7000497027000000000000000043BE3" class="calibre20 pcalibre pcalibre1">7</td>
<td id="P7000497027000000000000000043BE4" data-uri="chapter06.xhtml#P7000497027000000000000000043BE4" class="calibre20 pcalibre pcalibre1">8</td>
</tr>
</tbody>
</table>
<p id="P7000497027000000000000000043BE5" data-uri="chapter06.xhtml#P7000497027000000000000000043BE5" class="pcalibre1 pcalibre calibre2">(b)</p>
<figcaption id="P7000497027000000000000000043BE6" data-uri="chapter06.xhtml#P7000497027000000000000000043BE6" class="calibre11 pcalibre pcalibre1"><header class="pcalibre halftitlepage pcalibre1"><h1 class="title3 pcalibre pcalibre1" id="P7000497027000000000000000043BE7" data-uri="chapter06.xhtml#P7000497027000000000000000043BE7" epub:type="title"><span class="pcalibre1 label2 pcalibre">Figure </span><span class="pcalibre label pcalibre1">6.17 </span>(a) A function with good locality, (b) Reference pattern for vector <code id="P7000497027000000000000000043BE8" data-uri="chapter06.xhtml#P7000497027000000000000000043BE8" class="pcalibre1 calibre8 pcalibre">v</code> (<var class="calibre5 pcalibre pcalibre1">N</var> = 8).</h1></header>
<div class="caption pcalibre pcalibre1" id="P7000497027000000000000000043BE9" data-uri="chapter06.xhtml#P7000497027000000000000000043BE9"><p id="P7000497027000000000000000043BEA" data-uri="chapter06.xhtml#P7000497027000000000000000043BEA" class="pcalibre calibre3 pcalibre1">Notice how the vector elements are accessed in the same order that they are stored in memory.</p></div></figcaption>
</figure>
<section id="P7000497027000000000000000005468" data-uri="chapter06.xhtml#P7000497027000000000000000005468" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title1 pcalibre1" id="P7000497027000000000000000043BEB" data-uri="chapter06.xhtml#P7000497027000000000000000043BEB" epub:type="title"><span class="pcalibre label pcalibre1">6.2.1 </span>Locality of References to Program Data</h1></header>
<p id="P7000497027000000000000000043BEC" data-uri="chapter06.xhtml#P7000497027000000000000000043BEC" class="pcalibre1 pcalibre calibre2">Consider the simple function in <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="#P7000497027000000000000000005441"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">6.17(a)</span></a> that sums the elements of a vector. Does this function have good locality? To answer this question, we look at the reference pattern for each variable. In this example, the <code id="P7000497027000000000000000043BED" data-uri="chapter06.xhtml#P7000497027000000000000000043BED" class="pcalibre1 calibre8 pcalibre">sum</code> variable is referenced once in each loop iteration, and thus there is good temporal locality with respect to <code id="P7000497027000000000000000043BEE" data-uri="chapter06.xhtml#P7000497027000000000000000043BEE" class="pcalibre1 calibre8 pcalibre">sum</code>. On the other hand, since <code id="P7000497027000000000000000043BEF" data-uri="chapter06.xhtml#P7000497027000000000000000043BEF" class="pcalibre1 calibre8 pcalibre">sum</code> is a scalar, there is no spatial locality with respect to <code id="P7000497027000000000000000043BF0" data-uri="chapter06.xhtml#P7000497027000000000000000043BF0" class="pcalibre1 calibre8 pcalibre">sum</code>.</p>
<p id="P7000497027000000000000000043BF1" data-uri="chapter06.xhtml#P7000497027000000000000000043BF1" class="pcalibre1 pcalibre calibre2">As we see in <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="#P7000497027000000000000000005441"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">6.17(b)</span></a>, the elements of vector <code id="P7000497027000000000000000043BF2" data-uri="chapter06.xhtml#P7000497027000000000000000043BF2" class="pcalibre1 calibre8 pcalibre">v</code> are read sequentially, one after the other, in the order they are stored in memory (we assume for convenience that the array starts at address 0). Thus, with respect to variable v, the function has good spatial locality but poor temporal locality since each vector element is accessed exactly once. Since the function has either good spatial or temporal locality with respect to each variable in the loop body, we can conclude that the <code id="P7000497027000000000000000043BF3" data-uri="chapter06.xhtml#P7000497027000000000000000043BF3" class="pcalibre1 calibre8 pcalibre">sumvec</code> function enjoys good locality.</p>
<p id="P7000497027000000000000000043BF4" data-uri="chapter06.xhtml#P7000497027000000000000000043BF4" class="pcalibre1 pcalibre calibre2">A function such as <code id="P7000497027000000000000000043BF5" data-uri="chapter06.xhtml#P7000497027000000000000000043BF5" class="pcalibre1 calibre8 pcalibre">sumvec</code> that visits each element of a vector sequentially is said to have a <i class="calibre5 pcalibre pcalibre1">stride-1 reference pattern</i> (with respect to the element size). We will sometimes refer to stride-1 reference patterns as <i class="calibre5 pcalibre pcalibre1">sequential reference patterns.</i> Visiting every <var class="calibre5 pcalibre pcalibre1">k</var>th element of a contiguous vector is called a <i class="calibre5 pcalibre pcalibre1">stride-k reference pattern.</i> Stride-1 reference patterns are a common and important source of spatial locality in programs. In general, as the stride increases, the spatial locality decreases.</p>
<p id="P7000497027000000000000000043BF6" data-uri="chapter06.xhtml#P7000497027000000000000000043BF6" class="pcalibre1 pcalibre calibre2">Stride is also an important issue for programs that reference multidimensional arrays. For example, consider the <code id="P7000497027000000000000000043BF7" data-uri="chapter06.xhtml#P7000497027000000000000000043BF7" class="pcalibre1 calibre8 pcalibre">sumarrayrows</code> function in <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="#P7000497027000000000000000005478"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">6.18(a)</span></a> that sums the elements of a two-dimensional array.</p>
<p id="P7000497027000000000000000043BF8" data-uri="chapter06.xhtml#P7000497027000000000000000043BF8" class="pcalibre1 pcalibre calibre2">The doubly nested loop reads the elements of the array in <i class="calibre5 pcalibre pcalibre1">row-major order.</i> That is, the inner loop reads the elements of the first row, then the second row, and so on. The <code id="P7000497027000000000000000043BF9" data-uri="chapter06.xhtml#P7000497027000000000000000043BF9" class="pcalibre1 calibre8 pcalibre">sumarrayrows</code> function enjoys good spatial locality because it references the array in the same row-major order that the array is stored (<a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="#P7000497027000000000000000005478"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">6.18(b)</span></a>). The result is a nice stride-1 reference pattern with excellent spatial locality.</p>
<figure class="pcalibre5 figure pcalibre" id="P7000497027000000000000000005478" data-uri="chapter06.xhtml#P7000497027000000000000000005478">
<span class="pcalibre pagebreak pcalibre1" id="P7000497027000000000000000005479" title="607" data-uri="chapter06.xhtml#P7000497027000000000000000005479" epub:type="pagebreak"></span>
<pre id="P7000497027000000000000000043BFA" data-uri="chapter06.xhtml#P7000497027000000000000000043BFA" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000043BFB" data-uri="chapter06.xhtml#P7000497027000000000000000043BFB" class="calibre10 pcalibre pcalibre1">
1	int sumarrayrows(int a[M][N])
2	{
3		int i, j, sum = 0;
4	
5		for (i = 0; i &lt; M; i++)
6			for (j = 0; j &lt; N; j++)
7				sum += a[i] [j];
8		return sum;
9	}
</code></pre>
<p id="P7000497027000000000000000043BFC" data-uri="chapter06.xhtml#P7000497027000000000000000043BFC" class="pcalibre1 pcalibre calibre2">(a)</p>
<table id="P7000497027000000000000000043BFD" data-uri="chapter06.xhtml#P7000497027000000000000000043BFD" class="pcalibre largetable pcalibre1">
<thead class="pcalibre1 pcalibre calibre16">
<tr class="pcalibre calibre17 pcalibre1">
<th id="P7000497027000000000000000043BFE" data-uri="chapter06.xhtml#P7000497027000000000000000043BFE" class="calibre18 pcalibre pcalibre1">Address</th>
<th id="P7000497027000000000000000043BFF" data-uri="chapter06.xhtml#P7000497027000000000000000043BFF" class="calibre18 pcalibre pcalibre1">0</th>
<th id="P7000497027000000000000000043C00" data-uri="chapter06.xhtml#P7000497027000000000000000043C00" class="calibre18 pcalibre pcalibre1">4</th>
<th id="P7000497027000000000000000043C01" data-uri="chapter06.xhtml#P7000497027000000000000000043C01" class="calibre18 pcalibre pcalibre1">8</th>
<th id="P7000497027000000000000000043C02" data-uri="chapter06.xhtml#P7000497027000000000000000043C02" class="calibre18 pcalibre pcalibre1">12</th>
<th id="P7000497027000000000000000043C03" data-uri="chapter06.xhtml#P7000497027000000000000000043C03" class="calibre18 pcalibre pcalibre1">16</th>
<th id="P7000497027000000000000000043C04" data-uri="chapter06.xhtml#P7000497027000000000000000043C04" class="calibre18 pcalibre pcalibre1">20</th>
</tr>
</thead>
<tbody class="calibre19 pcalibre pcalibre1">
<tr class="pcalibre calibre17 pcalibre1">
<td id="P7000497027000000000000000043C05" data-uri="chapter06.xhtml#P7000497027000000000000000043C05" class="calibre20 pcalibre pcalibre1">Contents</td>
<td id="P7000497027000000000000000043C06" data-uri="chapter06.xhtml#P7000497027000000000000000043C06" class="calibre20 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">a</var><sub class="calibre59 pcalibre pcalibre1">00</sub></td>
<td id="P7000497027000000000000000043C07" data-uri="chapter06.xhtml#P7000497027000000000000000043C07" class="calibre20 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">a</var><sub class="calibre59 pcalibre pcalibre1">01</sub></td>
<td id="P7000497027000000000000000043C08" data-uri="chapter06.xhtml#P7000497027000000000000000043C08" class="calibre20 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">a</var><sub class="calibre59 pcalibre pcalibre1">02</sub></td>
<td id="P7000497027000000000000000043C09" data-uri="chapter06.xhtml#P7000497027000000000000000043C09" class="calibre20 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">a</var><sub class="calibre59 pcalibre pcalibre1">10</sub></td>
<td id="P7000497027000000000000000043C0A" data-uri="chapter06.xhtml#P7000497027000000000000000043C0A" class="calibre20 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">a</var><sub class="calibre59 pcalibre pcalibre1">11</sub></td>
<td id="P7000497027000000000000000043C0B" data-uri="chapter06.xhtml#P7000497027000000000000000043C0B" class="calibre20 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">a</var><sub class="calibre59 pcalibre pcalibre1">12</sub></td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P7000497027000000000000000043C0C" data-uri="chapter06.xhtml#P7000497027000000000000000043C0C" class="calibre20 pcalibre pcalibre1">Access order</td>
<td id="P7000497027000000000000000043C0D" data-uri="chapter06.xhtml#P7000497027000000000000000043C0D" class="calibre20 pcalibre pcalibre1">1</td>
<td id="P7000497027000000000000000043C0E" data-uri="chapter06.xhtml#P7000497027000000000000000043C0E" class="calibre20 pcalibre pcalibre1">2</td>
<td id="P7000497027000000000000000043C0F" data-uri="chapter06.xhtml#P7000497027000000000000000043C0F" class="calibre20 pcalibre pcalibre1">3</td>
<td id="P7000497027000000000000000043C10" data-uri="chapter06.xhtml#P7000497027000000000000000043C10" class="calibre20 pcalibre pcalibre1">4</td>
<td id="P7000497027000000000000000043C11" data-uri="chapter06.xhtml#P7000497027000000000000000043C11" class="calibre20 pcalibre pcalibre1">5</td>
<td id="P7000497027000000000000000043C12" data-uri="chapter06.xhtml#P7000497027000000000000000043C12" class="calibre20 pcalibre pcalibre1">6</td>
</tr>
</tbody>
</table>
<p id="P7000497027000000000000000043C13" data-uri="chapter06.xhtml#P7000497027000000000000000043C13" class="pcalibre1 pcalibre calibre2">(b)</p>
<figcaption id="P7000497027000000000000000043C14" data-uri="chapter06.xhtml#P7000497027000000000000000043C14" class="calibre11 pcalibre pcalibre1"><header class="pcalibre halftitlepage pcalibre1"><h1 class="title3 pcalibre pcalibre1" id="P7000497027000000000000000043C15" data-uri="chapter06.xhtml#P7000497027000000000000000043C15" epub:type="title"><span class="pcalibre1 label2 pcalibre">Figure </span><span class="pcalibre label pcalibre1">6.18 </span>(a) Another function with good locality, (b) Reference pattern for array <var class="calibre5 pcalibre pcalibre1">a</var> (<var class="calibre5 pcalibre pcalibre1">M</var> = 2, <var class="calibre5 pcalibre pcalibre1">N</var> = 3).</h1></header>
<div class="caption pcalibre pcalibre1" id="P7000497027000000000000000043C16" data-uri="chapter06.xhtml#P7000497027000000000000000043C16"><p id="P7000497027000000000000000043C17" data-uri="chapter06.xhtml#P7000497027000000000000000043C17" class="pcalibre calibre3 pcalibre1">There is good spatial locality because the array is accessed in the same row-major order in which it is stored in memory.</p></div></figcaption>
</figure>

<figure class="pcalibre5 figure pcalibre" id="P7000497027000000000000000005498" data-uri="chapter06.xhtml#P7000497027000000000000000005498">
<pre id="P7000497027000000000000000043C18" data-uri="chapter06.xhtml#P7000497027000000000000000043C18" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000043C19" data-uri="chapter06.xhtml#P7000497027000000000000000043C19" class="calibre10 pcalibre pcalibre1">
1	int sumarraycols(int a[M][N])
2	{
3		int i, j, sum = 0 ;
4	
5		for (j = 0; j &lt; N; j++)
6			for (i = 0; i &lt; M; i++)
7				sum += a[i] [j];
8		return sum;
9	}
</code></pre>
<p id="P7000497027000000000000000043C1A" data-uri="chapter06.xhtml#P7000497027000000000000000043C1A" class="pcalibre1 pcalibre calibre2">(a)</p>
<table id="P7000497027000000000000000043C1B" data-uri="chapter06.xhtml#P7000497027000000000000000043C1B" class="pcalibre largetable pcalibre1">
<thead class="pcalibre1 pcalibre calibre16">
<tr class="pcalibre calibre17 pcalibre1">
<th id="P7000497027000000000000000043C1C" data-uri="chapter06.xhtml#P7000497027000000000000000043C1C" class="calibre18 pcalibre pcalibre1">Address</th>
<th id="P7000497027000000000000000043C1D" data-uri="chapter06.xhtml#P7000497027000000000000000043C1D" class="calibre18 pcalibre pcalibre1">0</th>
<th id="P7000497027000000000000000043C1E" data-uri="chapter06.xhtml#P7000497027000000000000000043C1E" class="calibre18 pcalibre pcalibre1">4</th>
<th id="P7000497027000000000000000043C1F" data-uri="chapter06.xhtml#P7000497027000000000000000043C1F" class="calibre18 pcalibre pcalibre1">8</th>
<th id="P7000497027000000000000000043C20" data-uri="chapter06.xhtml#P7000497027000000000000000043C20" class="calibre18 pcalibre pcalibre1">12</th>
<th id="P7000497027000000000000000043C21" data-uri="chapter06.xhtml#P7000497027000000000000000043C21" class="calibre18 pcalibre pcalibre1">16</th>
<th id="P7000497027000000000000000043C22" data-uri="chapter06.xhtml#P7000497027000000000000000043C22" class="calibre18 pcalibre pcalibre1">20</th>
</tr>
</thead>
<tbody class="calibre19 pcalibre pcalibre1">
<tr class="pcalibre calibre17 pcalibre1">
<td id="P7000497027000000000000000043C23" data-uri="chapter06.xhtml#P7000497027000000000000000043C23" class="calibre20 pcalibre pcalibre1">Contents</td>
<td id="P7000497027000000000000000043C24" data-uri="chapter06.xhtml#P7000497027000000000000000043C24" class="calibre20 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">a</var><sub class="calibre59 pcalibre pcalibre1">00</sub></td>
<td id="P7000497027000000000000000043C25" data-uri="chapter06.xhtml#P7000497027000000000000000043C25" class="calibre20 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">a</var><sub class="calibre59 pcalibre pcalibre1">01</sub></td>
<td id="P7000497027000000000000000043C26" data-uri="chapter06.xhtml#P7000497027000000000000000043C26" class="calibre20 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">a</var><sub class="calibre59 pcalibre pcalibre1">02</sub></td>
<td id="P7000497027000000000000000043C27" data-uri="chapter06.xhtml#P7000497027000000000000000043C27" class="calibre20 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">a</var><sub class="calibre59 pcalibre pcalibre1">10</sub></td>
<td id="P7000497027000000000000000043C28" data-uri="chapter06.xhtml#P7000497027000000000000000043C28" class="calibre20 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">a</var><sub class="calibre59 pcalibre pcalibre1">11</sub></td>
<td id="P7000497027000000000000000043C29" data-uri="chapter06.xhtml#P7000497027000000000000000043C29" class="calibre20 pcalibre pcalibre1"><var class="calibre5 pcalibre pcalibre1">a</var><sub class="calibre59 pcalibre pcalibre1">12</sub></td>
</tr>
<tr class="pcalibre calibre17 pcalibre1">
<td id="P7000497027000000000000000043C2A" data-uri="chapter06.xhtml#P7000497027000000000000000043C2A" class="calibre20 pcalibre pcalibre1">Access order</td>
<td id="P7000497027000000000000000043C2B" data-uri="chapter06.xhtml#P7000497027000000000000000043C2B" class="calibre20 pcalibre pcalibre1">1</td>
<td id="P7000497027000000000000000043C2C" data-uri="chapter06.xhtml#P7000497027000000000000000043C2C" class="calibre20 pcalibre pcalibre1">3</td>
<td id="P7000497027000000000000000043C2D" data-uri="chapter06.xhtml#P7000497027000000000000000043C2D" class="calibre20 pcalibre pcalibre1">5</td>
<td id="P7000497027000000000000000043C2E" data-uri="chapter06.xhtml#P7000497027000000000000000043C2E" class="calibre20 pcalibre pcalibre1">2</td>
<td id="P7000497027000000000000000043C2F" data-uri="chapter06.xhtml#P7000497027000000000000000043C2F" class="calibre20 pcalibre pcalibre1">4</td>
<td id="P7000497027000000000000000043C30" data-uri="chapter06.xhtml#P7000497027000000000000000043C30" class="calibre20 pcalibre pcalibre1">6</td>
</tr>
</tbody>
</table>
<p id="P7000497027000000000000000043C31" data-uri="chapter06.xhtml#P7000497027000000000000000043C31" class="pcalibre1 pcalibre calibre2">(b)</p>
<figcaption id="P7000497027000000000000000043C32" data-uri="chapter06.xhtml#P7000497027000000000000000043C32" class="calibre11 pcalibre pcalibre1"><header class="pcalibre halftitlepage pcalibre1"><h1 class="title3 pcalibre pcalibre1" id="P7000497027000000000000000043C33" data-uri="chapter06.xhtml#P7000497027000000000000000043C33" epub:type="title"><span class="pcalibre1 label2 pcalibre">Figure </span><span class="pcalibre label pcalibre1">6.19 </span>(a) A function with poor spatial locality, (b) Reference pattern for array a (<var class="calibre5 pcalibre pcalibre1">M</var> = 2, <var class="calibre5 pcalibre pcalibre1">N</var> = 3).</h1></header>
<div class="caption pcalibre pcalibre1" id="P7000497027000000000000000043C34" data-uri="chapter06.xhtml#P7000497027000000000000000043C34"><p id="P7000497027000000000000000043C35" data-uri="chapter06.xhtml#P7000497027000000000000000043C35" class="pcalibre calibre3 pcalibre1">The function has poor spatial locality because it scans memory with a stride-N reference pattern.</p></div></figcaption>
</figure>
<p id="P7000497027000000000000000043C36" data-uri="chapter06.xhtml#P7000497027000000000000000043C36" class="pcalibre1 pcalibre calibre2">Seemingly trivial changes to a program can have a big impact on its locality. For example, the <code id="P7000497027000000000000000043C37" data-uri="chapter06.xhtml#P7000497027000000000000000043C37" class="pcalibre1 calibre8 pcalibre">sumarraycols</code> function in <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="#P7000497027000000000000000005498"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">6.19(a)</span></a> computes the same result as the <code id="P7000497027000000000000000043C38" data-uri="chapter06.xhtml#P7000497027000000000000000043C38" class="pcalibre1 calibre8 pcalibre">sumarrayrows</code> function in <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="#P7000497027000000000000000005478"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">6.18(a)</span></a>. The only difference is that we have interchanged the <var class="calibre5 pcalibre pcalibre1">i</var> and <var class="calibre5 pcalibre pcalibre1">j</var> loops. What impact does interchanging the loops have on its locality?</p>
<p id="P7000497027000000000000000043C39" data-uri="chapter06.xhtml#P7000497027000000000000000043C39" class="pcalibre1 pcalibre calibre2">The <code id="P7000497027000000000000000043C3A" data-uri="chapter06.xhtml#P7000497027000000000000000043C3A" class="pcalibre1 calibre8 pcalibre">sumarraycols</code> function suffers from poor spatial locality because it scans the array column-wise instead of row-wise. Since C arrays are laid out in memory row-wise, the result is a stride-<var class="calibre5 pcalibre pcalibre1">N</var> reference pattern, as shown in <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="#P7000497027000000000000000005498"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">6.19(b)</span></a>.</p>
</section>
<section id="P70004970270000000000000000054BC" data-uri="chapter06.xhtml#P70004970270000000000000000054BC" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title1 pcalibre1" id="P7000497027000000000000000043C3B" data-uri="chapter06.xhtml#P7000497027000000000000000043C3B" epub:type="title"><span class="pcalibre label pcalibre1">6.2.2 </span>Locality of Instruction Fetches</h1></header>
<p id="P7000497027000000000000000043C3C" data-uri="chapter06.xhtml#P7000497027000000000000000043C3C" class="pcalibre1 pcalibre calibre2">Since program instructions are stored in memory and must be fetched (read) by the CPU, we can also evaluate the locality of a program with respect to its instruction fetches. For example, in <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="#P7000497027000000000000000005441"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">6.17</span></a> the instructions in the body of the <span class="pcalibre pagebreak pcalibre1" id="P70004970270000000000000000054BF" title="608" data-uri="chapter06.xhtml#P70004970270000000000000000054BF" epub:type="pagebreak"></span><code id="P7000497027000000000000000043C3D" data-uri="chapter06.xhtml#P7000497027000000000000000043C3D" class="pcalibre1 calibre8 pcalibre">for</code> loop are executed in sequential memory order, and thus the loop enjoys good spatial locality. Since the loop body is executed multiple times, it also enjoys good temporal locality.</p>
<p id="P7000497027000000000000000043C3E" data-uri="chapter06.xhtml#P7000497027000000000000000043C3E" class="pcalibre1 pcalibre calibre2">An important property of code that distinguishes it from program data is that it is rarely modified at run time. While a program is executing, the CPU reads its instructions from memory. The CPU rarely overwrites or modifies these instructions.</p>
</section>
<section id="P70004970270000000000000000054C2" data-uri="chapter06.xhtml#P70004970270000000000000000054C2" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="pcalibre title1 pcalibre1" id="P7000497027000000000000000043C3F" data-uri="chapter06.xhtml#P7000497027000000000000000043C3F" epub:type="title"><span class="pcalibre label pcalibre1">6.2.3 </span>Summary of Locality</h1></header>
<p id="P7000497027000000000000000043C40" data-uri="chapter06.xhtml#P7000497027000000000000000043C40" class="pcalibre1 pcalibre calibre2">In this section, we have introduced the fundamental idea of locality and have identified some simple rules for qualitatively evaluating the locality in a program:</p>
<ul id="P7000497027000000000000000043C41" data-uri="chapter06.xhtml#P7000497027000000000000000043C41" class="calibre28 pcalibre pcalibre1">
<li id="P7000497027000000000000000043C42" data-uri="chapter06.xhtml#P7000497027000000000000000043C42" class="calibre12 pcalibre pcalibre1"><p id="P7000497027000000000000000043C43" data-uri="chapter06.xhtml#P7000497027000000000000000043C43" class="pcalibre calibre3 pcalibre1">Programs that repeatedly reference the same variables enjoy good temporal locality.</p></li>
<li id="P7000497027000000000000000043C44" data-uri="chapter06.xhtml#P7000497027000000000000000043C44" class="calibre12 pcalibre pcalibre1"><p id="P7000497027000000000000000043C45" data-uri="chapter06.xhtml#P7000497027000000000000000043C45" class="pcalibre calibre3 pcalibre1">For programs with stride-<var class="calibre5 pcalibre pcalibre1">k</var> reference patterns, the smaller the stride, the better the spatial locality. Programs with stride-1 reference patterns have good spatial locality. Programs that hop around memory with large strides have poor spatial locality.</p></li>
<li id="P7000497027000000000000000043C46" data-uri="chapter06.xhtml#P7000497027000000000000000043C46" class="calibre12 pcalibre pcalibre1"><p id="P7000497027000000000000000043C47" data-uri="chapter06.xhtml#P7000497027000000000000000043C47" class="pcalibre calibre3 pcalibre1">Loops have good temporal and spatial locality with respect to instruction fetches. The smaller the loop body and the greater the number of loop iterations, the better the locality.</p></li>
</ul>
<p id="P7000497027000000000000000043C48" data-uri="chapter06.xhtml#P7000497027000000000000000043C48" class="pcalibre1 pcalibre calibre2">Later in this chapter, after we have learned about cache memories and how they work, we will show you how to quantify the idea of locality in terms of cache hits and misses. It will also become clear to you why programs with good locality typically run faster than programs with poor locality. Nonetheless, knowing how to glance at a source code and getting a high-level feel for the locality in the program is a useful and important skill for a programmer to master.</p>
<section id="P70004970270000000000000000054CD" data-uri="chapter06.xhtml#P70004970270000000000000000054CD" epub:type="practice" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="title5 pcalibre pcalibre1" id="P7000497027000000000000000043C49" data-uri="chapter06.xhtml#P7000497027000000000000000043C49" epub:type="title"><span class="pcalibre label pcalibre1">Practice Problem </span><span class="pcalibre label pcalibre1">6.7 </span>(solution page <a class="ulink pcalibre pcalibre4 pcalibre2 pcalibre3 pcalibre1" epub:type="pagebreak" href="fileP7000497027000000000000000005E52.xhtml#P7000497027000000000000000005E94">662</a>)</h1></header>
<ol class="practicelist pcalibre pcalibre1" id="P7000497027000000000000000043C4A" data-uri="chapter06.xhtml#P7000497027000000000000000043C4A">
<li class="general-problem pcalibre pcalibre1" id="P7000497027000000000000000043C4B" data-uri="chapter06.xhtml#P7000497027000000000000000043C4B">
<div class="edition pcalibre pcalibre1" id="P7000497027000000000000000043C4C" data-uri="chapter06.xhtml#P7000497027000000000000000043C4C"><p id="P7000497027000000000000000043C4D" data-uri="chapter06.xhtml#P7000497027000000000000000043C4D" class="pcalibre calibre3 pcalibre1">Permute the loops in the following function so that it scans the three-dimensional array <var class="calibre5 pcalibre pcalibre1">a</var> with a stride-1 reference pattern.</p>
<pre id="P7000497027000000000000000043C4E" data-uri="chapter06.xhtml#P7000497027000000000000000043C4E" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000043C4F" data-uri="chapter06.xhtml#P7000497027000000000000000043C4F" class="calibre10 pcalibre pcalibre1">
1	int sumarray3d(int a[N][N][N])
2	{
3		int i, j, k, sum = 0 ;
4	
5		for (i = 0; i &lt; N; i++) {
6			for (j = 0; j &lt; N; j++) {
7				for (k = 0; k &lt; N; k++) {
8					sum += a[k] [i] [j];
9				}
10			}
11		}
12		return sum;
13	}
</code></pre>
</div></li>
</ol>
</section>
<figure class="pcalibre5 figure pcalibre" id="P70004970270000000000000000054D5" data-uri="chapter06.xhtml#P70004970270000000000000000054D5">
<span class="pcalibre pagebreak pcalibre1" id="P70004970270000000000000000054D6" title="609" data-uri="chapter06.xhtml#P70004970270000000000000000054D6" epub:type="pagebreak"></span>
<p id="P7000497027000000000000000043C50" data-uri="chapter06.xhtml#P7000497027000000000000000043C50" class="pcalibre1 pcalibre calibre2">(a) An array of <code id="P7000497027000000000000000043C51" data-uri="chapter06.xhtml#P7000497027000000000000000043C51" class="pcalibre1 calibre8 pcalibre">structs</code></p>
<pre id="P7000497027000000000000000043C52" data-uri="chapter06.xhtml#P7000497027000000000000000043C52" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000043C53" data-uri="chapter06.xhtml#P7000497027000000000000000043C53" class="calibre10 pcalibre pcalibre1">
1	#define N 1000
2	
3	typedef struct {
4		int vel [3];
5		int acc [3];
6	} point;
7	
8	point p [N];
</code></pre>
<p id="P7000497027000000000000000043C54" data-uri="chapter06.xhtml#P7000497027000000000000000043C54" class="pcalibre1 pcalibre calibre2">(b) The <code id="P7000497027000000000000000043C55" data-uri="chapter06.xhtml#P7000497027000000000000000043C55" class="pcalibre1 calibre8 pcalibre">clearl</code> function</p>
<pre id="P7000497027000000000000000043C56" data-uri="chapter06.xhtml#P7000497027000000000000000043C56" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000043C57" data-uri="chapter06.xhtml#P7000497027000000000000000043C57" class="calibre10 pcalibre pcalibre1">
1	void clearl(point *p, int n)
2	{
3		int i, j;
4	
5		for (i = 0; i &lt; n; i++) {
6			for (j = 0; j &lt; 3; j++)
7				p[i] .vel[j] = 0;
8			for (j = 0; j &lt; 3; j++)
9				p[i] .acc[j] = 0;
10		}
11	}
</code></pre>
<p id="P7000497027000000000000000043C58" data-uri="chapter06.xhtml#P7000497027000000000000000043C58" class="pcalibre1 pcalibre calibre2">(c) The <code id="P7000497027000000000000000043C59" data-uri="chapter06.xhtml#P7000497027000000000000000043C59" class="pcalibre1 calibre8 pcalibre">clear2</code> function</p>
<pre id="P7000497027000000000000000043C5A" data-uri="chapter06.xhtml#P7000497027000000000000000043C5A" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000043C5B" data-uri="chapter06.xhtml#P7000497027000000000000000043C5B" class="calibre10 pcalibre pcalibre1">
1	void clear2(point *p, int n)
2	{
3		int i, j;
4	
5		for (i = 0; i &lt; n; i++) {
6			for (j = 0; j &lt; 3; j++) {
7				p[i] .vel[j] = 0;
8				p[i] .acc[j] = 0;
9			}
10		}
11	}
</code></pre>
<p id="P7000497027000000000000000043C5C" data-uri="chapter06.xhtml#P7000497027000000000000000043C5C" class="pcalibre1 pcalibre calibre2">(d) The <code id="P7000497027000000000000000043C5D" data-uri="chapter06.xhtml#P7000497027000000000000000043C5D" class="pcalibre1 calibre8 pcalibre">clear3</code> function</p>
<pre id="P7000497027000000000000000043C5E" data-uri="chapter06.xhtml#P7000497027000000000000000043C5E" class="calibre9 pcalibre pcalibre1"><code id="P7000497027000000000000000043C5F" data-uri="chapter06.xhtml#P7000497027000000000000000043C5F" class="calibre10 pcalibre pcalibre1">
1	void clear3(point *p, int n)
2	{
3		int i, j;
4	
5		for (j = 0; j &lt; 3; j++) {
6			for (i = 0; i &lt; n; i++)
7				p[i] .vel[j] = 0;
8			for (i = 0; i &lt; n; i++)
9				p[i] .acc[j] = 0;
10		}
11	}
</code></pre>
<figcaption id="P7000497027000000000000000043C60" data-uri="chapter06.xhtml#P7000497027000000000000000043C60" class="calibre11 pcalibre pcalibre1"><header class="pcalibre halftitlepage pcalibre1"><h1 class="title3 pcalibre pcalibre1" id="P7000497027000000000000000043C61" data-uri="chapter06.xhtml#P7000497027000000000000000043C61" epub:type="title"><span class="pcalibre1 label2 pcalibre">Figure </span><span class="pcalibre label pcalibre1">6.20 </span>Code examples for <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="#P70004970270000000000000000054E9"><span class="pcalibre1 label2 pcalibre">Practice Problem </span><span class="number pcalibre pcalibre1">6.8</span></a>.</h1></header></figcaption>
</figure>
<section id="P70004970270000000000000000054E9" data-uri="chapter06.xhtml#P70004970270000000000000000054E9" epub:type="practice" class="pcalibre halftitlepage pcalibre1"><header class="calibre1 pcalibre pcalibre1"><h1 class="title5 pcalibre pcalibre1" id="P7000497027000000000000000043C62" data-uri="chapter06.xhtml#P7000497027000000000000000043C62" epub:type="title"><span class="pcalibre label pcalibre1">Practice Problem </span><span class="pcalibre label pcalibre1">6.8 </span>(solution page <a class="ulink pcalibre pcalibre4 pcalibre2 pcalibre3 pcalibre1" epub:type="pagebreak" href="fileP7000497027000000000000000005E52.xhtml#P7000497027000000000000000005EAC">663</a>)</h1></header>
<ol class="practicelist pcalibre pcalibre1" id="P7000497027000000000000000043C63" data-uri="chapter06.xhtml#P7000497027000000000000000043C63">
<li class="general-problem pcalibre pcalibre1" id="P7000497027000000000000000043C64" data-uri="chapter06.xhtml#P7000497027000000000000000043C64">
<div class="edition pcalibre pcalibre1" id="P7000497027000000000000000043C65" data-uri="chapter06.xhtml#P7000497027000000000000000043C65"><p id="P7000497027000000000000000043C66" data-uri="chapter06.xhtml#P7000497027000000000000000043C66" class="pcalibre calibre3 pcalibre1">The three functions in <a class="pcalibre xref1 pcalibre4 pcalibre2 pcalibre3 pcalibre1" href="#P70004970270000000000000000054D5"><span class="pcalibre label pcalibre1">Figure </span><span class="pcalibre label pcalibre1">6.20</span></a> perform the same operation with varying degrees of spatial locality. Rank-order the functions with respect to the spatial locality enjoyed by each. Explain how you arrived at your ranking.</p></div></li>
</ol>
</section>
</section>
</section></body></html>
